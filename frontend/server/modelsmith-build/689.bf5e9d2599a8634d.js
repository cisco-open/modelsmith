"use strict";(self.webpackChunkmodelsmith=self.webpackChunkmodelsmith||[]).push([[689],{2689:(W,v,i)=>{i.r(v),i.d(v,{ModelCompressionModule:()=>H});var C=i(6814),Z=i(4245),A=i(3328),y=i(1668),S=i(1543),g=i(4190),T=i(7582),s=i(6223),m=i(8791),G=i(3620),Q=i(7398),R=i(3997),O=i(2181),F=i(39),j=i(9547),J=i(4378);const P="custommodel";var a,h=i(7820),d=i(127),t=i(5879),M=i(8471),I=i(999),K=i(8450),B=i(2296),U=i(8180),p=i(8279),E=i(5195),z=i(5683),b=i(8525),N=i(3680);function D(n,e){if(1&n&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&n){const o=e.$implicit;t.Q6J("value",o.key),t.xp6(1),t.hij(" ",o.value," ")}}function Y(n,e){if(1&n&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&n){const o=e.$implicit;t.Q6J("value",o.key),t.xp6(1),t.hij(" ",o.value," ")}}let u=((a=class{get parentFormGroup(){return this.controlContainer.control}get algorithmFormGroup(){return this.parentFormGroup.get(this.controlKey)}get algorithmFormControl(){return this.algorithmFormGroup?.get(this.ALGORITHM_CONTROL_NAME)}constructor(e,o){this.controlContainer=e,this.scriptFacadeService=o,this.controlKey="",this.pruningAlgorithmsList=p.dD,this.quantAlgorithmsList=p.A3,this.ALGORITHM_CONTROL_NAME="alg"}ngOnInit(){this.initForm(),this.listenToScriptStateChanges(),this.loadInitialData()}loadInitialData(){this.scriptFacadeService.scriptDetails$.pipe((0,U.q)(1),(0,O.h)(e=>!!e?.algKey)).subscribe(e=>{const o=e.type,c=o===h.Bd.PRUNING||o===h.Bd.QUANTIZATION?e.algKey:p.k2;this.algorithmFormControl?.setValue(c)}),this.scriptFacadeService.dispatch(F.aj.getCurrentOrLastActiveScriptDetails())}initForm(){this.parentFormGroup.addControl(this.controlKey,new s.cw({[this.ALGORITHM_CONTROL_NAME]:new s.NI(p.k2,s.kI.required)}))}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,m.t)(this)).subscribe(e=>{(0,d.A)(e)?this.algorithmFormGroup.disable():this.algorithmFormGroup.enable()})}trackByAlgorithmKey(e,o){return o.key}ngOnDestroy(){this.parentFormGroup.removeControl(this.controlKey)}}).\u0275fac=function(e){return new(e||a)(t.Y36(s.gN),t.Y36(M.O))},a.\u0275cmp=t.Xpm({type:a,selectors:[["ms-panel-algorithm"]],inputs:{controlKey:"controlKey"},features:[t._Bn([],[{provide:s.gN,useFactory:()=>(0,t.f3M)(s.gN,{skipSelf:!0})}])],decls:10,vars:6,consts:[[1,"ms-card","algorithm-card"],[1,"heading-sub-section-title"],[1,"form-field-container",3,"formGroupName"],["appearance","outline","subscriptSizing","dynamic"],[3,"formControlName"],["label","Pruning"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["label","Quantization"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"p",1),t._uU(2,"Algorithm"),t.qZA(),t.TgZ(3,"div",2)(4,"mat-form-field",3)(5,"mat-select",4)(6,"mat-optgroup",5),t.YNc(7,D,2,2,"mat-option",6),t.qZA(),t.TgZ(8,"mat-optgroup",7),t.YNc(9,Y,2,2,"mat-option",6),t.qZA()()()()()),2&e&&(t.xp6(3),t.Q6J("formGroupName",o.controlKey),t.xp6(2),t.Q6J("formControlName",o.ALGORITHM_CONTROL_NAME),t.xp6(2),t.Q6J("ngForOf",o.pruningAlgorithmsList)("ngForTrackBy",o.trackByAlgorithmKey),t.xp6(2),t.Q6J("ngForOf",o.quantAlgorithmsList)("ngForTrackBy",o.trackByAlgorithmKey))},dependencies:[C.sg,E.a8,z.KE,b.gD,N.ey,N.Nv,s.JJ,s.JL,s.u,s.x0]}),a);var l;u=(0,T.gn)([(0,m.c)()],u);const x=["panelParameters"];let f=((l=class{constructor(e,o,r,c){this.scriptFacadeService=e,this.fileService=o,this.snackbarService=r,this.router=c,this.form=new s.cw({}),this.AlgorithmType=h.Bd,this.isScriptActive=!1,this.isQuantAlgorithmSelected=!1}ngOnInit(){this.listenToAlgorithmPanelChanges(),this.listenToScriptStateChanges()}listenToAlgorithmPanelChanges(){this.form.valueChanges.pipe((0,G.b)(50),(0,Q.U)(()=>{const e=this.form.getRawValue();return e.algorithm&&e.algorithm.alg}),(0,R.x)(),(0,O.h)(e=>!!e),(0,m.t)(this)).subscribe(e=>{this.selectedAlgorithm=e})}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,m.t)(this)).subscribe(e=>{this.isScriptActive=(0,d.A)(e),(0,d.A)(e)?this.form.disable():this.form.enable()})}submit(){if((0,J.Qr)(this.selectedAlgorithm))return void this.snackbarService.showError("Select an algorithm before running a script.");const{algorithm:e,model:o}=this.form.getRawValue(),{model:r}=o;if(r===P&&!this.fileService.isFileLoaded)return void this.snackbarService.showError("Please select a predefined model or upload a custom file.");let c=r===P?function L(n){let e=n.replace(/[^a-zA-Z0-9_]/g,"_");return/^[0-9_]/.test(e)&&(e="file_"+e),/.py$/.test(e)||(e+=".py"),e}(this.fileService?.file.name):r;const X={...e,params:{...this.panelParametersComponent.parametersFormatted,arch:c}};this.scriptFacadeService.dispatch(F.aj.callScript({configs:X}))}goToChartPage(){this.router.navigate([j.Z.RUNNING.ROOT])}}).\u0275fac=function(e){return new(e||l)(t.Y36(M.O),t.Y36(I.I),t.Y36(K.QD),t.Y36(g.F0))},l.\u0275cmp=t.Xpm({type:l,selectors:[["ms-machine-unlearning"]],viewQuery:function(e,o){if(1&e&&t.Gf(x,5),2&e){let r;t.iGM(r=t.CRH())&&(o.panelParametersComponent=r.first)}},decls:17,vars:5,consts:[[1,"heading-primary-title","title"],[1,"project-settings-wrapper",3,"formGroup"],[1,"left"],[3,"formGroup"],["controlKey","algorithm"],["panelAlgorithm",""],["controlKey","model",3,"algorithm"],["controlKey","params",3,"algorithm"],["panelParameters",""],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","primary",1,"ml-2",3,"click"],[1,"right"]],template:function(e,o){1&e&&(t.TgZ(0,"p",0),t._uU(1,"Project Settings"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2),t.ynx(4,3),t._UZ(5,"ms-panel-algorithm",4,5)(7,"ms-panel-model",6)(8,"ms-panel-parameters",7,8),t.BQk(),t.TgZ(10,"div")(11,"button",9),t.NdJ("click",function(){return o.submit()}),t._uU(12," Run "),t.qZA(),t.TgZ(13,"button",10),t.NdJ("click",function(){return o.goToChartPage()}),t._uU(14,"View Chart"),t.qZA()()(),t.TgZ(15,"div",11),t._UZ(16,"ms-terminal"),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("algorithm",o.selectedAlgorithm),t.xp6(1),t.Q6J("algorithm",o.selectedAlgorithm),t.xp6(3),t.Q6J("disabled",o.isScriptActive||o.form.invalid))},dependencies:[B.lW,s.JL,s.sg,S.d,A.d,y.w,u],styles:[".title[_ngcontent-%COMP%]{margin-bottom:13px}.project-settings-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px;height:100%}.project-settings-wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:45%;gap:20px}.project-settings-wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:55%}"]}),l);f=(0,T.gn)([(0,m.c)()],f);const V=[{path:"",component:f}];let $=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(V),g.Bz]}),e})(),H=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.ez,Z.m,$,S.d,A.d,y.w]}),e})()}}]);