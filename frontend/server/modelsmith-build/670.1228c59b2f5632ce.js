(self.webpackChunkmodelsmith=self.webpackChunkmodelsmith||[]).push([[670],{4378:(xt,et,oe)=>{"use strict";function d(de){return de&&"object"==typeof de&&!Array.isArray(de)&&0===Object.keys(de).length&&de.constructor===Object}oe.d(et,{Q:()=>d})},8279:(xt,et,oe)=>{"use strict";oe.d(et,{A3:()=>de,Gr:()=>y,MZ:()=>M,dD:()=>d,k2:()=>v});var Z=oe(7820);const d=[{key:Z.pW.IPG,value:"GraSP pruning"},{key:Z.pW.IPM,value:"Magnitude-based init pruning"},{key:Z.pW.IPR,value:"Random init pruning"},{key:Z.pW.IMP,value:"Iterative Magnitude Pruning"},{key:Z.pW.OMP,value:"One-shot Magnitude Pruning"},{key:Z.pW.IPS,value:"Init Pruning Snip"},{key:Z.pW.IPSY,value:"Init Pruning Synflow"}],de=[{key:Z.y0.BPTQ,value:"Basic PTQ"},{key:Z.y0.BRECQ,value:"Brec-q"},{key:Z.y0.MINMAXPTQ,value:"Minmax-ptq"}],g=[...d,...de],v=Z.pW.IMP,y=m=>g.filter(C=>m.includes(C.key)).map(C=>C.value),M=m=>{const C=d.find(P=>P.value===m);if(C)return C.key;const k=de.find(P=>P.value===m);return k?k.key:null}},127:(xt,et,oe)=>{"use strict";oe.d(et,{A:()=>d});var Z=function(de){return de.RUNNING="running",de.NOT_RUNNING="not_running",de.STOPPING="stopping",de.ERROR="error",de}(Z||{});function d(de){return!!de&&(de===Z.RUNNING||de===Z.STOPPING)}},2848:(xt,et,oe)=>{"use strict";oe.d(et,{N:()=>de});var Z=oe(5879);const d=["*"];let de=(()=>{var g;class v{}return(g=v).\u0275fac=function(M){return new(M||g)},g.\u0275cmp=Z.Xpm({type:g,selectors:[["ms-background-gradient"]],ngContentSelectors:d,decls:2,vars:0,consts:[[1,"full-page-gradient"]],template:function(M,m){1&M&&(Z.F$t(),Z.TgZ(0,"div",0),Z.Hsn(1),Z.qZA())},styles:[".full-page-gradient[_ngcontent-%COMP%]{height:100vh;width:100vw;background:linear-gradient(to right,var(--header-left),var(--header-right))}"]}),v})()},9622:(xt,et,oe)=>{"use strict";oe.d(et,{C:()=>v});var Z=oe(5879),d=oe(6814),de=oe(5195);function g(y,M){if(1&y){const m=Z.EpF();Z.TgZ(0,"mat-card",2),Z.NdJ("click",function(){const P=Z.CHM(m).$implicit,T=Z.oxw();return Z.KtG(T.selectCard(P))}),Z.TgZ(1,"span",3),Z._uU(2),Z.qZA()()}if(2&y){const m=M.$implicit,C=Z.oxw();Z.ekj("selected",C.activeCard===m),Z.xp6(2),Z.Oqu(m)}}let v=(()=>{var y;class M{constructor(){this.options=[],this.selectedOption=new Z.vpe,this.activeCard=null}selectCard(C){this.activeCard=this.activeCard===C?null:C,this.selectedOption.emit(this.activeCard)}trackByOption(C,k){return k}}return(y=M).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Z.Xpm({type:y,selectors:[["ms-card-selector"]],inputs:{options:"options"},outputs:{selectedOption:"selectedOption"},decls:2,vars:2,consts:[[1,"cards-section"],["class","ms-card action-card",3,"selected","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ms-card","action-card",3,"click"],[1,"heading-sub-section-title"]],template:function(C,k){1&C&&(Z.TgZ(0,"div",0),Z.YNc(1,g,3,3,"mat-card",1),Z.qZA()),2&C&&(Z.xp6(1),Z.Q6J("ngForOf",k.options)("ngForTrackBy",k.trackByOption))},dependencies:[d.sg,de.a8],styles:[".cards-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"]}),M})()},9901:(xt,et,oe)=>{"use strict";oe.d(et,{u:()=>d});var Z=oe(5879);let d=(()=>{var de;class g{constructor(){this.title="",this.message=""}}return(de=g).\u0275fac=function(y){return new(y||de)},de.\u0275cmp=Z.Xpm({type:de,selectors:[["ms-empty-state"]],inputs:{title:"title",message:"message"},decls:6,vars:2,consts:[["src","assets/icons/empty-state.svg"],[1,"heading-section-title"],[1,"paragraph-regular-p2-large"]],template:function(y,M){1&y&&(Z.TgZ(0,"div"),Z._UZ(1,"img",0),Z.TgZ(2,"div",1),Z._uU(3),Z.qZA(),Z.TgZ(4,"div",2),Z._uU(5),Z.qZA()()),2&y&&(Z.xp6(3),Z.Oqu(M.title),Z.xp6(2),Z.Oqu(M.message))},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:100%;text-align:center}div[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}img[_ngcontent-%COMP%]{max-width:100%;height:auto}"]}),g})()},2704:(xt,et,oe)=>{"use strict";oe.d(et,{w:()=>Pi});var Z=oe(7582),d=oe(8791),de=oe(7816),g=oe(7246),v=oe(932),y=oe(6732),M=oe(4378),m=oe(127),C=oe(6210),k=oe(4323),P=oe(7271),T=oe.n(P),l=oe(8137);const _=W=>W&&W.enabled&&W.modifierKey,h=(W,$)=>W&&$[W+"Key"],u=(W,$)=>W&&!$[W+"Key"];function S(W,$,q){return void 0===W||("string"==typeof W?-1!==W.indexOf($):"function"==typeof W&&-1!==W({chart:q}).indexOf($))}function E(W,$){return"function"==typeof W&&(W=W({chart:$})),"string"==typeof W?{x:-1!==W.indexOf("x"),y:-1!==W.indexOf("y")}:{x:!1,y:!1}}function x(W,$,q){const{mode:ue="xy",scaleMode:me,overScaleMode:we}=W||{},De=function R({x:W,y:$},q){const ue=q.scales,me=Object.keys(ue);for(let we=0;we<me.length;we++){const De=ue[me[we]];if($>=De.top&&$<=De.bottom&&W>=De.left&&W<=De.right)return De}return null}($,q),Xe=E(ue,q),ot=E(me,q);if(we){const st=E(we,q);for(const Pt of["x","y"])st[Pt]&&(ot[Pt]=Xe[Pt],Xe[Pt]=!1)}if(De&&ot[De.axis])return[De];const it=[];return(0,l.F)(q.scales,function(st){Xe[st.axis]&&it.push(st)}),it}const L=new WeakMap;function V(W){let $=L.get(W);return $||($={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{}},L.set(W,$)),$}function X(W,$,q){const ue=W.max-W.min,me=ue*($-1),we=W.isHorizontal()?q.x:q.y,De=Math.max(0,Math.min(1,(W.getValueForPixel(we)-W.min)/ue||0));return{min:me*De,max:me*(1-De)}}function J(W,$,q,ue,me){let we=q[ue];if("original"===we){const De=W.originalScaleLimits[$.id][ue];we=(0,l.v)(De.options,De.scale)}return(0,l.v)(we,me)}function Se(W,{min:$,max:q},ue,me=!1){const we=V(W.chart),{id:De,axis:Xe,options:ot}=W,it=ue&&(ue[De]||ue[Xe])||{},{minRange:st=0}=it,Pt=J(we,W,it,"min",-1/0),wt=J(we,W,it,"max",1/0),Ct=me?Math.max(q-$,st):W.max-W.min,It=(Ct-q+$)/2;return q+=It,($-=It)<Pt?($=Pt,q=Math.min(Pt+Ct,wt)):q>wt&&(q=wt,$=Math.max(wt-Ct,Pt)),ot.min=$,ot.max=q,we.updatedScaleLimits[W.id]={min:$,max:q},W.parse($)!==W.min||W.parse(q)!==W.max}const N=W=>0===W||isNaN(W)?0:W<0?Math.min(Math.round(W),-1):Math.max(Math.round(W),1),Be={second:500,minute:3e4,hour:18e5,day:432e5,week:3024e5,month:1296e6,quarter:5184e6,year:157248e5};function Ue(W,$,q,ue=!1){const{min:me,max:we,options:De}=W,ot=Be[De.time&&De.time.round]||0,it=W.getValueForPixel(W.getPixelForValue(me+ot)-$),st=W.getValueForPixel(W.getPixelForValue(we+ot)-$),{min:Pt=-1/0,max:wt=1/0}=ue&&q&&q[W.axis]||{};return!!(isNaN(it)||isNaN(st)||it<Pt||st>wt)||Se(W,{min:it,max:st},q,ue)}function Re(W,$,q){return Ue(W,$,q,!0)}const Ne={category:function Q(W,$,q,ue){const me=X(W,$,q);return W.min===W.max&&$<1&&function G(W){const q=W.getLabels().length-1;W.min>0&&(W.min-=1),W.max<q&&(W.max+=1)}(W),Se(W,{min:W.min+N(me.min),max:W.max-N(me.max)},ue,!0)},default:function Me(W,$,q,ue){const me=X(W,$,q);return Se(W,{min:W.min+me.min,max:W.max-me.max},ue,!0)}},I={default:function Ce(W,$,q,ue){Se(W,function be(W,$,q){const ue=W.getValueForPixel($),me=W.getValueForPixel(q);return{min:Math.min(ue,me),max:Math.max(ue,me)}}(W,$,q),ue,!0)}},le={category:function Ae(W,$,q){const me=W.getLabels().length-1;let{min:we,max:De}=W;const Xe=Math.max(De-we,1),ot=Math.round(function se(W){return W.isHorizontal()?W.width:W.height}(W)/Math.max(Xe,10)),it=Math.round(Math.abs($/ot));let st;return $<-ot?(De=Math.min(De+it,me),we=1===Xe?De:De-Xe,st=De===me):$>ot&&(we=Math.max(0,we-it),De=1===Xe?we:we+Xe,st=0===we),Se(W,{min:we,max:De},q)||st},default:Ue,logarithmic:Re,timeseries:Re};function ge(W,$){(0,l.F)(W,(q,ue)=>{$[ue]||delete W[ue]})}function je(W,$){const{scales:q}=W,{originalScaleLimits:ue,updatedScaleLimits:me}=$;return(0,l.F)(q,function(we){(function he(W,$,q){const{id:ue,options:{min:me,max:we}}=W;if(!$[ue]||!q[ue])return!0;const De=q[ue];return De.min!==me||De.max!==we})(we,ue,me)&&(ue[we.id]={min:{scale:we.min,options:we.options.min},max:{scale:we.max,options:we.options.max}})}),ge(ue,q),ge(me,q),ue}function ze(W,$,q,ue){(0,l.Q)(Ne[W.type]||Ne.default,[W,$,q,ue])}function Ze(W,$,q,ue,me){(0,l.Q)(I[W.type]||I.default,[W,$,q,ue,me])}function Ve(W){const $=W.chartArea;return{x:($.left+$.right)/2,y:($.top+$.bottom)/2}}function nt(W,$,q="none"){const{x:ue=1,y:me=1,focalPoint:we=Ve(W)}="number"==typeof $?{x:$,y:$}:$,De=V(W),{options:{limits:Xe,zoom:ot}}=De;je(W,De);const it=1!==ue,st=1!==me,Pt=x(ot,we,W);(0,l.F)(Pt||W.scales,function(wt){wt.isHorizontal()&&it?ze(wt,ue,we,Xe):!wt.isHorizontal()&&st&&ze(wt,me,we,Xe)}),W.update(q),(0,l.Q)(ot.onZoom,[{chart:W}])}function Te(W,$,q,ue="none"){const me=V(W),{options:{limits:we,zoom:De}}=me,{mode:Xe="xy"}=De;je(W,me);const ot=S(Xe,"x",W),it=S(Xe,"y",W);(0,l.F)(W.scales,function(st){st.isHorizontal()&&ot?Ze(st,$.x,q.x,we):!st.isHorizontal()&&it&&Ze(st,$.y,q.y,we)}),W.update(ue),(0,l.Q)(De.onZoom,[{chart:W}])}function Wt(W,$,q,ue){const{panDelta:me}=ue,we=me[W.id]||0;(0,l.s)(we)===(0,l.s)($)&&($+=we),me[W.id]=(0,l.Q)(le[W.type]||le.default,[W,$,q])?0:$}function dt(W,$,q,ue="none"){const{x:me=0,y:we=0}="number"==typeof $?{x:$,y:$}:$,De=V(W),{options:{pan:Xe,limits:ot}}=De,{onPan:it}=Xe||{};je(W,De);const st=0!==me,Pt=0!==we;(0,l.F)(q||W.scales,function(wt){wt.isHorizontal()&&st?Wt(wt,me,ot,De):!wt.isHorizontal()&&Pt&&Wt(wt,we,ot,De)}),W.update(ue),(0,l.Q)(it,[{chart:W}])}function bt(W){const $=V(W);je(W,$);const q={};for(const ue of Object.keys(W.scales)){const{min:me,max:we}=$.originalScaleLimits[ue]||{min:{},max:{}};q[ue]={min:me.scale,max:we.scale}}return q}function ct(W,$){const{handlers:q}=V(W),ue=q[$];ue&&ue.target&&(ue.target.removeEventListener($,ue),delete q[$])}function Zt(W,$,q,ue){const{handlers:me,options:we}=V(W),De=me[q];De&&De.target===$||(ct(W,q),me[q]=Xe=>ue(W,Xe,we),me[q].target=$,$.addEventListener(q,me[q]))}function Qt(W,$){const q=V(W);q.dragStart&&(q.dragging=!0,q.dragEnd=$,W.update("none"))}function Ft(W,$){const q=V(W);!q.dragStart||"Escape"!==$.key||(ct(W,"keydown"),q.dragging=!1,q.dragStart=q.dragEnd=null,W.update("none"))}function Jt(W,$,q){const{onZoomStart:ue,onZoomRejected:me}=q;if(ue){const we=(0,l.z)($,W);if(!1===(0,l.Q)(ue,[{chart:W,event:$,point:we}]))return(0,l.Q)(me,[{chart:W,event:$}]),!1}}function Kt(W,$){const q=V(W),{pan:ue,zoom:me={}}=q.options;if(0!==$.button||h(_(ue),$)||u(_(me.drag),$))return(0,l.Q)(me.onZoomRejected,[{chart:W,event:$}]);!1!==Jt(W,$,me)&&(q.dragStart=$,Zt(W,W.canvas,"mousemove",Qt),Zt(W,window.document,"keydown",Ft))}function zt(W,$,q,ue){const me=S($,"x",W),we=S($,"y",W);let{top:De,left:Xe,right:ot,bottom:it,width:st,height:Pt}=W.chartArea;const wt=(0,l.z)(q,W),Ct=(0,l.z)(ue,W);me&&(Xe=Math.min(wt.x,Ct.x),ot=Math.max(wt.x,Ct.x)),we&&(De=Math.min(wt.y,Ct.y),it=Math.max(wt.y,Ct.y));const It=ot-Xe,ai=it-De;return{left:Xe,top:De,right:ot,bottom:it,width:It,height:ai,zoomX:me&&It?1+(st-It)/st:1,zoomY:we&&ai?1+(Pt-ai)/Pt:1}}function pt(W,$){const q=V(W);if(!q.dragStart)return;ct(W,"mousemove");const{mode:ue,onZoomComplete:me,drag:{threshold:we=0}}=q.options.zoom,De=zt(W,ue,q.dragStart,$),Xe=S(ue,"x",W)?De.width:0,ot=S(ue,"y",W)?De.height:0,it=Math.sqrt(Xe*Xe+ot*ot);if(q.dragStart=q.dragEnd=null,it<=we)return q.dragging=!1,void W.update("none");Te(W,{x:De.left,y:De.top},{x:De.right,y:De.bottom},"zoom"),setTimeout(()=>q.dragging=!1,500),(0,l.Q)(me,[{chart:W}])}function as(W,$){const{handlers:{onZoomComplete:q},options:{zoom:ue}}=V(W);if(!function xi(W,$,q){if(!u(_(q.wheel),$))return!1!==Jt(W,$,q)&&($.cancelable&&$.preventDefault(),void 0!==$.deltaY)||void 0;(0,l.Q)(q.onZoomRejected,[{chart:W,event:$}])}(W,$,ue))return;const me=$.target.getBoundingClientRect(),we=1+($.deltaY>=0?-ue.wheel.speed:ue.wheel.speed);nt(W,{x:we,y:we,focalPoint:{x:$.clientX-me.left,y:$.clientY-me.top}}),q&&q()}function di(W,$){return function(q,ue){const{pan:me,zoom:we={}}=$.options;if(!me||!me.enabled)return!1;const De=ue&&ue.srcEvent;return!(De&&!$.panning&&"mouse"===ue.pointerType&&(u(_(me),De)||h(_(we.drag),De))&&((0,l.Q)(me.onPanRejected,[{chart:W,event:ue}]),1))}}function es(W,$,q){if($.scale){const{center:ue,pointers:me}=q,we=1/$.scale*q.scale,De=q.target.getBoundingClientRect(),Xe=function Ni(W,$){const q=Math.abs(W.clientX-$.clientX),ue=Math.abs(W.clientY-$.clientY),me=q/ue;let we,De;return me>.3&&me<1.7?we=De=!0:q>ue?we=!0:De=!0,{x:we,y:De}}(me[0],me[1]),ot=$.options.zoom.mode;nt(W,{x:Xe.x&&S(ot,"x",W)?we:1,y:Xe.y&&S(ot,"y",W)?we:1,focalPoint:{x:ue.x-De.left,y:ue.y-De.top}}),$.scale=q.scale}}function Wi(W,$,q){const ue=$.delta;ue&&($.panning=!0,dt(W,{x:q.deltaX-ue.x,y:q.deltaY-ue.y},$.panScales),$.delta={x:q.deltaX,y:q.deltaY})}const Oi=new WeakMap;function Vt(W,$,q){const ue=q.zoom.drag,{dragStart:me,dragEnd:we}=V(W);if(ue.drawTime!==$||!we)return;const{left:De,top:Xe,width:ot,height:it}=zt(W,q.zoom.mode,me,we),st=W.ctx;st.save(),st.beginPath(),st.fillStyle=ue.backgroundColor||"rgba(225,225,225,0.3)",st.fillRect(De,Xe,ot,it),ue.borderWidth>0&&(st.lineWidth=ue.borderWidth,st.strokeStyle=ue.borderColor||"rgba(225,225,225)",st.strokeRect(De,Xe,ot,it)),st.restore()}var Ot={id:"zoom",version:"2.0.1",defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(W,$,q){V(W).options=q,Object.prototype.hasOwnProperty.call(q.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(q.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(q.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),T()&&function gi(W,$){const q=V(W),ue=W.canvas,{pan:me,zoom:we}=$,De=new(T().Manager)(ue);we&&we.pinch.enabled&&(De.add(new(T().Pinch)),De.on("pinchstart",()=>function wi(W,$){$.options.zoom.pinch.enabled&&($.scale=1)}(0,q)),De.on("pinch",Xe=>es(W,q,Xe)),De.on("pinchend",Xe=>function Ai(W,$,q){$.scale&&(es(W,$,q),$.scale=null,(0,l.Q)($.options.zoom.onZoomComplete,[{chart:W}]))}(W,q,Xe))),me&&me.enabled&&(De.add(new(T().Pan)({threshold:me.threshold,enable:di(W,q)})),De.on("panstart",Xe=>function At(W,$,q){const{enabled:ue,onPanStart:me,onPanRejected:we}=$.options.pan;if(!ue)return;const De=q.target.getBoundingClientRect(),Xe={x:q.center.x-De.left,y:q.center.y-De.top};if(!1===(0,l.Q)(me,[{chart:W,event:q,point:Xe}]))return(0,l.Q)(we,[{chart:W,event:q}]);$.panScales=x($.options.pan,Xe,W),$.delta={x:0,y:0},clearTimeout($.panEndTimeout),Wi(W,$,q)}(W,q,Xe)),De.on("panmove",Xe=>Wi(W,q,Xe)),De.on("panend",()=>function Yt(W,$){$.delta=null,$.panning&&($.panEndTimeout=setTimeout(()=>$.panning=!1,500),(0,l.Q)($.options.pan.onPanComplete,[{chart:W}]))}(W,q))),Oi.set(W,De)}(W,q),W.pan=(me,we,De)=>dt(W,me,we,De),W.zoom=(me,we)=>nt(W,me,we),W.zoomRect=(me,we,De)=>Te(W,me,we,De),W.zoomScale=(me,we,De)=>function Oe(W,$,q,ue="none"){je(W,V(W)),Se(W.scales[$],q,void 0,!0),W.update(ue)}(W,me,we,De),W.resetZoom=me=>function Qe(W,$="default"){const q=V(W),ue=je(W,q);(0,l.F)(W.scales,function(me){const we=me.options;ue[me.id]?(we.min=ue[me.id].min.options,we.max=ue[me.id].max.options):(delete we.min,delete we.max)}),W.update($),(0,l.Q)(q.options.zoom.onZoomComplete,[{chart:W}])}(W,me),W.getZoomLevel=()=>function _t(W){const $=V(W);let q=1,ue=1;return(0,l.F)(W.scales,function(me){const we=function tt(W,$){const q=W.originalScaleLimits[$];if(!q)return;const{min:ue,max:me}=q;return(0,l.v)(me.options,me.scale)-(0,l.v)(ue.options,ue.scale)}($,me.id);if(we){const De=Math.round(we/(me.max-me.min)*100)/100;q=Math.min(q,De),ue=Math.max(ue,De)}}),q<1?q:ue}(W),W.getInitialScaleBounds=()=>bt(W),W.isZoomedOrPanned=()=>function Ut(W){const $=bt(W);for(const q of Object.keys(W.scales)){const{min:ue,max:me}=$[q];if(void 0!==ue&&W.scales[q].min!==ue||void 0!==me&&W.scales[q].max!==me)return!0}return!1}(W)},beforeEvent(W){const $=V(W);if($.panning||$.dragging)return!1},beforeUpdate:function(W,$,q){V(W).options=q,function hi(W,$){const q=W.canvas,{wheel:ue,drag:me,onZoomComplete:we}=$.zoom;ue.enabled?(Zt(W,q,"wheel",as),function pi(W,$,q,ue){q&&(V(W).handlers[$]=function O(W,$){let q;return function(){return clearTimeout(q),q=setTimeout(W,$),$}}(()=>(0,l.Q)(q,[{chart:W}]),ue))}(W,"onZoomComplete",we,250)):ct(W,"wheel"),me.enabled?(Zt(W,q,"mousedown",Kt),Zt(W,q.ownerDocument,"mouseup",pt)):(ct(W,"mousedown"),ct(W,"mousemove"),ct(W,"mouseup"),ct(W,"keydown"))}(W,q)},beforeDatasetsDraw(W,$,q){Vt(W,"beforeDatasetsDraw",q)},afterDatasetsDraw(W,$,q){Vt(W,"afterDatasetsDraw",q)},beforeDraw(W,$,q){Vt(W,"beforeDraw",q)},afterDraw(W,$,q){Vt(W,"afterDraw",q)},stop:function(W){(function Ji(W){ct(W,"mousedown"),ct(W,"mousemove"),ct(W,"mouseup"),ct(W,"wheel"),ct(W,"click"),ct(W,"keydown")})(W),T()&&function Ei(W){const $=Oi.get(W);$&&($.remove("pinchstart"),$.remove("pinch"),$.remove("pinchend"),$.remove("panstart"),$.remove("pan"),$.remove("panend"),$.destroy(),Oi.delete(W))}(W),function ie(W){L.delete(W)}(W)},panFunctions:le,zoomFunctions:Ne,zoomRectFunctions:I},ei=oe(3973);const zi={[ei.g.GREEN]:{datasetColors:[{borderColor:"#40dab7",backgroundColor:"rgba(64, 218, 183, 0.2)"},{borderColor:"#3ac4a5",backgroundColor:"rgba(58, 196, 165, 0.2)"},{borderColor:"#33ae92",backgroundColor:"rgba(51, 174, 146, 0.2)"},{borderColor:"#2d9980",backgroundColor:"rgba(45, 153, 128, 0.2)"},{borderColor:"#26836e",backgroundColor:"rgba(38, 131, 110, 0.2)"},{borderColor:"#206d5c",backgroundColor:"rgba(32, 109, 92, 0.2)"},{borderColor:"#1a5749",backgroundColor:"rgba(26, 87, 73, 0.2)"},{borderColor:"#134137",backgroundColor:"rgba(19, 65, 55, 0.2)"},{borderColor:"#0d2c25",backgroundColor:"rgba(13, 44, 37, 0.2)"},{borderColor:"#061612",backgroundColor:"rgba(6, 22, 18, 0.2)"}]},[ei.g.BLUE]:{datasetColors:[{borderColor:"#29aadc",backgroundColor:"rgba(41, 170, 220, 0.2)"},{borderColor:"#2599c6",backgroundColor:"rgba(37, 153, 198, 0.2)"},{borderColor:"#2188b0",backgroundColor:"rgba(33, 136, 176, 0.2)"},{borderColor:"#1d779a",backgroundColor:"rgba(29, 119, 154, 0.2)"},{borderColor:"#196684",backgroundColor:"rgba(25, 102, 132, 0.2)"},{borderColor:"#15556e",backgroundColor:"rgba(21, 85, 110, 0.2)"},{borderColor:"#104458",backgroundColor:"rgba(16, 68, 88, 0.2)"},{borderColor:"#0c3342",backgroundColor:"rgba(12, 51, 66, 0.2)"},{borderColor:"#08222c",backgroundColor:"rgba(8, 34, 44, 0.2)"},{borderColor:"#041116",backgroundColor:"rgba(4, 17, 22, 0.2)"}]},[ei.g.RED]:{datasetColors:[{borderColor:"#b02863",backgroundColor:"rgba(176, 40, 99, 0.2)"},{borderColor:"#9e2459",backgroundColor:"rgba(158, 36, 89, 0.2)"},{borderColor:"#8d204f",backgroundColor:"rgba(141, 32, 79, 0.2)"},{borderColor:"#7b1c45",backgroundColor:"rgba(123, 28, 69, 0.2)"},{borderColor:"#6a183b",backgroundColor:"rgba(106, 24, 59, 0.2)"},{borderColor:"#581432",backgroundColor:"rgba(88, 20, 50, 0.2)"},{borderColor:"#461028",backgroundColor:"rgba(70, 16, 40, 0.2)"},{borderColor:"#350c1e",backgroundColor:"rgba(53, 12, 30, 0.2)"},{borderColor:"#230814",backgroundColor:"rgba(35, 8, 20, 0.2)"},{borderColor:"#12040a",backgroundColor:"rgba(18, 4, 10, 0.2)"}]},[ei.g.YELLOW]:{datasetColors:[{borderColor:"#f1c40f",backgroundColor:"rgba(241, 196, 15, 0.2)"},{borderColor:"#d9b00e",backgroundColor:"rgba(217, 176, 14, 0.2)"},{borderColor:"#c19d0c",backgroundColor:"rgba(193, 157, 12, 0.2)"},{borderColor:"#a9890b",backgroundColor:"rgba(169, 137, 11, 0.2)"},{borderColor:"#917609",backgroundColor:"rgba(145, 118, 9, 0.2)"},{borderColor:"#796208",backgroundColor:"rgba(121, 98, 8, 0.2)"},{borderColor:"#604e06",backgroundColor:"rgba(96, 78, 6, 0.2)"},{borderColor:"#483b04",backgroundColor:"rgba(72, 59, 4, 0.2)"},{borderColor:"#302703",backgroundColor:"rgba(48, 39, 3, 0.2)"},{borderColor:"#181401",backgroundColor:"rgba(24, 20, 1, 0.2)"}]}};class Ht{static registerZoomPlugin(){de.kL.register(Ot)}static createXAxisLabels($,q,ue){return Array.from({length:$*q},(me,we)=>we%q==0?`${ue?.xAxisLabelPrefix} ${we/q}`:"")}static createSinglePhaseAxisLabels($,q){const ue=q.xAxisInitialLabelValue??1;return Array.from({length:$},(me,we)=>`${q?.xAxisLabelPrefix} ${we+ue}`)}static createSinglePhaseSkipOneAxisLabels($,q){return Array.from({length:$},(ue,me)=>0===me?"":`${q?.xAxisLabelPrefix} ${me-1}`)}static configureChartOptions($){return{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},scales:{y:{display:!0,min:$.yAxisMinimumValue,max:$.yAxisMaximumValue,ticks:{display:$.isYAxisVisible,stepSize:$.yAxisTickInterval}},x:{display:$.isXAxisVisible,type:"category",ticks:{autoSkip:!1},grid:{drawOnChartArea:!0,color:q=>q.tick&&""!==q.tick.label?"rgba(225, 228, 232, 1)":"transparent",lineWidth:1,tickLength:10},border:{display:!0,width:1,color:"rgba(225, 228, 232, 1)",dash:[],dashOffset:0}}},plugins:{tooltip:{mode:"index",intersect:!1},legend:{display:$.isDatasetLabelVisible},zoom:{pan:{mode:"xy"},limits:{y:{min:$?.zoomRangeLimits?.min||0,max:$?.zoomRangeLimits?.max||void 0},x:{min:0}}}}}}static prepareSinglePhaseChartDataStructure($,q){return{datasets:[],labels:this.createSinglePhaseAxisLabels($,q)}}static prepareSinglePhaseSkipOneChartDataStructure($,q){return{datasets:[],labels:this.createSinglePhaseSkipOneAxisLabels($,q)}}static prepareChartDataStructure($=k.oj,q=k.ZW,ue){return{datasets:[],labels:this.createXAxisLabels($,q,ue)}}static initializeDatasetTemplate($,q){const ue=zi[q?.datasetColorSettingsKey||k.sl],me=ue.datasetColors?.[$%ue.datasetColors.length]||{borderColor:"black",backgroundColor:"white"};return{label:`${q?.datasetLabelPrefix||""} ${$}`,data:[],borderColor:me.borderColor,backgroundColor:me.backgroundColor,fill:"origin",pointRadius:0,pointHoverRadius:0,pointBackgroundColor:me.borderColor,pointHoverBackgroundColor:me.borderColor,pointHoverBorderColor:me.borderColor,stepped:q.useSteppedLines||!1}}}var oi,kt=oe(5879),ts=oe(5214),ls=oe(8471),Ui=oe(9643);const cs=["chartContainer"];let Pi=((oi=class{constructor($,q,ue){this.websocketService=$,this.scriptFacadeService=q,this.chartToolsGlobalSignalsService=ue,this.data=[],this.latestValuesToUpdate=[],this.updateInterval=500,this.lineChartType="line",this.isScriptActive=!1,this.maxY=0}ngOnInit(){this.registerPlugins(),this.listenToScriptStateChanges(),this.listenToChartWebsocketEvents(),this.listenToToolsSignals()}registerPlugins(){Ht.registerZoomPlugin()}ngOnChanges($){$.settings&&$.settings.currentValue&&this.initializeChartSettings(),$.data&&$.data.currentValue&&this.prependNewChartData($.data.currentValue)}listenToToolsSignals(){this.chartToolsGlobalSignalsService.toggleTooltips$.pipe((0,v.g)(100),(0,d.t)(this)).subscribe($=>{(0,M.Q)(this.lineChartOptions)||(de.kL.defaults.plugins.tooltip.enabled=$,this.chart&&this.chart.update())}),this.chartToolsGlobalSignalsService.toggleZoom$.pipe((0,v.g)(100),(0,d.t)(this)).subscribe($=>{(0,M.Q)(this.lineChartOptions)||(de.kL.defaults.plugins.zoom.pan.enabled=$,de.kL.defaults.plugins.zoom.zoom.wheel.enabled=$,this.updateCursor($),!$&&this.chart&&this.chart.chart?.resetZoom(),this.chart&&this.chart?.render())})}updateCursor($){this.chartContainer.nativeElement.classList[$?"add":"remove"]("zoom-cursor")}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,d.t)(this)).subscribe($=>{this.isScriptActive=(0,m.A)($),this.isScriptActive?this.startAutoUpdate():this.stopAutoUpdate(),this.updateChartSettingsBasedOnScriptState()})}updateChartSettingsBasedOnScriptState(){let $=!1;this.lineChartData&&this.lineChartData.datasets&&(this.lineChartData.datasets.forEach(q=>{q.pointHoverRadius=this.isScriptActive?0:5}),$=!0),$&&this.chart?.update()}initializeChartSettings(){switch(this.lineChartOptions=Ht.configureChartOptions(this.settings),this.updateChartSettingsBasedOnScriptState(),this.settings?.chartDataStructure){case k.nR.SINGLE_PHASE_X_AXIS:this.lineChartData=Ht.prepareSinglePhaseChartDataStructure(this.settings.xAxisDataPointsCount,this.settings);break;case k.nR.SINGLE_PHASE_X_AXIS_SKIP_ONE:this.lineChartData=Ht.prepareSinglePhaseSkipOneChartDataStructure(this.settings.xAxisDataPointsCount,this.settings);break;case k.nR.MUlTI_PHASE_X_AXIS:this.lineChartData=Ht.prepareChartDataStructure(this.settings.xAxisRepetitionCount,this.settings.xAxisDataPointsCount,this.settings)}this.chart?.update()}listenToChartWebsocketEvents(){this.websocketService.chartsMessages$.pipe((0,d.t)(this)).subscribe($=>{switch($.topic){case y.D.UPDATE_LATEST_VALUE:{const{data:De}=$,{accuracy:Xe,loss:ot,sparsity:it,datasetIndex:st}=De;void 0!==Xe&&this.realtimeUpdateMetric===C.L.ACCURACY?this.addLatestValueToChart(st,Xe):void 0!==ot&&this.realtimeUpdateMetric===C.L.LOSS?this.addLatestValueToChart(st,ot):void 0!==it&&this.realtimeUpdateMetric===C.L.SPARSITY&&this.addLatestValueToChart(0,it);break}case y.D.UPDATE_TESTING:const{data:q}=$,{accuracy:ue,loss:me,datasetIndex:we}=q;void 0!==ue&&this.realtimeUpdateMetric===C.L.TESTING_ACCURACY?this.addLatestValueToChart(we,ue):void 0!==me&&this.realtimeUpdateMetric===C.L.TESTING_LOSS&&this.addLatestValueToChart(we,me)}})}prependNewChartData($){if($.forEach(q=>{const ue=q.datasetIndex;this.ensureDatasetLength(ue);const me=this.lineChartData.datasets[ue];me.data=[...q.values,...me.data]}),this.settings.isYAxisDynamic){const q=$.flatMap(ue=>ue.values);this.updateDynamicYAxis(q)}this.chart?.update()}startAutoUpdate(){this.updateInterval<=0||(this.updateIntervalId=setInterval(()=>this.refreshChartData(),this.updateInterval))}refreshChartData(){try{if(!this.latestValuesToUpdate.length)return;this.latestValuesToUpdate.forEach($=>{this.ensureDatasetLength($.datasetIndex),this.lineChartData.datasets[$.datasetIndex].data.push($.value)}),this.settings.isYAxisDynamic&&this.updateDynamicYAxis(this.latestValuesToUpdate.map($=>$.value)),this.chart?.update(),this.latestValuesToUpdate.splice(0,this.latestValuesToUpdate.length)}catch($){console.error("Error updating chart:",$)}}updateDynamicYAxis($){if(0===$.length)return;const q=$.reduce((ue,me)=>Math.max(ue,me));q>this.maxY&&(this.maxY=Math.ceil((q+(this.settings?.dynamicYAxisGrowthOffset||k.NK))/(this.settings?.dynamicYAxisGrowthRoundFactor||k.CE))*(this.settings?.dynamicYAxisGrowthRoundFactor||k.CE),this.updateAxisMaxLimits(this.maxY),this.chart?.render())}updateAxisMaxLimits($){this.lineChartOptions&&this.lineChartOptions.scales&&this.lineChartOptions.scales.y&&(this.lineChartOptions.scales.y.max=$)}ensureDatasetLength($){for(;$>=this.lineChartData.datasets.length;)this.lineChartData.datasets.push(Ht.initializeDatasetTemplate(this.lineChartData.datasets.length,this.settings))}addLatestValueToChart($,q){null!=q&&this.latestValuesToUpdate.push({datasetIndex:$,value:q})}stopAutoUpdate(){this.updateIntervalId&&clearInterval(this.updateIntervalId)}resetTools(){this.chartToolsGlobalSignalsService.toggleTooltips=!1,this.chartToolsGlobalSignalsService.toggleZoom=!1}ngOnDestroy(){this.resetTools(),this.stopAutoUpdate()}}).\u0275fac=function($){return new($||oi)(kt.Y36(ts.i),kt.Y36(ls.O),kt.Y36(Ui.d))},oi.\u0275cmp=kt.Xpm({type:oi,selectors:[["ms-line-chart"]],viewQuery:function($,q){if(1&$&&(kt.Gf(g.jh,5),kt.Gf(cs,5)),2&$){let ue;kt.iGM(ue=kt.CRH())&&(q.chart=ue.first),kt.iGM(ue=kt.CRH())&&(q.chartContainer=ue.first)}},inputs:{data:"data",realtimeUpdateMetric:"realtimeUpdateMetric",settings:"settings",updateInterval:"updateInterval"},features:[kt.TTD],decls:4,vars:3,consts:[["chartContainer",""],["baseChart","","id","chart",3,"data","options","type"],["chart",""]],template:function($,q){1&$&&(kt.TgZ(0,"div",null,0),kt._UZ(2,"canvas",1,2),kt.qZA()),2&$&&(kt.xp6(2),kt.Q6J("data",q.lineChartData)("options",q.lineChartOptions)("type",q.lineChartType))},dependencies:[g.jh],styles:["#chart[_ngcontent-%COMP%]{display:block;height:250px;width:100%!important}.zoom-cursor[_ngcontent-%COMP%]{cursor:crosshair}"],changeDetection:0}),oi);Pi=(0,Z.gn)([(0,d.c)()],Pi)},9643:(xt,et,oe)=>{"use strict";oe.d(et,{d:()=>de});var Z=oe(5619),d=oe(5879);let de=(()=>{var g;class v{get toggleZoom$(){return this._toggleZoomSubject.asObservable()}set toggleZoom(M){this._toggleZoomSubject.next(M)}get toggleTooltips$(){return this._toggleTooltipsSubject.asObservable()}set toggleTooltips(M){this._toggleTooltipsSubject.next(M)}constructor(){this._toggleTooltipsSubject=new Z.X(!1),this._toggleZoomSubject=new Z.X(!1)}}return(g=v).\u0275fac=function(M){return new(M||g)},g.\u0275prov=d.Yz7({token:g,factory:g.\u0275fac}),v})()},9534:(xt,et,oe)=>{"use strict";oe.d(et,{w:()=>Be});var Se,Z=oe(7582),d=oe(8791),de=oe(7921),g=oe(3620),v=oe(3997),y=oe(9397),M=oe(4664),m=oe(7398),C=oe(836),k=oe(8180),P=oe(3946),T=oe(9547),l=oe(8279),_=oe(127),h=oe(5879),u=oe(3221),S=oe(6223),E=oe(8471),O=oe(6814),R=oe(617),x=oe(5195),L=oe(2032),V=oe(5683),ie=oe(8525),X=oe(3680),J=oe(5986),be=oe(2596);function Me(Ue,Re){if(1&Ue&&(h.TgZ(0,"div",10)(1,"mat-label"),h._uU(2),h.qZA(),h.TgZ(3,"mat-form-field",11),h._UZ(4,"input",12)(5,"mat-icon",13),h.qZA()()),2&Ue){const Ne=h.oxw(),I=Ne.$implicit,le=Ne.index;h.xp6(2),h.Oqu(I.label),h.xp6(2),h.Q6J("formControlName",le)("placeholder",I.placeholder)("type",I.inputType),h.xp6(1),h.s9C("matTooltip",I.help)}}function Ce(Ue,Re){if(1&Ue&&(h.TgZ(0,"mat-option",16),h._uU(1),h.qZA()),2&Ue){const Ne=Re.$implicit;h.Q6J("value",Ne.value),h.xp6(1),h.hij(" ",Ne.viewValue," ")}}function N(Ue,Re){if(1&Ue&&(h.TgZ(0,"div",10)(1,"mat-label"),h._uU(2),h.qZA(),h.TgZ(3,"mat-form-field",11)(4,"mat-select",14),h.YNc(5,Ce,2,2,"mat-option",15),h.qZA(),h._UZ(6,"mat-icon",13),h.qZA()()),2&Ue){const Ne=h.oxw(),I=Ne.$implicit,le=Ne.index;h.xp6(2),h.Oqu(I.label),h.xp6(2),h.Q6J("formControlName",le),h.xp6(1),h.Q6J("ngForOf",I.options),h.xp6(1),h.s9C("matTooltip",I.help)}}function G(Ue,Re){if(1&Ue&&(h.TgZ(0,"div",17)(1,"mat-checkbox",14),h._uU(2),h.qZA(),h.TgZ(3,"div",18),h._UZ(4,"mat-icon",19),h.qZA()()),2&Ue){const Ne=h.oxw(),I=Ne.index,le=Ne.$implicit;h.xp6(1),h.Q6J("formControlName",I),h.xp6(1),h.Oqu(le.label),h.xp6(2),h.s9C("matTooltip",le.help)}}function Q(Ue,Re){if(1&Ue&&(h.ynx(0),h.YNc(1,Me,6,5,"div",8),h.YNc(2,N,7,4,"div",8),h.YNc(3,G,5,3,"div",9),h.BQk()),2&Ue){const Ne=Re.$implicit;h.xp6(1),h.Q6J("ngIf","text"===Ne.inputType||"number"===Ne.inputType),h.xp6(1),h.Q6J("ngIf","select"===Ne.inputType),h.xp6(1),h.Q6J("ngIf","checkbox"===Ne.inputType)}}function se(Ue,Re){if(1&Ue&&(h.TgZ(0,"div",4)(1,"form",5)(2,"div",6),h.YNc(3,Q,4,3,"ng-container",7),h.qZA()()()),2&Ue){const Ne=h.oxw();h.xp6(1),h.Q6J("formGroup",Ne.form),h.xp6(2),h.Q6J("ngForOf",Ne.parameters)}}function Ae(Ue,Re){1&Ue&&(h.TgZ(0,"p",20),h._uU(1,"No parameters configured."),h.qZA())}let Be=((Se=class{get parametersArray(){return this.form.get("parametersArray")}constructor(Re,Ne,I,le){this.parametersFacadeService=Re,this.controlContainer=Ne,this.fb=I,this.scriptFacadeService=le,this.RoutesList=T.Z,this.isScriptActive=!1,this.alg=l.k2,this.parameters=[]}ngOnInit(){this.form=this.fb.group({parametersArray:this.fb.array([])}),this.controlContainer?.control?.parent?.setControl(this.controlContainer.name,this.form),this.listenToScriptStateChanges(),this.listenToAlgorithmChanges()}listenToAlgorithmChanges(){const Ne=this.form.parent.get("algorithm.alg")?.value||l.k2;this.form.parent.get("algorithm.alg")?.valueChanges.pipe((0,de.O)(Ne),(0,g.b)(50),(0,v.x)(),(0,y.b)(I=>{this.alg=I,this.parametersFacadeService.dispatch(P.j.loadParameters({arg:I}))}),(0,M.w)(()=>this.parametersFacadeService.parameters$.pipe((0,m.U)(I=>I[this.alg]?.data||[]),(0,C.T)(1),(0,k.q)(1))),(0,d.t)(this)).subscribe(I=>{this.parameters=I,this.buildFormArray(this.parameters)})}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,d.t)(this)).subscribe(Re=>{this.isScriptActive=(0,_.A)(Re)})}buildFormArray(Re){this.parametersArray.clear(),Re.forEach(Ne=>{this.parametersArray.push(this.fb.control(Ne.defaultValue))}),this.isScriptActive?this.form.disable():this.form.enable()}get parametersFormatted(){const Re={},Ne=this.parametersArray.getRawValue();return this.parameters.forEach((I,le)=>{Re[I.argName]=Ne[le]}),Re}}).\u0275fac=function(Re){return new(Re||Se)(h.Y36(u.E),h.Y36(S.gN),h.Y36(S.qu),h.Y36(E.O))},Se.\u0275cmp=h.Xpm({type:Se,selectors:[["ms-panel-parameters"]],decls:6,vars:2,consts:[[1,"ms-card","parameters-card"],[1,"heading-sub-section-title"],["class","parameters-wrapper",4,"ngIf","ngIfElse"],["noParametersTemplate",""],[1,"parameters-wrapper"],[3,"formGroup"],["formArrayName","parametersArray"],[4,"ngFor","ngForOf"],["class","form-field-container",4,"ngIf"],["class","form-field-container inline-container mb-[22px]",4,"ngIf"],[1,"form-field-container"],["appearance","outline"],["matInput","",3,"formControlName","placeholder","type"],["fontSet","ms","fontIcon","icon-Info","matSuffix","",3,"matTooltip"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-field-container","inline-container","mb-[22px]"],[1,"ml-2"],["fontSet","ms","fontIcon","icon-Info",3,"matTooltip"],[1,"no-parameters-message"]],template:function(Re,Ne){if(1&Re&&(h.TgZ(0,"mat-card",0)(1,"p",1),h._uU(2,"Parameters"),h.qZA(),h.YNc(3,se,4,2,"div",2),h.YNc(4,Ae,2,0,"ng-template",null,3,h.W1O),h.qZA()),2&Re){const I=h.MAs(5);h.xp6(3),h.Q6J("ngIf",Ne.parameters.length)("ngIfElse",I)}},dependencies:[O.sg,O.O5,R.Hw,x.a8,L.Nt,V.KE,V.hX,V.R9,ie.gD,X.ey,J.oG,be.gM,S._Y,S.Fj,S.JJ,S.JL,S.sg,S.u,S.CE],styles:[".parameters-card[_ngcontent-%COMP%]   .parameters-wrapper[_ngcontent-%COMP%]{max-height:400px;overflow:auto;padding-right:20px}.parameters-card[_ngcontent-%COMP%]   .parameters-wrapper[_ngcontent-%COMP%]   .parameter-divider[_ngcontent-%COMP%]{margin-bottom:20px}"]}),Se);Be=(0,Z.gn)([(0,d.c)()],Be)},4852:(xt,et,oe)=>{"use strict";oe.d(et,{N:()=>M});var Z=oe(5879),d=oe(4279),de=oe(8471),g=oe(2296),v=oe(617),y=oe(2596);let M=(()=>{var m;class C{constructor(P){this.scriptFacadeService=P,this.clearTerminal=new Z.vpe,this.scrollToTopTerminal=new Z.vpe,this.scrollToBottomTerminal=new Z.vpe}ctaStopScript(){this.scriptFacadeService.dispatch(d.a.stopScript())}}return(m=C).\u0275fac=function(P){return new(P||m)(Z.Y36(de.O))},m.\u0275cmp=Z.Xpm({type:m,selectors:[["ms-terminal-toolbar"]],outputs:{clearTerminal:"clearTerminal",scrollToTopTerminal:"scrollToTopTerminal",scrollToBottomTerminal:"scrollToBottomTerminal"},decls:10,vars:0,consts:[[1,"buttons-wrapper"],["mat-icon-button","","color","primary","matTooltip","Scroll to top",3,"click"],["fontSet","ms","fontIcon","icon-ArrowUp"],["mat-icon-button","","color","primary","matTooltip","Scroll to bottom",3,"click"],["fontSet","ms","fontIcon","icon-ArrowDown"],["mat-icon-button","","color","primary","matTooltip","Clear terminal",3,"click"],["mat-icon-button","","color","warn","matTooltip","Stop current process.",3,"click"],["fontSet","ms","fontIcon","icon-X",1,"mat-error"]],template:function(P,T){1&P&&(Z.TgZ(0,"div",0)(1,"button",1),Z.NdJ("click",function(){return T.scrollToTopTerminal.emit()}),Z._UZ(2,"mat-icon",2),Z.qZA(),Z.TgZ(3,"button",3),Z.NdJ("click",function(){return T.scrollToBottomTerminal.emit()}),Z._UZ(4,"mat-icon",4),Z.qZA(),Z.TgZ(5,"button",5),Z.NdJ("click",function(){return T.clearTerminal.emit()}),Z.TgZ(6,"mat-icon"),Z._uU(7," clear_all"),Z.qZA()(),Z.TgZ(8,"button",6),Z.NdJ("click",function(){return T.ctaStopScript()}),Z._UZ(9,"mat-icon",7),Z.qZA()())},dependencies:[g.RK,v.Hw,y.gM]}),C})()},6349:(xt,et,oe)=>{"use strict";oe.d(et,{d:()=>S});var h,Z=oe(7582),d=oe(8791),de=oe(836),g=oe(8180),v=oe(6885),M=oe(6708),C=oe(6690),k=oe(7006),P=oe(5879),T=oe(5214),l=oe(7177),_=oe(4852);const u=["terminal"];let S=((h=class{constructor(O,R){this.websocketService=O,this.terminalFacadeService=R,this.messagesBuffer=[],this.displayWebSocketMessages=!1,this.terminal=new v.Terminal({cursorBlink:!0,theme:{background:"#D0D4D9",foreground:"#000000",cursor:"#000000"}}),this.fitAddon=new M.FitAddon,this.websocketService.terminalMessages$.pipe((0,d.t)(this)).subscribe(x=>{const L=this.formatMessageByType(x);this.displayWebSocketMessages?L.split("\n").forEach(V=>{this.terminal.writeln(V)}):this.messagesBuffer.push(x)})}ngOnInit(){this.initializeTerminal(),this.loadLatestMessages()}ngAfterViewInit(){setTimeout(()=>{this.adjustHeightToParent()},0),this.fitTerminalToContainer()}loadLatestMessages(){this.terminalFacadeService.messages$.pipe((0,de.T)(1),(0,g.q)(1)).subscribe(O=>{O.forEach(R=>{this.formatMessageByType(R).split("\n").forEach(L=>{this.terminal.writeln(L)})}),this.messagesBuffer.forEach(R=>{this.formatMessageByType(R).split("\n").forEach(L=>{this.terminal.writeln(L)})}),this.messagesBuffer=[],this.displayWebSocketMessages=!0}),this.terminalFacadeService.dispatch(C.W.getLatestMessages())}formatMessageByType(O){let R="";switch(O.type){case k.j.ERROR:R="\x1b[38;5;124m";break;case k.j.SUCCESS:R="\x1b[38;5;22m";break;case k.j.WARNING:R="\x1b[38;5;136m";break;default:R="\x1b[38;5;0m"}return`${R}${O.data}\x1b[0m`}initializeTerminal(){this.terminal.loadAddon(this.fitAddon),this.terminal.open(this.terminalDiv.nativeElement),this.terminal.writeln("Welcome to Modelsmith terminal!\r\n"),this.setupResizeObserver()}setupResizeObserver(){this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver(()=>this.fitTerminalToContainer()),this.resizeObserver.observe(this.terminalDiv.nativeElement)}fitTerminalToContainer(){this.fitAddon.fit()}adjustHeightToParent(){const O=this.terminalDiv.nativeElement.parentElement.parentElement.parentElement;O&&O.parentElement&&(this.terminalDiv.nativeElement.style.height=O.parentElement.offsetHeight-170+"px")}clearTerminal(){this.terminalFacadeService.dispatch(C.W.postClearHistory()),this.terminal.clear()}scrollToTopTerminal(){this.terminal.scrollToTop()}scrollToBottomTerminal(){this.terminal.scrollToBottom()}ngOnDestroy(){this.resizeObserver?.disconnect()}}).\u0275fac=function(O){return new(O||h)(P.Y36(T.i),P.Y36(l.c))},h.\u0275cmp=P.Xpm({type:h,selectors:[["ms-terminal"]],viewQuery:function(O,R){if(1&O&&P.Gf(u,7),2&O){let x;P.iGM(x=P.CRH())&&(R.terminalDiv=x.first)}},decls:9,vars:0,consts:[[1,"ms-terminal-wrapper"],[1,"top-terminal-section"],[1,"heading-section-title","mb-1","flex","items-center"],[3,"clearTerminal","scrollToTopTerminal","scrollToBottomTerminal"],[1,"terminal"],[1,"terminal-wrapper"],["terminal",""]],template:function(O,R){1&O&&(P.TgZ(0,"div",0)(1,"div",1)(2,"div",2),P._uU(3,"Terminal"),P.qZA(),P.TgZ(4,"div")(5,"ms-terminal-toolbar",3),P.NdJ("clearTerminal",function(){return R.clearTerminal()})("scrollToTopTerminal",function(){return R.scrollToTopTerminal()})("scrollToBottomTerminal",function(){return R.scrollToBottomTerminal()}),P.qZA()()(),P.TgZ(6,"div",4),P._UZ(7,"div",5,6),P.qZA()())},dependencies:[_.N],styles:['/**\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n * https://github.com/chjj/term.js\n * @license MIT\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n * Originally forked from (with the author\'s permission):\n *   Fabrice Bellard\'s javascript vt100 for jslinux:\n *   http://bellard.org/jslinux/\n *   Copyright (c) 2011 Fabrice Bellard\n *   The original design remains. The terminal itself\n *   has been extended to include xterm CSI codes, among\n *   other features.\n */.xterm{cursor:text;position:relative;user-select:none;-ms-user-select:none;-webkit-user-select:none}.xterm.focus,.xterm:focus{outline:none}.xterm .xterm-helpers{position:absolute;top:0;z-index:5}.xterm .xterm-helper-textarea{padding:0;border:0;margin:0;position:absolute;opacity:0;left:-9999em;top:0;width:0;height:0;z-index:-5;white-space:nowrap;overflow:hidden;resize:none}.xterm .composition-view{background:#000;color:#fff;display:none;position:absolute;white-space:nowrap;z-index:1}.xterm .composition-view.active{display:block}.xterm .xterm-viewport{background-color:#000;overflow-y:scroll;cursor:default;position:absolute;inset:0}.xterm .xterm-screen{position:relative}.xterm .xterm-screen canvas{position:absolute;left:0;top:0}.xterm .xterm-scroll-area{visibility:hidden}.xterm-char-measure-element{display:inline-block;visibility:hidden;position:absolute;top:0;left:-9999em;line-height:normal}.xterm.enable-mouse-events{cursor:default}.xterm.xterm-cursor-pointer,.xterm .xterm-cursor-pointer{cursor:pointer}.xterm.column-select.focus{cursor:crosshair}.xterm .xterm-accessibility,.xterm .xterm-message{position:absolute;inset:0;z-index:10;color:transparent;pointer-events:none}.xterm .live-region{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}.xterm-dim{opacity:1!important}.xterm-underline-1{text-decoration:underline}.xterm-underline-2{-webkit-text-decoration:double underline;text-decoration:double underline}.xterm-underline-3{-webkit-text-decoration:wavy underline;text-decoration:wavy underline}.xterm-underline-4{-webkit-text-decoration:dotted underline;text-decoration:dotted underline}.xterm-underline-5{-webkit-text-decoration:dashed underline;text-decoration:dashed underline}.xterm-overline{text-decoration:overline}.xterm-overline.xterm-underline-1{text-decoration:overline underline}.xterm-overline.xterm-underline-2{-webkit-text-decoration:overline double underline;text-decoration:overline double underline}.xterm-overline.xterm-underline-3{-webkit-text-decoration:overline wavy underline;text-decoration:overline wavy underline}.xterm-overline.xterm-underline-4{-webkit-text-decoration:overline dotted underline;text-decoration:overline dotted underline}.xterm-overline.xterm-underline-5{-webkit-text-decoration:overline dashed underline;text-decoration:overline dashed underline}.xterm-strikethrough{text-decoration:line-through}.xterm-screen .xterm-decoration-container .xterm-decoration{z-index:6;position:absolute}.xterm-screen .xterm-decoration-container .xterm-decoration.xterm-decoration-top-layer{z-index:7}.xterm-decoration-overview-ruler{z-index:8;position:absolute;top:0;right:0;pointer-events:none}.xterm-decoration-top{z-index:2;position:relative}.ms-terminal-wrapper{overflow-x:auto}.ms-terminal-wrapper .terminal-wrapper{border:10px solid var(--terminal-color);background-color:var(--terminal-color);border-radius:10px}.ms-terminal-wrapper .xterm-viewport{overflow-y:auto!important}.ms-terminal-wrapper .top-terminal-section{display:flex;justify-content:space-between}\n'],encapsulation:2}),h);S=(0,Z.gn)([(0,d.c)()],S)},3706:(xt,et,oe)=>{"use strict";oe.d(et,{I:()=>de});var Z=oe(617),d=oe(5879);let de=(()=>{var g;class v{constructor(M,m,C){this.el=M,this.renderer=m,this.viewContainer=C,this.isHidden=!0}ngOnInit(){const M=this.el.nativeElement,m=this.createIcon();this.setupIconInContainer(M,m),m.location.nativeElement.addEventListener("click",()=>{this.toggleVisibility(M,m.instance)})}createIcon(){const M=this.viewContainer.createComponent(Z.Hw);return M.instance.fontIcon=this.isHidden?"visibility_off":"visibility",M}setupIconInContainer(M,m){const C=this.renderer.createElement("div");this.renderer.addClass(C,v.CLASS_ICON_SUFFIX),this.renderer.setStyle(m.location.nativeElement,"padding","0"),this.renderer.setAttribute(M,"type",this.isHidden?"password":"text"),this.renderer.appendChild(C,m.location.nativeElement),this.renderer.appendChild(M?.parentElement?.parentElement,C)}toggleVisibility(M,m){this.isHidden=!this.isHidden,this.renderer.setAttribute(M,"type",this.isHidden?"password":"text"),m.fontIcon=this.isHidden?"visibility_off":"visibility"}}return(g=v).CLASS_ICON_SUFFIX="mat-mdc-form-field-icon-suffix",g.\u0275fac=function(M){return new(M||g)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b))},g.\u0275dir=d.lG2({type:g,selectors:[["","msPasswordToggle",""]]}),v})()},6398:(xt,et,oe)=>{"use strict";oe.d(et,{X:()=>v});var Z=oe(5879),d=oe(6814),de=oe(5683);function g(y,M){if(1&y&&(Z.TgZ(0,"mat-error",1),Z._uU(1),Z.qZA()),2&y){const m=Z.oxw();Z.xp6(1),Z.hij(" ",m.text,"\n")}}let v=(()=>{var y;class M{constructor(){}}return(y=M).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Z.Xpm({type:y,selectors:[["ms-error-message"]],inputs:{text:"text"},decls:1,vars:1,consts:[["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(C,k){1&C&&Z.YNc(0,g,2,1,"mat-error",0),2&C&&Z.Q6J("ngIf",k.text)},dependencies:[d.O5,de.TO],styles:[".error-message[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in-translate .3s}@keyframes _ngcontent-%COMP%_fade-in-translate{0%{opacity:0;transform:translateY(-100%)}to{opacity:1;transform:translateY(0)}}"],changeDetection:0}),M})()},8970:(xt,et,oe)=>{"use strict";oe.d(et,{o:()=>T});var Z=oe(8645),d=oe(9773),de=oe(6398);var k=oe(5879),P=oe(6223);let T=(()=>{var l;class _{constructor(u,S){this.control=u,this.vcr=S,this._destroyed$=new Z.x}onBlur(){this.control.invalid&&!this.control.disabled&&this.insertErrorComponent()}ngOnInit(){this.control.touched&&this.control.invalid&&!this.control.disabled&&this.insertErrorComponent(),this.control?.statusChanges?.pipe((0,d.R)(this._destroyed$)).subscribe(()=>{this.control.touched&&this.control.invalid&&!this.control.disabled&&this.insertErrorComponent(),(this.control.valid||this.control.disabled)&&this.destroyErrorComponent()})}insertErrorComponent(){if(!this.componentRef){this.componentRef=this.vcr.createComponent(de.X);const u=this.componentRef.location.nativeElement;u.parentElement?.parentElement?.parentElement?.parentElement?.getElementsByClassName("mat-mdc-form-field-subscript-wrapper")[0]?.getElementsByClassName("mat-mdc-form-field-hint-wrapper")[0]?.getElementsByClassName("mat-mdc-form-field-hint-spacer")[0].appendChild(u)}this.componentRef.instance&&(this.componentRef.instance.text=function y(l){if(!l)return;const _=Object.keys(l)[0];switch(_){case"required":return"Field required";case"email":return"Email required";case"onlyDigits":return"Only numeric characters allowed";default:return _}}(this.control.errors))}destroyErrorComponent(){this.componentRef&&(this.vcr.remove(),this.componentRef.destroy(),this.componentRef=void 0)}ngOnDestroy(){this.destroyErrorComponent(),this._destroyed$.next(),this._destroyed$.complete()}}return(l=_).\u0275fac=function(u){return new(u||l)(k.Y36(P.a5),k.Y36(k.s_b))},l.\u0275dir=k.lG2({type:l,selectors:[["","msErrorDisplay",""]],hostBindings:function(u,S){1&u&&k.NdJ("blur",function(){return S.onBlur()})}}),_})()},3973:(xt,et,oe)=>{"use strict";oe.d(et,{g:()=>Z});var Z=function(d){return d.GREEN="green",d.RED="red",d.YELLOW="yellow",d.BLUE="blue",d}(Z||{})},6210:(xt,et,oe)=>{"use strict";oe.d(et,{L:()=>Z});var Z=function(d){return d.ACCURACY="accuracy",d.TESTING_ACCURACY="testingAccuracy",d.LOSS="loss",d.TESTING_LOSS="testingLoss",d.SPARSITY="sparsity",d}(Z||{})},4323:(xt,et,oe)=>{"use strict";oe.d(et,{CE:()=>de,NK:()=>d,O1:()=>y,ZW:()=>v,cS:()=>C,nR:()=>m,oj:()=>M,sl:()=>g});var Z=oe(3973);const d=5,de=5,g=Z.g.GREEN,v=390,y=99,M=2;var m=function(k){return k.SINGLE_PHASE_X_AXIS="singlePhase",k.SINGLE_PHASE_X_AXIS_SKIP_ONE="singlePhaseXAxisSkipOne",k.MUlTI_PHASE_X_AXIS="multiplePhase",k}(m||{});const C={isXAxisVisible:!0,isYAxisVisible:!0,xAxisLabelPrefix:"Epoch:",datasetLabelPrefix:"Pruning:",yAxisMinimumValue:0,yAxisTickInterval:20,datasetColorSettingsKey:Z.g.GREEN}},3670:(xt,et,oe)=>{"use strict";oe.d(et,{m:()=>Re});var Z=oe(6814),d=oe(6223),de=oe(1303),g=oe(7246),v=oe(3427),C=(oe(2848),oe(9622),oe(9901),oe(5879));oe(8450),oe(999),oe(2296),oe(617);oe(8110),oe(4966),oe(2704);var L=oe(9643),se=(oe(8976),oe(9534),oe(2618),oe(7136),oe(5482),oe(4852),oe(6349),oe(3896),oe(3706),oe(6398),oe(8970),oe(4376));let Re=(()=>{var Ne;class I{}return(Ne=I).\u0275fac=function(he){return new(he||Ne)},Ne.\u0275mod=C.oAB({type:Ne}),Ne.\u0275inj=C.cJS({providers:[{provide:v.UU,useValue:{placeholderLabel:"Search...",noEntriesFoundLabel:"No matching entries found..."}},L.d],imports:[Z.ez,de.Bz,se.q,d.u5,d.UX,v.Co,g.vQ,se.q,d.u5,d.UX,v.Co]}),I})()},7271:(xt,et,oe)=>{var Z;!function(d,de,g,v){"use strict";var u,y=["","webkit","Moz","MS","ms","o"],M=de.createElement("div"),m="function",C=Math.round,k=Math.abs,P=Date.now;function T(F,U,te){return setTimeout(R(F,te),U)}function l(F,U,te){return!!Array.isArray(F)&&(_(F,te[U],te),!0)}function _(F,U,te){var _e;if(F)if(F.forEach)F.forEach(U,te);else if(F.length!==v)for(_e=0;_e<F.length;)U.call(te,F[_e],_e,F),_e++;else for(_e in F)F.hasOwnProperty(_e)&&U.call(te,F[_e],_e,F)}function h(F,U,te){var _e="DEPRECATED METHOD: "+U+"\n"+te+" AT \n";return function(){var Pe=new Error("get-stack-trace"),Ke=Pe&&Pe.stack?Pe.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ht=d.console&&(d.console.warn||d.console.log);return ht&&ht.call(d.console,_e,Ke),F.apply(this,arguments)}}u="function"!=typeof Object.assign?function(U){if(U===v||null===U)throw new TypeError("Cannot convert undefined or null to object");for(var te=Object(U),_e=1;_e<arguments.length;_e++){var Pe=arguments[_e];if(Pe!==v&&null!==Pe)for(var Ke in Pe)Pe.hasOwnProperty(Ke)&&(te[Ke]=Pe[Ke])}return te}:Object.assign;var S=h(function(U,te,_e){for(var Pe=Object.keys(te),Ke=0;Ke<Pe.length;)(!_e||_e&&U[Pe[Ke]]===v)&&(U[Pe[Ke]]=te[Pe[Ke]]),Ke++;return U},"extend","Use `assign`."),E=h(function(U,te){return S(U,te,!0)},"merge","Use `assign`.");function O(F,U,te){var Pe,_e=U.prototype;(Pe=F.prototype=Object.create(_e)).constructor=F,Pe._super=_e,te&&u(Pe,te)}function R(F,U){return function(){return F.apply(U,arguments)}}function x(F,U){return typeof F==m?F.apply(U&&U[0]||v,U):F}function L(F,U){return F===v?U:F}function V(F,U,te){_(be(U),function(_e){F.addEventListener(_e,te,!1)})}function ie(F,U,te){_(be(U),function(_e){F.removeEventListener(_e,te,!1)})}function X(F,U){for(;F;){if(F==U)return!0;F=F.parentNode}return!1}function J(F,U){return F.indexOf(U)>-1}function be(F){return F.trim().split(/\s+/g)}function Se(F,U,te){if(F.indexOf&&!te)return F.indexOf(U);for(var _e=0;_e<F.length;){if(te&&F[_e][te]==U||!te&&F[_e]===U)return _e;_e++}return-1}function Me(F){return Array.prototype.slice.call(F,0)}function Ce(F,U,te){for(var _e=[],Pe=[],Ke=0;Ke<F.length;){var ht=U?F[Ke][U]:F[Ke];Se(Pe,ht)<0&&_e.push(F[Ke]),Pe[Ke]=ht,Ke++}return te&&(_e=U?_e.sort(function(Mt,Nt){return Mt[U]>Nt[U]}):_e.sort()),_e}function N(F,U){for(var te,_e,Pe=U[0].toUpperCase()+U.slice(1),Ke=0;Ke<y.length;){if((_e=(te=y[Ke])?te+Pe:U)in F)return _e;Ke++}return v}var G=1;function se(F){var U=F.ownerDocument||F;return U.defaultView||U.parentWindow||d}var Be="ontouchstart"in d,Ue=N(d,"PointerEvent")!==v,Re=Be&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Ne="touch",le="mouse",ge=25,je=1,Ze=4,Ve=8,nt=1,Te=2,Oe=4,Qe=8,tt=16,_t=Te|Oe,Wt=Qe|tt,dt=_t|Wt,bt=["x","y"],Ut=["clientX","clientY"];function ct(F,U){var te=this;this.manager=F,this.callback=U,this.element=F.element,this.target=F.options.inputTarget,this.domHandler=function(_e){x(F.options.enable,[F])&&te.handler(_e)},this.init()}function Qt(F,U,te){var _e=te.pointers.length,Pe=te.changedPointers.length,Ke=U&je&&_e-Pe==0,ht=U&(Ze|Ve)&&_e-Pe==0;te.isFirst=!!Ke,te.isFinal=!!ht,Ke&&(F.session={}),te.eventType=U,function Ft(F,U){var te=F.session,_e=U.pointers,Pe=_e.length;te.firstInput||(te.firstInput=zt(U)),Pe>1&&!te.firstMultiple?te.firstMultiple=zt(U):1===Pe&&(te.firstMultiple=!1);var Ke=te.firstInput,ht=te.firstMultiple,Tt=ht?ht.center:Ke.center,Mt=U.center=pt(_e);U.timeStamp=P(),U.deltaTime=U.timeStamp-Ke.timeStamp,U.angle=hi(Tt,Mt),U.distance=pi(Tt,Mt),function Jt(F,U){var te=U.center,_e=F.offsetDelta||{},Pe=F.prevDelta||{},Ke=F.prevInput||{};(U.eventType===je||Ke.eventType===Ze)&&(Pe=F.prevDelta={x:Ke.deltaX||0,y:Ke.deltaY||0},_e=F.offsetDelta={x:te.x,y:te.y}),U.deltaX=Pe.x+(te.x-_e.x),U.deltaY=Pe.y+(te.y-_e.y)}(te,U),U.offsetDirection=as(U.deltaX,U.deltaY);var Nt=xi(U.deltaTime,U.deltaX,U.deltaY);U.overallVelocityX=Nt.x,U.overallVelocityY=Nt.y,U.overallVelocity=k(Nt.x)>k(Nt.y)?Nt.x:Nt.y,U.scale=ht?function di(F,U){return pi(U[0],U[1],Ut)/pi(F[0],F[1],Ut)}(ht.pointers,_e):1,U.rotation=ht?function Ji(F,U){return hi(U[1],U[0],Ut)+hi(F[1],F[0],Ut)}(ht.pointers,_e):0,U.maxPointers=te.prevInput?U.pointers.length>te.prevInput.maxPointers?U.pointers.length:te.prevInput.maxPointers:U.pointers.length,function Kt(F,U){var Pe,Ke,ht,Tt,te=F.lastInterval||U,_e=U.timeStamp-te.timeStamp;if(U.eventType!=Ve&&(_e>ge||te.velocity===v)){var Mt=U.deltaX-te.deltaX,Nt=U.deltaY-te.deltaY,ri=xi(_e,Mt,Nt);Ke=ri.x,ht=ri.y,Pe=k(ri.x)>k(ri.y)?ri.x:ri.y,Tt=as(Mt,Nt),F.lastInterval=U}else Pe=te.velocity,Ke=te.velocityX,ht=te.velocityY,Tt=te.direction;U.velocity=Pe,U.velocityX=Ke,U.velocityY=ht,U.direction=Tt}(te,U);var ri=F.element;X(U.srcEvent.target,ri)&&(ri=U.srcEvent.target),U.target=ri}(F,te),F.emit("hammer.input",te),F.recognize(te),F.session.prevInput=te}function zt(F){for(var U=[],te=0;te<F.pointers.length;)U[te]={clientX:C(F.pointers[te].clientX),clientY:C(F.pointers[te].clientY)},te++;return{timeStamp:P(),pointers:U,center:pt(U),deltaX:F.deltaX,deltaY:F.deltaY}}function pt(F){var U=F.length;if(1===U)return{x:C(F[0].clientX),y:C(F[0].clientY)};for(var te=0,_e=0,Pe=0;Pe<U;)te+=F[Pe].clientX,_e+=F[Pe].clientY,Pe++;return{x:C(te/U),y:C(_e/U)}}function xi(F,U,te){return{x:U/F||0,y:te/F||0}}function as(F,U){return F===U?nt:k(F)>=k(U)?F<0?Te:Oe:U<0?Qe:tt}function pi(F,U,te){te||(te=bt);var _e=U[te[0]]-F[te[0]],Pe=U[te[1]]-F[te[1]];return Math.sqrt(_e*_e+Pe*Pe)}function hi(F,U,te){return te||(te=bt),180*Math.atan2(U[te[1]]-F[te[1]],U[te[0]]-F[te[0]])/Math.PI}ct.prototype={handler:function(){},init:function(){this.evEl&&V(this.element,this.evEl,this.domHandler),this.evTarget&&V(this.target,this.evTarget,this.domHandler),this.evWin&&V(se(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ie(this.element,this.evEl,this.domHandler),this.evTarget&&ie(this.target,this.evTarget,this.domHandler),this.evWin&&ie(se(this.element),this.evWin,this.domHandler)}};var Ni={mousedown:je,mousemove:2,mouseup:Ze},es="mousedown",wi="mousemove mouseup";function Ai(){this.evEl=es,this.evWin=wi,this.pressed=!1,ct.apply(this,arguments)}O(Ai,ct,{handler:function(U){var te=Ni[U.type];te&je&&0===U.button&&(this.pressed=!0),2&te&&1!==U.which&&(te=Ze),this.pressed&&(te&Ze&&(this.pressed=!1),this.callback(this.manager,te,{pointers:[U],changedPointers:[U],pointerType:le,srcEvent:U}))}});var Wi={pointerdown:je,pointermove:2,pointerup:Ze,pointercancel:Ve,pointerout:Ve},At={2:Ne,3:"pen",4:le,5:"kinect"},Yt="pointerdown",Oi="pointermove pointerup pointercancel";function gi(){this.evEl=Yt,this.evWin=Oi,ct.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}d.MSPointerEvent&&!d.PointerEvent&&(Yt="MSPointerDown",Oi="MSPointerMove MSPointerUp MSPointerCancel"),O(gi,ct,{handler:function(U){var te=this.store,_e=!1,Pe=U.type.toLowerCase().replace("ms",""),Ke=Wi[Pe],ht=At[U.pointerType]||U.pointerType,Tt=ht==Ne,Mt=Se(te,U.pointerId,"pointerId");Ke&je&&(0===U.button||Tt)?Mt<0&&(te.push(U),Mt=te.length-1):Ke&(Ze|Ve)&&(_e=!0),!(Mt<0)&&(te[Mt]=U,this.callback(this.manager,Ke,{pointers:te,changedPointers:[U],pointerType:ht,srcEvent:U}),_e&&te.splice(Mt,1))}});var Ei={touchstart:je,touchmove:2,touchend:Ze,touchcancel:Ve};function Ot(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,ct.apply(this,arguments)}function ei(F,U){var te=Me(F.touches),_e=Me(F.changedTouches);return U&(Ze|Ve)&&(te=Ce(te.concat(_e),"identifier",!0)),[te,_e]}O(Ot,ct,{handler:function(U){var te=Ei[U.type];if(te===je&&(this.started=!0),this.started){var _e=ei.call(this,U,te);te&(Ze|Ve)&&_e[0].length-_e[1].length==0&&(this.started=!1),this.callback(this.manager,te,{pointers:_e[0],changedPointers:_e[1],pointerType:Ne,srcEvent:U})}}});var zi={touchstart:je,touchmove:2,touchend:Ze,touchcancel:Ve},Ht="touchstart touchmove touchend touchcancel";function kt(){this.evTarget=Ht,this.targetIds={},ct.apply(this,arguments)}function ts(F,U){var te=Me(F.touches),_e=this.targetIds;if(U&(2|je)&&1===te.length)return _e[te[0].identifier]=!0,[te,te];var Pe,Ke,ht=Me(F.changedTouches),Tt=[],Mt=this.target;if(Ke=te.filter(function(Nt){return X(Nt.target,Mt)}),U===je)for(Pe=0;Pe<Ke.length;)_e[Ke[Pe].identifier]=!0,Pe++;for(Pe=0;Pe<ht.length;)_e[ht[Pe].identifier]&&Tt.push(ht[Pe]),U&(Ze|Ve)&&delete _e[ht[Pe].identifier],Pe++;return Tt.length?[Ce(Ke.concat(Tt),"identifier",!0),Tt]:void 0}O(kt,ct,{handler:function(U){var te=zi[U.type],_e=ts.call(this,U,te);_e&&this.callback(this.manager,te,{pointers:_e[0],changedPointers:_e[1],pointerType:Ne,srcEvent:U})}});var ls=2500;function oi(){ct.apply(this,arguments);var F=R(this.handler,this);this.touch=new kt(this.manager,F),this.mouse=new Ai(this.manager,F),this.primaryTouch=null,this.lastTouches=[]}function cs(F,U){F&je?(this.primaryTouch=U.changedPointers[0].identifier,Pi.call(this,U)):F&(Ze|Ve)&&Pi.call(this,U)}function Pi(F){var U=F.changedPointers[0];if(U.identifier===this.primaryTouch){var te={x:U.clientX,y:U.clientY};this.lastTouches.push(te);var _e=this.lastTouches;setTimeout(function(){var Ke=_e.indexOf(te);Ke>-1&&_e.splice(Ke,1)},ls)}}function W(F){for(var U=F.srcEvent.clientX,te=F.srcEvent.clientY,_e=0;_e<this.lastTouches.length;_e++){var Pe=this.lastTouches[_e],Ke=Math.abs(U-Pe.x),ht=Math.abs(te-Pe.y);if(Ke<=25&&ht<=25)return!0}return!1}O(oi,ct,{handler:function(U,te,_e){var Ke=_e.pointerType==le;if(!(Ke&&_e.sourceCapabilities&&_e.sourceCapabilities.firesTouchEvents)){if(_e.pointerType==Ne)cs.call(this,te,_e);else if(Ke&&W.call(this,_e))return;this.callback(U,te,_e)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var $=N(M.style,"touchAction"),q=$!==v,ue="compute",we="manipulation",De="none",Xe="pan-x",ot="pan-y",it=function wt(){if(!q)return!1;var F={},U=d.CSS&&d.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(te){F[te]=!U||d.CSS.supports("touch-action",te)}),F}();function st(F,U){this.manager=F,this.set(U)}st.prototype={set:function(F){F==ue&&(F=this.compute()),q&&this.manager.element.style&&it[F]&&(this.manager.element.style[$]=F),this.actions=F.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var F=[];return _(this.manager.recognizers,function(U){x(U.options.enable,[U])&&(F=F.concat(U.getTouchAction()))}),function Pt(F){if(J(F,De))return De;var U=J(F,Xe),te=J(F,ot);return U&&te?De:U||te?U?Xe:ot:J(F,we)?we:"auto"}(F.join(" "))},preventDefaults:function(F){var U=F.srcEvent,te=F.offsetDirection;if(!this.manager.session.prevented){var _e=this.actions,Pe=J(_e,De)&&!it[De],Ke=J(_e,ot)&&!it[ot],ht=J(_e,Xe)&&!it[Xe];if(Pe&&1===F.pointers.length&&F.distance<2&&F.deltaTime<250)return;return ht&&Ke||!(Pe||Ke&&te&_t||ht&&te&Wt)?void 0:this.preventSrc(U)}U.preventDefault()},preventSrc:function(F){this.manager.session.prevented=!0,F.preventDefault()}};var Ct=1;function ui(F){this.options=u({},this.defaults,F||{}),this.id=function Q(){return G++}(),this.manager=null,this.options.enable=L(this.options.enable,!0),this.state=Ct,this.simultaneous={},this.requireFail=[]}function Cs(F){return 16&F?"cancel":8&F?"end":4&F?"move":2&F?"start":""}function hs(F){return F==tt?"down":F==Qe?"up":F==Te?"left":F==Oe?"right":""}function ji(F,U){var te=U.manager;return te?te.get(F):F}function Gt(){ui.apply(this,arguments)}function fi(){Gt.apply(this,arguments),this.pX=null,this.pY=null}function Ri(){Gt.apply(this,arguments)}function vi(){ui.apply(this,arguments),this._timer=null,this._input=null}function Vi(){Gt.apply(this,arguments)}function Ii(){Gt.apply(this,arguments)}function ii(){ui.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ti(F,U){return(U=U||{}).recognizers=L(U.recognizers,Ti.defaults.preset),new Bi(F,U)}function Bi(F,U){this.options=u({},Ti.defaults,U||{}),this.options.inputTarget=this.options.inputTarget||F,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=F,this.input=function Zt(F){return new(F.options.inputClass||(Ue?gi:Re?kt:Be?oi:Ai))(F,Qt)}(this),this.touchAction=new st(this,this.options.touchAction),is(this,!0),_(this.options.recognizers,function(te){var _e=this.add(new te[0](te[1]));te[2]&&_e.recognizeWith(te[2]),te[3]&&_e.requireFailure(te[3])},this)}function is(F,U){var _e,te=F.element;te.style&&(_(F.options.cssProps,function(Pe,Ke){_e=N(te.style,Ke),U?(F.oldCssProps[_e]=te.style[_e],te.style[_e]=Pe):te.style[_e]=F.oldCssProps[_e]||""}),U||(F.oldCssProps={}))}ui.prototype={defaults:{},set:function(F){return u(this.options,F),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(F){if(l(F,"recognizeWith",this))return this;var U=this.simultaneous;return U[(F=ji(F,this)).id]||(U[F.id]=F,F.recognizeWith(this)),this},dropRecognizeWith:function(F){return l(F,"dropRecognizeWith",this)||(F=ji(F,this),delete this.simultaneous[F.id]),this},requireFailure:function(F){if(l(F,"requireFailure",this))return this;var U=this.requireFail;return-1===Se(U,F=ji(F,this))&&(U.push(F),F.requireFailure(this)),this},dropRequireFailure:function(F){if(l(F,"dropRequireFailure",this))return this;F=ji(F,this);var U=Se(this.requireFail,F);return U>-1&&this.requireFail.splice(U,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(F){return!!this.simultaneous[F.id]},emit:function(F){var U=this,te=this.state;function _e(Pe){U.manager.emit(Pe,F)}te<8&&_e(U.options.event+Cs(te)),_e(U.options.event),F.additionalEvent&&_e(F.additionalEvent),te>=8&&_e(U.options.event+Cs(te))},tryEmit:function(F){if(this.canEmit())return this.emit(F);this.state=32},canEmit:function(){for(var F=0;F<this.requireFail.length;){if(!(this.requireFail[F].state&(32|Ct)))return!1;F++}return!0},recognize:function(F){var U=u({},F);if(!x(this.options.enable,[this,U]))return this.reset(),void(this.state=32);56&this.state&&(this.state=Ct),this.state=this.process(U),30&this.state&&this.tryEmit(U)},process:function(F){},getTouchAction:function(){},reset:function(){}},O(Gt,ui,{defaults:{pointers:1},attrTest:function(F){var U=this.options.pointers;return 0===U||F.pointers.length===U},process:function(F){var U=this.state,te=F.eventType,_e=6&U,Pe=this.attrTest(F);return _e&&(te&Ve||!Pe)?16|U:_e||Pe?te&Ze?8|U:2&U?4|U:2:32}}),O(fi,Gt,{defaults:{event:"pan",threshold:10,pointers:1,direction:dt},getTouchAction:function(){var F=this.options.direction,U=[];return F&_t&&U.push(ot),F&Wt&&U.push(Xe),U},directionTest:function(F){var U=this.options,te=!0,_e=F.distance,Pe=F.direction,Ke=F.deltaX,ht=F.deltaY;return Pe&U.direction||(U.direction&_t?(Pe=0===Ke?nt:Ke<0?Te:Oe,te=Ke!=this.pX,_e=Math.abs(F.deltaX)):(Pe=0===ht?nt:ht<0?Qe:tt,te=ht!=this.pY,_e=Math.abs(F.deltaY))),F.direction=Pe,te&&_e>U.threshold&&Pe&U.direction},attrTest:function(F){return Gt.prototype.attrTest.call(this,F)&&(2&this.state||!(2&this.state)&&this.directionTest(F))},emit:function(F){this.pX=F.deltaX,this.pY=F.deltaY;var U=hs(F.direction);U&&(F.additionalEvent=this.options.event+U),this._super.emit.call(this,F)}}),O(Ri,Gt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[De]},attrTest:function(F){return this._super.attrTest.call(this,F)&&(Math.abs(F.scale-1)>this.options.threshold||2&this.state)},emit:function(F){1!==F.scale&&(F.additionalEvent=this.options.event+(F.scale<1?"in":"out")),this._super.emit.call(this,F)}}),O(vi,ui,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(F){var U=this.options,te=F.pointers.length===U.pointers,_e=F.distance<U.threshold,Pe=F.deltaTime>U.time;if(this._input=F,!_e||!te||F.eventType&(Ze|Ve)&&!Pe)this.reset();else if(F.eventType&je)this.reset(),this._timer=T(function(){this.state=8,this.tryEmit()},U.time,this);else if(F.eventType&Ze)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(F){8===this.state&&(F&&F.eventType&Ze?this.manager.emit(this.options.event+"up",F):(this._input.timeStamp=P(),this.manager.emit(this.options.event,this._input)))}}),O(Vi,Gt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[De]},attrTest:function(F){return this._super.attrTest.call(this,F)&&(Math.abs(F.rotation)>this.options.threshold||2&this.state)}}),O(Ii,Gt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:_t|Wt,pointers:1},getTouchAction:function(){return fi.prototype.getTouchAction.call(this)},attrTest:function(F){var te,U=this.options.direction;return U&(_t|Wt)?te=F.overallVelocity:U&_t?te=F.overallVelocityX:U&Wt&&(te=F.overallVelocityY),this._super.attrTest.call(this,F)&&U&F.offsetDirection&&F.distance>this.options.threshold&&F.maxPointers==this.options.pointers&&k(te)>this.options.velocity&&F.eventType&Ze},emit:function(F){var U=hs(F.offsetDirection);U&&this.manager.emit(this.options.event+U,F),this.manager.emit(this.options.event,F)}}),O(ii,ui,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[we]},process:function(F){var U=this.options,te=F.pointers.length===U.pointers,_e=F.distance<U.threshold,Pe=F.deltaTime<U.time;if(this.reset(),F.eventType&je&&0===this.count)return this.failTimeout();if(_e&&Pe&&te){if(F.eventType!=Ze)return this.failTimeout();var Ke=!this.pTime||F.timeStamp-this.pTime<U.interval,ht=!this.pCenter||pi(this.pCenter,F.center)<U.posThreshold;if(this.pTime=F.timeStamp,this.pCenter=F.center,ht&&Ke?this.count+=1:this.count=1,this._input=F,0==this.count%U.taps)return this.hasRequireFailures()?(this._timer=T(function(){this.state=8,this.tryEmit()},U.interval,this),2):8}return 32},failTimeout:function(){return this._timer=T(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ti.VERSION="2.0.7",Ti.defaults={domEvents:!1,touchAction:ue,enable:!0,inputTarget:null,inputClass:null,preset:[[Vi,{enable:!1}],[Ri,{enable:!1},["rotate"]],[Ii,{direction:_t}],[fi,{direction:_t},["swipe"]],[ii],[ii,{event:"doubletap",taps:2},["tap"]],[vi]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Bi.prototype={set:function(F){return u(this.options,F),F.touchAction&&this.touchAction.update(),F.inputTarget&&(this.input.destroy(),this.input.target=F.inputTarget,this.input.init()),this},stop:function(F){this.session.stopped=F?2:1},recognize:function(F){var U=this.session;if(!U.stopped){this.touchAction.preventDefaults(F);var te,_e=this.recognizers,Pe=U.curRecognizer;(!Pe||Pe&&8&Pe.state)&&(Pe=U.curRecognizer=null);for(var Ke=0;Ke<_e.length;)te=_e[Ke],2===U.stopped||Pe&&te!=Pe&&!te.canRecognizeWith(Pe)?te.reset():te.recognize(F),!Pe&&14&te.state&&(Pe=U.curRecognizer=te),Ke++}},get:function(F){if(F instanceof ui)return F;for(var U=this.recognizers,te=0;te<U.length;te++)if(U[te].options.event==F)return U[te];return null},add:function(F){if(l(F,"add",this))return this;var U=this.get(F.options.event);return U&&this.remove(U),this.recognizers.push(F),F.manager=this,this.touchAction.update(),F},remove:function(F){if(l(F,"remove",this))return this;if(F=this.get(F)){var U=this.recognizers,te=Se(U,F);-1!==te&&(U.splice(te,1),this.touchAction.update())}return this},on:function(F,U){if(F!==v&&U!==v){var te=this.handlers;return _(be(F),function(_e){te[_e]=te[_e]||[],te[_e].push(U)}),this}},off:function(F,U){if(F!==v){var te=this.handlers;return _(be(F),function(_e){U?te[_e]&&te[_e].splice(Se(te[_e],U),1):delete te[_e]}),this}},emit:function(F,U){this.options.domEvents&&function Ls(F,U){var te=de.createEvent("Event");te.initEvent(F,!0,!0),te.gesture=U,U.target.dispatchEvent(te)}(F,U);var te=this.handlers[F]&&this.handlers[F].slice();if(te&&te.length){U.type=F,U.preventDefault=function(){U.srcEvent.preventDefault()};for(var _e=0;_e<te.length;)te[_e](U),_e++}},destroy:function(){this.element&&is(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(Ti,{INPUT_START:je,INPUT_MOVE:2,INPUT_END:Ze,INPUT_CANCEL:Ve,STATE_POSSIBLE:Ct,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:nt,DIRECTION_LEFT:Te,DIRECTION_RIGHT:Oe,DIRECTION_UP:Qe,DIRECTION_DOWN:tt,DIRECTION_HORIZONTAL:_t,DIRECTION_VERTICAL:Wt,DIRECTION_ALL:dt,Manager:Bi,Input:ct,TouchAction:st,TouchInput:kt,MouseInput:Ai,PointerEventInput:gi,TouchMouseInput:oi,SingleTouchInput:Ot,Recognizer:ui,AttrRecognizer:Gt,Tap:ii,Pan:fi,Swipe:Ii,Pinch:Ri,Rotate:Vi,Press:vi,on:V,off:ie,each:_,merge:E,extend:S,assign:u,inherit:O,bindFn:R,prefixed:N}),(typeof d<"u"?d:typeof self<"u"?self:{}).Hammer=Ti,(Z=function(){return Ti}.call(et,oe,et,xt))!==v&&(xt.exports=Z)}(window,document)},6708:xt=>{self,xt.exports=(()=>{"use strict";var oe,et={};return oe=et,Object.defineProperty(oe,"__esModule",{value:!0}),oe.FitAddon=void 0,oe.FitAddon=class{activate(Z){this._terminal=Z}dispose(){}fit(){const Z=this.proposeDimensions();Z&&this._terminal&&!isNaN(Z.cols)&&!isNaN(Z.rows)&&(this._terminal.rows===Z.rows&&this._terminal.cols===Z.cols||(this._terminal._core._renderService.clear(),this._terminal.resize(Z.cols,Z.rows)))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const Z=this._terminal._core,d=Z._renderService.dimensions;if(0===d.css.cell.width||0===d.css.cell.height)return;const de=0===this._terminal.options.scrollback?0:Z.viewport.scrollBarWidth,g=window.getComputedStyle(this._terminal.element.parentElement),v=parseInt(g.getPropertyValue("height")),y=Math.max(0,parseInt(g.getPropertyValue("width"))),M=window.getComputedStyle(this._terminal.element),m=v-(parseInt(M.getPropertyValue("padding-top"))+parseInt(M.getPropertyValue("padding-bottom"))),C=y-(parseInt(M.getPropertyValue("padding-right"))+parseInt(M.getPropertyValue("padding-left")))-de;return{cols:Math.max(2,Math.floor(C/d.css.cell.width)),rows:Math.max(1,Math.floor(m/d.css.cell.height))}}},et})()},6885:xt=>{self,xt.exports=(()=>{"use strict";var et={4567:function(de,g,v){var y=this&&this.__decorate||function(u,S,E,O){var R,x=arguments.length,L=x<3?S:null===O?O=Object.getOwnPropertyDescriptor(S,E):O;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)L=Reflect.decorate(u,S,E,O);else for(var V=u.length-1;V>=0;V--)(R=u[V])&&(L=(x<3?R(L):x>3?R(S,E,L):R(S,E))||L);return x>3&&L&&Object.defineProperty(S,E,L),L},M=this&&this.__param||function(u,S){return function(E,O){S(E,O,u)}};Object.defineProperty(g,"__esModule",{value:!0}),g.AccessibilityManager=void 0;const m=v(9042),C=v(6114),k=v(9924),P=v(844),T=v(5596),l=v(4725),_=v(3656);let h=g.AccessibilityManager=class extends P.Disposable{constructor(u,S){super(),this._terminal=u,this._renderService=S,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let E=0;E<this._terminal.rows;E++)this._rowElements[E]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[E]);if(this._topBoundaryFocusListener=E=>this._handleBoundaryFocus(E,0),this._bottomBoundaryFocusListener=E=>this._handleBoundaryFocus(E,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new k.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(E=>this._handleResize(E.rows))),this.register(this._terminal.onRender(E=>this._refreshRows(E.start,E.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(E=>this._handleChar(E))),this.register(this._terminal.onLineFeed(()=>this._handleChar("\n"))),this.register(this._terminal.onA11yTab(E=>this._handleTab(E))),this.register(this._terminal.onKey(E=>this._handleKey(E.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new T.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,_.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,P.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(u){for(let S=0;S<u;S++)this._handleChar(" ")}_handleChar(u){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==u&&(this._charsToAnnounce+=u):this._charsToAnnounce+=u,"\n"===u&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=m.tooMuchOutput)),C.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,C.isMac&&this._liveRegion.remove()}_handleKey(u){this._clearLiveRegion(),/\p{Control}/u.test(u)||this._charsToConsume.push(u)}_refreshRows(u,S){this._liveRegionDebouncer.refresh(u,S,this._terminal.rows)}_renderRows(u,S){const E=this._terminal.buffer,O=E.lines.length.toString();for(let R=u;R<=S;R++){const x=E.translateBufferLineToString(E.ydisp+R,!0),L=(E.ydisp+R+1).toString(),V=this._rowElements[R];V&&(0===x.length?V.innerText="\xa0":V.textContent=x,V.setAttribute("aria-posinset",L),V.setAttribute("aria-setsize",O))}this._announceCharacters()}_announceCharacters(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(u,S){const E=u.target,O=this._rowElements[0===S?1:this._rowElements.length-2];if(E.getAttribute("aria-posinset")===(0===S?"1":`${this._terminal.buffer.lines.length}`)||u.relatedTarget!==O)return;let R,x;if(0===S?(R=E,x=this._rowElements.pop(),this._rowContainer.removeChild(x)):(R=this._rowElements.shift(),x=E,this._rowContainer.removeChild(R)),R.removeEventListener("focus",this._topBoundaryFocusListener),x.removeEventListener("focus",this._bottomBoundaryFocusListener),0===S){const L=this._createAccessibilityTreeNode();this._rowElements.unshift(L),this._rowContainer.insertAdjacentElement("afterbegin",L)}else{const L=this._createAccessibilityTreeNode();this._rowElements.push(L),this._rowContainer.appendChild(L)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===S?-1:1),this._rowElements[0===S?1:this._rowElements.length-2].focus(),u.preventDefault(),u.stopImmediatePropagation()}_handleResize(u){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let S=this._rowContainer.children.length;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);for(;this._rowElements.length>u;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const u=document.createElement("div");return u.setAttribute("role","listitem"),u.tabIndex=-1,this._refreshRowDimensions(u),u}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let u=0;u<this._terminal.rows;u++)this._refreshRowDimensions(this._rowElements[u])}}_refreshRowDimensions(u){u.style.height=`${this._renderService.dimensions.css.cell.height}px`}};g.AccessibilityManager=h=y([M(1,l.IRenderService)],h)},3614:(de,g)=>{function v(C){return C.replace(/\r?\n/g,"\r")}function y(C,k){return k?"\x1b[200~"+C+"\x1b[201~":C}function M(C,k,P,T){C=y(C=v(C),P.decPrivateModes.bracketedPasteMode&&!0!==T.rawOptions.ignoreBracketedPasteMode),P.triggerDataEvent(C,!0),k.value=""}function m(C,k,P){const T=P.getBoundingClientRect(),l=C.clientX-T.left-10,_=C.clientY-T.top-10;k.style.width="20px",k.style.height="20px",k.style.left=`${l}px`,k.style.top=`${_}px`,k.style.zIndex="1000",k.focus()}Object.defineProperty(g,"__esModule",{value:!0}),g.rightClickHandler=g.moveTextAreaUnderMouseCursor=g.paste=g.handlePasteEvent=g.copyHandler=g.bracketTextForPaste=g.prepareTextForTerminal=void 0,g.prepareTextForTerminal=v,g.bracketTextForPaste=y,g.copyHandler=function(C,k){C.clipboardData&&C.clipboardData.setData("text/plain",k.selectionText),C.preventDefault()},g.handlePasteEvent=function(C,k,P,T){C.stopPropagation(),C.clipboardData&&M(C.clipboardData.getData("text/plain"),k,P,T)},g.paste=M,g.moveTextAreaUnderMouseCursor=m,g.rightClickHandler=function(C,k,P,T,l){m(C,k,P),l&&T.rightClickSelect(C),k.value=T.selectionText,k.select()}},7239:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.ColorContrastCache=void 0;const y=v(1505);g.ColorContrastCache=class{constructor(){this._color=new y.TwoKeyMap,this._css=new y.TwoKeyMap}setCss(M,m,C){this._css.set(M,m,C)}getCss(M,m){return this._css.get(M,m)}setColor(M,m,C){this._color.set(M,m,C)}getColor(M,m){return this._color.get(M,m)}clear(){this._color.clear(),this._css.clear()}}},3656:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.addDisposableDomListener=void 0,g.addDisposableDomListener=function(v,y,M,m){v.addEventListener(y,M,m);let C=!1;return{dispose:()=>{C||(C=!0,v.removeEventListener(y,M,m))}}}},6465:function(de,g,v){var y=this&&this.__decorate||function(l,_,h,u){var S,E=arguments.length,O=E<3?_:null===u?u=Object.getOwnPropertyDescriptor(_,h):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)O=Reflect.decorate(l,_,h,u);else for(var R=l.length-1;R>=0;R--)(S=l[R])&&(O=(E<3?S(O):E>3?S(_,h,O):S(_,h))||O);return E>3&&O&&Object.defineProperty(_,h,O),O},M=this&&this.__param||function(l,_){return function(h,u){_(h,u,l)}};Object.defineProperty(g,"__esModule",{value:!0}),g.Linkifier2=void 0;const m=v(3656),C=v(8460),k=v(844),P=v(2585);let T=g.Linkifier2=class extends k.Disposable{get currentLink(){return this._currentLink}constructor(l){super(),this._bufferService=l,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new C.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new C.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,k.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,k.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(l){return this._linkProviders.push(l),{dispose:()=>{const _=this._linkProviders.indexOf(l);-1!==_&&this._linkProviders.splice(_,1)}}}attachToDom(l,_,h){this._element=l,this._mouseService=_,this._renderService=h,this.register((0,m.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,m.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,m.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,m.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(l){if(this._lastMouseEvent=l,!this._element||!this._mouseService)return;const _=this._positionFromMouseEvent(l,this._element,this._mouseService);if(!_)return;this._isMouseOut=!1;const h=l.composedPath();for(let u=0;u<h.length;u++){const S=h[u];if(S.classList.contains("xterm"))break;if(S.classList.contains("xterm-hover"))return}this._lastBufferCell&&_.x===this._lastBufferCell.x&&_.y===this._lastBufferCell.y||(this._handleHover(_),this._lastBufferCell=_)}_handleHover(l){if(this._activeLine!==l.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(l,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,l)||(this._clearCurrentLink(),this._askForLink(l,!0))}_askForLink(l,_){var h,u;this._activeProviderReplies&&_||(null===(h=this._activeProviderReplies)||void 0===h||h.forEach(E=>{E?.forEach(O=>{O.link.dispose&&O.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=l.y);let S=!1;for(const[E,O]of this._linkProviders.entries())_?null!==(u=this._activeProviderReplies)&&void 0!==u&&u.get(E)&&(S=this._checkLinkProviderResult(E,l,S)):O.provideLinks(l.y,R=>{var x,L;if(this._isMouseOut)return;const V=R?.map(ie=>({link:ie}));null===(x=this._activeProviderReplies)||void 0===x||x.set(E,V),S=this._checkLinkProviderResult(E,l,S),(null===(L=this._activeProviderReplies)||void 0===L?void 0:L.size)===this._linkProviders.length&&this._removeIntersectingLinks(l.y,this._activeProviderReplies)})}_removeIntersectingLinks(l,_){const h=new Set;for(let u=0;u<_.size;u++){const S=_.get(u);if(S)for(let E=0;E<S.length;E++){const O=S[E],x=O.link.range.end.y>l?this._bufferService.cols:O.link.range.end.x;for(let L=O.link.range.start.y<l?0:O.link.range.start.x;L<=x;L++){if(h.has(L)){S.splice(E--,1);break}h.add(L)}}}}_checkLinkProviderResult(l,_,h){var u;if(!this._activeProviderReplies)return h;const S=this._activeProviderReplies.get(l);let E=!1;for(let O=0;O<l;O++)this._activeProviderReplies.has(O)&&!this._activeProviderReplies.get(O)||(E=!0);if(!E&&S){const O=S.find(R=>this._linkAtPosition(R.link,_));O&&(h=!0,this._handleNewLink(O))}if(this._activeProviderReplies.size===this._linkProviders.length&&!h)for(let O=0;O<this._activeProviderReplies.size;O++){const R=null===(u=this._activeProviderReplies.get(O))||void 0===u?void 0:u.find(x=>this._linkAtPosition(x.link,_));if(R){h=!0,this._handleNewLink(R);break}}return h}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(l){if(!this._element||!this._mouseService||!this._currentLink)return;const _=this._positionFromMouseEvent(l,this._element,this._mouseService);_&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,_)&&this._currentLink.link.activate(l,this._currentLink.link.text)}_clearCurrentLink(l,_){this._element&&this._currentLink&&this._lastMouseEvent&&(!l||!_||this._currentLink.link.range.start.y>=l&&this._currentLink.link.range.end.y<=_)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,k.disposeArray)(this._linkCacheDisposables))}_handleNewLink(l){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._linkAtPosition(l.link,_)&&(this._currentLink=l,this._currentLink.state={decorations:{underline:void 0===l.link.decorations||l.link.decorations.underline,pointerCursor:void 0===l.link.decorations||l.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,l.link,this._lastMouseEvent),l.link.decorations={},Object.defineProperties(l.link.decorations,{pointerCursor:{get:()=>{var h,u;return null===(u=null===(h=this._currentLink)||void 0===h?void 0:h.state)||void 0===u?void 0:u.decorations.pointerCursor},set:h=>{var u,S;null!==(u=this._currentLink)&&void 0!==u&&u.state&&this._currentLink.state.decorations.pointerCursor!==h&&(this._currentLink.state.decorations.pointerCursor=h,this._currentLink.state.isHovered&&(null===(S=this._element)||void 0===S||S.classList.toggle("xterm-cursor-pointer",h)))}},underline:{get:()=>{var h,u;return null===(u=null===(h=this._currentLink)||void 0===h?void 0:h.state)||void 0===u?void 0:u.decorations.underline},set:h=>{var u,S,E;null!==(u=this._currentLink)&&void 0!==u&&u.state&&(null===(E=null===(S=this._currentLink)||void 0===S?void 0:S.state)||void 0===E?void 0:E.decorations.underline)!==h&&(this._currentLink.state.decorations.underline=h,this._currentLink.state.isHovered&&this._fireUnderlineEvent(l.link,h))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(h=>{if(!this._currentLink)return;const u=0===h.start?0:h.start+1+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.ydisp+1+h.end;if(this._currentLink.link.range.start.y>=u&&this._currentLink.link.range.end.y<=S&&(this._clearCurrentLink(u,S),this._lastMouseEvent&&this._element)){const E=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);E&&this._askForLink(E,!1)}})))}_linkHover(l,_,h){var u;!(null===(u=this._currentLink)||void 0===u)&&u.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!0),this._currentLink.state.decorations.pointerCursor&&l.classList.add("xterm-cursor-pointer")),_.hover&&_.hover(h,_.text)}_fireUnderlineEvent(l,_){const h=l.range,u=this._bufferService.buffer.ydisp,S=this._createLinkUnderlineEvent(h.start.x-1,h.start.y-u-1,h.end.x,h.end.y-u-1,void 0);(_?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(S)}_linkLeave(l,_,h){var u;!(null===(u=this._currentLink)||void 0===u)&&u.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!1),this._currentLink.state.decorations.pointerCursor&&l.classList.remove("xterm-cursor-pointer")),_.leave&&_.leave(h,_.text)}_linkAtPosition(l,_){const S=_.y*this._bufferService.cols+_.x;return l.range.start.y*this._bufferService.cols+l.range.start.x<=S&&S<=l.range.end.y*this._bufferService.cols+l.range.end.x}_positionFromMouseEvent(l,_,h){const u=h.getCoords(l,_,this._bufferService.cols,this._bufferService.rows);if(u)return{x:u[0],y:u[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(l,_,h,u,S){return{x1:l,y1:_,x2:h,y2:u,cols:this._bufferService.cols,fg:S}}};g.Linkifier2=T=y([M(0,P.IBufferService)],T)},9042:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.tooMuchOutput=g.promptLabel=void 0,g.promptLabel="Terminal input",g.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(de,g,v){var y=this&&this.__decorate||function(T,l,_,h){var u,S=arguments.length,E=S<3?l:null===h?h=Object.getOwnPropertyDescriptor(l,_):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(T,l,_,h);else for(var O=T.length-1;O>=0;O--)(u=T[O])&&(E=(S<3?u(E):S>3?u(l,_,E):u(l,_))||E);return S>3&&E&&Object.defineProperty(l,_,E),E},M=this&&this.__param||function(T,l){return function(_,h){l(_,h,T)}};Object.defineProperty(g,"__esModule",{value:!0}),g.OscLinkProvider=void 0;const m=v(511),C=v(2585);let k=g.OscLinkProvider=class{constructor(T,l,_){this._bufferService=T,this._optionsService=l,this._oscLinkService=_}provideLinks(T,l){var _;const h=this._bufferService.buffer.lines.get(T-1);if(!h)return void l(void 0);const u=[],S=this._optionsService.rawOptions.linkHandler,E=new m.CellData,O=h.getTrimmedLength();let R=-1,x=-1,L=!1;for(let V=0;V<O;V++)if(-1!==x||h.hasContent(V)){if(h.loadCell(V,E),E.hasExtendedAttrs()&&E.extended.urlId){if(-1===x){x=V,R=E.extended.urlId;continue}L=E.extended.urlId!==R}else-1!==x&&(L=!0);if(L||-1!==x&&V===O-1){const ie=null===(_=this._oscLinkService.getLinkData(R))||void 0===_?void 0:_.uri;if(ie){const X={start:{x:x+1,y:T},end:{x:V+(L||V!==O-1?0:1),y:T}};let J=!1;if(!S?.allowNonHttpProtocols)try{const be=new URL(ie);["http:","https:"].includes(be.protocol)||(J=!0)}catch{J=!0}J||u.push({text:ie,range:X,activate:(be,Se)=>S?S.activate(be,Se,X):P(0,Se),hover:(be,Se)=>{var Me;return null===(Me=S?.hover)||void 0===Me?void 0:Me.call(S,be,Se,X)},leave:(be,Se)=>{var Me;return null===(Me=S?.leave)||void 0===Me?void 0:Me.call(S,be,Se,X)}})}L=!1,E.hasExtendedAttrs()&&E.extended.urlId?(x=V,R=E.extended.urlId):(x=-1,R=-1)}}l(u)}};function P(T,l){if(confirm(`Do you want to navigate to ${l}?\n\nWARNING: This link could potentially be dangerous`)){const _=window.open();if(_){try{_.opener=null}catch{}_.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}}g.OscLinkProvider=k=y([M(0,C.IBufferService),M(1,C.IOptionsService),M(2,C.IOscLinkService)],k)},6193:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.RenderDebouncer=void 0,g.RenderDebouncer=class{constructor(v,y){this._parentWindow=v,this._renderCallback=y,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(v){return this._refreshCallbacks.push(v),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(v,y,M){this._rowCount=M,v=void 0!==v?v:0,y=void 0!==y?y:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,v):v,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,y):y,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return void this._runRefreshCallbacks();const v=Math.max(this._rowStart,0),y=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(v,y),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const v of this._refreshCallbacks)v(0);this._refreshCallbacks=[]}}},5596:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.ScreenDprMonitor=void 0;const y=v(844);g.ScreenDprMonitor=class M extends y.Disposable{constructor(C){super(),this._parentWindow=C,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,y.toDisposable)(()=>{this.clearListener()}))}setListener(C){this._listener&&this.clearListener(),this._listener=C,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var C;this._outerListener&&(null===(C=this._resolutionMediaMatchList)||void 0===C||C.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}},3236:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.Terminal=void 0;const y=v(3614),M=v(3656),m=v(6465),C=v(9042),k=v(3730),P=v(1680),T=v(3107),l=v(5744),_=v(2950),h=v(1296),u=v(428),S=v(4269),E=v(5114),O=v(8934),R=v(3230),x=v(9312),L=v(4725),V=v(6731),ie=v(8055),X=v(8969),J=v(8460),be=v(844),Se=v(6114),Me=v(8437),Ce=v(2584),N=v(7399),G=v(5941),Q=v(9074),se=v(2585),Ae=v(5435),Be=v(4567),Ue=typeof window<"u"?window.document:null;g.Terminal=class Re extends X.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(I={}){super(I),this.browser=Se,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new be.MutableDisposable),this._onCursorMove=this.register(new J.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new J.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new J.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new J.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new J.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new J.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new J.EventEmitter),this._onBlur=this.register(new J.EventEmitter),this._onA11yCharEmitter=this.register(new J.EventEmitter),this._onA11yTabEmitter=this.register(new J.EventEmitter),this._onWillOpen=this.register(new J.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(m.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(k.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(Q.DecorationService),this._instantiationService.setService(se.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((le,he)=>this.refresh(le,he))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(le=>this._reportWindowsOptions(le))),this.register(this._inputHandler.onColor(le=>this._handleColorEvent(le))),this.register((0,J.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,J.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,J.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,J.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(le=>this._afterResize(le.cols,le.rows))),this.register((0,be.toDisposable)(()=>{var le,he;this._customKeyEventHandler=void 0,null===(he=null===(le=this.element)||void 0===le?void 0:le.parentNode)||void 0===he||he.removeChild(this.element)}))}_handleColorEvent(I){if(this._themeService)for(const le of I){let he,ge="";switch(le.index){case 256:he="foreground",ge="10";break;case 257:he="background",ge="11";break;case 258:he="cursor",ge="12";break;default:he="ansi",ge="4;"+le.index}switch(le.type){case 0:const je=ie.color.toColorRGB("ansi"===he?this._themeService.colors.ansi[le.index]:this._themeService.colors[he]);this.coreService.triggerDataEvent(`${Ce.C0.ESC}]${ge};${(0,G.toRgbString)(je)}${Ce.C1_ESCAPED.ST}`);break;case 1:if("ansi"===he)this._themeService.modifyColors(ze=>ze.ansi[le.index]=ie.rgba.toColor(...le.color));else{const ze=he;this._themeService.modifyColors(Ze=>Ze[ze]=ie.rgba.toColor(...le.color))}break;case 2:this._themeService.restoreColor(le.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(I){I?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Be.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(I){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Ce.C0.ESC+"[I"),this.updateCursorStyle(I),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var I;return null===(I=this.textarea)||void 0===I?void 0:I.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Ce.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const le=this.buffer.lines.get(this.buffer.ybase+this.buffer.y);if(!le)return;const he=Math.min(this.buffer.x,this.cols-1),ge=this._renderService.dimensions.css.cell.height,je=le.getWidth(he),ze=this._renderService.dimensions.css.cell.width*je,Ze=this.buffer.y*this._renderService.dimensions.css.cell.height;this.textarea.style.left=he*this._renderService.dimensions.css.cell.width+"px",this.textarea.style.top=Ze+"px",this.textarea.style.width=ze+"px",this.textarea.style.height=ge+"px",this.textarea.style.lineHeight=ge+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,M.addDisposableDomListener)(this.element,"copy",le=>{this.hasSelection()&&(0,y.copyHandler)(le,this._selectionService)}));const I=le=>(0,y.handlePasteEvent)(le,this.textarea,this.coreService,this.optionsService);this.register((0,M.addDisposableDomListener)(this.textarea,"paste",I)),this.register((0,M.addDisposableDomListener)(this.element,"paste",I)),this.register(Se.isFirefox?(0,M.addDisposableDomListener)(this.element,"mousedown",le=>{2===le.button&&(0,y.rightClickHandler)(le,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}):(0,M.addDisposableDomListener)(this.element,"contextmenu",le=>{(0,y.rightClickHandler)(le,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),Se.isLinux&&this.register((0,M.addDisposableDomListener)(this.element,"auxclick",le=>{1===le.button&&(0,y.moveTextAreaUnderMouseCursor)(le,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,M.addDisposableDomListener)(this.textarea,"keyup",I=>this._keyUp(I),!0)),this.register((0,M.addDisposableDomListener)(this.textarea,"keydown",I=>this._keyDown(I),!0)),this.register((0,M.addDisposableDomListener)(this.textarea,"keypress",I=>this._keyPress(I),!0)),this.register((0,M.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,M.addDisposableDomListener)(this.textarea,"compositionupdate",I=>this._compositionHelper.compositionupdate(I))),this.register((0,M.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,M.addDisposableDomListener)(this.textarea,"input",I=>this._inputEvent(I),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(I){var le;if(!I)throw new Error("Terminal requires a parent element.");I.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=I.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),I.appendChild(this.element);const he=Ue.createDocumentFragment();this._viewportElement=Ue.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),he.appendChild(this._viewportElement),this._viewportScrollArea=Ue.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Ue.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Ue.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),he.appendChild(this.screenElement),this.textarea=Ue.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",C.promptLabel),Se.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(E.CoreBrowserService,this.textarea,null!==(le=this._document.defaultView)&&void 0!==le?le:window),this._instantiationService.setService(L.ICoreBrowserService,this._coreBrowserService),this.register((0,M.addDisposableDomListener)(this.textarea,"focus",ge=>this._handleTextAreaFocus(ge))),this.register((0,M.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(u.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(V.ThemeService),this._instantiationService.setService(L.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(S.CharacterJoinerService),this._instantiationService.setService(L.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(R.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(L.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(ge=>this._onRender.fire(ge))),this.onResize(ge=>this._renderService.resize(ge.cols,ge.rows)),this._compositionView=Ue.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(_.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(he);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(O.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(P.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(ge=>this.scrollLines(ge.amount,ge.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(x.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(ge=>this.scrollLines(ge.amount,ge.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(ge=>this._renderService.handleSelectionChanged(ge.start,ge.end,ge.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(ge=>{this.textarea.value=ge,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(ge=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,M.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(T.BufferDecorationRenderer,this.screenElement)),this.register((0,M.addDisposableDomListener)(this.element,"mousedown",ge=>this._selectionService.handleMouseDown(ge))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Be.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",ge=>this._handleScreenReaderModeOptionChange(ge))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",ge=>{!this._overviewRulerRenderer&&ge&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(h.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const I=this,le=this.element;function he(ze){const Ze=I._mouseService.getMouseReportCoords(ze,I.screenElement);if(!Ze)return!1;let Ve,nt;switch(ze.overrideType||ze.type){case"mousemove":nt=32,void 0===ze.buttons?(Ve=3,void 0!==ze.button&&(Ve=ze.button<3?ze.button:3)):Ve=1&ze.buttons?0:4&ze.buttons?1:2&ze.buttons?2:3;break;case"mouseup":nt=0,Ve=ze.button<3?ze.button:3;break;case"mousedown":nt=1,Ve=ze.button<3?ze.button:3;break;case"wheel":if(0===I.viewport.getLinesScrolled(ze))return!1;nt=ze.deltaY<0?0:1,Ve=4;break;default:return!1}return!(void 0===nt||void 0===Ve||Ve>4)&&I.coreMouseService.triggerMouseEvent({col:Ze.col,row:Ze.row,x:Ze.x,y:Ze.y,button:Ve,action:nt,ctrl:ze.ctrlKey,alt:ze.altKey,shift:ze.shiftKey})}const ge={mouseup:null,wheel:null,mousedrag:null,mousemove:null},je={mouseup:ze=>(he(ze),ze.buttons||(this._document.removeEventListener("mouseup",ge.mouseup),ge.mousedrag&&this._document.removeEventListener("mousemove",ge.mousedrag)),this.cancel(ze)),wheel:ze=>(he(ze),this.cancel(ze,!0)),mousedrag:ze=>{ze.buttons&&he(ze)},mousemove:ze=>{ze.buttons||he(ze)}};this.register(this.coreMouseService.onProtocolChange(ze=>{ze?("debug"===this.optionsService.rawOptions.logLevel&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ze)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ze?ge.mousemove||(le.addEventListener("mousemove",je.mousemove),ge.mousemove=je.mousemove):(le.removeEventListener("mousemove",ge.mousemove),ge.mousemove=null),16&ze?ge.wheel||(le.addEventListener("wheel",je.wheel,{passive:!1}),ge.wheel=je.wheel):(le.removeEventListener("wheel",ge.wheel),ge.wheel=null),2&ze?ge.mouseup||(le.addEventListener("mouseup",je.mouseup),ge.mouseup=je.mouseup):(this._document.removeEventListener("mouseup",ge.mouseup),le.removeEventListener("mouseup",ge.mouseup),ge.mouseup=null),4&ze?ge.mousedrag||(ge.mousedrag=je.mousedrag):(this._document.removeEventListener("mousemove",ge.mousedrag),ge.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,M.addDisposableDomListener)(le,"mousedown",ze=>{if(ze.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ze))return he(ze),ge.mouseup&&this._document.addEventListener("mouseup",ge.mouseup),ge.mousedrag&&this._document.addEventListener("mousemove",ge.mousedrag),this.cancel(ze)})),this.register((0,M.addDisposableDomListener)(le,"wheel",ze=>{if(!ge.wheel){if(!this.buffer.hasScrollback){const Ze=this.viewport.getLinesScrolled(ze);if(0===Ze)return;const Ve=Ce.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ze.deltaY<0?"A":"B");let nt="";for(let Te=0;Te<Math.abs(Ze);Te++)nt+=Ve;return this.coreService.triggerDataEvent(nt,!0),this.cancel(ze,!0)}return this.viewport.handleWheel(ze)?this.cancel(ze):void 0}},{passive:!1})),this.register((0,M.addDisposableDomListener)(le,"touchstart",ze=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ze),this.cancel(ze)},{passive:!0})),this.register((0,M.addDisposableDomListener)(le,"touchmove",ze=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ze)?void 0:this.cancel(ze)},{passive:!1}))}refresh(I,le){var he;null===(he=this._renderService)||void 0===he||he.refreshRows(I,le)}updateCursorStyle(I){var le;null!==(le=this._selectionService)&&void 0!==le&&le.shouldColumnSelect(I)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(I,le,he=0){var ge;1===he?(super.scrollLines(I,le,he),this.refresh(0,this.rows-1)):null===(ge=this.viewport)||void 0===ge||ge.scrollLines(I)}paste(I){(0,y.paste)(I,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(I){this._customKeyEventHandler=I}registerLinkProvider(I){return this.linkifier2.registerLinkProvider(I)}registerCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const le=this._characterJoinerService.register(I);return this.refresh(0,this.rows-1),le}deregisterCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(I)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(I){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+I)}registerDecoration(I){return this._decorationService.registerDecoration(I)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(I,le,he){this._selectionService.setSelection(I,le,he)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var I;null===(I=this._selectionService)||void 0===I||I.clearSelection()}selectAll(){var I;null===(I=this._selectionService)||void 0===I||I.selectAll()}selectLines(I,le){var he;null===(he=this._selectionService)||void 0===he||he.selectLines(I,le)}_keyDown(I){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&!1===this._customKeyEventHandler(I))return!1;const le=this.browser.isMac&&this.options.macOptionIsMeta&&I.altKey;if(!le&&!this._compositionHelper.keydown(I))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;le||"Dead"!==I.key&&"AltGraph"!==I.key||(this._unprocessedDeadKey=!0);const he=(0,N.evaluateKeyboardEvent)(I,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(I),3===he.type||2===he.type){const ge=this.rows-1;return this.scrollLines(2===he.type?-ge:ge),this.cancel(I,!0)}return 1===he.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,I)||(he.cancel&&this.cancel(I,!0),!he.key||!!(I.key&&!I.ctrlKey&&!I.altKey&&!I.metaKey&&1===I.key.length&&I.key.charCodeAt(0)>=65&&I.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(he.key!==Ce.C0.ETX&&he.key!==Ce.C0.CR||(this.textarea.value=""),this._onKey.fire({key:he.key,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(he.key,!0),!this.optionsService.rawOptions.screenReaderMode||I.altKey||I.ctrlKey?this.cancel(I,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(I,le){const he=I.isMac&&!this.options.macOptionIsMeta&&le.altKey&&!le.ctrlKey&&!le.metaKey||I.isWindows&&le.altKey&&le.ctrlKey&&!le.metaKey||I.isWindows&&le.getModifierState("AltGraph");return"keypress"===le.type?he:he&&(!le.keyCode||le.keyCode>47)}_keyUp(I){var le;this._keyDownSeen=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(I)||(16===(le=I).keyCode||17===le.keyCode||18===le.keyCode||this.focus(),this.updateCursorStyle(I),this._keyPressHandled=!1)}_keyPress(I){let le;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&!1===this._customKeyEventHandler(I))return!1;if(this.cancel(I),I.charCode)le=I.charCode;else if(null==I.which)le=I.keyCode;else{if(0===I.which||0===I.charCode)return!1;le=I.which}return!(!le||(I.altKey||I.ctrlKey||I.metaKey)&&!this._isThirdLevelShift(this.browser,I)||(le=String.fromCharCode(le),this._onKey.fire({key:le,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(le,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(I){return!(!I.data||"insertText"!==I.inputType||I.composed&&this._keyDownSeen||this.optionsService.rawOptions.screenReaderMode||this._keyPressHandled||(this._unprocessedDeadKey=!1,this.coreService.triggerDataEvent(I.data,!0),this.cancel(I),0))}resize(I,le){I!==this.cols||le!==this.rows?super.resize(I,le):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(I,le){var he,ge;null===(he=this._charSizeService)||void 0===he||he.measure(),null===(ge=this.viewport)||void 0===ge||ge.syncScrollArea(!0)}clear(){var I;if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let le=1;le<this.rows;le++)this.buffer.lines.push(this.buffer.getBlankLine(Me.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),null===(I=this.viewport)||void 0===I||I.reset(),this.refresh(0,this.rows-1)}}reset(){var I,le;this.options.rows=this.rows,this.options.cols=this.cols;const he=this._customKeyEventHandler;this._setup(),super.reset(),null===(I=this._selectionService)||void 0===I||I.reset(),this._decorationService.reset(),null===(le=this.viewport)||void 0===le||le.reset(),this._customKeyEventHandler=he,this.refresh(0,this.rows-1)}clearTextureAtlas(){var I;null===(I=this._renderService)||void 0===I||I.clearTextureAtlas()}_reportFocus(){var I;null!==(I=this.element)&&void 0!==I&&I.classList.contains("focus")?this.coreService.triggerDataEvent(Ce.C0.ESC+"[I"):this.coreService.triggerDataEvent(Ce.C0.ESC+"[O")}_reportWindowsOptions(I){if(this._renderService)switch(I){case Ae.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const le=this._renderService.dimensions.css.canvas.width.toFixed(0),he=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Ce.C0.ESC}[4;${he};${le}t`);break;case Ae.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const ge=this._renderService.dimensions.css.cell.width.toFixed(0),je=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Ce.C0.ESC}[6;${je};${ge}t`)}}cancel(I,le){if(this.options.cancelEvents||le)return I.preventDefault(),I.stopPropagation(),!1}}},9924:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TimeBasedDebouncer=void 0,g.TimeBasedDebouncer=class{constructor(v,y=1e3){this._renderCallback=v,this._debounceThresholdMS=y,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(v,y,M){this._rowCount=M,v=void 0!==v?v:0,y=void 0!==y?y:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,v):v,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,y):y;const m=Date.now();if(m-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=m,this._innerRefresh();else if(!this._additionalRefreshRequested){const k=this._debounceThresholdMS-(m-this._lastRefreshMs);this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},k)}}_innerRefresh(){if(void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return;const v=Math.max(this._rowStart,0),y=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(v,y)}}},1680:function(de,g,v){var y=this&&this.__decorate||function(_,h,u,S){var E,O=arguments.length,R=O<3?h:null===S?S=Object.getOwnPropertyDescriptor(h,u):S;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(_,h,u,S);else for(var x=_.length-1;x>=0;x--)(E=_[x])&&(R=(O<3?E(R):O>3?E(h,u,R):E(h,u))||R);return O>3&&R&&Object.defineProperty(h,u,R),R},M=this&&this.__param||function(_,h){return function(u,S){h(u,S,_)}};Object.defineProperty(g,"__esModule",{value:!0}),g.Viewport=void 0;const m=v(3656),C=v(4725),k=v(8460),P=v(844),T=v(2585);let l=g.Viewport=class extends P.Disposable{constructor(_,h,u,S,E,O,R,x){super(),this._viewportElement=_,this._scrollArea=h,this._bufferService=u,this._optionsService=S,this._charSizeService=E,this._renderService=O,this._coreBrowserService=R,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new k.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,m.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(L=>this._activeBuffer=L.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(L=>this._renderDimensions=L)),this._handleThemeChange(x.colors),this.register(x.onChangeColors(L=>this._handleThemeChange(L))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(_){this._viewportElement.style.backgroundColor=_.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(_){if(_)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const h=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==h&&(this._lastRecordedBufferHeight=h,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const _=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==_&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=_),this._refreshAnimationFrame=null}syncScrollArea(_=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(_);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(_)}_handleScroll(_){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const h=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||-1===this._smoothScrollState.origin||-1===this._smoothScrollState.target)return;const _=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(_*(this._smoothScrollState.target-this._smoothScrollState.origin)),_<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(_,h){return!(h<0&&0!==this._viewportElement.scrollTop||h>0&&this._viewportElement.scrollTop+this._lastRecordedViewportHeight<this._lastRecordedBufferHeight)||(_.cancelable&&_.preventDefault(),!1)}handleWheel(_){const h=this._getPixelsScrolled(_);return 0!==h&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,-1===this._smoothScrollState.target?this._smoothScrollState.target=this._viewportElement.scrollTop+h:this._smoothScrollState.target+=h,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=h,this._bubbleScroll(_,h))}scrollLines(_){if(0!==_)if(this._optionsService.rawOptions.smoothScrollDuration){const h=_*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+h,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:_,suppressScrollEvent:!1})}_getPixelsScrolled(_){if(0===_.deltaY||_.shiftKey)return 0;let h=this._applyScrollModifier(_.deltaY,_);return _.deltaMode===WheelEvent.DOM_DELTA_LINE?h*=this._currentRowHeight:_.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(h*=this._currentRowHeight*this._bufferService.rows),h}getBufferElements(_,h){var u;let S,E="";const O=[],R=h??this._bufferService.buffer.lines.length,x=this._bufferService.buffer.lines;for(let L=_;L<R;L++){const V=x.get(L);if(!V)continue;const ie=null===(u=x.get(L+1))||void 0===u?void 0:u.isWrapped;if(E+=V.translateToString(!ie),!ie||L===x.length-1){const X=document.createElement("div");X.textContent=E,O.push(X),E.length>0&&(S=X),E=""}}return{bufferElements:O,cursorElement:S}}getLinesScrolled(_){if(0===_.deltaY||_.shiftKey)return 0;let h=this._applyScrollModifier(_.deltaY,_);return _.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(h/=this._currentRowHeight+0,this._wheelPartialScroll+=h,h=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):_.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(h*=this._bufferService.rows),h}_applyScrollModifier(_,h){const u=this._optionsService.rawOptions.fastScrollModifier;return"alt"===u&&h.altKey||"ctrl"===u&&h.ctrlKey||"shift"===u&&h.shiftKey?_*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:_*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(_){this._lastTouchY=_.touches[0].pageY}handleTouchMove(_){const h=this._lastTouchY-_.touches[0].pageY;return this._lastTouchY=_.touches[0].pageY,0!==h&&(this._viewportElement.scrollTop+=h,this._bubbleScroll(_,h))}};g.Viewport=l=y([M(2,T.IBufferService),M(3,T.IOptionsService),M(4,C.ICharSizeService),M(5,C.IRenderService),M(6,C.ICoreBrowserService),M(7,C.IThemeService)],l)},3107:function(de,g,v){var y=this&&this.__decorate||function(l,_,h,u){var S,E=arguments.length,O=E<3?_:null===u?u=Object.getOwnPropertyDescriptor(_,h):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)O=Reflect.decorate(l,_,h,u);else for(var R=l.length-1;R>=0;R--)(S=l[R])&&(O=(E<3?S(O):E>3?S(_,h,O):S(_,h))||O);return E>3&&O&&Object.defineProperty(_,h,O),O},M=this&&this.__param||function(l,_){return function(h,u){_(h,u,l)}};Object.defineProperty(g,"__esModule",{value:!0}),g.BufferDecorationRenderer=void 0;const m=v(3656),C=v(4725),k=v(844),P=v(2585);let T=g.BufferDecorationRenderer=class extends k.Disposable{constructor(l,_,h,u){super(),this._screenElement=l,this._bufferService=_,this._decorationService=h,this._renderService=u,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,m.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(S=>this._removeDecoration(S))),this.register((0,k.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){void 0===this._animationFrame&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const l of this._decorationService.decorations)this._renderDecoration(l);this._dimensionsChanged=!1}_renderDecoration(l){this._refreshStyle(l),this._dimensionsChanged&&this._refreshXPosition(l)}_createElement(l){var _,h;const u=document.createElement("div");u.classList.add("xterm-decoration"),u.classList.toggle("xterm-decoration-top-layer","top"===(null===(_=l?.options)||void 0===_?void 0:_.layer)),u.style.width=`${Math.round((l.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,u.style.height=(l.options.height||1)*this._renderService.dimensions.css.cell.height+"px",u.style.top=(l.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",u.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const S=null!==(h=l.options.x)&&void 0!==h?h:0;return S&&S>this._bufferService.cols&&(u.style.display="none"),this._refreshXPosition(l,u),u}_refreshStyle(l){const _=l.marker.line-this._bufferService.buffers.active.ydisp;if(_<0||_>=this._bufferService.rows)l.element&&(l.element.style.display="none",l.onRenderEmitter.fire(l.element));else{let h=this._decorationElements.get(l);h||(h=this._createElement(l),l.element=h,this._decorationElements.set(l,h),this._container.appendChild(h),l.onDispose(()=>{this._decorationElements.delete(l),h.remove()})),h.style.top=_*this._renderService.dimensions.css.cell.height+"px",h.style.display=this._altBufferIsActive?"none":"block",l.onRenderEmitter.fire(h)}}_refreshXPosition(l,_=l.element){var h;if(!_)return;const u=null!==(h=l.options.x)&&void 0!==h?h:0;"right"===(l.options.anchor||"left")?_.style.right=u?u*this._renderService.dimensions.css.cell.width+"px":"":_.style.left=u?u*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(l){var _;null===(_=this._decorationElements.get(l))||void 0===_||_.remove(),this._decorationElements.delete(l),l.dispose()}};g.BufferDecorationRenderer=T=y([M(1,P.IBufferService),M(2,P.IDecorationService),M(3,C.IRenderService)],T)},5871:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.ColorZoneStore=void 0,g.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(v){if(v.options.overviewRulerOptions){for(const y of this._zones)if(y.color===v.options.overviewRulerOptions.color&&y.position===v.options.overviewRulerOptions.position){if(this._lineIntersectsZone(y,v.marker.line))return;if(this._lineAdjacentToZone(y,v.marker.line,v.options.overviewRulerOptions.position))return void this._addLineToZone(y,v.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=v.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=v.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=v.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=v.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:v.options.overviewRulerOptions.color,position:v.options.overviewRulerOptions.position,startBufferLine:v.marker.line,endBufferLine:v.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(v){this._linePadding=v}_lineIntersectsZone(v,y){return y>=v.startBufferLine&&y<=v.endBufferLine}_lineAdjacentToZone(v,y,M){return y>=v.startBufferLine-this._linePadding[M||"full"]&&y<=v.endBufferLine+this._linePadding[M||"full"]}_addLineToZone(v,y){v.startBufferLine=Math.min(v.startBufferLine,y),v.endBufferLine=Math.max(v.endBufferLine,y)}}},5744:function(de,g,v){var y=this&&this.__decorate||function(S,E,O,R){var x,L=arguments.length,V=L<3?E:null===R?R=Object.getOwnPropertyDescriptor(E,O):R;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)V=Reflect.decorate(S,E,O,R);else for(var ie=S.length-1;ie>=0;ie--)(x=S[ie])&&(V=(L<3?x(V):L>3?x(E,O,V):x(E,O))||V);return L>3&&V&&Object.defineProperty(E,O,V),V},M=this&&this.__param||function(S,E){return function(O,R){E(O,R,S)}};Object.defineProperty(g,"__esModule",{value:!0}),g.OverviewRulerRenderer=void 0;const m=v(5871),C=v(3656),k=v(4725),P=v(844),T=v(2585),l={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0};let u=g.OverviewRulerRenderer=class extends P.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(S,E,O,R,x,L,V){var ie;super(),this._viewportElement=S,this._screenElement=E,this._bufferService=O,this._decorationService=R,this._renderService=x,this._optionsService=L,this._coreBrowseService=V,this._colorZoneStore=new m.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),null===(ie=this._viewportElement.parentElement)||void 0===ie||ie.insertBefore(this._canvas,this._viewportElement);const X=this._canvas.getContext("2d");if(!X)throw new Error("Ctx cannot be null");this._ctx=X,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,P.toDisposable)(()=>{var J;null===(J=this._canvas)||void 0===J||J.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,C.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const S=Math.floor(this._canvas.width/3),E=Math.ceil(this._canvas.width/3);_.full=this._canvas.width,_.left=S,_.center=E,_.right=S,this._refreshDrawHeightConstants(),h.full=0,h.left=0,h.center=_.left,h.right=_.left+_.center}_refreshDrawHeightConstants(){l.full=Math.round(2*this._coreBrowseService.dpr);const E=Math.round(Math.max(Math.min(this._canvas.height/this._bufferService.buffer.lines.length,12),6)*this._coreBrowseService.dpr);l.left=E,l.center=E,l.right=E}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const E of this._decorationService.decorations)this._colorZoneStore.addDecoration(E);this._ctx.lineWidth=1;const S=this._colorZoneStore.zones;for(const E of S)"full"!==E.position&&this._renderColorZone(E);for(const E of S)"full"===E.position&&this._renderColorZone(E);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(S){this._ctx.fillStyle=S.color,this._ctx.fillRect(h[S.position||"full"],Math.round(S.startBufferLine/this._bufferService.buffers.active.lines.length*(this._canvas.height-1)-l[S.position||"full"]/2),_[S.position||"full"],Math.round((S.endBufferLine-S.startBufferLine)/this._bufferService.buffers.active.lines.length*(this._canvas.height-1)+l[S.position||"full"]))}_queueRefresh(S,E){this._shouldUpdateDimensions=S||this._shouldUpdateDimensions,this._shouldUpdateAnchor=E||this._shouldUpdateAnchor,void 0===this._animationFrame&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};g.OverviewRulerRenderer=u=y([M(2,T.IBufferService),M(3,T.IDecorationService),M(4,k.IRenderService),M(5,T.IOptionsService),M(6,k.ICoreBrowserService)],u)},2950:function(de,g,v){var y=this&&this.__decorate||function(T,l,_,h){var u,S=arguments.length,E=S<3?l:null===h?h=Object.getOwnPropertyDescriptor(l,_):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(T,l,_,h);else for(var O=T.length-1;O>=0;O--)(u=T[O])&&(E=(S<3?u(E):S>3?u(l,_,E):u(l,_))||E);return S>3&&E&&Object.defineProperty(l,_,E),E},M=this&&this.__param||function(T,l){return function(_,h){l(_,h,T)}};Object.defineProperty(g,"__esModule",{value:!0}),g.CompositionHelper=void 0;const m=v(4725),C=v(2585),k=v(2584);let P=g.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(T,l,_,h,u,S){this._textarea=T,this._compositionView=l,this._bufferService=_,this._optionsService=h,this._coreService=u,this._renderService=S,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(T){this._compositionView.textContent=T.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(T){if(this._isComposing||this._isSendingComposition){if(229===T.keyCode||16===T.keyCode||17===T.keyCode||18===T.keyCode)return!1;this._finalizeComposition(!1)}return 229!==T.keyCode||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(T){if(this._compositionView.classList.remove("active"),this._isComposing=!1,T){const l={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let _;this._isSendingComposition=!1,l.start+=this._dataAlreadySent.length,_=this._isComposing?this._textarea.value.substring(l.start,l.end):this._textarea.value.substring(l.start),_.length>0&&this._coreService.triggerDataEvent(_,!0)}},0)}else{this._isSendingComposition=!1;const l=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(l,!0)}}_handleAnyTextareaChanges(){const T=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const l=this._textarea.value,_=l.replace(T,"");this._dataAlreadySent=_,l.length>T.length?this._coreService.triggerDataEvent(_,!0):l.length<T.length?this._coreService.triggerDataEvent(`${k.C0.DEL}`,!0):l.length===T.length&&l!==T&&this._coreService.triggerDataEvent(l,!0)}},0)}updateCompositionElements(T){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const l=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),_=this._renderService.dimensions.css.cell.height,h=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,u=l*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=u+"px",this._compositionView.style.top=h+"px",this._compositionView.style.height=_+"px",this._compositionView.style.lineHeight=_+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const S=this._compositionView.getBoundingClientRect();this._textarea.style.left=u+"px",this._textarea.style.top=h+"px",this._textarea.style.width=Math.max(S.width,1)+"px",this._textarea.style.height=Math.max(S.height,1)+"px",this._textarea.style.lineHeight=S.height+"px"}T||setTimeout(()=>this.updateCompositionElements(!0),0)}}};g.CompositionHelper=P=y([M(2,C.IBufferService),M(3,C.IOptionsService),M(4,C.ICoreService),M(5,m.IRenderService)],P)},9806:(de,g)=>{function v(y,M,m){const C=m.getBoundingClientRect(),k=y.getComputedStyle(m),P=parseInt(k.getPropertyValue("padding-left")),T=parseInt(k.getPropertyValue("padding-top"));return[M.clientX-C.left-P,M.clientY-C.top-T]}Object.defineProperty(g,"__esModule",{value:!0}),g.getCoords=g.getCoordsRelativeToElement=void 0,g.getCoordsRelativeToElement=v,g.getCoords=function(y,M,m,C,k,P,T,l,_){if(!P)return;const h=v(y,M,m);return h?(h[0]=Math.ceil((h[0]+(_?T/2:0))/T),h[1]=Math.ceil(h[1]/l),h[0]=Math.min(Math.max(h[0],1),C+(_?1:0)),h[1]=Math.min(Math.max(h[1],1),k),h):void 0}},9504:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.moveToCellSequence=void 0;const y=v(2584);function M(l,_,h,u){const S=l-m(l,h),E=_-m(_,h);return T(Math.abs(S-E)-function(R,x,L){let V=0;const ie=R-m(R,L),X=x-m(x,L);for(let J=0;J<Math.abs(ie-X);J++){const be="A"===C(R,x)?-1:1,Se=L.buffer.lines.get(ie+be*J);Se?.isWrapped&&V++}return V}(l,_,h),P(C(l,_),u))}function m(l,_){let h=0,u=_.buffer.lines.get(l),S=u?.isWrapped;for(;S&&l>=0&&l<_.rows;)h++,u=_.buffer.lines.get(--l),S=u?.isWrapped;return h}function C(l,_){return l>_?"A":"B"}function k(l,_,h,u,S,E){let O=l,R=_,x="";for(;O!==h||R!==u;)O+=S?1:-1,S&&O>E.cols-1?(x+=E.buffer.translateBufferLineToString(R,!1,l,O),O=0,l=0,R++):!S&&O<0&&(x+=E.buffer.translateBufferLineToString(R,!1,0,l+1),O=E.cols-1,l=O,R--);return x+E.buffer.translateBufferLineToString(R,!1,l,O)}function P(l,_){return y.C0.ESC+(_?"O":"[")+l}function T(l,_){l=Math.floor(l);let h="";for(let u=0;u<l;u++)h+=_;return h}g.moveToCellSequence=function(l,_,h,u){const S=h.buffer.x,E=h.buffer.y;if(!h.buffer.hasScrollback)return x=S,(0===M(L=E,_,X=h,J=u).length?"":T(k(x,L,x,L-m(L,X),!1,X).length,P("D",J)))+M(E,_,h,u)+function(x,L,V,ie,X,J){let be;be=M(L,ie,X,J).length>0?ie-m(ie,X):L;const Se=ie,Me=function(Ce,N,G,Q,se,Ae){let Be;return Be=M(G,Q,se,Ae).length>0?Q-m(Q,se):N,Ce<G&&Be<=Q||Ce>=G&&Be<Q?"C":"D"}(x,L,V,ie,X,J);return T(k(x,be,V,Se,"C"===Me,X).length,P(Me,J))}(S,E,l,_,h,u);var x,L,X,J;let O;if(E===_)return O=S>l?"D":"C",T(Math.abs(S-l),P(O,u));O=E>_?"D":"C";const R=Math.abs(E-_);return T(function(x,L){return L.cols-x}(E>_?l:S,h)+(R-1)*h.cols+1+((E>_?S:l)-1),P(O,u))}},1296:function(de,g,v){var y=this&&this.__decorate||function(X,J,be,Se){var Me,Ce=arguments.length,N=Ce<3?J:null===Se?Se=Object.getOwnPropertyDescriptor(J,be):Se;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)N=Reflect.decorate(X,J,be,Se);else for(var G=X.length-1;G>=0;G--)(Me=X[G])&&(N=(Ce<3?Me(N):Ce>3?Me(J,be,N):Me(J,be))||N);return Ce>3&&N&&Object.defineProperty(J,be,N),N},M=this&&this.__param||function(X,J){return function(be,Se){J(be,Se,X)}};Object.defineProperty(g,"__esModule",{value:!0}),g.DomRenderer=void 0;const m=v(3787),C=v(2550),k=v(2223),P=v(6171),T=v(4725),l=v(8055),_=v(8460),h=v(844),u=v(2585),S="xterm-dom-renderer-owner-",E="xterm-rows",O="xterm-fg-",R="xterm-bg-",x="xterm-focus",L="xterm-selection";let V=1,ie=g.DomRenderer=class extends h.Disposable{constructor(X,J,be,Se,Me,Ce,N,G,Q,se){super(),this._element=X,this._screenElement=J,this._viewportElement=be,this._linkifier2=Se,this._charSizeService=Ce,this._optionsService=N,this._bufferService=G,this._coreBrowserService=Q,this._themeService=se,this._terminalClass=V++,this._rowElements=[],this.onRequestRedraw=this.register(new _.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(E),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(L),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,P.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(Ae=>this._injectCss(Ae))),this._injectCss(this._themeService.colors),this._rowFactory=Me.createInstance(m.DomRendererRowFactory,document),this._element.classList.add(S+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(Ae=>this._handleLinkHover(Ae))),this.register(this._linkifier2.onHideLinkUnderline(Ae=>this._handleLinkLeave(Ae))),this.register((0,h.toDisposable)(()=>{this._element.classList.remove(S+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new C.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const X=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*X,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*X),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/X),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/X),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const be of this._rowElements)be.style.width=`${this.dimensions.css.canvas.width}px`,be.style.height=`${this.dimensions.css.cell.height}px`,be.style.lineHeight=`${this.dimensions.css.cell.height}px`,be.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement)),this._dimensionsStyleElement.textContent=`${this._terminalSelector} .${E} span { display: inline-block; height: 100%; vertical-align: top;}`,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(X){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let J=`${this._terminalSelector} .${E} { color: ${X.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;J+=`${this._terminalSelector} .${E} .xterm-dim { color: ${l.color.multiplyOpacity(X.foreground,.5).css};}`,J+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,J+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",J+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${X.cursor.css};  color: ${X.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${X.cursor.css}; }}`,J+=`${this._terminalSelector} .${E}.${x} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${E}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-block { background-color: ${X.cursor.css}; color: ${X.cursorAccent.css};}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${X.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${X.cursor.css} inset;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${X.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,J+=`${this._terminalSelector} .${L} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${L} div { position: absolute; background-color: ${X.selectionBackgroundOpaque.css};}${this._terminalSelector} .${L} div { position: absolute; background-color: ${X.selectionInactiveBackgroundOpaque.css};}`;for(const[be,Se]of X.ansi.entries())J+=`${this._terminalSelector} .${O}${be} { color: ${Se.css}; }${this._terminalSelector} .${O}${be}.xterm-dim { color: ${l.color.multiplyOpacity(Se,.5).css}; }${this._terminalSelector} .${R}${be} { background-color: ${Se.css}; }`;J+=`${this._terminalSelector} .${O}${k.INVERTED_DEFAULT_COLOR} { color: ${l.color.opaque(X.background).css}; }${this._terminalSelector} .${O}${k.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${l.color.multiplyOpacity(l.color.opaque(X.background),.5).css}; }${this._terminalSelector} .${R}${k.INVERTED_DEFAULT_COLOR} { background-color: ${X.foreground.css}; }`,this._themeStyleElement.textContent=J}_setDefaultSpacing(){const X=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${X}px`,this._rowFactory.defaultSpacing=X}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(X,J){for(let be=this._rowElements.length;be<=J;be++){const Se=document.createElement("div");this._rowContainer.appendChild(Se),this._rowElements.push(Se)}for(;this._rowElements.length>J;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(X,J){this._refreshRowElements(X,J),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(x)}handleFocus(){this._rowContainer.classList.add(x),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(X,J,be){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(X,J,be),this.renderRows(0,this._bufferService.rows-1),!X||!J)return;const Se=X[1]-this._bufferService.buffer.ydisp,Me=J[1]-this._bufferService.buffer.ydisp,Ce=Math.max(Se,0),N=Math.min(Me,this._bufferService.rows-1);if(Ce>=this._bufferService.rows||N<0)return;const G=document.createDocumentFragment();if(be){const Q=X[0]>J[0];G.appendChild(this._createSelectionElement(Ce,Q?J[0]:X[0],Q?X[0]:J[0],N-Ce+1))}else G.appendChild(this._createSelectionElement(Ce,Se===Ce?X[0]:0,Ce===Me?J[0]:this._bufferService.cols)),G.appendChild(this._createSelectionElement(Ce+1,0,this._bufferService.cols,N-Ce-1)),Ce!==N&&G.appendChild(this._createSelectionElement(N,0,Me===N?J[0]:this._bufferService.cols));this._selectionContainer.appendChild(G)}_createSelectionElement(X,J,be,Se=1){const Me=document.createElement("div");return Me.style.height=Se*this.dimensions.css.cell.height+"px",Me.style.top=X*this.dimensions.css.cell.height+"px",Me.style.left=J*this.dimensions.css.cell.width+"px",Me.style.width=this.dimensions.css.cell.width*(be-J)+"px",Me}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const X of this._rowElements)X.replaceChildren()}renderRows(X,J){const be=this._bufferService.buffer,Se=be.ybase+be.y,Me=Math.min(be.x,this._bufferService.cols-1),Ce=this._optionsService.rawOptions.cursorBlink,N=this._optionsService.rawOptions.cursorStyle,G=this._optionsService.rawOptions.cursorInactiveStyle;for(let Q=X;Q<=J;Q++){const se=Q+be.ydisp,Ae=this._rowElements[Q],Be=be.lines.get(se);if(!Ae||!Be)break;Ae.replaceChildren(...this._rowFactory.createRow(Be,se,se===Se,N,G,Me,Ce,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${S}${this._terminalClass}`}_handleLinkHover(X){this._setCellUnderline(X.x1,X.x2,X.y1,X.y2,X.cols,!0)}_handleLinkLeave(X){this._setCellUnderline(X.x1,X.x2,X.y1,X.y2,X.cols,!1)}_setCellUnderline(X,J,be,Se,Me,Ce){be<0&&(X=0),Se<0&&(J=0);const N=this._bufferService.rows-1;be=Math.max(Math.min(be,N),0),Se=Math.max(Math.min(Se,N),0),Me=Math.min(Me,this._bufferService.cols);const G=this._bufferService.buffer,Q=G.ybase+G.y,se=Math.min(G.x,Me-1),Ae=this._optionsService.rawOptions.cursorBlink,Be=this._optionsService.rawOptions.cursorStyle,Ue=this._optionsService.rawOptions.cursorInactiveStyle;for(let Re=be;Re<=Se;++Re){const Ne=Re+G.ydisp,I=this._rowElements[Re],le=G.lines.get(Ne);if(!I||!le)break;I.replaceChildren(...this._rowFactory.createRow(le,Ne,Ne===Q,Be,Ue,se,Ae,this.dimensions.css.cell.width,this._widthCache,Ce?Re===be?X:0:-1,Ce?(Re===Se?J:Me)-1:-1))}}};g.DomRenderer=ie=y([M(4,u.IInstantiationService),M(5,T.ICharSizeService),M(6,u.IOptionsService),M(7,u.IBufferService),M(8,T.ICoreBrowserService),M(9,T.IThemeService)],ie)},3787:function(de,g,v){var y=this&&this.__decorate||function(O,R,x,L){var V,ie=arguments.length,X=ie<3?R:null===L?L=Object.getOwnPropertyDescriptor(R,x):L;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)X=Reflect.decorate(O,R,x,L);else for(var J=O.length-1;J>=0;J--)(V=O[J])&&(X=(ie<3?V(X):ie>3?V(R,x,X):V(R,x))||X);return ie>3&&X&&Object.defineProperty(R,x,X),X},M=this&&this.__param||function(O,R){return function(x,L){R(x,L,O)}};Object.defineProperty(g,"__esModule",{value:!0}),g.DomRendererRowFactory=void 0;const m=v(2223),C=v(643),k=v(511),P=v(2585),T=v(8055),l=v(4725),_=v(4269),h=v(6171),u=v(3734);let S=g.DomRendererRowFactory=class{constructor(O,R,x,L,V,ie,X){this._document=O,this._characterJoinerService=R,this._optionsService=x,this._coreBrowserService=L,this._coreService=V,this._decorationService=ie,this._themeService=X,this._workCell=new k.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(O,R,x){this._selectionStart=O,this._selectionEnd=R,this._columnSelectMode=x}createRow(O,R,x,L,V,ie,X,J,be,Se,Me){const Ce=[],N=this._characterJoinerService.getJoinedCharacters(R),G=this._themeService.colors;let Q,se=O.getNoBgTrimmedLength();x&&se<ie+1&&(se=ie+1);let Ae=0,Be="",Ue=0,Re=0,Ne=0,I=!1,le=0,he=!1,ge=0;const je=[],ze=-1!==Se&&-1!==Me;for(let Ze=0;Ze<se;Ze++){O.loadCell(Ze,this._workCell);let Ve=this._workCell.getWidth();if(0===Ve)continue;let nt=!1,Te=Ze,Oe=this._workCell;if(N.length>0&&Ze===N[0][0]){nt=!0;const pt=N.shift();Oe=new _.JoinedCellData(this._workCell,O.translateToString(!0,pt[0],pt[1]),pt[1]-pt[0]),Te=pt[1]-1,Ve=Oe.getWidth()}const Qe=this._isCellInSelection(Ze,R),tt=x&&Ze===ie,_t=ze&&Ze>=Se&&Ze<=Me;let Wt=!1;this._decorationService.forEachDecorationAtCell(Ze,R,void 0,pt=>{Wt=!0});let dt=Oe.getChars()||C.WHITESPACE_CELL_CHAR;if(" "===dt&&(Oe.isUnderline()||Oe.isOverline())&&(dt="\xa0"),ge=Ve*J-be.get(dt,Oe.isBold(),Oe.isItalic()),Q){if(Ae&&(Qe&&he||!Qe&&!he&&Oe.bg===Ue)&&(Qe&&he&&G.selectionForeground||Oe.fg===Re)&&Oe.extended.ext===Ne&&_t===I&&ge===le&&!tt&&!nt&&!Wt){Be+=dt,Ae++;continue}Ae&&(Q.textContent=Be),Q=this._document.createElement("span"),Ae=0,Be=""}else Q=this._document.createElement("span");if(Ue=Oe.bg,Re=Oe.fg,Ne=Oe.extended.ext,I=_t,le=ge,he=Qe,nt&&ie>=Ze&&ie<=Te&&(ie=Ze),!this._coreService.isCursorHidden&&tt)if(je.push("xterm-cursor"),this._coreBrowserService.isFocused)X&&je.push("xterm-cursor-blink"),je.push("bar"===L?"xterm-cursor-bar":"underline"===L?"xterm-cursor-underline":"xterm-cursor-block");else if(V)switch(V){case"outline":je.push("xterm-cursor-outline");break;case"block":je.push("xterm-cursor-block");break;case"bar":je.push("xterm-cursor-bar");break;case"underline":je.push("xterm-cursor-underline")}if(Oe.isBold()&&je.push("xterm-bold"),Oe.isItalic()&&je.push("xterm-italic"),Oe.isDim()&&je.push("xterm-dim"),Be=Oe.isInvisible()?C.WHITESPACE_CELL_CHAR:Oe.getChars()||C.WHITESPACE_CELL_CHAR,Oe.isUnderline()&&(je.push(`xterm-underline-${Oe.extended.underlineStyle}`)," "===Be&&(Be="\xa0"),!Oe.isUnderlineColorDefault()))if(Oe.isUnderlineColorRGB())Q.style.textDecorationColor=`rgb(${u.AttributeData.toColorRGB(Oe.getUnderlineColor()).join(",")})`;else{let pt=Oe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Oe.isBold()&&pt<8&&(pt+=8),Q.style.textDecorationColor=G.ansi[pt].css}Oe.isOverline()&&(je.push("xterm-overline")," "===Be&&(Be="\xa0")),Oe.isStrikethrough()&&je.push("xterm-strikethrough"),_t&&(Q.style.textDecoration="underline");let bt=Oe.getFgColor(),Ut=Oe.getFgColorMode(),ct=Oe.getBgColor(),Zt=Oe.getBgColorMode();const Qt=!!Oe.isInverse();if(Qt){const pt=bt;bt=ct,ct=pt;const xi=Ut;Ut=Zt,Zt=xi}let Ft,Jt,Kt,zt=!1;switch(this._decorationService.forEachDecorationAtCell(Ze,R,void 0,pt=>{"top"!==pt.options.layer&&zt||(pt.backgroundColorRGB&&(Zt=50331648,ct=pt.backgroundColorRGB.rgba>>8&16777215,Ft=pt.backgroundColorRGB),pt.foregroundColorRGB&&(Ut=50331648,bt=pt.foregroundColorRGB.rgba>>8&16777215,Jt=pt.foregroundColorRGB),zt="top"===pt.options.layer)}),!zt&&Qe&&(Ft=this._coreBrowserService.isFocused?G.selectionBackgroundOpaque:G.selectionInactiveBackgroundOpaque,ct=Ft.rgba>>8&16777215,Zt=50331648,zt=!0,G.selectionForeground&&(Ut=50331648,bt=G.selectionForeground.rgba>>8&16777215,Jt=G.selectionForeground)),zt&&je.push("xterm-decoration-top"),Zt){case 16777216:case 33554432:Kt=G.ansi[ct],je.push(`xterm-bg-${ct}`);break;case 50331648:Kt=T.rgba.toColor(ct>>16,ct>>8&255,255&ct),this._addStyle(Q,`background-color:#${E((ct>>>0).toString(16),"0",6)}`);break;default:Qt?(Kt=G.foreground,je.push(`xterm-bg-${m.INVERTED_DEFAULT_COLOR}`)):Kt=G.background}switch(Ft||Oe.isDim()&&(Ft=T.color.multiplyOpacity(Kt,.5)),Ut){case 16777216:case 33554432:Oe.isBold()&&bt<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(bt+=8),this._applyMinimumContrast(Q,Kt,G.ansi[bt],Oe,Ft,void 0)||je.push(`xterm-fg-${bt}`);break;case 50331648:const pt=T.rgba.toColor(bt>>16&255,bt>>8&255,255&bt);this._applyMinimumContrast(Q,Kt,pt,Oe,Ft,Jt)||this._addStyle(Q,`color:#${E(bt.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(Q,Kt,G.foreground,Oe,Ft,void 0)||Qt&&je.push(`xterm-fg-${m.INVERTED_DEFAULT_COLOR}`)}je.length&&(Q.className=je.join(" "),je.length=0),tt||nt||Wt?Q.textContent=Be:Ae++,ge!==this.defaultSpacing&&(Q.style.letterSpacing=`${ge}px`),Ce.push(Q),Ze=Te}return Q&&Ae&&(Q.textContent=Be),Ce}_applyMinimumContrast(O,R,x,L,V,ie){if(1===this._optionsService.rawOptions.minimumContrastRatio||(0,h.excludeFromContrastRatioDemands)(L.getCode()))return!1;const X=this._getContrastCache(L);let J;if(V||ie||(J=X.getColor(R.rgba,x.rgba)),void 0===J){const be=this._optionsService.rawOptions.minimumContrastRatio/(L.isDim()?2:1);J=T.color.ensureContrastRatio(V||R,ie||x,be),X.setColor((V||R).rgba,(ie||x).rgba,J??null)}return!!J&&(this._addStyle(O,`color:${J.css}`),!0)}_getContrastCache(O){return O.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(O,R){O.setAttribute("style",`${O.getAttribute("style")||""}${R};`)}_isCellInSelection(O,R){const x=this._selectionStart,L=this._selectionEnd;return!(!x||!L)&&(this._columnSelectMode?x[0]<=L[0]?O>=x[0]&&R>=x[1]&&O<L[0]&&R<=L[1]:O<x[0]&&R>=x[1]&&O>=L[0]&&R<=L[1]:R>x[1]&&R<L[1]||x[1]===L[1]&&R===x[1]&&O>=x[0]&&O<L[0]||x[1]<L[1]&&R===L[1]&&O<L[0]||x[1]<L[1]&&R===x[1]&&O>=x[0])}};function E(O,R,x){for(;O.length<x;)O=R+O;return O}g.DomRendererRowFactory=S=y([M(1,l.ICharacterJoinerService),M(2,P.IOptionsService),M(3,l.ICoreBrowserService),M(4,P.ICoreService),M(5,P.IDecorationService),M(6,l.IThemeService)],S)},2550:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.WidthCache=void 0,g.WidthCache=class{constructor(v){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=v.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const y=v.createElement("span"),M=v.createElement("span");M.style.fontWeight="bold";const m=v.createElement("span");m.style.fontStyle="italic";const C=v.createElement("span");C.style.fontWeight="bold",C.style.fontStyle="italic",this._measureElements=[y,M,m,C],this._container.appendChild(y),this._container.appendChild(M),this._container.appendChild(m),this._container.appendChild(C),v.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(v,y,M,m){v===this._font&&y===this._fontSize&&M===this._weight&&m===this._weightBold||(this._font=v,this._fontSize=y,this._weight=M,this._weightBold=m,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${M}`,this._measureElements[1].style.fontWeight=`${m}`,this._measureElements[2].style.fontWeight=`${M}`,this._measureElements[3].style.fontWeight=`${m}`,this.clear())}get(v,y,M){let m=0;if(!y&&!M&&1===v.length&&(m=v.charCodeAt(0))<256)return-9999!==this._flat[m]?this._flat[m]:this._flat[m]=this._measure(v,0);let C=v;y&&(C+="B"),M&&(C+="I");let k=this._holey.get(C);if(void 0===k){let P=0;y&&(P|=1),M&&(P|=2),k=this._measure(v,P),this._holey.set(C,k)}return k}_measure(v,y){const M=this._measureElements[y];return M.textContent=v.repeat(32),M.offsetWidth/32}}},2223:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TEXT_BASELINE=g.DIM_OPACITY=g.INVERTED_DEFAULT_COLOR=void 0;const y=v(6114);g.INVERTED_DEFAULT_COLOR=257,g.DIM_OPACITY=.5,g.TEXT_BASELINE=y.isFirefox||y.isLegacyEdge?"bottom":"ideographic"},6171:(de,g)=>{function v(y){return 57508<=y&&y<=57558}Object.defineProperty(g,"__esModule",{value:!0}),g.createRenderDimensions=g.excludeFromContrastRatioDemands=g.isRestrictedPowerlineGlyph=g.isPowerlineGlyph=g.throwIfFalsy=void 0,g.throwIfFalsy=function(y){if(!y)throw new Error("value must not be falsy");return y},g.isPowerlineGlyph=v,g.isRestrictedPowerlineGlyph=function(y){return 57520<=y&&y<=57527},g.excludeFromContrastRatioDemands=function(y){return v(y)||9472<=(M=y)&&M<=9631;var M},g.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.SelectionModel=void 0,g.SelectionModel=class{constructor(v){this._bufferService=v,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const v=this.selectionStart[0]+this.selectionStartLength;return v>this._bufferService.cols?v%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(v/this._bufferService.cols)-1]:[v%this._bufferService.cols,this.selectionStart[1]+Math.floor(v/this._bufferService.cols)]:[v,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const v=this.selectionStart[0]+this.selectionStartLength;return v>this._bufferService.cols?[v%this._bufferService.cols,this.selectionStart[1]+Math.floor(v/this._bufferService.cols)]:[Math.max(v,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const v=this.selectionStart,y=this.selectionEnd;return!(!v||!y)&&(v[1]>y[1]||v[1]===y[1]&&v[0]>y[0])}handleTrim(v){return this.selectionStart&&(this.selectionStart[1]-=v),this.selectionEnd&&(this.selectionEnd[1]-=v),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(de,g,v){var y=this&&this.__decorate||function(l,_,h,u){var S,E=arguments.length,O=E<3?_:null===u?u=Object.getOwnPropertyDescriptor(_,h):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)O=Reflect.decorate(l,_,h,u);else for(var R=l.length-1;R>=0;R--)(S=l[R])&&(O=(E<3?S(O):E>3?S(_,h,O):S(_,h))||O);return E>3&&O&&Object.defineProperty(_,h,O),O},M=this&&this.__param||function(l,_){return function(h,u){_(h,u,l)}};Object.defineProperty(g,"__esModule",{value:!0}),g.CharSizeService=void 0;const m=v(2585),C=v(8460),k=v(844);let P=g.CharSizeService=class extends k.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(l,_,h){super(),this._optionsService=h,this.width=0,this.height=0,this._onCharSizeChange=this.register(new C.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new T(l,_,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const l=this._measureStrategy.measure();l.width===this.width&&l.height===this.height||(this.width=l.width,this.height=l.height,this._onCharSizeChange.fire())}};g.CharSizeService=P=y([M(2,m.IOptionsService)],P);class T{constructor(_,h,u){this._document=_,this._parentElement=h,this._optionsService=u,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const _={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return 0!==_.width&&0!==_.height&&(this._result.width=_.width/32,this._result.height=Math.ceil(_.height)),this._result}}},4269:function(de,g,v){var y=this&&this.__decorate||function(_,h,u,S){var E,O=arguments.length,R=O<3?h:null===S?S=Object.getOwnPropertyDescriptor(h,u):S;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(_,h,u,S);else for(var x=_.length-1;x>=0;x--)(E=_[x])&&(R=(O<3?E(R):O>3?E(h,u,R):E(h,u))||R);return O>3&&R&&Object.defineProperty(h,u,R),R},M=this&&this.__param||function(_,h){return function(u,S){h(u,S,_)}};Object.defineProperty(g,"__esModule",{value:!0}),g.CharacterJoinerService=g.JoinedCellData=void 0;const m=v(3734),C=v(643),k=v(511),P=v(2585);g.JoinedCellData=class T extends m.AttributeData{constructor(h,u,S){super(),this.content=0,this.combinedData="",this.fg=h.fg,this.bg=h.bg,this.combinedData=u,this._width=S}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(h){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}};let l=g.CharacterJoinerService=class eo{constructor(h){this._bufferService=h,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new k.CellData}register(h){const u={id:this._nextCharacterJoinerId++,handler:h};return this._characterJoiners.push(u),u.id}deregister(h){for(let u=0;u<this._characterJoiners.length;u++)if(this._characterJoiners[u].id===h)return this._characterJoiners.splice(u,1),!0;return!1}getJoinedCharacters(h){if(0===this._characterJoiners.length)return[];const u=this._bufferService.buffer.lines.get(h);if(!u||0===u.length)return[];const S=[],E=u.translateToString(!0);let O=0,R=0,x=0,L=u.getFg(0),V=u.getBg(0);for(let ie=0;ie<u.getTrimmedLength();ie++)if(u.loadCell(ie,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==L||this._workCell.bg!==V){if(ie-O>1){const X=this._getJoinedRanges(E,x,R,u,O);for(let J=0;J<X.length;J++)S.push(X[J])}O=ie,x=R,L=this._workCell.fg,V=this._workCell.bg}R+=this._workCell.getChars().length||C.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-O>1){const ie=this._getJoinedRanges(E,x,R,u,O);for(let X=0;X<ie.length;X++)S.push(ie[X])}return S}_getJoinedRanges(h,u,S,E,O){const R=h.substring(u,S);let x=[];try{x=this._characterJoiners[0].handler(R)}catch(L){console.error(L)}for(let L=1;L<this._characterJoiners.length;L++)try{const V=this._characterJoiners[L].handler(R);for(let ie=0;ie<V.length;ie++)eo._mergeRanges(x,V[ie])}catch(V){console.error(V)}return this._stringRangesToCellRanges(x,E,O),x}_stringRangesToCellRanges(h,u,S){let E=0,O=!1,R=0,x=h[E];if(x){for(let L=S;L<this._bufferService.cols;L++){const V=u.getWidth(L),ie=u.getString(L).length||C.WHITESPACE_CELL_CHAR.length;if(0!==V){if(!O&&x[0]<=R&&(x[0]=L,O=!0),x[1]<=R){if(x[1]=L,x=h[++E],!x)break;x[0]<=R?(x[0]=L,O=!0):O=!1}R+=ie}}x&&(x[1]=this._bufferService.cols)}}static _mergeRanges(h,u){let S=!1;for(let E=0;E<h.length;E++){const O=h[E];if(S){if(u[1]<=O[0])return h[E-1][1]=u[1],h;if(u[1]<=O[1])return h[E-1][1]=Math.max(u[1],O[1]),h.splice(E,1),h;h.splice(E,1),E--}else{if(u[1]<=O[0])return h.splice(E,0,u),h;if(u[1]<=O[1])return O[0]=Math.min(u[0],O[0]),h;u[0]<O[1]&&(O[0]=Math.min(u[0],O[0]),S=!0)}}return S?h[h.length-1][1]=u[1]:h.push(u),h}};g.CharacterJoinerService=l=y([M(0,P.IBufferService)],l)},5114:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.CoreBrowserService=void 0,g.CoreBrowserService=class{constructor(v,y){this._textarea=v,this.window=y,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return void 0===this._cachedIsFocused&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(de,g,v){var y=this&&this.__decorate||function(P,T,l,_){var h,u=arguments.length,S=u<3?T:null===_?_=Object.getOwnPropertyDescriptor(T,l):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)S=Reflect.decorate(P,T,l,_);else for(var E=P.length-1;E>=0;E--)(h=P[E])&&(S=(u<3?h(S):u>3?h(T,l,S):h(T,l))||S);return u>3&&S&&Object.defineProperty(T,l,S),S},M=this&&this.__param||function(P,T){return function(l,_){T(l,_,P)}};Object.defineProperty(g,"__esModule",{value:!0}),g.MouseService=void 0;const m=v(4725),C=v(9806);let k=g.MouseService=class{constructor(P,T){this._renderService=P,this._charSizeService=T}getCoords(P,T,l,_,h){return(0,C.getCoords)(window,P,T,l,_,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,h)}getMouseReportCoords(P,T){const l=(0,C.getCoordsRelativeToElement)(window,P,T);if(this._charSizeService.hasValidSize)return l[0]=Math.min(Math.max(l[0],0),this._renderService.dimensions.css.canvas.width-1),l[1]=Math.min(Math.max(l[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(l[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(l[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(l[0]),y:Math.floor(l[1])}}};g.MouseService=k=y([M(0,m.IRenderService),M(1,m.ICharSizeService)],k)},3230:function(de,g,v){var y=this&&this.__decorate||function(S,E,O,R){var x,L=arguments.length,V=L<3?E:null===R?R=Object.getOwnPropertyDescriptor(E,O):R;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)V=Reflect.decorate(S,E,O,R);else for(var ie=S.length-1;ie>=0;ie--)(x=S[ie])&&(V=(L<3?x(V):L>3?x(E,O,V):x(E,O))||V);return L>3&&V&&Object.defineProperty(E,O,V),V},M=this&&this.__param||function(S,E){return function(O,R){E(O,R,S)}};Object.defineProperty(g,"__esModule",{value:!0}),g.RenderService=void 0;const m=v(3656),C=v(6193),k=v(5596),P=v(4725),T=v(8460),l=v(844),_=v(7226),h=v(2585);let u=g.RenderService=class extends l.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(S,E,O,R,x,L,V,ie){if(super(),this._rowCount=S,this._charSizeService=R,this._renderer=this.register(new l.MutableDisposable),this._pausedResizeTask=new _.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new T.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new T.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new T.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new T.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new C.RenderDebouncer(V.window,(X,J)=>this._renderRows(X,J)),this.register(this._renderDebouncer),this._screenDprMonitor=new k.ScreenDprMonitor(V.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(L.onResize(()=>this._fullRefresh())),this.register(L.buffers.onBufferActivate(()=>{var X;return null===(X=this._renderer.value)||void 0===X?void 0:X.clear()})),this.register(O.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(x.onDecorationRegistered(()=>this._fullRefresh())),this.register(x.onDecorationRemoved(()=>this._fullRefresh())),this.register(O.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(L.cols,L.rows),this._fullRefresh()})),this.register(O.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(L.buffer.y,L.buffer.y,!0))),this.register((0,m.addDisposableDomListener)(V.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(ie.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in V.window){const X=new V.window.IntersectionObserver(J=>this._handleIntersectionChange(J[J.length-1]),{threshold:0});X.observe(E),this.register({dispose:()=>X.disconnect()})}}_handleIntersectionChange(S){this._isPaused=void 0===S.isIntersecting?0===S.intersectionRatio:!S.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(S,E,O=!1){this._isPaused?this._needsFullRefresh=!0:(O||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(S,E,this._rowCount))}_renderRows(S,E){this._renderer.value&&(S=Math.min(S,this._rowCount-1),E=Math.min(E,this._rowCount-1),this._renderer.value.renderRows(S,E),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:S,end:E}),this._onRender.fire({start:S,end:E}),this._isNextRenderRedrawOnly=!0)}resize(S,E){this._rowCount=E,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(S){this._renderer.value=S,this._renderer.value.onRequestRedraw(E=>this.refreshRows(E.start,E.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(S){return this._renderDebouncer.addRefreshCallback(S)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var S,E;this._renderer.value&&(null===(E=(S=this._renderer.value).clearTextureAtlas)||void 0===E||E.call(S),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(S,E){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(S,E)):this._renderer.value.handleResize(S,E),this._fullRefresh())}handleCharSizeChanged(){var S;null===(S=this._renderer.value)||void 0===S||S.handleCharSizeChanged()}handleBlur(){var S;null===(S=this._renderer.value)||void 0===S||S.handleBlur()}handleFocus(){var S;null===(S=this._renderer.value)||void 0===S||S.handleFocus()}handleSelectionChanged(S,E,O){var R;this._selectionState.start=S,this._selectionState.end=E,this._selectionState.columnSelectMode=O,null===(R=this._renderer.value)||void 0===R||R.handleSelectionChanged(S,E,O)}handleCursorMove(){var S;null===(S=this._renderer.value)||void 0===S||S.handleCursorMove()}clear(){var S;null===(S=this._renderer.value)||void 0===S||S.clear()}};g.RenderService=u=y([M(2,h.IOptionsService),M(3,P.ICharSizeService),M(4,h.IDecorationService),M(5,h.IBufferService),M(6,P.ICoreBrowserService),M(7,P.IThemeService)],u)},9312:function(de,g,v){var y=this&&this.__decorate||function(x,L,V,ie){var X,J=arguments.length,be=J<3?L:null===ie?ie=Object.getOwnPropertyDescriptor(L,V):ie;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)be=Reflect.decorate(x,L,V,ie);else for(var Se=x.length-1;Se>=0;Se--)(X=x[Se])&&(be=(J<3?X(be):J>3?X(L,V,be):X(L,V))||be);return J>3&&be&&Object.defineProperty(L,V,be),be},M=this&&this.__param||function(x,L){return function(V,ie){L(V,ie,x)}};Object.defineProperty(g,"__esModule",{value:!0}),g.SelectionService=void 0;const m=v(9806),C=v(9504),k=v(456),P=v(4725),T=v(8460),l=v(844),_=v(6114),h=v(4841),u=v(511),S=v(2585),E=String.fromCharCode(160),O=new RegExp(E,"g");let R=g.SelectionService=class extends l.Disposable{constructor(x,L,V,ie,X,J,be,Se,Me){super(),this._element=x,this._screenElement=L,this._linkifier=V,this._bufferService=ie,this._coreService=X,this._mouseService=J,this._optionsService=be,this._renderService=Se,this._coreBrowserService=Me,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new u.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new T.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new T.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new T.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new T.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Ce=>this._handleMouseMove(Ce),this._mouseUpListener=Ce=>this._handleMouseUp(Ce),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Ce=>this._handleTrim(Ce)),this.register(this._bufferService.buffers.onBufferActivate(Ce=>this._handleBufferActivate(Ce))),this.enable(),this._model=new k.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,l.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const x=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!(!x||!L||x[0]===L[0]&&x[1]===L[1])}get selectionText(){const x=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;if(!x||!L)return"";const V=this._bufferService.buffer,ie=[];if(3===this._activeSelectionMode){if(x[0]===L[0])return"";const X=x[0]<L[0]?x[0]:L[0],J=x[0]<L[0]?L[0]:x[0];for(let be=x[1];be<=L[1];be++){const Se=V.translateBufferLineToString(be,!0,X,J);ie.push(Se)}}else{ie.push(V.translateBufferLineToString(x[1],!0,x[0],x[1]===L[1]?L[0]:void 0));for(let J=x[1]+1;J<=L[1]-1;J++){const be=V.lines.get(J),Se=V.translateBufferLineToString(J,!0);be?.isWrapped?ie[ie.length-1]+=Se:ie.push(Se)}if(x[1]!==L[1]){const J=V.lines.get(L[1]),be=V.translateBufferLineToString(L[1],!0,0,L[0]);J&&J.isWrapped?ie[ie.length-1]+=be:ie.push(be)}}return ie.map(X=>X.replace(O," ")).join(_.isWindows?"\r\n":"\n")}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(x){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),_.isLinux&&x&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})}_isClickInSelection(x){const L=this._getMouseBufferCoords(x),V=this._model.finalSelectionStart,ie=this._model.finalSelectionEnd;return!!(V&&ie&&L)&&this._areCoordsInSelection(L,V,ie)}isCellInSelection(x,L){const V=this._model.finalSelectionStart,ie=this._model.finalSelectionEnd;return!(!V||!ie)&&this._areCoordsInSelection([x,L],V,ie)}_areCoordsInSelection(x,L,V){return x[1]>L[1]&&x[1]<V[1]||L[1]===V[1]&&x[1]===L[1]&&x[0]>=L[0]&&x[0]<V[0]||L[1]<V[1]&&x[1]===V[1]&&x[0]<V[0]||L[1]<V[1]&&x[1]===L[1]&&x[0]>=L[0]}_selectWordAtCursor(x,L){var V,ie;const X=null===(ie=null===(V=this._linkifier.currentLink)||void 0===V?void 0:V.link)||void 0===ie?void 0:ie.range;if(X)return this._model.selectionStart=[X.start.x-1,X.start.y-1],this._model.selectionStartLength=(0,h.getRangeLength)(X,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const J=this._getMouseBufferCoords(x);return!!J&&(this._selectWordAt(J,L),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(x,L){this._model.clearSelection(),x=Math.max(x,0),L=Math.min(L,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,x],this._model.selectionEnd=[this._bufferService.cols,L],this.refresh(),this._onSelectionChange.fire()}_handleTrim(x){this._model.handleTrim(x)&&this.refresh()}_getMouseBufferCoords(x){const L=this._mouseService.getCoords(x,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(L)return L[0]--,L[1]--,L[1]+=this._bufferService.buffer.ydisp,L}_getMouseEventScrollAmount(x){let L=(0,m.getCoordsRelativeToElement)(this._coreBrowserService.window,x,this._screenElement)[1];const V=this._renderService.dimensions.css.canvas.height;return L>=0&&L<=V?0:(L>V&&(L-=V),L=Math.min(Math.max(L,-50),50),L/=50,L/Math.abs(L)+Math.round(14*L))}shouldForceSelection(x){return _.isMac?x.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:x.shiftKey}handleMouseDown(x){if(this._mouseDownTimeStamp=x.timeStamp,(2!==x.button||!this.hasSelection)&&0===x.button){if(!this._enabled){if(!this.shouldForceSelection(x))return;x.stopPropagation()}x.preventDefault(),this._dragScrollAmount=0,this._enabled&&x.shiftKey?this._handleIncrementalClick(x):1===x.detail?this._handleSingleClick(x):2===x.detail?this._handleDoubleClick(x):3===x.detail&&this._handleTripleClick(x),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(x){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(x))}_handleSingleClick(x){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(x)?3:0,this._model.selectionStart=this._getMouseBufferCoords(x),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const L=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);L&&L.length!==this._model.selectionStart[0]&&0===L.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}_handleDoubleClick(x){this._selectWordAtCursor(x,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(x){const L=this._getMouseBufferCoords(x);L&&(this._activeSelectionMode=2,this._selectLineAt(L[1]))}shouldColumnSelect(x){return x.altKey&&!(_.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(x){if(x.stopImmediatePropagation(),!this._model.selectionStart)return;const L=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(x),!this._model.selectionEnd)return void this.refresh(!0);2===this._activeSelectionMode?this._model.selectionEnd[0]=this._model.selectionEnd[1]<this._model.selectionStart[1]?0:this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(x),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const V=this._bufferService.buffer;if(this._model.selectionEnd[1]<V.lines.length){const ie=V.lines.get(this._model.selectionEnd[1]);ie&&0===ie.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}L&&L[0]===this._model.selectionEnd[0]&&L[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const x=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(x.ydisp+this._bufferService.rows,x.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=x.ydisp),this.refresh()}}_handleMouseUp(x){const L=x.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&L<500&&x.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const V=this._mouseService.getCoords(x,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(V&&void 0!==V[0]&&void 0!==V[1]){const ie=(0,C.moveToCellSequence)(V[0]-1,V[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(ie,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const x=this._model.finalSelectionStart,L=this._model.finalSelectionEnd,V=!(!x||!L||x[0]===L[0]&&x[1]===L[1]);V?x&&L&&(this._oldSelectionStart&&this._oldSelectionEnd&&x[0]===this._oldSelectionStart[0]&&x[1]===this._oldSelectionStart[1]&&L[0]===this._oldSelectionEnd[0]&&L[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(x,L,V)):this._oldHasSelection&&this._fireOnSelectionChange(x,L,V)}_fireOnSelectionChange(x,L,V){this._oldSelectionStart=x,this._oldSelectionEnd=L,this._oldHasSelection=V,this._onSelectionChange.fire()}_handleBufferActivate(x){this.clearSelection(),this._trimListener.dispose(),this._trimListener=x.activeBuffer.lines.onTrim(L=>this._handleTrim(L))}_convertViewportColToCharacterIndex(x,L){let V=L;for(let ie=0;L>=ie;ie++){const X=x.loadCell(ie,this._workCell).getChars().length;0===this._workCell.getWidth()?V--:X>1&&L!==ie&&(V+=X-1)}return V}setSelection(x,L,V){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[x,L],this._model.selectionStartLength=V,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(x){this._isClickInSelection(x)||(this._selectWordAtCursor(x,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(x,L,V=!0,ie=!0){if(x[0]>=this._bufferService.cols)return;const X=this._bufferService.buffer,J=X.lines.get(x[1]);if(!J)return;const be=X.translateBufferLineToString(x[1],!1);let Se=this._convertViewportColToCharacterIndex(J,x[0]),Me=Se;const Ce=x[0]-Se;let N=0,G=0,Q=0,se=0;if(" "===be.charAt(Se)){for(;Se>0&&" "===be.charAt(Se-1);)Se--;for(;Me<be.length&&" "===be.charAt(Me+1);)Me++}else{let Ue=x[0],Re=x[0];0===J.getWidth(Ue)&&(N++,Ue--),2===J.getWidth(Re)&&(G++,Re++);const Ne=J.getString(Re).length;for(Ne>1&&(se+=Ne-1,Me+=Ne-1);Ue>0&&Se>0&&!this._isCharWordSeparator(J.loadCell(Ue-1,this._workCell));){J.loadCell(Ue-1,this._workCell);const I=this._workCell.getChars().length;0===this._workCell.getWidth()?(N++,Ue--):I>1&&(Q+=I-1,Se-=I-1),Se--,Ue--}for(;Re<J.length&&Me+1<be.length&&!this._isCharWordSeparator(J.loadCell(Re+1,this._workCell));){J.loadCell(Re+1,this._workCell);const I=this._workCell.getChars().length;2===this._workCell.getWidth()?(G++,Re++):I>1&&(se+=I-1,Me+=I-1),Me++,Re++}}Me++;let Ae=Se+Ce-N+Q,Be=Math.min(this._bufferService.cols,Me-Se+N+G-Q-se);if(L||""!==be.slice(Se,Me).trim()){if(V&&0===Ae&&32!==J.getCodePoint(0)){const Ue=X.lines.get(x[1]-1);if(Ue&&J.isWrapped&&32!==Ue.getCodePoint(this._bufferService.cols-1)){const Re=this._getWordAt([this._bufferService.cols-1,x[1]-1],!1,!0,!1);if(Re){const Ne=this._bufferService.cols-Re.start;Ae-=Ne,Be+=Ne}}}if(ie&&Ae+Be===this._bufferService.cols&&32!==J.getCodePoint(this._bufferService.cols-1)){const Ue=X.lines.get(x[1]+1);if(Ue?.isWrapped&&32!==Ue.getCodePoint(0)){const Re=this._getWordAt([0,x[1]+1],!1,!1,!0);Re&&(Be+=Re.length)}}return{start:Ae,length:Be}}}_selectWordAt(x,L){const V=this._getWordAt(x,L);if(V){for(;V.start<0;)V.start+=this._bufferService.cols,x[1]--;this._model.selectionStart=[V.start,x[1]],this._model.selectionStartLength=V.length}}_selectToWordAt(x){const L=this._getWordAt(x,!0);if(L){let V=x[1];for(;L.start<0;)L.start+=this._bufferService.cols,V--;if(!this._model.areSelectionValuesReversed())for(;L.start+L.length>this._bufferService.cols;)L.length-=this._bufferService.cols,V++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?L.start:L.start+L.length,V]}}_isCharWordSeparator(x){return 0!==x.getWidth()&&this._optionsService.rawOptions.wordSeparator.indexOf(x.getChars())>=0}_selectLineAt(x){const L=this._bufferService.buffer.getWrappedRangeForLine(x),V={start:{x:0,y:L.first},end:{x:this._bufferService.cols-1,y:L.last}};this._model.selectionStart=[0,L.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,h.getRangeLength)(V,this._bufferService.cols)}};g.SelectionService=R=y([M(3,S.IBufferService),M(4,S.ICoreService),M(5,P.IMouseService),M(6,S.IOptionsService),M(7,P.IRenderService),M(8,P.ICoreBrowserService)],R)},4725:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.IThemeService=g.ICharacterJoinerService=g.ISelectionService=g.IRenderService=g.IMouseService=g.ICoreBrowserService=g.ICharSizeService=void 0;const y=v(8343);g.ICharSizeService=(0,y.createDecorator)("CharSizeService"),g.ICoreBrowserService=(0,y.createDecorator)("CoreBrowserService"),g.IMouseService=(0,y.createDecorator)("MouseService"),g.IRenderService=(0,y.createDecorator)("RenderService"),g.ISelectionService=(0,y.createDecorator)("SelectionService"),g.ICharacterJoinerService=(0,y.createDecorator)("CharacterJoinerService"),g.IThemeService=(0,y.createDecorator)("ThemeService")},6731:function(de,g,v){var y=this&&this.__decorate||function(R,x,L,V){var ie,X=arguments.length,J=X<3?x:null===V?V=Object.getOwnPropertyDescriptor(x,L):V;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)J=Reflect.decorate(R,x,L,V);else for(var be=R.length-1;be>=0;be--)(ie=R[be])&&(J=(X<3?ie(J):X>3?ie(x,L,J):ie(x,L))||J);return X>3&&J&&Object.defineProperty(x,L,J),J},M=this&&this.__param||function(R,x){return function(L,V){x(L,V,R)}};Object.defineProperty(g,"__esModule",{value:!0}),g.ThemeService=g.DEFAULT_ANSI_COLORS=void 0;const m=v(7239),C=v(8055),k=v(8460),P=v(844),T=v(2585),l=C.css.toColor("#ffffff"),_=C.css.toColor("#000000"),h=C.css.toColor("#ffffff"),u=C.css.toColor("#000000"),S={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};g.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const R=[C.css.toColor("#2e3436"),C.css.toColor("#cc0000"),C.css.toColor("#4e9a06"),C.css.toColor("#c4a000"),C.css.toColor("#3465a4"),C.css.toColor("#75507b"),C.css.toColor("#06989a"),C.css.toColor("#d3d7cf"),C.css.toColor("#555753"),C.css.toColor("#ef2929"),C.css.toColor("#8ae234"),C.css.toColor("#fce94f"),C.css.toColor("#729fcf"),C.css.toColor("#ad7fa8"),C.css.toColor("#34e2e2"),C.css.toColor("#eeeeec")],x=[0,95,135,175,215,255];for(let L=0;L<216;L++){const V=x[L/36%6|0],ie=x[L/6%6|0],X=x[L%6];R.push({css:C.channels.toCss(V,ie,X),rgba:C.channels.toRgba(V,ie,X)})}for(let L=0;L<24;L++){const V=8+10*L;R.push({css:C.channels.toCss(V,V,V),rgba:C.channels.toRgba(V,V,V)})}return R})());let E=g.ThemeService=class extends P.Disposable{get colors(){return this._colors}constructor(R){super(),this._optionsService=R,this._contrastCache=new m.ColorContrastCache,this._halfContrastCache=new m.ColorContrastCache,this._onChangeColors=this.register(new k.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:l,background:_,cursor:h,cursorAccent:u,selectionForeground:void 0,selectionBackgroundTransparent:S,selectionBackgroundOpaque:C.color.blend(_,S),selectionInactiveBackgroundTransparent:S,selectionInactiveBackgroundOpaque:C.color.blend(_,S),ansi:g.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(R={}){const x=this._colors;if(x.foreground=O(R.foreground,l),x.background=O(R.background,_),x.cursor=O(R.cursor,h),x.cursorAccent=O(R.cursorAccent,u),x.selectionBackgroundTransparent=O(R.selectionBackground,S),x.selectionBackgroundOpaque=C.color.blend(x.background,x.selectionBackgroundTransparent),x.selectionInactiveBackgroundTransparent=O(R.selectionInactiveBackground,x.selectionBackgroundTransparent),x.selectionInactiveBackgroundOpaque=C.color.blend(x.background,x.selectionInactiveBackgroundTransparent),x.selectionForeground=R.selectionForeground?O(R.selectionForeground,C.NULL_COLOR):void 0,x.selectionForeground===C.NULL_COLOR&&(x.selectionForeground=void 0),C.color.isOpaque(x.selectionBackgroundTransparent)&&(x.selectionBackgroundTransparent=C.color.opacity(x.selectionBackgroundTransparent,.3)),C.color.isOpaque(x.selectionInactiveBackgroundTransparent)&&(x.selectionInactiveBackgroundTransparent=C.color.opacity(x.selectionInactiveBackgroundTransparent,.3)),x.ansi=g.DEFAULT_ANSI_COLORS.slice(),x.ansi[0]=O(R.black,g.DEFAULT_ANSI_COLORS[0]),x.ansi[1]=O(R.red,g.DEFAULT_ANSI_COLORS[1]),x.ansi[2]=O(R.green,g.DEFAULT_ANSI_COLORS[2]),x.ansi[3]=O(R.yellow,g.DEFAULT_ANSI_COLORS[3]),x.ansi[4]=O(R.blue,g.DEFAULT_ANSI_COLORS[4]),x.ansi[5]=O(R.magenta,g.DEFAULT_ANSI_COLORS[5]),x.ansi[6]=O(R.cyan,g.DEFAULT_ANSI_COLORS[6]),x.ansi[7]=O(R.white,g.DEFAULT_ANSI_COLORS[7]),x.ansi[8]=O(R.brightBlack,g.DEFAULT_ANSI_COLORS[8]),x.ansi[9]=O(R.brightRed,g.DEFAULT_ANSI_COLORS[9]),x.ansi[10]=O(R.brightGreen,g.DEFAULT_ANSI_COLORS[10]),x.ansi[11]=O(R.brightYellow,g.DEFAULT_ANSI_COLORS[11]),x.ansi[12]=O(R.brightBlue,g.DEFAULT_ANSI_COLORS[12]),x.ansi[13]=O(R.brightMagenta,g.DEFAULT_ANSI_COLORS[13]),x.ansi[14]=O(R.brightCyan,g.DEFAULT_ANSI_COLORS[14]),x.ansi[15]=O(R.brightWhite,g.DEFAULT_ANSI_COLORS[15]),R.extendedAnsi){const L=Math.min(x.ansi.length-16,R.extendedAnsi.length);for(let V=0;V<L;V++)x.ansi[V+16]=O(R.extendedAnsi[V],g.DEFAULT_ANSI_COLORS[V+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(R){this._restoreColor(R),this._onChangeColors.fire(this.colors)}_restoreColor(R){if(void 0!==R)switch(R){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[R]=this._restoreColors.ansi[R]}else for(let x=0;x<this._restoreColors.ansi.length;++x)this._colors.ansi[x]=this._restoreColors.ansi[x]}modifyColors(R){R(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function O(R,x){if(void 0!==R)try{return C.css.toColor(R)}catch{}return x}g.ThemeService=E=y([M(0,T.IOptionsService)],E)},6349:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.CircularList=void 0;const y=v(8460),M=v(844);g.CircularList=class m extends M.Disposable{constructor(k){super(),this._maxLength=k,this.onDeleteEmitter=this.register(new y.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new y.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new y.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(k){if(this._maxLength===k)return;const P=new Array(k);for(let T=0;T<Math.min(k,this.length);T++)P[T]=this._array[this._getCyclicIndex(T)];this._array=P,this._maxLength=k,this._startIndex=0}get length(){return this._length}set length(k){if(k>this._length)for(let P=this._length;P<k;P++)this._array[P]=void 0;this._length=k}get(k){return this._array[this._getCyclicIndex(k)]}set(k,P){this._array[this._getCyclicIndex(k)]=P}push(k){this._array[this._getCyclicIndex(this._length)]=k,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(k,P,...T){if(P){for(let l=k;l<this._length-P;l++)this._array[this._getCyclicIndex(l)]=this._array[this._getCyclicIndex(l+P)];this._length-=P,this.onDeleteEmitter.fire({index:k,amount:P})}for(let l=this._length-1;l>=k;l--)this._array[this._getCyclicIndex(l+T.length)]=this._array[this._getCyclicIndex(l)];for(let l=0;l<T.length;l++)this._array[this._getCyclicIndex(k+l)]=T[l];if(T.length&&this.onInsertEmitter.fire({index:k,amount:T.length}),this._length+T.length>this._maxLength){const l=this._length+T.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=T.length}trimStart(k){k>this._length&&(k=this._length),this._startIndex+=k,this._length-=k,this.onTrimEmitter.fire(k)}shiftElements(k,P,T){if(!(P<=0)){if(k<0||k>=this._length)throw new Error("start argument out of range");if(k+T<0)throw new Error("Cannot shift elements in list beyond index 0");if(T>0){for(let _=P-1;_>=0;_--)this.set(k+_+T,this.get(k+_));const l=k+P+T-this._length;if(l>0)for(this._length+=l;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let l=0;l<P;l++)this.set(k+l+T,this.get(k+l))}}_getCyclicIndex(k){return(this._startIndex+k)%this._maxLength}}},1439:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.clone=void 0,g.clone=function v(y,M=5){if("object"!=typeof y)return y;const m=Array.isArray(y)?[]:{};for(const C in y)m[C]=M<=1?y[C]:y[C]&&v(y[C],M-1);return m}},8055:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.contrastRatio=g.toPaddedHex=g.rgba=g.rgb=g.css=g.color=g.channels=g.NULL_COLOR=void 0;const y=v(6114);let M=0,m=0,C=0,k=0;var P,T,l,_,h,E;function u(E){const O=E.toString(16);return O.length<2?"0"+O:O}function S(E,O){return E<O?(O+.05)/(E+.05):(E+.05)/(O+.05)}g.NULL_COLOR={css:"#00000000",rgba:0},(E=P||(g.channels=P={})).toCss=function(O,R,x,L){return void 0!==L?`#${u(O)}${u(R)}${u(x)}${u(L)}`:`#${u(O)}${u(R)}${u(x)}`},E.toRgba=function(O,R,x,L=255){return(O<<24|R<<16|x<<8|L)>>>0},function(E){function O(R,x){return k=Math.round(255*x),[M,m,C]=h.toChannels(R.rgba),{css:P.toCss(M,m,C,k),rgba:P.toRgba(M,m,C,k)}}E.blend=function(R,x){if(k=(255&x.rgba)/255,1===k)return{css:x.css,rgba:x.rgba};const V=x.rgba>>16&255,ie=x.rgba>>8&255,X=R.rgba>>24&255,J=R.rgba>>16&255,be=R.rgba>>8&255;return M=X+Math.round(((x.rgba>>24&255)-X)*k),m=J+Math.round((V-J)*k),C=be+Math.round((ie-be)*k),{css:P.toCss(M,m,C),rgba:P.toRgba(M,m,C)}},E.isOpaque=function(R){return 255==(255&R.rgba)},E.ensureContrastRatio=function(R,x,L){const V=h.ensureContrastRatio(R.rgba,x.rgba,L);if(V)return h.toColor(V>>24&255,V>>16&255,V>>8&255)},E.opaque=function(R){const x=(255|R.rgba)>>>0;return[M,m,C]=h.toChannels(x),{css:P.toCss(M,m,C),rgba:x}},E.opacity=O,E.multiplyOpacity=function(R,x){return k=255&R.rgba,O(R,k*x/255)},E.toColorRGB=function(R){return[R.rgba>>24&255,R.rgba>>16&255,R.rgba>>8&255]}}(T||(g.color=T={})),function(E){let O,R;if(!y.isNode){const x=document.createElement("canvas");x.width=1,x.height=1;const L=x.getContext("2d",{willReadFrequently:!0});L&&(O=L,O.globalCompositeOperation="copy",R=O.createLinearGradient(0,0,1,1))}E.toColor=function(x){if(x.match(/#[\da-f]{3,8}/i))switch(x.length){case 4:return M=parseInt(x.slice(1,2).repeat(2),16),m=parseInt(x.slice(2,3).repeat(2),16),C=parseInt(x.slice(3,4).repeat(2),16),h.toColor(M,m,C);case 5:return M=parseInt(x.slice(1,2).repeat(2),16),m=parseInt(x.slice(2,3).repeat(2),16),C=parseInt(x.slice(3,4).repeat(2),16),k=parseInt(x.slice(4,5).repeat(2),16),h.toColor(M,m,C,k);case 7:return{css:x,rgba:(parseInt(x.slice(1),16)<<8|255)>>>0};case 9:return{css:x,rgba:parseInt(x.slice(1),16)>>>0}}const L=x.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(L)return M=parseInt(L[1]),m=parseInt(L[2]),C=parseInt(L[3]),k=Math.round(255*(void 0===L[5]?1:parseFloat(L[5]))),h.toColor(M,m,C,k);if(!O||!R)throw new Error("css.toColor: Unsupported css format");if(O.fillStyle=R,O.fillStyle=x,"string"!=typeof O.fillStyle)throw new Error("css.toColor: Unsupported css format");if(O.fillRect(0,0,1,1),[M,m,C,k]=O.getImageData(0,0,1,1).data,255!==k)throw new Error("css.toColor: Unsupported css format");return{rgba:P.toRgba(M,m,C,k),css:x}}}(l||(g.css=l={})),function(E){function O(R,x,L){const V=R/255,ie=x/255,X=L/255;return.2126*(V<=.03928?V/12.92:Math.pow((V+.055)/1.055,2.4))+.7152*(ie<=.03928?ie/12.92:Math.pow((ie+.055)/1.055,2.4))+.0722*(X<=.03928?X/12.92:Math.pow((X+.055)/1.055,2.4))}E.relativeLuminance=function(R){return O(R>>16&255,R>>8&255,255&R)},E.relativeLuminance2=O}(_||(g.rgb=_={})),function(E){function O(x,L,V){const ie=x>>24&255,X=x>>16&255,J=x>>8&255;let be=L>>24&255,Se=L>>16&255,Me=L>>8&255,Ce=S(_.relativeLuminance2(be,Se,Me),_.relativeLuminance2(ie,X,J));for(;Ce<V&&(be>0||Se>0||Me>0);)be-=Math.max(0,Math.ceil(.1*be)),Se-=Math.max(0,Math.ceil(.1*Se)),Me-=Math.max(0,Math.ceil(.1*Me)),Ce=S(_.relativeLuminance2(be,Se,Me),_.relativeLuminance2(ie,X,J));return(be<<24|Se<<16|Me<<8|255)>>>0}function R(x,L,V){const ie=x>>24&255,X=x>>16&255,J=x>>8&255;let be=L>>24&255,Se=L>>16&255,Me=L>>8&255,Ce=S(_.relativeLuminance2(be,Se,Me),_.relativeLuminance2(ie,X,J));for(;Ce<V&&(be<255||Se<255||Me<255);)be=Math.min(255,be+Math.ceil(.1*(255-be))),Se=Math.min(255,Se+Math.ceil(.1*(255-Se))),Me=Math.min(255,Me+Math.ceil(.1*(255-Me))),Ce=S(_.relativeLuminance2(be,Se,Me),_.relativeLuminance2(ie,X,J));return(be<<24|Se<<16|Me<<8|255)>>>0}E.ensureContrastRatio=function(x,L,V){const ie=_.relativeLuminance(x>>8),X=_.relativeLuminance(L>>8);if(S(ie,X)<V){if(X<ie){const Se=O(x,L,V),Me=S(ie,_.relativeLuminance(Se>>8));if(Me<V){const Ce=R(x,L,V);return Me>S(ie,_.relativeLuminance(Ce>>8))?Se:Ce}return Se}const J=R(x,L,V),be=S(ie,_.relativeLuminance(J>>8));if(be<V){const Se=O(x,L,V);return be>S(ie,_.relativeLuminance(Se>>8))?J:Se}return J}},E.reduceLuminance=O,E.increaseLuminance=R,E.toChannels=function(x){return[x>>24&255,x>>16&255,x>>8&255,255&x]},E.toColor=function(x,L,V,ie){return{css:P.toCss(x,L,V,ie),rgba:P.toRgba(x,L,V,ie)}}}(h||(g.rgba=h={})),g.toPaddedHex=u,g.contrastRatio=S},8969:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.CoreTerminal=void 0;const y=v(844),M=v(2585),m=v(4348),C=v(7866),k=v(744),P=v(7302),T=v(6975),l=v(8460),_=v(1753),h=v(1480),u=v(7994),S=v(9282),E=v(5435),O=v(5981),R=v(2660);let x=!1;g.CoreTerminal=class L extends y.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new l.EventEmitter),this._onScroll.event(ie=>{var X;null===(X=this._onScrollApi)||void 0===X||X.fire(ie.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(ie){for(const X in ie)this.optionsService.options[X]=ie[X]}constructor(ie){super(),this._windowsWrappingHeuristics=this.register(new y.MutableDisposable),this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new l.EventEmitter),this._instantiationService=new m.InstantiationService,this.optionsService=this.register(new P.OptionsService(ie)),this._instantiationService.setService(M.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(k.BufferService)),this._instantiationService.setService(M.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(C.LogService)),this._instantiationService.setService(M.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(T.CoreService)),this._instantiationService.setService(M.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(_.CoreMouseService)),this._instantiationService.setService(M.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(h.UnicodeService)),this._instantiationService.setService(M.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(u.CharsetService),this._instantiationService.setService(M.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(R.OscLinkService),this._instantiationService.setService(M.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new E.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,l.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,l.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,l.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,l.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(X=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(X=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new O.WriteBuffer((X,J)=>this._inputHandler.parse(X,J))),this.register((0,l.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(ie,X){this._writeBuffer.write(ie,X)}writeSync(ie,X){this._logService.logLevel<=M.LogLevelEnum.WARN&&!x&&(this._logService.warn("writeSync is unreliable and will be removed soon."),x=!0),this._writeBuffer.writeSync(ie,X)}resize(ie,X){isNaN(ie)||isNaN(X)||(ie=Math.max(ie,k.MINIMUM_COLS),X=Math.max(X,k.MINIMUM_ROWS),this._bufferService.resize(ie,X))}scroll(ie,X=!1){this._bufferService.scroll(ie,X)}scrollLines(ie,X,J){this._bufferService.scrollLines(ie,X,J)}scrollPages(ie){this.scrollLines(ie*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(ie){const X=ie-this._bufferService.buffer.ydisp;0!==X&&this.scrollLines(X)}registerEscHandler(ie,X){return this._inputHandler.registerEscHandler(ie,X)}registerDcsHandler(ie,X){return this._inputHandler.registerDcsHandler(ie,X)}registerCsiHandler(ie,X){return this._inputHandler.registerCsiHandler(ie,X)}registerOscHandler(ie,X){return this._inputHandler.registerOscHandler(ie,X)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let ie=!1;const X=this.optionsService.rawOptions.windowsPty;X&&void 0!==X.buildNumber&&void 0!==X.buildNumber?ie="conpty"===X.backend&&X.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(ie=!0),ie?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const ie=[];ie.push(this.onLineFeed(S.updateWindowsModeWrappedState.bind(null,this._bufferService))),ie.push(this.registerCsiHandler({final:"H"},()=>((0,S.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,y.toDisposable)(()=>{for(const X of ie)X.dispose()})}}}},8460:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.forwardEvent=g.EventEmitter=void 0,g.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=v=>(this._listeners.push(v),{dispose:()=>{if(!this._disposed)for(let y=0;y<this._listeners.length;y++)if(this._listeners[y]===v)return void this._listeners.splice(y,1)}})),this._event}fire(v,y){const M=[];for(let m=0;m<this._listeners.length;m++)M.push(this._listeners[m]);for(let m=0;m<M.length;m++)M[m].call(void 0,v,y)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},g.forwardEvent=function(v,y){return v(M=>y.fire(M))}},5435:function(de,g,v){var y=this&&this.__decorate||function(Ce,N,G,Q){var se,Ae=arguments.length,Be=Ae<3?N:null===Q?Q=Object.getOwnPropertyDescriptor(N,G):Q;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Be=Reflect.decorate(Ce,N,G,Q);else for(var Ue=Ce.length-1;Ue>=0;Ue--)(se=Ce[Ue])&&(Be=(Ae<3?se(Be):Ae>3?se(N,G,Be):se(N,G))||Be);return Ae>3&&Be&&Object.defineProperty(N,G,Be),Be},M=this&&this.__param||function(Ce,N){return function(G,Q){N(G,Q,Ce)}};Object.defineProperty(g,"__esModule",{value:!0}),g.InputHandler=g.WindowsOptionsReportType=void 0;const m=v(2584),C=v(7116),k=v(2015),P=v(844),T=v(482),l=v(8437),_=v(8460),h=v(643),u=v(511),S=v(3734),E=v(2585),O=v(6242),R=v(6351),x=v(5941),L={"(":0,")":1,"*":2,"+":3,"-":1,".":2},V=131072;function ie(Ce,N){if(Ce>24)return N.setWinLines||!1;switch(Ce){case 1:return!!N.restoreWin;case 2:return!!N.minimizeWin;case 3:return!!N.setWinPosition;case 4:return!!N.setWinSizePixels;case 5:return!!N.raiseWin;case 6:return!!N.lowerWin;case 7:return!!N.refreshWin;case 8:return!!N.setWinSizeChars;case 9:return!!N.maximizeWin;case 10:return!!N.fullscreenWin;case 11:return!!N.getWinState;case 13:return!!N.getWinPosition;case 14:return!!N.getWinSizePixels;case 15:return!!N.getScreenSizePixels;case 16:return!!N.getCellSizePixels;case 18:return!!N.getWinSizeChars;case 19:return!!N.getScreenSizeChars;case 20:return!!N.getIconTitle;case 21:return!!N.getWinTitle;case 22:return!!N.pushTitle;case 23:return!!N.popTitle;case 24:return!!N.setWinLines}return!1}var X,Ce;(Ce=X||(g.WindowsOptionsReportType=X={}))[Ce.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",Ce[Ce.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS";let J=0;g.InputHandler=class be extends P.Disposable{getAttrData(){return this._curAttrData}constructor(N,G,Q,se,Ae,Be,Ue,Re,Ne=new k.EscapeSequenceParser){super(),this._bufferService=N,this._charsetService=G,this._coreService=Q,this._logService=se,this._optionsService=Ae,this._oscLinkService=Be,this._coreMouseService=Ue,this._unicodeService=Re,this._parser=Ne,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new T.StringToUtf32,this._utf8Decoder=new T.Utf8ToUtf32,this._workCell=new u.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new _.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new _.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new _.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new _.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new _.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new _.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new _.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new _.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new _.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new _.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new _.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new _.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new _.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new Se(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(I=>this._activeBuffer=I.activeBuffer)),this._parser.setCsiHandlerFallback((I,le)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(I),params:le.toArray()})}),this._parser.setEscHandlerFallback(I=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(I)})}),this._parser.setExecuteHandlerFallback(I=>{this._logService.debug("Unknown EXECUTE code: ",{code:I})}),this._parser.setOscHandlerFallback((I,le,he)=>{this._logService.debug("Unknown OSC code: ",{identifier:I,action:le,data:he})}),this._parser.setDcsHandlerFallback((I,le,he)=>{"HOOK"===le&&(he=he.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(I),action:le,payload:he})}),this._parser.setPrintHandler((I,le,he)=>this.print(I,le,he)),this._parser.registerCsiHandler({final:"@"},I=>this.insertChars(I)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},I=>this.scrollLeft(I)),this._parser.registerCsiHandler({final:"A"},I=>this.cursorUp(I)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},I=>this.scrollRight(I)),this._parser.registerCsiHandler({final:"B"},I=>this.cursorDown(I)),this._parser.registerCsiHandler({final:"C"},I=>this.cursorForward(I)),this._parser.registerCsiHandler({final:"D"},I=>this.cursorBackward(I)),this._parser.registerCsiHandler({final:"E"},I=>this.cursorNextLine(I)),this._parser.registerCsiHandler({final:"F"},I=>this.cursorPrecedingLine(I)),this._parser.registerCsiHandler({final:"G"},I=>this.cursorCharAbsolute(I)),this._parser.registerCsiHandler({final:"H"},I=>this.cursorPosition(I)),this._parser.registerCsiHandler({final:"I"},I=>this.cursorForwardTab(I)),this._parser.registerCsiHandler({final:"J"},I=>this.eraseInDisplay(I,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},I=>this.eraseInDisplay(I,!0)),this._parser.registerCsiHandler({final:"K"},I=>this.eraseInLine(I,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},I=>this.eraseInLine(I,!0)),this._parser.registerCsiHandler({final:"L"},I=>this.insertLines(I)),this._parser.registerCsiHandler({final:"M"},I=>this.deleteLines(I)),this._parser.registerCsiHandler({final:"P"},I=>this.deleteChars(I)),this._parser.registerCsiHandler({final:"S"},I=>this.scrollUp(I)),this._parser.registerCsiHandler({final:"T"},I=>this.scrollDown(I)),this._parser.registerCsiHandler({final:"X"},I=>this.eraseChars(I)),this._parser.registerCsiHandler({final:"Z"},I=>this.cursorBackwardTab(I)),this._parser.registerCsiHandler({final:"`"},I=>this.charPosAbsolute(I)),this._parser.registerCsiHandler({final:"a"},I=>this.hPositionRelative(I)),this._parser.registerCsiHandler({final:"b"},I=>this.repeatPrecedingCharacter(I)),this._parser.registerCsiHandler({final:"c"},I=>this.sendDeviceAttributesPrimary(I)),this._parser.registerCsiHandler({prefix:">",final:"c"},I=>this.sendDeviceAttributesSecondary(I)),this._parser.registerCsiHandler({final:"d"},I=>this.linePosAbsolute(I)),this._parser.registerCsiHandler({final:"e"},I=>this.vPositionRelative(I)),this._parser.registerCsiHandler({final:"f"},I=>this.hVPosition(I)),this._parser.registerCsiHandler({final:"g"},I=>this.tabClear(I)),this._parser.registerCsiHandler({final:"h"},I=>this.setMode(I)),this._parser.registerCsiHandler({prefix:"?",final:"h"},I=>this.setModePrivate(I)),this._parser.registerCsiHandler({final:"l"},I=>this.resetMode(I)),this._parser.registerCsiHandler({prefix:"?",final:"l"},I=>this.resetModePrivate(I)),this._parser.registerCsiHandler({final:"m"},I=>this.charAttributes(I)),this._parser.registerCsiHandler({final:"n"},I=>this.deviceStatus(I)),this._parser.registerCsiHandler({prefix:"?",final:"n"},I=>this.deviceStatusPrivate(I)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},I=>this.softReset(I)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},I=>this.setCursorStyle(I)),this._parser.registerCsiHandler({final:"r"},I=>this.setScrollRegion(I)),this._parser.registerCsiHandler({final:"s"},I=>this.saveCursor(I)),this._parser.registerCsiHandler({final:"t"},I=>this.windowOptions(I)),this._parser.registerCsiHandler({final:"u"},I=>this.restoreCursor(I)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},I=>this.insertColumns(I)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},I=>this.deleteColumns(I)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},I=>this.selectProtected(I)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},I=>this.requestMode(I,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},I=>this.requestMode(I,!1)),this._parser.setExecuteHandler(m.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(m.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(m.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(m.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(m.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(m.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(m.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(m.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(m.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(m.C1.IND,()=>this.index()),this._parser.setExecuteHandler(m.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(m.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new O.OscHandler(I=>(this.setTitle(I),this.setIconName(I),!0))),this._parser.registerOscHandler(1,new O.OscHandler(I=>this.setIconName(I))),this._parser.registerOscHandler(2,new O.OscHandler(I=>this.setTitle(I))),this._parser.registerOscHandler(4,new O.OscHandler(I=>this.setOrReportIndexedColor(I))),this._parser.registerOscHandler(8,new O.OscHandler(I=>this.setHyperlink(I))),this._parser.registerOscHandler(10,new O.OscHandler(I=>this.setOrReportFgColor(I))),this._parser.registerOscHandler(11,new O.OscHandler(I=>this.setOrReportBgColor(I))),this._parser.registerOscHandler(12,new O.OscHandler(I=>this.setOrReportCursorColor(I))),this._parser.registerOscHandler(104,new O.OscHandler(I=>this.restoreIndexedColor(I))),this._parser.registerOscHandler(110,new O.OscHandler(I=>this.restoreFgColor(I))),this._parser.registerOscHandler(111,new O.OscHandler(I=>this.restoreBgColor(I))),this._parser.registerOscHandler(112,new O.OscHandler(I=>this.restoreCursorColor(I))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const I in C.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:I},()=>this.selectCharset("("+I)),this._parser.registerEscHandler({intermediates:")",final:I},()=>this.selectCharset(")"+I)),this._parser.registerEscHandler({intermediates:"*",final:I},()=>this.selectCharset("*"+I)),this._parser.registerEscHandler({intermediates:"+",final:I},()=>this.selectCharset("+"+I)),this._parser.registerEscHandler({intermediates:"-",final:I},()=>this.selectCharset("-"+I)),this._parser.registerEscHandler({intermediates:".",final:I},()=>this.selectCharset("."+I)),this._parser.registerEscHandler({intermediates:"/",final:I},()=>this.selectCharset("/"+I));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(I=>(this._logService.error("Parsing error: ",I),I)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new R.DcsHandler((I,le)=>this.requestStatusString(I,le)))}_preserveStack(N,G,Q,se){this._parseStack.paused=!0,this._parseStack.cursorStartX=N,this._parseStack.cursorStartY=G,this._parseStack.decodedLength=Q,this._parseStack.position=se}_logSlowResolvingAsync(N){this._logService.logLevel<=E.LogLevelEnum.WARN&&Promise.race([N,new Promise((G,Q)=>setTimeout(()=>Q("#SLOW_TIMEOUT"),5e3))]).catch(G=>{if("#SLOW_TIMEOUT"!==G)throw G;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(N,G){let Q,se=this._activeBuffer.x,Ae=this._activeBuffer.y,Be=0;const Ue=this._parseStack.paused;if(Ue){if(Q=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,G))return this._logSlowResolvingAsync(Q),Q;se=this._parseStack.cursorStartX,Ae=this._parseStack.cursorStartY,this._parseStack.paused=!1,N.length>V&&(Be=this._parseStack.position+V)}if(this._logService.logLevel<=E.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+("string"==typeof N?` "${N}"`:` "${Array.prototype.map.call(N,Re=>String.fromCharCode(Re)).join("")}"`),"string"==typeof N?N.split("").map(Re=>Re.charCodeAt(0)):N),this._parseBuffer.length<N.length&&this._parseBuffer.length<V&&(this._parseBuffer=new Uint32Array(Math.min(N.length,V))),Ue||this._dirtyRowTracker.clearRange(),N.length>V)for(let Re=Be;Re<N.length;Re+=V){const Ne=Re+V<N.length?Re+V:N.length,I="string"==typeof N?this._stringDecoder.decode(N.substring(Re,Ne),this._parseBuffer):this._utf8Decoder.decode(N.subarray(Re,Ne),this._parseBuffer);if(Q=this._parser.parse(this._parseBuffer,I))return this._preserveStack(se,Ae,I,Re),this._logSlowResolvingAsync(Q),Q}else if(!Ue){const Re="string"==typeof N?this._stringDecoder.decode(N,this._parseBuffer):this._utf8Decoder.decode(N,this._parseBuffer);if(Q=this._parser.parse(this._parseBuffer,Re))return this._preserveStack(se,Ae,Re,0),this._logSlowResolvingAsync(Q),Q}this._activeBuffer.x===se&&this._activeBuffer.y===Ae||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(N,G,Q){let se,Ae;const Be=this._charsetService.charset,Ue=this._optionsService.rawOptions.screenReaderMode,Re=this._bufferService.cols,Ne=this._coreService.decPrivateModes.wraparound,I=this._coreService.modes.insertMode,le=this._curAttrData;let he=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&Q-G>0&&2===he.getWidth(this._activeBuffer.x-1)&&he.setCellFromCodePoint(this._activeBuffer.x-1,0,1,le.fg,le.bg,le.extended);for(let ge=G;ge<Q;++ge){if(se=N[ge],Ae=this._unicodeService.wcwidth(se),se<127&&Be){const je=Be[String.fromCharCode(se)];je&&(se=je.charCodeAt(0))}if(Ue&&this._onA11yChar.fire((0,T.stringFromCodePoint)(se)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),Ae||!this._activeBuffer.x){if(this._activeBuffer.x+Ae-1>=Re)if(Ne){for(;this._activeBuffer.x<Re;)he.setCellFromCodePoint(this._activeBuffer.x++,0,1,le.fg,le.bg,le.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),he=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=Re-1,2===Ae)continue;if(I&&(he.insertCells(this._activeBuffer.x,Ae,this._activeBuffer.getNullCell(le),le),2===he.getWidth(Re-1)&&he.setCellFromCodePoint(Re-1,h.NULL_CELL_CODE,h.NULL_CELL_WIDTH,le.fg,le.bg,le.extended)),he.setCellFromCodePoint(this._activeBuffer.x++,se,Ae,le.fg,le.bg,le.extended),Ae>0)for(;--Ae;)he.setCellFromCodePoint(this._activeBuffer.x++,0,0,le.fg,le.bg,le.extended)}else he.getWidth(this._activeBuffer.x-1)?he.addCodepointToCell(this._activeBuffer.x-1,se):he.addCodepointToCell(this._activeBuffer.x-2,se)}Q-G>0&&(he.loadCell(this._activeBuffer.x-1,this._workCell),this._parser.precedingCodepoint=2===this._workCell.getWidth()||this._workCell.getCode()>65535?0:this._workCell.isCombined()?this._workCell.getChars().charCodeAt(0):this._workCell.content),this._activeBuffer.x<Re&&Q-G>0&&0===he.getWidth(this._activeBuffer.x)&&!he.hasContent(this._activeBuffer.x)&&he.setCellFromCodePoint(this._activeBuffer.x,0,1,le.fg,le.bg,le.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(N,G){return this._parser.registerCsiHandler(N,"t"!==N.final||N.prefix||N.intermediates?G:Q=>!ie(Q.params[0],this._optionsService.rawOptions.windowOptions)||G(Q))}registerDcsHandler(N,G){return this._parser.registerDcsHandler(N,new R.DcsHandler(G))}registerEscHandler(N,G){return this._parser.registerEscHandler(N,G)}registerOscHandler(N,G){return this._parser.registerOscHandler(N,new O.OscHandler(G))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var N;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&null!==(N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))&&void 0!==N&&N.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);G.hasWidth(this._activeBuffer.x)&&!G.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const N=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-N),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(N=this._bufferService.cols-1){this._activeBuffer.x=Math.min(N,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(N,G){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=N,this._activeBuffer.y=this._activeBuffer.scrollTop+G):(this._activeBuffer.x=N,this._activeBuffer.y=G),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(N,G){this._restrictCursor(),this._setCursor(this._activeBuffer.x+N,this._activeBuffer.y+G)}cursorUp(N){const G=this._activeBuffer.y-this._activeBuffer.scrollTop;return this._moveCursor(0,G>=0?-Math.min(G,N.params[0]||1):-(N.params[0]||1)),!0}cursorDown(N){const G=this._activeBuffer.scrollBottom-this._activeBuffer.y;return this._moveCursor(0,G>=0?Math.min(G,N.params[0]||1):N.params[0]||1),!0}cursorForward(N){return this._moveCursor(N.params[0]||1,0),!0}cursorBackward(N){return this._moveCursor(-(N.params[0]||1),0),!0}cursorNextLine(N){return this.cursorDown(N),this._activeBuffer.x=0,!0}cursorPrecedingLine(N){return this.cursorUp(N),this._activeBuffer.x=0,!0}cursorCharAbsolute(N){return this._setCursor((N.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(N){return this._setCursor(N.length>=2?(N.params[1]||1)-1:0,(N.params[0]||1)-1),!0}charPosAbsolute(N){return this._setCursor((N.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(N){return this._moveCursor(N.params[0]||1,0),!0}linePosAbsolute(N){return this._setCursor(this._activeBuffer.x,(N.params[0]||1)-1),!0}vPositionRelative(N){return this._moveCursor(0,N.params[0]||1),!0}hVPosition(N){return this.cursorPosition(N),!0}tabClear(N){const G=N.params[0];return 0===G?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===G&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(N){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let G=N.params[0]||1;for(;G--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(N){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let G=N.params[0]||1;for(;G--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(N){const G=N.params[0];return 1===G&&(this._curAttrData.bg|=536870912),2!==G&&0!==G||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(N,G,Q,se=!1,Ae=!1){const Be=this._activeBuffer.lines.get(this._activeBuffer.ybase+N);Be.replaceCells(G,Q,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),Ae),se&&(Be.isWrapped=!1)}_resetBufferLine(N,G=!1){const Q=this._activeBuffer.lines.get(this._activeBuffer.ybase+N);Q&&(Q.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),G),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+N),Q.isWrapped=!1)}eraseInDisplay(N,G=!1){let Q;switch(this._restrictCursor(this._bufferService.cols),N.params[0]){case 0:for(Q=this._activeBuffer.y,this._dirtyRowTracker.markDirty(Q),this._eraseInBufferLine(Q++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,G);Q<this._bufferService.rows;Q++)this._resetBufferLine(Q,G);this._dirtyRowTracker.markDirty(Q);break;case 1:for(Q=this._activeBuffer.y,this._dirtyRowTracker.markDirty(Q),this._eraseInBufferLine(Q,0,this._activeBuffer.x+1,!0,G),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(Q+1).isWrapped=!1);Q--;)this._resetBufferLine(Q,G);this._dirtyRowTracker.markDirty(0);break;case 2:for(Q=this._bufferService.rows,this._dirtyRowTracker.markDirty(Q-1);Q--;)this._resetBufferLine(Q,G);this._dirtyRowTracker.markDirty(0);break;case 3:const se=this._activeBuffer.lines.length-this._bufferService.rows;se>0&&(this._activeBuffer.lines.trimStart(se),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-se,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-se,0),this._onScroll.fire(0))}return!0}eraseInLine(N,G=!1){switch(this._restrictCursor(this._bufferService.cols),N.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,G);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,G);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,G)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(N){this._restrictCursor();let G=N.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const Q=this._activeBuffer.ybase+this._activeBuffer.y,Ae=this._bufferService.rows-1+this._activeBuffer.ybase-(this._bufferService.rows-1-this._activeBuffer.scrollBottom)+1;for(;G--;)this._activeBuffer.lines.splice(Ae-1,1),this._activeBuffer.lines.splice(Q,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(N){this._restrictCursor();let G=N.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const Q=this._activeBuffer.ybase+this._activeBuffer.y;let se;for(se=this._bufferService.rows-1-this._activeBuffer.scrollBottom,se=this._bufferService.rows-1+this._activeBuffer.ybase-se;G--;)this._activeBuffer.lines.splice(Q,1),this._activeBuffer.lines.splice(se,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(N){this._restrictCursor();const G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return G&&(G.insertCells(this._activeBuffer.x,N.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(N){this._restrictCursor();const G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return G&&(G.deleteCells(this._activeBuffer.x,N.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(N){let G=N.params[0]||1;for(;G--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(N){let G=N.params[0]||1;for(;G--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const G=N.params[0]||1;for(let Q=this._activeBuffer.scrollTop;Q<=this._activeBuffer.scrollBottom;++Q){const se=this._activeBuffer.lines.get(this._activeBuffer.ybase+Q);se.deleteCells(0,G,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),se.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const G=N.params[0]||1;for(let Q=this._activeBuffer.scrollTop;Q<=this._activeBuffer.scrollBottom;++Q){const se=this._activeBuffer.lines.get(this._activeBuffer.ybase+Q);se.insertCells(0,G,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),se.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const G=N.params[0]||1;for(let Q=this._activeBuffer.scrollTop;Q<=this._activeBuffer.scrollBottom;++Q){const se=this._activeBuffer.lines.get(this._activeBuffer.ybase+Q);se.insertCells(this._activeBuffer.x,G,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),se.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const G=N.params[0]||1;for(let Q=this._activeBuffer.scrollTop;Q<=this._activeBuffer.scrollBottom;++Q){const se=this._activeBuffer.lines.get(this._activeBuffer.ybase+Q);se.deleteCells(this._activeBuffer.x,G,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),se.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(N){this._restrictCursor();const G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return G&&(G.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(N.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(N){if(!this._parser.precedingCodepoint)return!0;const G=N.params[0]||1,Q=new Uint32Array(G);for(let se=0;se<G;++se)Q[se]=this._parser.precedingCodepoint;return this.print(Q,0,Q.length),!0}sendDeviceAttributesPrimary(N){return N.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(m.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(m.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(N){return N.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(m.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(m.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(N.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(m.C0.ESC+"[>83;40003;0c")),!0}_is(N){return 0===(this._optionsService.rawOptions.termName+"").indexOf(N)}setMode(N){for(let G=0;G<N.length;G++)switch(N.params[G]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(N){for(let G=0;G<N.length;G++)switch(N.params[G]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,C.DEFAULT_CHARSET),this._charsetService.setgCharset(1,C.DEFAULT_CHARSET),this._charsetService.setgCharset(2,C.DEFAULT_CHARSET),this._charsetService.setgCharset(3,C.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(N){for(let G=0;G<N.length;G++)switch(N.params[G]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(N){for(let G=0;G<N.length;G++)switch(N.params[G]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===N.params[G]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(N,G){const Q=this._coreService.decPrivateModes,{activeProtocol:se,activeEncoding:Ae}=this._coreMouseService,Be=this._coreService,{buffers:Ue,cols:Re}=this._bufferService,{active:Ne,alt:I}=Ue,le=this._optionsService.rawOptions,he=Ze=>Ze?1:2,ge=N.params[0];return je=ge,ze=G?2===ge?4:4===ge?he(Be.modes.insertMode):12===ge?3:20===ge?he(le.convertEol):0:1===ge?he(Q.applicationCursorKeys):3===ge?le.windowOptions.setWinLines?80===Re?2:132===Re?1:0:0:6===ge?he(Q.origin):7===ge?he(Q.wraparound):8===ge?3:9===ge?he("X10"===se):12===ge?he(le.cursorBlink):25===ge?he(!Be.isCursorHidden):45===ge?he(Q.reverseWraparound):66===ge?he(Q.applicationKeypad):67===ge?4:1e3===ge?he("VT200"===se):1002===ge?he("DRAG"===se):1003===ge?he("ANY"===se):1004===ge?he(Q.sendFocus):1005===ge?4:1006===ge?he("SGR"===Ae):1015===ge?4:1016===ge?he("SGR_PIXELS"===Ae):1048===ge?1:47===ge||1047===ge||1049===ge?he(Ne===I):2004===ge?he(Q.bracketedPasteMode):0,Be.triggerDataEvent(`${m.C0.ESC}[${G?"":"?"}${je};${ze}$y`),!0;var je,ze}_updateAttrColor(N,G,Q,se,Ae){return 2===G?(N|=50331648,N&=-16777216,N|=S.AttributeData.fromColorRGB([Q,se,Ae])):5===G&&(N&=-50331904,N|=33554432|255&Q),N}_extractColor(N,G,Q){const se=[0,0,-1,0,0,0];let Ae=0,Be=0;do{if(se[Be+Ae]=N.params[G+Be],N.hasSubParams(G+Be)){const Ue=N.getSubParams(G+Be);let Re=0;do{5===se[1]&&(Ae=1),se[Be+Re+1+Ae]=Ue[Re]}while(++Re<Ue.length&&Re+Be+1+Ae<se.length);break}if(5===se[1]&&Be+Ae>=2||2===se[1]&&Be+Ae>=5)break;se[1]&&(Ae=1)}while(++Be+G<N.length&&Be+Ae<se.length);for(let Ue=2;Ue<se.length;++Ue)-1===se[Ue]&&(se[Ue]=0);switch(se[0]){case 38:Q.fg=this._updateAttrColor(Q.fg,se[1],se[3],se[4],se[5]);break;case 48:Q.bg=this._updateAttrColor(Q.bg,se[1],se[3],se[4],se[5]);break;case 58:Q.extended=Q.extended.clone(),Q.extended.underlineColor=this._updateAttrColor(Q.extended.underlineColor,se[1],se[3],se[4],se[5])}return Be}_processUnderline(N,G){G.extended=G.extended.clone(),(!~N||N>5)&&(N=1),G.extended.underlineStyle=N,G.fg|=268435456,0===N&&(G.fg&=-268435457),G.updateExtended()}_processSGR0(N){N.fg=l.DEFAULT_ATTR_DATA.fg,N.bg=l.DEFAULT_ATTR_DATA.bg,N.extended=N.extended.clone(),N.extended.underlineStyle=0,N.extended.underlineColor&=-67108864,N.updateExtended()}charAttributes(N){if(1===N.length&&0===N.params[0])return this._processSGR0(this._curAttrData),!0;const G=N.length;let Q;const se=this._curAttrData;for(let Ae=0;Ae<G;Ae++)Q=N.params[Ae],Q>=30&&Q<=37?(se.fg&=-50331904,se.fg|=16777216|Q-30):Q>=40&&Q<=47?(se.bg&=-50331904,se.bg|=16777216|Q-40):Q>=90&&Q<=97?(se.fg&=-50331904,se.fg|=16777224|Q-90):Q>=100&&Q<=107?(se.bg&=-50331904,se.bg|=16777224|Q-100):0===Q?this._processSGR0(se):1===Q?se.fg|=134217728:3===Q?se.bg|=67108864:4===Q?(se.fg|=268435456,this._processUnderline(N.hasSubParams(Ae)?N.getSubParams(Ae)[0]:1,se)):5===Q?se.fg|=536870912:7===Q?se.fg|=67108864:8===Q?se.fg|=1073741824:9===Q?se.fg|=2147483648:2===Q?se.bg|=134217728:21===Q?this._processUnderline(2,se):22===Q?(se.fg&=-134217729,se.bg&=-134217729):23===Q?se.bg&=-67108865:24===Q?(se.fg&=-268435457,this._processUnderline(0,se)):25===Q?se.fg&=-536870913:27===Q?se.fg&=-67108865:28===Q?se.fg&=-1073741825:29===Q?se.fg&=2147483647:39===Q?(se.fg&=-67108864,se.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):49===Q?(se.bg&=-67108864,se.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):38===Q||48===Q||58===Q?Ae+=this._extractColor(N,Ae,se):53===Q?se.bg|=1073741824:55===Q?se.bg&=-1073741825:59===Q?(se.extended=se.extended.clone(),se.extended.underlineColor=-1,se.updateExtended()):100===Q?(se.fg&=-67108864,se.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,se.bg&=-67108864,se.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",Q);return!0}deviceStatus(N){switch(N.params[0]){case 5:this._coreService.triggerDataEvent(`${m.C0.ESC}[0n`);break;case 6:this._coreService.triggerDataEvent(`${m.C0.ESC}[${this._activeBuffer.y+1};${this._activeBuffer.x+1}R`)}return!0}deviceStatusPrivate(N){return 6===N.params[0]&&this._coreService.triggerDataEvent(`${m.C0.ESC}[?${this._activeBuffer.y+1};${this._activeBuffer.x+1}R`),!0}softReset(N){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(N){const G=N.params[0]||1;switch(G){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}return this._optionsService.options.cursorBlink=G%2==1,!0}setScrollRegion(N){const G=N.params[0]||1;let Q;return(N.length<2||(Q=N.params[1])>this._bufferService.rows||0===Q)&&(Q=this._bufferService.rows),Q>G&&(this._activeBuffer.scrollTop=G-1,this._activeBuffer.scrollBottom=Q-1,this._setCursor(0,0)),!0}windowOptions(N){if(!ie(N.params[0],this._optionsService.rawOptions.windowOptions))return!0;const G=N.length>1?N.params[1]:0;switch(N.params[0]){case 14:2!==G&&this._onRequestWindowsOptionsReport.fire(X.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(X.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${m.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:0!==G&&2!==G||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==G&&1!==G||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==G&&2!==G||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==G&&1!==G||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(N){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(N){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(N){return this._windowTitle=N,this._onTitleChange.fire(N),!0}setIconName(N){return this._iconName=N,!0}setOrReportIndexedColor(N){const G=[],Q=N.split(";");for(;Q.length>1;){const se=Q.shift(),Ae=Q.shift();if(/^\d+$/.exec(se)){const Be=parseInt(se);if(Me(Be))if("?"===Ae)G.push({type:0,index:Be});else{const Ue=(0,x.parseColor)(Ae);Ue&&G.push({type:1,index:Be,color:Ue})}}}return G.length&&this._onColor.fire(G),!0}setHyperlink(N){const G=N.split(";");return!(G.length<2)&&(G[1]?this._createHyperlink(G[0],G[1]):!G[0]&&this._finishHyperlink())}_createHyperlink(N,G){this._getCurrentLinkId()&&this._finishHyperlink();const Q=N.split(":");let se;const Ae=Q.findIndex(Be=>Be.startsWith("id="));return-1!==Ae&&(se=Q[Ae].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:se,uri:G}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(N,G){const Q=N.split(";");for(let se=0;se<Q.length&&!(G>=this._specialColors.length);++se,++G)if("?"===Q[se])this._onColor.fire([{type:0,index:this._specialColors[G]}]);else{const Ae=(0,x.parseColor)(Q[se]);Ae&&this._onColor.fire([{type:1,index:this._specialColors[G],color:Ae}])}return!0}setOrReportFgColor(N){return this._setOrReportSpecialColor(N,0)}setOrReportBgColor(N){return this._setOrReportSpecialColor(N,1)}setOrReportCursorColor(N){return this._setOrReportSpecialColor(N,2)}restoreIndexedColor(N){if(!N)return this._onColor.fire([{type:2}]),!0;const G=[],Q=N.split(";");for(let se=0;se<Q.length;++se)if(/^\d+$/.exec(Q[se])){const Ae=parseInt(Q[se]);Me(Ae)&&G.push({type:2,index:Ae})}return G.length&&this._onColor.fire(G),!0}restoreFgColor(N){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(N){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(N){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,C.DEFAULT_CHARSET),!0}selectCharset(N){return 2!==N.length?(this.selectDefaultCharset(),!0):("/"===N[0]||this._charsetService.setgCharset(L[N[0]],C.CHARSETS[N[1]]||C.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){return this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop?(this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)):(this._activeBuffer.y--,this._restrictCursor()),!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(N){return this._charsetService.setgLevel(N),!0}screenAlignmentPattern(){const N=new u.CellData;N.content=4194304|"E".charCodeAt(0),N.fg=this._curAttrData.fg,N.bg=this._curAttrData.bg,this._setCursor(0,0);for(let G=0;G<this._bufferService.rows;++G){const se=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y+G);se&&(se.fill(N),se.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(N,G){const Q=this._bufferService.buffer,se=this._optionsService.rawOptions;return(Ae=>(this._coreService.triggerDataEvent(`${m.C0.ESC}${Ae}${m.C0.ESC}\\`),!0))('"q'===N?`P1$r${this._curAttrData.isProtected()?1:0}"q`:'"p'===N?'P1$r61;1"p':"r"===N?`P1$r${Q.scrollTop+1};${Q.scrollBottom+1}r`:"m"===N?"P1$r0m":" q"===N?`P1$r${{block:2,underline:4,bar:6}[se.cursorStyle]-(se.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(N,G){this._dirtyRowTracker.markRangeDirty(N,G)}};let Se=class{constructor(Ce){this._bufferService=Ce,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(Ce){Ce<this.start?this.start=Ce:Ce>this.end&&(this.end=Ce)}markRangeDirty(Ce,N){Ce>N&&(J=Ce,Ce=N,N=J),Ce<this.start&&(this.start=Ce),N>this.end&&(this.end=N)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Me(Ce){return 0<=Ce&&Ce<256}Se=y([M(0,E.IBufferService)],Se)},844:(de,g)=>{function v(y){for(const M of y)M.dispose();y.length=0}Object.defineProperty(g,"__esModule",{value:!0}),g.getDisposeArrayDisposable=g.disposeArray=g.toDisposable=g.MutableDisposable=g.Disposable=void 0,g.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const y of this._disposables)y.dispose();this._disposables.length=0}register(y){return this._disposables.push(y),y}unregister(y){const M=this._disposables.indexOf(y);-1!==M&&this._disposables.splice(M,1)}},g.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(y){var M;this._isDisposed||y===this._value||(null===(M=this._value)||void 0===M||M.dispose(),this._value=y)}clear(){this.value=void 0}dispose(){var y;this._isDisposed=!0,null===(y=this._value)||void 0===y||y.dispose(),this._value=void 0}},g.toDisposable=function(y){return{dispose:y}},g.disposeArray=v,g.getDisposeArrayDisposable=function(y){return{dispose:()=>v(y)}}},1505:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.FourKeyMap=g.TwoKeyMap=void 0;class v{constructor(){this._data={}}set(M,m,C){this._data[M]||(this._data[M]={}),this._data[M][m]=C}get(M,m){return this._data[M]?this._data[M][m]:void 0}clear(){this._data={}}}g.TwoKeyMap=v,g.FourKeyMap=class{constructor(){this._data=new v}set(y,M,m,C,k){this._data.get(y,M)||this._data.set(y,M,new v),this._data.get(y,M).set(m,C,k)}get(y,M,m,C){var k;return null===(k=this._data.get(y,M))||void 0===k?void 0:k.get(m,C)}clear(){this._data.clear()}}},6114:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.isChromeOS=g.isLinux=g.isWindows=g.isIphone=g.isIpad=g.isMac=g.getSafariVersion=g.isSafari=g.isLegacyEdge=g.isFirefox=g.isNode=void 0,g.isNode=typeof navigator>"u";const v=g.isNode?"node":navigator.userAgent,y=g.isNode?"node":navigator.platform;g.isFirefox=v.includes("Firefox"),g.isLegacyEdge=v.includes("Edge"),g.isSafari=/^((?!chrome|android).)*safari/i.test(v),g.getSafariVersion=function(){if(!g.isSafari)return 0;const M=v.match(/Version\/(\d+)/);return null===M||M.length<2?0:parseInt(M[1])},g.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(y),g.isIpad="iPad"===y,g.isIphone="iPhone"===y,g.isWindows=["Windows","Win16","Win32","WinCE"].includes(y),g.isLinux=y.indexOf("Linux")>=0,g.isChromeOS=/\bCrOS\b/.test(v)},6106:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.SortedList=void 0;let v=0;g.SortedList=class{constructor(y){this._getKey=y,this._array=[]}clear(){this._array.length=0}insert(y){0!==this._array.length?(v=this._search(this._getKey(y)),this._array.splice(v,0,y)):this._array.push(y)}delete(y){if(0===this._array.length)return!1;const M=this._getKey(y);if(void 0===M||(v=this._search(M),-1===v)||this._getKey(this._array[v])!==M)return!1;do{if(this._array[v]===y)return this._array.splice(v,1),!0}while(++v<this._array.length&&this._getKey(this._array[v])===M);return!1}*getKeyIterator(y){if(0!==this._array.length&&(v=this._search(y),!(v<0||v>=this._array.length)&&this._getKey(this._array[v])===y))do{yield this._array[v]}while(++v<this._array.length&&this._getKey(this._array[v])===y)}forEachByKey(y,M){if(0!==this._array.length&&(v=this._search(y),!(v<0||v>=this._array.length)&&this._getKey(this._array[v])===y))do{M(this._array[v])}while(++v<this._array.length&&this._getKey(this._array[v])===y)}values(){return[...this._array].values()}_search(y){let M=0,m=this._array.length-1;for(;m>=M;){let C=M+m>>1;const k=this._getKey(this._array[C]);if(k>y)m=C-1;else{if(!(k<y)){for(;C>0&&this._getKey(this._array[C-1])===y;)C--;return C}M=C+1}}return M}}},7226:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DebouncedIdleTask=g.IdleTaskQueue=g.PriorityTaskQueue=void 0;const y=v(6114);class M{constructor(){this._tasks=[],this._i=0}enqueue(k){this._tasks.push(k),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(k){this._idleCallback=void 0;let P=0,T=0,l=k.timeRemaining(),_=0;for(;this._i<this._tasks.length;){if(P=Date.now(),this._tasks[this._i]()||this._i++,P=Math.max(1,Date.now()-P),T=Math.max(P,T),_=k.timeRemaining(),1.5*T>_)return l-P<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(l-P))}ms`),void this._start();l=_}this.clear()}}class m extends M{_requestCallback(k){return setTimeout(()=>k(this._createDeadline(16)))}_cancelCallback(k){clearTimeout(k)}_createDeadline(k){const P=Date.now()+k;return{timeRemaining:()=>Math.max(0,P-Date.now())}}}g.PriorityTaskQueue=m,g.IdleTaskQueue=!y.isNode&&"requestIdleCallback"in window?class extends M{_requestCallback(C){return requestIdleCallback(C)}_cancelCallback(C){cancelIdleCallback(C)}}:m,g.DebouncedIdleTask=class{constructor(){this._queue=new g.IdleTaskQueue}set(C){this._queue.clear(),this._queue.enqueue(C)}flush(){this._queue.flush()}}},9282:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.updateWindowsModeWrappedState=void 0;const y=v(643);g.updateWindowsModeWrappedState=function(M){const m=M.buffer.lines.get(M.buffer.ybase+M.buffer.y-1),C=m?.get(M.cols-1),k=M.buffer.lines.get(M.buffer.ybase+M.buffer.y);k&&C&&(k.isWrapped=C[y.CHAR_DATA_CODE_INDEX]!==y.NULL_CELL_CODE&&C[y.CHAR_DATA_CODE_INDEX]!==y.WHITESPACE_CELL_CODE)}},3734:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.ExtendedAttrs=g.AttributeData=void 0;class v{constructor(){this.fg=0,this.bg=0,this.extended=new y}static toColorRGB(m){return[m>>>16&255,m>>>8&255,255&m]}static fromColorRGB(m){return(255&m[0])<<16|(255&m[1])<<8|255&m[2]}clone(){const m=new v;return m.fg=this.fg,m.bg=this.bg,m.extended=this.extended.clone(),m}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&0!==this.extended.underlineStyle?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return 50331648==(50331648&this.fg)}isBgRGB(){return 50331648==(50331648&this.bg)}isFgPalette(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)}isBgPalette(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)}isFgDefault(){return 0==(50331648&this.fg)}isBgDefault(){return 0==(50331648&this.bg)}isAttributeDefault(){return 0===this.fg&&0===this.bg}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}g.AttributeData=v;class y{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(m){this._ext=m}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(m){this._ext&=-469762049,this._ext|=m<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(m){this._ext&=-67108864,this._ext|=67108863&m}get urlId(){return this._urlId}set urlId(m){this._urlId=m}constructor(m=0,C=0){this._ext=0,this._urlId=0,this._ext=m,this._urlId=C}clone(){return new y(this._ext,this._urlId)}isEmpty(){return 0===this.underlineStyle&&0===this._urlId}}g.ExtendedAttrs=y},9092:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.Buffer=g.MAX_BUFFER_SIZE=void 0;const y=v(6349),M=v(7226),m=v(3734),C=v(8437),k=v(4634),P=v(511),T=v(643),l=v(4863),_=v(7116);g.MAX_BUFFER_SIZE=4294967295,g.Buffer=class{constructor(h,u,S){this._hasScrollback=h,this._optionsService=u,this._bufferService=S,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=C.DEFAULT_ATTR_DATA.clone(),this.savedCharset=_.DEFAULT_CHARSET,this.markers=[],this._nullCell=P.CellData.fromCharData([0,T.NULL_CELL_CHAR,T.NULL_CELL_WIDTH,T.NULL_CELL_CODE]),this._whitespaceCell=P.CellData.fromCharData([0,T.WHITESPACE_CELL_CHAR,T.WHITESPACE_CELL_WIDTH,T.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new M.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new y.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(h){return h?(this._nullCell.fg=h.fg,this._nullCell.bg=h.bg,this._nullCell.extended=h.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new m.ExtendedAttrs),this._nullCell}getWhitespaceCell(h){return h?(this._whitespaceCell.fg=h.fg,this._whitespaceCell.bg=h.bg,this._whitespaceCell.extended=h.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new m.ExtendedAttrs),this._whitespaceCell}getBlankLine(h,u){return new C.BufferLine(this._bufferService.cols,this.getNullCell(h),u)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const h=this.ybase+this.y-this.ydisp;return h>=0&&h<this._rows}_getCorrectBufferLength(h){if(!this._hasScrollback)return h;const u=h+this._optionsService.rawOptions.scrollback;return u>g.MAX_BUFFER_SIZE?g.MAX_BUFFER_SIZE:u}fillViewportRows(h){if(0===this.lines.length){void 0===h&&(h=C.DEFAULT_ATTR_DATA);let u=this._rows;for(;u--;)this.lines.push(this.getBlankLine(h))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new y.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(h,u){const S=this.getNullCell(C.DEFAULT_ATTR_DATA);let E=0;const O=this._getCorrectBufferLength(u);if(O>this.lines.maxLength&&(this.lines.maxLength=O),this.lines.length>0){if(this._cols<h)for(let x=0;x<this.lines.length;x++)E+=+this.lines.get(x).resize(h,S);let R=0;if(this._rows<u)for(let x=this._rows;x<u;x++)this.lines.length<u+this.ybase&&(this._optionsService.rawOptions.windowsMode||void 0!==this._optionsService.rawOptions.windowsPty.backend||void 0!==this._optionsService.rawOptions.windowsPty.buildNumber?this.lines.push(new C.BufferLine(h,S)):this.ybase>0&&this.lines.length<=this.ybase+this.y+R+1?(this.ybase--,R++,this.ydisp>0&&this.ydisp--):this.lines.push(new C.BufferLine(h,S)));else for(let x=this._rows;x>u;x--)this.lines.length>u+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(O<this.lines.maxLength){const x=this.lines.length-O;x>0&&(this.lines.trimStart(x),this.ybase=Math.max(this.ybase-x,0),this.ydisp=Math.max(this.ydisp-x,0),this.savedY=Math.max(this.savedY-x,0)),this.lines.maxLength=O}this.x=Math.min(this.x,h-1),this.y=Math.min(this.y,u-1),R&&(this.y+=R),this.savedX=Math.min(this.savedX,h-1),this.scrollTop=0}if(this.scrollBottom=u-1,this._isReflowEnabled&&(this._reflow(h,u),this._cols>h))for(let R=0;R<this.lines.length;R++)E+=+this.lines.get(R).resize(h,S);this._cols=h,this._rows=u,this._memoryCleanupQueue.clear(),E>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let h=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,h=!1);let u=0;for(;this._memoryCleanupPosition<this.lines.length;)if(u+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),u>100)return!0;return h}get _isReflowEnabled(){const h=this._optionsService.rawOptions.windowsPty;return h&&h.buildNumber?this._hasScrollback&&"conpty"===h.backend&&h.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(h,u){this._cols!==h&&(h>this._cols?this._reflowLarger(h,u):this._reflowSmaller(h,u))}_reflowLarger(h,u){const S=(0,k.reflowLargerGetLinesToRemove)(this.lines,this._cols,h,this.ybase+this.y,this.getNullCell(C.DEFAULT_ATTR_DATA));if(S.length>0){const E=(0,k.reflowLargerCreateNewLayout)(this.lines,S);(0,k.reflowLargerApplyNewLayout)(this.lines,E.layout),this._reflowLargerAdjustViewport(h,u,E.countRemoved)}}_reflowLargerAdjustViewport(h,u,S){const E=this.getNullCell(C.DEFAULT_ATTR_DATA);let O=S;for(;O-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<u&&this.lines.push(new C.BufferLine(h,E))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-S,0)}_reflowSmaller(h,u){const S=this.getNullCell(C.DEFAULT_ATTR_DATA),E=[];let O=0;for(let R=this.lines.length-1;R>=0;R--){let x=this.lines.get(R);if(!x||!x.isWrapped&&x.getTrimmedLength()<=h)continue;const L=[x];for(;x.isWrapped&&R>0;)x=this.lines.get(--R),L.unshift(x);const V=this.ybase+this.y;if(V>=R&&V<R+L.length)continue;const ie=L[L.length-1].getTrimmedLength(),X=(0,k.reflowSmallerGetNewLineLengths)(L,this._cols,h),J=X.length-L.length;let be;be=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+J):Math.max(0,this.lines.length-this.lines.maxLength+J);const Se=[];for(let se=0;se<J;se++){const Ae=this.getBlankLine(C.DEFAULT_ATTR_DATA,!0);Se.push(Ae)}Se.length>0&&(E.push({start:R+L.length+O,newLines:Se}),O+=Se.length),L.push(...Se);let Me=X.length-1,Ce=X[Me];0===Ce&&(Me--,Ce=X[Me]);let N=L.length-J-1,G=ie;for(;N>=0;){const se=Math.min(G,Ce);if(void 0===L[Me])break;if(L[Me].copyCellsFrom(L[N],G-se,Ce-se,se,!0),Ce-=se,0===Ce&&(Me--,Ce=X[Me]),G-=se,0===G){N--;const Ae=Math.max(N,0);G=(0,k.getWrappedLineTrimmedLength)(L,Ae,this._cols)}}for(let se=0;se<L.length;se++)X[se]<h&&L[se].setCell(X[se],S);let Q=J-be;for(;Q-- >0;)0===this.ybase?this.y<u-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+O)-u&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+J,this.ybase+u-1)}if(E.length>0){const R=[],x=[];for(let Me=0;Me<this.lines.length;Me++)x.push(this.lines.get(Me));const L=this.lines.length;let V=L-1,ie=0,X=E[ie];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+O);let J=0;for(let Me=Math.min(this.lines.maxLength-1,L+O-1);Me>=0;Me--)if(X&&X.start>V+J){for(let Ce=X.newLines.length-1;Ce>=0;Ce--)this.lines.set(Me--,X.newLines[Ce]);Me++,R.push({index:V+1,amount:X.newLines.length}),J+=X.newLines.length,X=E[++ie]}else this.lines.set(Me,x[V--]);let be=0;for(let Me=R.length-1;Me>=0;Me--)R[Me].index+=be,this.lines.onInsertEmitter.fire(R[Me]),be+=R[Me].amount;const Se=Math.max(0,L+O-this.lines.maxLength);Se>0&&this.lines.onTrimEmitter.fire(Se)}}translateBufferLineToString(h,u,S=0,E){const O=this.lines.get(h);return O?O.translateToString(u,S,E):""}getWrappedRangeForLine(h){let u=h,S=h;for(;u>0&&this.lines.get(u).isWrapped;)u--;for(;S+1<this.lines.length&&this.lines.get(S+1).isWrapped;)S++;return{first:u,last:S}}setupTabStops(h){for(null!=h?this.tabs[h]||(h=this.prevStop(h)):(this.tabs={},h=0);h<this._cols;h+=this._optionsService.rawOptions.tabStopWidth)this.tabs[h]=!0}prevStop(h){for(null==h&&(h=this.x);!this.tabs[--h]&&h>0;);return h>=this._cols?this._cols-1:h<0?0:h}nextStop(h){for(null==h&&(h=this.x);!this.tabs[++h]&&h<this._cols;);return h>=this._cols?this._cols-1:h<0?0:h}clearMarkers(h){this._isClearing=!0;for(let u=0;u<this.markers.length;u++)this.markers[u].line===h&&(this.markers[u].dispose(),this.markers.splice(u--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].dispose(),this.markers.splice(h--,1);this._isClearing=!1}addMarker(h){const u=new l.Marker(h);return this.markers.push(u),u.register(this.lines.onTrim(S=>{u.line-=S,u.line<0&&u.dispose()})),u.register(this.lines.onInsert(S=>{u.line>=S.index&&(u.line+=S.amount)})),u.register(this.lines.onDelete(S=>{u.line>=S.index&&u.line<S.index+S.amount&&u.dispose(),u.line>S.index&&(u.line-=S.amount)})),u.register(u.onDispose(()=>this._removeMarker(u))),u}_removeMarker(h){this._isClearing||this.markers.splice(this.markers.indexOf(h),1)}}},8437:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.BufferLine=g.DEFAULT_ATTR_DATA=void 0;const y=v(3734),M=v(511),m=v(643),C=v(482);g.DEFAULT_ATTR_DATA=Object.freeze(new y.AttributeData);let k=0;class P{constructor(l,_,h=!1){this.isWrapped=h,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*l);const u=_||M.CellData.fromCharData([0,m.NULL_CELL_CHAR,m.NULL_CELL_WIDTH,m.NULL_CELL_CODE]);for(let S=0;S<l;++S)this.setCell(S,u);this.length=l}get(l){const _=this._data[3*l+0],h=2097151&_;return[this._data[3*l+1],2097152&_?this._combined[l]:h?(0,C.stringFromCodePoint)(h):"",_>>22,2097152&_?this._combined[l].charCodeAt(this._combined[l].length-1):h]}set(l,_){this._data[3*l+1]=_[m.CHAR_DATA_ATTR_INDEX],_[m.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[l]=_[1],this._data[3*l+0]=2097152|l|_[m.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*l+0]=_[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[m.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(l){return this._data[3*l+0]>>22}hasWidth(l){return 12582912&this._data[3*l+0]}getFg(l){return this._data[3*l+1]}getBg(l){return this._data[3*l+2]}hasContent(l){return 4194303&this._data[3*l+0]}getCodePoint(l){const _=this._data[3*l+0];return 2097152&_?this._combined[l].charCodeAt(this._combined[l].length-1):2097151&_}isCombined(l){return 2097152&this._data[3*l+0]}getString(l){const _=this._data[3*l+0];return 2097152&_?this._combined[l]:2097151&_?(0,C.stringFromCodePoint)(2097151&_):""}isProtected(l){return 536870912&this._data[3*l+2]}loadCell(l,_){return k=3*l,_.content=this._data[k+0],_.fg=this._data[k+1],_.bg=this._data[k+2],2097152&_.content&&(_.combinedData=this._combined[l]),268435456&_.bg&&(_.extended=this._extendedAttrs[l]),_}setCell(l,_){2097152&_.content&&(this._combined[l]=_.combinedData),268435456&_.bg&&(this._extendedAttrs[l]=_.extended),this._data[3*l+0]=_.content,this._data[3*l+1]=_.fg,this._data[3*l+2]=_.bg}setCellFromCodePoint(l,_,h,u,S,E){268435456&S&&(this._extendedAttrs[l]=E),this._data[3*l+0]=_|h<<22,this._data[3*l+1]=u,this._data[3*l+2]=S}addCodepointToCell(l,_){let h=this._data[3*l+0];2097152&h?this._combined[l]+=(0,C.stringFromCodePoint)(_):(2097151&h?(this._combined[l]=(0,C.stringFromCodePoint)(2097151&h)+(0,C.stringFromCodePoint)(_),h&=-2097152,h|=2097152):h=4194304|_,this._data[3*l+0]=h)}insertCells(l,_,h,u){if((l%=this.length)&&2===this.getWidth(l-1)&&this.setCellFromCodePoint(l-1,0,1,u?.fg||0,u?.bg||0,u?.extended||new y.ExtendedAttrs),_<this.length-l){const S=new M.CellData;for(let E=this.length-l-_-1;E>=0;--E)this.setCell(l+_+E,this.loadCell(l+E,S));for(let E=0;E<_;++E)this.setCell(l+E,h)}else for(let S=l;S<this.length;++S)this.setCell(S,h);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,u?.fg||0,u?.bg||0,u?.extended||new y.ExtendedAttrs)}deleteCells(l,_,h,u){if(_<this.length-(l%=this.length)){const S=new M.CellData;for(let E=0;E<this.length-l-_;++E)this.setCell(l+E,this.loadCell(l+_+E,S));for(let E=this.length-_;E<this.length;++E)this.setCell(E,h)}else for(let S=l;S<this.length;++S)this.setCell(S,h);l&&2===this.getWidth(l-1)&&this.setCellFromCodePoint(l-1,0,1,u?.fg||0,u?.bg||0,u?.extended||new y.ExtendedAttrs),0!==this.getWidth(l)||this.hasContent(l)||this.setCellFromCodePoint(l,0,1,u?.fg||0,u?.bg||0,u?.extended||new y.ExtendedAttrs)}replaceCells(l,_,h,u,S=!1){if(S)for(l&&2===this.getWidth(l-1)&&!this.isProtected(l-1)&&this.setCellFromCodePoint(l-1,0,1,u?.fg||0,u?.bg||0,u?.extended||new y.ExtendedAttrs),_<this.length&&2===this.getWidth(_-1)&&!this.isProtected(_)&&this.setCellFromCodePoint(_,0,1,u?.fg||0,u?.bg||0,u?.extended||new y.ExtendedAttrs);l<_&&l<this.length;)this.isProtected(l)||this.setCell(l,h),l++;else for(l&&2===this.getWidth(l-1)&&this.setCellFromCodePoint(l-1,0,1,u?.fg||0,u?.bg||0,u?.extended||new y.ExtendedAttrs),_<this.length&&2===this.getWidth(_-1)&&this.setCellFromCodePoint(_,0,1,u?.fg||0,u?.bg||0,u?.extended||new y.ExtendedAttrs);l<_&&l<this.length;)this.setCell(l++,h)}resize(l,_){if(l===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const h=3*l;if(l>this.length){if(this._data.buffer.byteLength>=4*h)this._data=new Uint32Array(this._data.buffer,0,h);else{const u=new Uint32Array(h);u.set(this._data),this._data=u}for(let u=this.length;u<l;++u)this.setCell(u,_)}else{this._data=this._data.subarray(0,h);const u=Object.keys(this._combined);for(let E=0;E<u.length;E++){const O=parseInt(u[E],10);O>=l&&delete this._combined[O]}const S=Object.keys(this._extendedAttrs);for(let E=0;E<S.length;E++){const O=parseInt(S[E],10);O>=l&&delete this._extendedAttrs[O]}}return this.length=l,4*h*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const l=new Uint32Array(this._data.length);return l.set(this._data),this._data=l,1}return 0}fill(l,_=!1){if(_)for(let h=0;h<this.length;++h)this.isProtected(h)||this.setCell(h,l);else{this._combined={},this._extendedAttrs={};for(let h=0;h<this.length;++h)this.setCell(h,l)}}copyFrom(l){this.length!==l.length?this._data=new Uint32Array(l._data):this._data.set(l._data),this.length=l.length,this._combined={};for(const _ in l._combined)this._combined[_]=l._combined[_];this._extendedAttrs={};for(const _ in l._extendedAttrs)this._extendedAttrs[_]=l._extendedAttrs[_];this.isWrapped=l.isWrapped}clone(){const l=new P(0);l._data=new Uint32Array(this._data),l.length=this.length;for(const _ in this._combined)l._combined[_]=this._combined[_];for(const _ in this._extendedAttrs)l._extendedAttrs[_]=this._extendedAttrs[_];return l.isWrapped=this.isWrapped,l}getTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0])return l+(this._data[3*l+0]>>22);return 0}getNoBgTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0]||50331648&this._data[3*l+2])return l+(this._data[3*l+0]>>22);return 0}copyCellsFrom(l,_,h,u,S){const E=l._data;if(S)for(let R=u-1;R>=0;R--){for(let x=0;x<3;x++)this._data[3*(h+R)+x]=E[3*(_+R)+x];268435456&E[3*(_+R)+2]&&(this._extendedAttrs[h+R]=l._extendedAttrs[_+R])}else for(let R=0;R<u;R++){for(let x=0;x<3;x++)this._data[3*(h+R)+x]=E[3*(_+R)+x];268435456&E[3*(_+R)+2]&&(this._extendedAttrs[h+R]=l._extendedAttrs[_+R])}const O=Object.keys(l._combined);for(let R=0;R<O.length;R++){const x=parseInt(O[R],10);x>=_&&(this._combined[x-_+h]=l._combined[x])}}translateToString(l=!1,_=0,h=this.length){l&&(h=Math.min(h,this.getTrimmedLength()));let u="";for(;_<h;){const S=this._data[3*_+0],E=2097151&S;u+=2097152&S?this._combined[_]:E?(0,C.stringFromCodePoint)(E):m.WHITESPACE_CELL_CHAR,_+=S>>22||1}return u}}g.BufferLine=P},4841:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.getRangeLength=void 0,g.getRangeLength=function(v,y){if(v.start.y>v.end.y)throw new Error(`Buffer range end (${v.end.x}, ${v.end.y}) cannot be before start (${v.start.x}, ${v.start.y})`);return y*(v.end.y-v.start.y)+(v.end.x-v.start.x+1)}},4634:(de,g)=>{function v(y,M,m){if(M===y.length-1)return y[M].getTrimmedLength();const C=!y[M].hasContent(m-1)&&1===y[M].getWidth(m-1),k=2===y[M+1].getWidth(0);return C&&k?m-1:m}Object.defineProperty(g,"__esModule",{value:!0}),g.getWrappedLineTrimmedLength=g.reflowSmallerGetNewLineLengths=g.reflowLargerApplyNewLayout=g.reflowLargerCreateNewLayout=g.reflowLargerGetLinesToRemove=void 0,g.reflowLargerGetLinesToRemove=function(y,M,m,C,k){const P=[];for(let T=0;T<y.length-1;T++){let l=T,_=y.get(++l);if(!_.isWrapped)continue;const h=[y.get(T)];for(;l<y.length&&_.isWrapped;)h.push(_),_=y.get(++l);if(C>=T&&C<l){T+=h.length-1;continue}let u=0,S=v(h,u,M),E=1,O=0;for(;E<h.length;){const x=v(h,E,M),ie=Math.min(x-O,m-S);h[u].copyCellsFrom(h[E],O,S,ie,!1),S+=ie,S===m&&(u++,S=0),O+=ie,O===x&&(E++,O=0),0===S&&0!==u&&2===h[u-1].getWidth(m-1)&&(h[u].copyCellsFrom(h[u-1],m-1,S++,1,!1),h[u-1].setCell(m-1,k))}h[u].replaceCells(S,m,k);let R=0;for(let x=h.length-1;x>0&&(x>u||0===h[x].getTrimmedLength());x--)R++;R>0&&(P.push(T+h.length-R),P.push(R)),T+=h.length-1}return P},g.reflowLargerCreateNewLayout=function(y,M){const m=[];let C=0,k=M[C],P=0;for(let T=0;T<y.length;T++)if(k===T){const l=M[++C];y.onDeleteEmitter.fire({index:T-P,amount:l}),T+=l-1,P+=l,k=M[++C]}else m.push(T);return{layout:m,countRemoved:P}},g.reflowLargerApplyNewLayout=function(y,M){const m=[];for(let C=0;C<M.length;C++)m.push(y.get(M[C]));for(let C=0;C<m.length;C++)y.set(C,m[C]);y.length=M.length},g.reflowSmallerGetNewLineLengths=function(y,M,m){const C=[],k=y.map((_,h)=>v(y,h,M)).reduce((_,h)=>_+h);let P=0,T=0,l=0;for(;l<k;){if(k-l<m){C.push(k-l);break}P+=m;const _=v(y,T,M);P>_&&(P-=_,T++);const h=2===y[T].getWidth(P-1);h&&P--;const u=h?m-1:m;C.push(u),l+=u}return C},g.getWrappedLineTrimmedLength=v},5295:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.BufferSet=void 0;const y=v(8460),M=v(844),m=v(9092);g.BufferSet=class C extends M.Disposable{constructor(P,T){super(),this._optionsService=P,this._bufferService=T,this._onBufferActivate=this.register(new y.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new m.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new m.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(P){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(P),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(P,T){this._normal.resize(P,T),this._alt.resize(P,T),this.setupTabStops(P)}setupTabStops(P){this._normal.setupTabStops(P),this._alt.setupTabStops(P)}}},511:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.CellData=void 0;const y=v(482),M=v(643),m=v(3734);class C extends m.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new m.ExtendedAttrs,this.combinedData=""}static fromCharData(P){const T=new C;return T.setFromCharData(P),T}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,y.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(P){this.fg=P[M.CHAR_DATA_ATTR_INDEX],this.bg=0;let T=!1;if(P[M.CHAR_DATA_CHAR_INDEX].length>2)T=!0;else if(2===P[M.CHAR_DATA_CHAR_INDEX].length){const l=P[M.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=l&&l<=56319){const _=P[M.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=_&&_<=57343?this.content=1024*(l-55296)+_-56320+65536|P[M.CHAR_DATA_WIDTH_INDEX]<<22:T=!0}else T=!0}else this.content=P[M.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|P[M.CHAR_DATA_WIDTH_INDEX]<<22;T&&(this.combinedData=P[M.CHAR_DATA_CHAR_INDEX],this.content=2097152|P[M.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}g.CellData=C},643:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.WHITESPACE_CELL_CODE=g.WHITESPACE_CELL_WIDTH=g.WHITESPACE_CELL_CHAR=g.NULL_CELL_CODE=g.NULL_CELL_WIDTH=g.NULL_CELL_CHAR=g.CHAR_DATA_CODE_INDEX=g.CHAR_DATA_WIDTH_INDEX=g.CHAR_DATA_CHAR_INDEX=g.CHAR_DATA_ATTR_INDEX=g.DEFAULT_EXT=g.DEFAULT_ATTR=g.DEFAULT_COLOR=void 0,g.DEFAULT_COLOR=0,g.DEFAULT_ATTR=256|g.DEFAULT_COLOR<<9,g.DEFAULT_EXT=0,g.CHAR_DATA_ATTR_INDEX=0,g.CHAR_DATA_CHAR_INDEX=1,g.CHAR_DATA_WIDTH_INDEX=2,g.CHAR_DATA_CODE_INDEX=3,g.NULL_CELL_CHAR="",g.NULL_CELL_WIDTH=1,g.NULL_CELL_CODE=0,g.WHITESPACE_CELL_CHAR=" ",g.WHITESPACE_CELL_WIDTH=1,g.WHITESPACE_CELL_CODE=32},4863:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.Marker=void 0;const y=v(8460),M=v(844);class m{get id(){return this._id}constructor(k){this.line=k,this.isDisposed=!1,this._disposables=[],this._id=m._nextId++,this._onDispose=this.register(new y.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,M.disposeArray)(this._disposables),this._disposables.length=0)}register(k){return this._disposables.push(k),k}}g.Marker=m,m._nextId=1},7116:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DEFAULT_CHARSET=g.CHARSETS=void 0,g.CHARSETS={},g.DEFAULT_CHARSET=g.CHARSETS.B,g.CHARSETS[0]={"`":"\u25c6",a:"\u2592",b:"\u2409",c:"\u240c",d:"\u240d",e:"\u240a",f:"\xb0",g:"\xb1",h:"\u2424",i:"\u240b",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\xa3","~":"\xb7"},g.CHARSETS.A={"#":"\xa3"},g.CHARSETS.B=void 0,g.CHARSETS[4]={"#":"\xa3","@":"\xbe","[":"ij","\\":"\xbd","]":"|","{":"\xa8","|":"f","}":"\xbc","~":"\xb4"},g.CHARSETS.C=g.CHARSETS[5]={"[":"\xc4","\\":"\xd6","]":"\xc5","^":"\xdc","`":"\xe9","{":"\xe4","|":"\xf6","}":"\xe5","~":"\xfc"},g.CHARSETS.R={"#":"\xa3","@":"\xe0","[":"\xb0","\\":"\xe7","]":"\xa7","{":"\xe9","|":"\xf9","}":"\xe8","~":"\xa8"},g.CHARSETS.Q={"@":"\xe0","[":"\xe2","\\":"\xe7","]":"\xea","^":"\xee","`":"\xf4","{":"\xe9","|":"\xf9","}":"\xe8","~":"\xfb"},g.CHARSETS.K={"@":"\xa7","[":"\xc4","\\":"\xd6","]":"\xdc","{":"\xe4","|":"\xf6","}":"\xfc","~":"\xdf"},g.CHARSETS.Y={"#":"\xa3","@":"\xa7","[":"\xb0","\\":"\xe7","]":"\xe9","`":"\xf9","{":"\xe0","|":"\xf2","}":"\xe8","~":"\xec"},g.CHARSETS.E=g.CHARSETS[6]={"@":"\xc4","[":"\xc6","\\":"\xd8","]":"\xc5","^":"\xdc","`":"\xe4","{":"\xe6","|":"\xf8","}":"\xe5","~":"\xfc"},g.CHARSETS.Z={"#":"\xa3","@":"\xa7","[":"\xa1","\\":"\xd1","]":"\xbf","{":"\xb0","|":"\xf1","}":"\xe7"},g.CHARSETS.H=g.CHARSETS[7]={"@":"\xc9","[":"\xc4","\\":"\xd6","]":"\xc5","^":"\xdc","`":"\xe9","{":"\xe4","|":"\xf6","}":"\xe5","~":"\xfc"},g.CHARSETS["="]={"#":"\xf9","@":"\xe0","[":"\xe9","\\":"\xe7","]":"\xea","^":"\xee",_:"\xe8","`":"\xf4","{":"\xe4","|":"\xf6","}":"\xfc","~":"\xfb"}},2584:(de,g)=>{var v,y,M,m;Object.defineProperty(g,"__esModule",{value:!0}),g.C1_ESCAPED=g.C1=g.C0=void 0,(m=v||(g.C0=v={})).NUL="\0",m.SOH="\x01",m.STX="\x02",m.ETX="\x03",m.EOT="\x04",m.ENQ="\x05",m.ACK="\x06",m.BEL="\x07",m.BS="\b",m.HT="\t",m.LF="\n",m.VT="\v",m.FF="\f",m.CR="\r",m.SO="\x0e",m.SI="\x0f",m.DLE="\x10",m.DC1="\x11",m.DC2="\x12",m.DC3="\x13",m.DC4="\x14",m.NAK="\x15",m.SYN="\x16",m.ETB="\x17",m.CAN="\x18",m.EM="\x19",m.SUB="\x1a",m.ESC="\x1b",m.FS="\x1c",m.GS="\x1d",m.RS="\x1e",m.US="\x1f",m.SP=" ",m.DEL="\x7f",function(m){m.PAD="\x80",m.HOP="\x81",m.BPH="\x82",m.NBH="\x83",m.IND="\x84",m.NEL="\x85",m.SSA="\x86",m.ESA="\x87",m.HTS="\x88",m.HTJ="\x89",m.VTS="\x8a",m.PLD="\x8b",m.PLU="\x8c",m.RI="\x8d",m.SS2="\x8e",m.SS3="\x8f",m.DCS="\x90",m.PU1="\x91",m.PU2="\x92",m.STS="\x93",m.CCH="\x94",m.MW="\x95",m.SPA="\x96",m.EPA="\x97",m.SOS="\x98",m.SGCI="\x99",m.SCI="\x9a",m.CSI="\x9b",m.ST="\x9c",m.OSC="\x9d",m.PM="\x9e",m.APC="\x9f"}(y||(g.C1=y={})),function(m){m.ST=`${v.ESC}\\`}(M||(g.C1_ESCAPED=M={}))},7399:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.evaluateKeyboardEvent=void 0;const y=v(2584),M={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};g.evaluateKeyboardEvent=function(m,C,k,P){const T={type:0,cancel:!1,key:void 0},l=(m.shiftKey?1:0)|(m.altKey?2:0)|(m.ctrlKey?4:0)|(m.metaKey?8:0);switch(m.keyCode){case 0:"UIKeyInputUpArrow"===m.key?T.key=C?y.C0.ESC+"OA":y.C0.ESC+"[A":"UIKeyInputLeftArrow"===m.key?T.key=C?y.C0.ESC+"OD":y.C0.ESC+"[D":"UIKeyInputRightArrow"===m.key?T.key=C?y.C0.ESC+"OC":y.C0.ESC+"[C":"UIKeyInputDownArrow"===m.key&&(T.key=C?y.C0.ESC+"OB":y.C0.ESC+"[B");break;case 8:if(m.altKey){T.key=y.C0.ESC+y.C0.DEL;break}T.key=y.C0.DEL;break;case 9:if(m.shiftKey){T.key=y.C0.ESC+"[Z";break}T.key=y.C0.HT,T.cancel=!0;break;case 13:T.key=m.altKey?y.C0.ESC+y.C0.CR:y.C0.CR,T.cancel=!0;break;case 27:T.key=y.C0.ESC,m.altKey&&(T.key=y.C0.ESC+y.C0.ESC),T.cancel=!0;break;case 37:if(m.metaKey)break;l?(T.key=y.C0.ESC+"[1;"+(l+1)+"D",T.key===y.C0.ESC+"[1;3D"&&(T.key=y.C0.ESC+(k?"b":"[1;5D"))):T.key=C?y.C0.ESC+"OD":y.C0.ESC+"[D";break;case 39:if(m.metaKey)break;l?(T.key=y.C0.ESC+"[1;"+(l+1)+"C",T.key===y.C0.ESC+"[1;3C"&&(T.key=y.C0.ESC+(k?"f":"[1;5C"))):T.key=C?y.C0.ESC+"OC":y.C0.ESC+"[C";break;case 38:if(m.metaKey)break;l?(T.key=y.C0.ESC+"[1;"+(l+1)+"A",k||T.key!==y.C0.ESC+"[1;3A"||(T.key=y.C0.ESC+"[1;5A")):T.key=C?y.C0.ESC+"OA":y.C0.ESC+"[A";break;case 40:if(m.metaKey)break;l?(T.key=y.C0.ESC+"[1;"+(l+1)+"B",k||T.key!==y.C0.ESC+"[1;3B"||(T.key=y.C0.ESC+"[1;5B")):T.key=C?y.C0.ESC+"OB":y.C0.ESC+"[B";break;case 45:m.shiftKey||m.ctrlKey||(T.key=y.C0.ESC+"[2~");break;case 46:T.key=l?y.C0.ESC+"[3;"+(l+1)+"~":y.C0.ESC+"[3~";break;case 36:T.key=l?y.C0.ESC+"[1;"+(l+1)+"H":C?y.C0.ESC+"OH":y.C0.ESC+"[H";break;case 35:T.key=l?y.C0.ESC+"[1;"+(l+1)+"F":C?y.C0.ESC+"OF":y.C0.ESC+"[F";break;case 33:m.shiftKey?T.type=2:T.key=m.ctrlKey?y.C0.ESC+"[5;"+(l+1)+"~":y.C0.ESC+"[5~";break;case 34:m.shiftKey?T.type=3:T.key=m.ctrlKey?y.C0.ESC+"[6;"+(l+1)+"~":y.C0.ESC+"[6~";break;case 112:T.key=l?y.C0.ESC+"[1;"+(l+1)+"P":y.C0.ESC+"OP";break;case 113:T.key=l?y.C0.ESC+"[1;"+(l+1)+"Q":y.C0.ESC+"OQ";break;case 114:T.key=l?y.C0.ESC+"[1;"+(l+1)+"R":y.C0.ESC+"OR";break;case 115:T.key=l?y.C0.ESC+"[1;"+(l+1)+"S":y.C0.ESC+"OS";break;case 116:T.key=l?y.C0.ESC+"[15;"+(l+1)+"~":y.C0.ESC+"[15~";break;case 117:T.key=l?y.C0.ESC+"[17;"+(l+1)+"~":y.C0.ESC+"[17~";break;case 118:T.key=l?y.C0.ESC+"[18;"+(l+1)+"~":y.C0.ESC+"[18~";break;case 119:T.key=l?y.C0.ESC+"[19;"+(l+1)+"~":y.C0.ESC+"[19~";break;case 120:T.key=l?y.C0.ESC+"[20;"+(l+1)+"~":y.C0.ESC+"[20~";break;case 121:T.key=l?y.C0.ESC+"[21;"+(l+1)+"~":y.C0.ESC+"[21~";break;case 122:T.key=l?y.C0.ESC+"[23;"+(l+1)+"~":y.C0.ESC+"[23~";break;case 123:T.key=l?y.C0.ESC+"[24;"+(l+1)+"~":y.C0.ESC+"[24~";break;default:if(!m.ctrlKey||m.shiftKey||m.altKey||m.metaKey)if(k&&!P||!m.altKey||m.metaKey)!k||m.altKey||m.ctrlKey||m.shiftKey||!m.metaKey?m.key&&!m.ctrlKey&&!m.altKey&&!m.metaKey&&m.keyCode>=48&&1===m.key.length?T.key=m.key:m.key&&m.ctrlKey&&("_"===m.key&&(T.key=y.C0.US),"@"===m.key&&(T.key=y.C0.NUL)):65===m.keyCode&&(T.type=1);else{const _=M[m.keyCode],h=_?.[m.shiftKey?1:0];if(h)T.key=y.C0.ESC+h;else if(m.keyCode>=65&&m.keyCode<=90){let S=String.fromCharCode(m.ctrlKey?m.keyCode-64:m.keyCode+32);m.shiftKey&&(S=S.toUpperCase()),T.key=y.C0.ESC+S}else if(32===m.keyCode)T.key=y.C0.ESC+(m.ctrlKey?y.C0.NUL:" ");else if("Dead"===m.key&&m.code.startsWith("Key")){let u=m.code.slice(3,4);m.shiftKey||(u=u.toLowerCase()),T.key=y.C0.ESC+u,T.cancel=!0}}else m.keyCode>=65&&m.keyCode<=90?T.key=String.fromCharCode(m.keyCode-64):32===m.keyCode?T.key=y.C0.NUL:m.keyCode>=51&&m.keyCode<=55?T.key=String.fromCharCode(m.keyCode-51+27):56===m.keyCode?T.key=y.C0.DEL:219===m.keyCode?T.key=y.C0.ESC:220===m.keyCode?T.key=y.C0.FS:221===m.keyCode&&(T.key=y.C0.GS)}return T}},482:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.Utf8ToUtf32=g.StringToUtf32=g.utf32ToString=g.stringFromCodePoint=void 0,g.stringFromCodePoint=function(v){return v>65535?(v-=65536,String.fromCharCode(55296+(v>>10))+String.fromCharCode(v%1024+56320)):String.fromCharCode(v)},g.utf32ToString=function(v,y=0,M=v.length){let m="";for(let C=y;C<M;++C){let k=v[C];k>65535?(k-=65536,m+=String.fromCharCode(55296+(k>>10))+String.fromCharCode(k%1024+56320)):m+=String.fromCharCode(k)}return m},g.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(v,y){const M=v.length;if(!M)return 0;let m=0,C=0;if(this._interim){const k=v.charCodeAt(C++);56320<=k&&k<=57343?y[m++]=1024*(this._interim-55296)+k-56320+65536:(y[m++]=this._interim,y[m++]=k),this._interim=0}for(let k=C;k<M;++k){const P=v.charCodeAt(k);if(55296<=P&&P<=56319){if(++k>=M)return this._interim=P,m;const T=v.charCodeAt(k);56320<=T&&T<=57343?y[m++]=1024*(P-55296)+T-56320+65536:(y[m++]=P,y[m++]=T)}else 65279!==P&&(y[m++]=P)}return m}},g.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(v,y){const M=v.length;if(!M)return 0;let m,C,k,P,T=0,l=0,_=0;if(this.interim[0]){let S=!1,E=this.interim[0];E&=192==(224&E)?31:224==(240&E)?15:7;let O,R=0;for(;(O=63&this.interim[++R])&&R<4;)E<<=6,E|=O;const x=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,L=x-R;for(;_<L;){if(_>=M)return 0;if(O=v[_++],128!=(192&O)){_--,S=!0;break}this.interim[R++]=O,E<<=6,E|=63&O}S||(2===x?E<128?_--:y[T++]=E:3===x?E<2048||E>=55296&&E<=57343||65279===E||(y[T++]=E):E<65536||E>1114111||(y[T++]=E)),this.interim.fill(0)}const h=M-4;let u=_;for(;u<M;){for(;!(!(u<h)||128&(m=v[u])||128&(C=v[u+1])||128&(k=v[u+2])||128&(P=v[u+3]));)y[T++]=m,y[T++]=C,y[T++]=k,y[T++]=P,u+=4;if(m=v[u++],m<128)y[T++]=m;else if(192==(224&m)){if(u>=M)return this.interim[0]=m,T;if(C=v[u++],128!=(192&C)){u--;continue}if(l=(31&m)<<6|63&C,l<128){u--;continue}y[T++]=l}else if(224==(240&m)){if(u>=M)return this.interim[0]=m,T;if(C=v[u++],128!=(192&C)){u--;continue}if(u>=M)return this.interim[0]=m,this.interim[1]=C,T;if(k=v[u++],128!=(192&k)){u--;continue}if(l=(15&m)<<12|(63&C)<<6|63&k,l<2048||l>=55296&&l<=57343||65279===l)continue;y[T++]=l}else if(240==(248&m)){if(u>=M)return this.interim[0]=m,T;if(C=v[u++],128!=(192&C)){u--;continue}if(u>=M)return this.interim[0]=m,this.interim[1]=C,T;if(k=v[u++],128!=(192&k)){u--;continue}if(u>=M)return this.interim[0]=m,this.interim[1]=C,this.interim[2]=k,T;if(P=v[u++],128!=(192&P)){u--;continue}if(l=(7&m)<<18|(63&C)<<12|(63&k)<<6|63&P,l<65536||l>1114111)continue;y[T++]=l}}return T}}},225:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.UnicodeV6=void 0;const v=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],y=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let M;g.UnicodeV6=class{constructor(){if(this.version="6",!M){M=new Uint8Array(65536),M.fill(1),M[0]=0,M.fill(0,1,32),M.fill(0,127,160),M.fill(2,4352,4448),M[9001]=2,M[9002]=2,M.fill(2,11904,42192),M[12351]=1,M.fill(2,44032,55204),M.fill(2,63744,64256),M.fill(2,65040,65050),M.fill(2,65072,65136),M.fill(2,65280,65377),M.fill(2,65504,65511);for(let m=0;m<v.length;++m)M.fill(0,v[m][0],v[m][1]+1)}}wcwidth(m){return m<32?0:m<127?1:m<65536?M[m]:function(C,k){let P,T=0,l=k.length-1;if(C<k[0][0]||C>k[l][1])return!1;for(;l>=T;)if(P=T+l>>1,C>k[P][1])T=P+1;else{if(!(C<k[P][0]))return!0;l=P-1}return!1}(m,y)?0:m>=131072&&m<=196605||m>=196608&&m<=262141?2:1}}},5981:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.WriteBuffer=void 0;const y=v(8460),M=v(844);g.WriteBuffer=class m extends M.Disposable{constructor(k){super(),this._action=k,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new y.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(k,P){if(void 0!==P&&this._syncCalls>P)return void(this._syncCalls=0);if(this._pendingData+=k.length,this._writeBuffer.push(k),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let T;for(this._isSyncWriting=!0;T=this._writeBuffer.shift();){this._action(T);const l=this._callbacks.shift();l&&l()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(k,P){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=k.length,this._writeBuffer.push(k),this._callbacks.push(P),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=k.length,this._writeBuffer.push(k),this._callbacks.push(P)}_innerWrite(k=0,P=!0){const T=k||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const l=this._writeBuffer[this._bufferOffset],_=this._action(l,P);if(_){const u=S=>Date.now()-T>=12?setTimeout(()=>this._innerWrite(0,S)):this._innerWrite(T,S);return void _.catch(S=>(queueMicrotask(()=>{throw S}),Promise.resolve(!1))).then(u)}const h=this._callbacks[this._bufferOffset];if(h&&h(),this._bufferOffset++,this._pendingData-=l.length,Date.now()-T>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}},5941:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.toRgbString=g.parseColor=void 0;const v=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,y=/^[\da-f]+$/;function M(m,C){const k=m.toString(16),P=k.length<2?"0"+k:k;switch(C){case 4:return k[0];case 8:return P;case 12:return(P+P).slice(0,3);default:return P+P}}g.parseColor=function(m){if(!m)return;let C=m.toLowerCase();if(0===C.indexOf("rgb:")){C=C.slice(4);const k=v.exec(C);if(k){const P=k[1]?15:k[4]?255:k[7]?4095:65535;return[Math.round(parseInt(k[1]||k[4]||k[7]||k[10],16)/P*255),Math.round(parseInt(k[2]||k[5]||k[8]||k[11],16)/P*255),Math.round(parseInt(k[3]||k[6]||k[9]||k[12],16)/P*255)]}}else if(0===C.indexOf("#")&&(C=C.slice(1),y.exec(C)&&[3,6,9,12].includes(C.length))){const k=C.length/3,P=[0,0,0];for(let T=0;T<3;++T){const l=parseInt(C.slice(k*T,k*T+k),16);P[T]=1===k?l<<4:2===k?l:3===k?l>>4:l>>8}return P}},g.toRgbString=function(m,C=16){const[k,P,T]=m;return`rgb:${M(k,C)}/${M(P,C)}/${M(T,C)}`}},5770:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PAYLOAD_LIMIT=void 0,g.PAYLOAD_LIMIT=1e7},6351:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DcsHandler=g.DcsParser=void 0;const y=v(482),M=v(8742),m=v(5770),C=[];g.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=C,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=C}registerHandler(P,T){void 0===this._handlers[P]&&(this._handlers[P]=[]);const l=this._handlers[P];return l.push(T),{dispose:()=>{const _=l.indexOf(T);-1!==_&&l.splice(_,1)}}}clearHandler(P){this._handlers[P]&&delete this._handlers[P]}setHandlerFallback(P){this._handlerFb=P}reset(){if(this._active.length)for(let P=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;P>=0;--P)this._active[P].unhook(!1);this._stack.paused=!1,this._active=C,this._ident=0}hook(P,T){if(this.reset(),this._ident=P,this._active=this._handlers[P]||C,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].hook(T);else this._handlerFb(this._ident,"HOOK",T)}put(P,T,l){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(P,T,l);else this._handlerFb(this._ident,"PUT",(0,y.utf32ToString)(P,T,l))}unhook(P,T=!0){if(this._active.length){let l=!1,_=this._active.length-1,h=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,l=T,h=this._stack.fallThrough,this._stack.paused=!1),!h&&!1===l){for(;_>=0&&(l=this._active[_].unhook(P),!0!==l);_--)if(l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,l;_--}for(;_>=0;_--)if(l=this._active[_].unhook(!1),l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,l}else this._handlerFb(this._ident,"UNHOOK",P);this._active=C,this._ident=0}};const k=new M.Params;k.addParam(0),g.DcsHandler=class{constructor(P){this._handler=P,this._data="",this._params=k,this._hitLimit=!1}hook(P){this._params=P.length>1||P.params[0]?P.clone():k,this._data="",this._hitLimit=!1}put(P,T,l){this._hitLimit||(this._data+=(0,y.utf32ToString)(P,T,l),this._data.length>m.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(P){let T=!1;if(this._hitLimit)T=!1;else if(P&&(T=this._handler(this._data,this._params),T instanceof Promise))return T.then(l=>(this._params=k,this._data="",this._hitLimit=!1,l));return this._params=k,this._data="",this._hitLimit=!1,T}}},2015:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.EscapeSequenceParser=g.VT500_TRANSITION_TABLE=g.TransitionTable=void 0;const y=v(844),M=v(8742),m=v(6242),C=v(6351);class k{constructor(_){this.table=new Uint8Array(_)}setDefault(_,h){this.table.fill(_<<4|h)}add(_,h,u,S){this.table[h<<8|_]=u<<4|S}addMany(_,h,u,S){for(let E=0;E<_.length;E++)this.table[h<<8|_[E]]=u<<4|S}}g.TransitionTable=k;const P=160;g.VT500_TRANSITION_TABLE=function(){const l=new k(4095),_=Array.apply(null,Array(256)).map((R,x)=>x),h=(R,x)=>_.slice(R,x),u=h(32,127),S=h(0,24);S.push(25),S.push.apply(S,h(28,32));const E=h(0,14);let O;for(O in l.setDefault(1,0),l.addMany(u,0,2,0),E)l.addMany([24,26,153,154],O,3,0),l.addMany(h(128,144),O,3,0),l.addMany(h(144,152),O,3,0),l.add(156,O,0,0),l.add(27,O,11,1),l.add(157,O,4,8),l.addMany([152,158,159],O,0,7),l.add(155,O,11,3),l.add(144,O,11,9);return l.addMany(S,0,3,0),l.addMany(S,1,3,1),l.add(127,1,0,1),l.addMany(S,8,0,8),l.addMany(S,3,3,3),l.add(127,3,0,3),l.addMany(S,4,3,4),l.add(127,4,0,4),l.addMany(S,6,3,6),l.addMany(S,5,3,5),l.add(127,5,0,5),l.addMany(S,2,3,2),l.add(127,2,0,2),l.add(93,1,4,8),l.addMany(u,8,5,8),l.add(127,8,5,8),l.addMany([156,27,24,26,7],8,6,0),l.addMany(h(28,32),8,0,8),l.addMany([88,94,95],1,0,7),l.addMany(u,7,0,7),l.addMany(S,7,0,7),l.add(156,7,0,0),l.add(127,7,0,7),l.add(91,1,11,3),l.addMany(h(64,127),3,7,0),l.addMany(h(48,60),3,8,4),l.addMany([60,61,62,63],3,9,4),l.addMany(h(48,60),4,8,4),l.addMany(h(64,127),4,7,0),l.addMany([60,61,62,63],4,0,6),l.addMany(h(32,64),6,0,6),l.add(127,6,0,6),l.addMany(h(64,127),6,0,0),l.addMany(h(32,48),3,9,5),l.addMany(h(32,48),5,9,5),l.addMany(h(48,64),5,0,6),l.addMany(h(64,127),5,7,0),l.addMany(h(32,48),4,9,5),l.addMany(h(32,48),1,9,2),l.addMany(h(32,48),2,9,2),l.addMany(h(48,127),2,10,0),l.addMany(h(48,80),1,10,0),l.addMany(h(81,88),1,10,0),l.addMany([89,90,92],1,10,0),l.addMany(h(96,127),1,10,0),l.add(80,1,11,9),l.addMany(S,9,0,9),l.add(127,9,0,9),l.addMany(h(28,32),9,0,9),l.addMany(h(32,48),9,9,12),l.addMany(h(48,60),9,8,10),l.addMany([60,61,62,63],9,9,10),l.addMany(S,11,0,11),l.addMany(h(32,128),11,0,11),l.addMany(h(28,32),11,0,11),l.addMany(S,10,0,10),l.add(127,10,0,10),l.addMany(h(28,32),10,0,10),l.addMany(h(48,60),10,8,10),l.addMany([60,61,62,63],10,0,11),l.addMany(h(32,48),10,9,12),l.addMany(S,12,0,12),l.add(127,12,0,12),l.addMany(h(28,32),12,0,12),l.addMany(h(32,48),12,9,12),l.addMany(h(48,64),12,0,11),l.addMany(h(64,127),12,12,13),l.addMany(h(64,127),10,12,13),l.addMany(h(64,127),9,12,13),l.addMany(S,13,13,13),l.addMany(u,13,13,13),l.add(127,13,0,13),l.addMany([27,156,24,26],13,14,0),l.add(P,0,2,0),l.add(P,8,5,8),l.add(P,6,0,6),l.add(P,11,0,11),l.add(P,13,13,13),l}(),g.EscapeSequenceParser=class T extends y.Disposable{constructor(_=g.VT500_TRANSITION_TABLE){super(),this._transitions=_,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new M.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(h,u,S)=>{},this._executeHandlerFb=h=>{},this._csiHandlerFb=(h,u)=>{},this._escHandlerFb=h=>{},this._errorHandlerFb=h=>h,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,y.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new m.OscParser),this._dcsParser=this.register(new C.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(_,h=[64,126]){let u=0;if(_.prefix){if(_.prefix.length>1)throw new Error("only one byte as prefix supported");if(u=_.prefix.charCodeAt(0),u&&60>u||u>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(_.intermediates){if(_.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let E=0;E<_.intermediates.length;++E){const O=_.intermediates.charCodeAt(E);if(32>O||O>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");u<<=8,u|=O}}if(1!==_.final.length)throw new Error("final must be a single byte");const S=_.final.charCodeAt(0);if(h[0]>S||S>h[1])throw new Error(`final must be in range ${h[0]} .. ${h[1]}`);return u<<=8,u|=S,u}identToString(_){const h=[];for(;_;)h.push(String.fromCharCode(255&_)),_>>=8;return h.reverse().join("")}setPrintHandler(_){this._printHandler=_}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(_,h){const u=this._identifier(_,[48,126]);void 0===this._escHandlers[u]&&(this._escHandlers[u]=[]);const S=this._escHandlers[u];return S.push(h),{dispose:()=>{const E=S.indexOf(h);-1!==E&&S.splice(E,1)}}}clearEscHandler(_){this._escHandlers[this._identifier(_,[48,126])]&&delete this._escHandlers[this._identifier(_,[48,126])]}setEscHandlerFallback(_){this._escHandlerFb=_}setExecuteHandler(_,h){this._executeHandlers[_.charCodeAt(0)]=h}clearExecuteHandler(_){this._executeHandlers[_.charCodeAt(0)]&&delete this._executeHandlers[_.charCodeAt(0)]}setExecuteHandlerFallback(_){this._executeHandlerFb=_}registerCsiHandler(_,h){const u=this._identifier(_);void 0===this._csiHandlers[u]&&(this._csiHandlers[u]=[]);const S=this._csiHandlers[u];return S.push(h),{dispose:()=>{const E=S.indexOf(h);-1!==E&&S.splice(E,1)}}}clearCsiHandler(_){this._csiHandlers[this._identifier(_)]&&delete this._csiHandlers[this._identifier(_)]}setCsiHandlerFallback(_){this._csiHandlerFb=_}registerDcsHandler(_,h){return this._dcsParser.registerHandler(this._identifier(_),h)}clearDcsHandler(_){this._dcsParser.clearHandler(this._identifier(_))}setDcsHandlerFallback(_){this._dcsParser.setHandlerFallback(_)}registerOscHandler(_,h){return this._oscParser.registerHandler(_,h)}clearOscHandler(_){this._oscParser.clearHandler(_)}setOscHandlerFallback(_){this._oscParser.setHandlerFallback(_)}setErrorHandler(_){this._errorHandler=_}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(_,h,u,S,E){this._parseStack.state=_,this._parseStack.handlers=h,this._parseStack.handlerPos=u,this._parseStack.transition=S,this._parseStack.chunkPos=E}parse(_,h,u){let S,E=0,O=0,R=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,R=this._parseStack.chunkPos+1;else{if(void 0===u||1===this._parseStack.state)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const x=this._parseStack.handlers;let L=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===u&&L>-1)for(;L>=0&&(S=x[L](this._params),!0!==S);L--)if(S instanceof Promise)return this._parseStack.handlerPos=L,S;this._parseStack.handlers=[];break;case 4:if(!1===u&&L>-1)for(;L>=0&&(S=x[L](),!0!==S);L--)if(S instanceof Promise)return this._parseStack.handlerPos=L,S;this._parseStack.handlers=[];break;case 6:if(E=_[this._parseStack.chunkPos],S=this._dcsParser.unhook(24!==E&&26!==E,u),S)return S;27===E&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(E=_[this._parseStack.chunkPos],S=this._oscParser.end(24!==E&&26!==E,u),S)return S;27===E&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,R=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let x=R;x<h;++x){switch(E=_[x],O=this._transitions.table[this.currentState<<8|(E<160?E:P)],O>>4){case 2:for(let J=x+1;;++J){if(J>=h||(E=_[J])<32||E>126&&E<P){this._printHandler(_,x,J),x=J-1;break}if(++J>=h||(E=_[J])<32||E>126&&E<P){this._printHandler(_,x,J),x=J-1;break}if(++J>=h||(E=_[J])<32||E>126&&E<P){this._printHandler(_,x,J),x=J-1;break}if(++J>=h||(E=_[J])<32||E>126&&E<P){this._printHandler(_,x,J),x=J-1;break}}break;case 3:this._executeHandlers[E]?this._executeHandlers[E]():this._executeHandlerFb(E),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:x,code:E,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const L=this._csiHandlers[this._collect<<8|E];let V=L?L.length-1:-1;for(;V>=0&&(S=L[V](this._params),!0!==S);V--)if(S instanceof Promise)return this._preserveStack(3,L,V,O,x),S;V<0&&this._csiHandlerFb(this._collect<<8|E,this._params),this.precedingCodepoint=0;break;case 8:do{switch(E){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(E-48)}}while(++x<h&&(E=_[x])>47&&E<60);x--;break;case 9:this._collect<<=8,this._collect|=E;break;case 10:const ie=this._escHandlers[this._collect<<8|E];let X=ie?ie.length-1:-1;for(;X>=0&&(S=ie[X](),!0!==S);X--)if(S instanceof Promise)return this._preserveStack(4,ie,X,O,x),S;X<0&&this._escHandlerFb(this._collect<<8|E),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|E,this._params);break;case 13:for(let J=x+1;;++J)if(J>=h||24===(E=_[J])||26===E||27===E||E>127&&E<P){this._dcsParser.put(_,x,J),x=J-1;break}break;case 14:if(S=this._dcsParser.unhook(24!==E&&26!==E),S)return this._preserveStack(6,[],0,O,x),S;27===E&&(O|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let J=x+1;;J++)if(J>=h||(E=_[J])<32||E>127&&E<P){this._oscParser.put(_,x,J),x=J-1;break}break;case 6:if(S=this._oscParser.end(24!==E&&26!==E),S)return this._preserveStack(5,[],0,O,x),S;27===E&&(O|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&O}}}},6242:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.OscHandler=g.OscParser=void 0;const y=v(5770),M=v(482),m=[];g.OscParser=class{constructor(){this._state=0,this._active=m,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(C,k){void 0===this._handlers[C]&&(this._handlers[C]=[]);const P=this._handlers[C];return P.push(k),{dispose:()=>{const T=P.indexOf(k);-1!==T&&P.splice(T,1)}}}clearHandler(C){this._handlers[C]&&delete this._handlers[C]}setHandlerFallback(C){this._handlerFb=C}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=m}reset(){if(2===this._state)for(let C=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;C>=0;--C)this._active[C].end(!1);this._stack.paused=!1,this._active=m,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||m,this._active.length)for(let C=this._active.length-1;C>=0;C--)this._active[C].start();else this._handlerFb(this._id,"START")}_put(C,k,P){if(this._active.length)for(let T=this._active.length-1;T>=0;T--)this._active[T].put(C,k,P);else this._handlerFb(this._id,"PUT",(0,M.utf32ToString)(C,k,P))}start(){this.reset(),this._state=1}put(C,k,P){if(3!==this._state){if(1===this._state)for(;k<P;){const T=C[k++];if(59===T){this._state=2,this._start();break}if(T<48||57<T)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+T-48}2===this._state&&P-k>0&&this._put(C,k,P)}}end(C,k=!0){if(0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){let P=!1,T=this._active.length-1,l=!1;if(this._stack.paused&&(T=this._stack.loopPosition-1,P=k,l=this._stack.fallThrough,this._stack.paused=!1),!l&&!1===P){for(;T>=0&&(P=this._active[T].end(C),!0!==P);T--)if(P instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=T,this._stack.fallThrough=!1,P;T--}for(;T>=0;T--)if(P=this._active[T].end(!1),P instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=T,this._stack.fallThrough=!0,P}else this._handlerFb(this._id,"END",C);this._active=m,this._id=-1,this._state=0}}},g.OscHandler=class{constructor(C){this._handler=C,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(C,k,P){this._hitLimit||(this._data+=(0,M.utf32ToString)(C,k,P),this._data.length>y.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(C){let k=!1;if(this._hitLimit)k=!1;else if(C&&(k=this._handler(this._data),k instanceof Promise))return k.then(P=>(this._data="",this._hitLimit=!1,P));return this._data="",this._hitLimit=!1,k}}},8742:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.Params=void 0;const v=2147483647;class y{static fromArray(m){const C=new y;if(!m.length)return C;for(let k=Array.isArray(m[0])?1:0;k<m.length;++k){const P=m[k];if(Array.isArray(P))for(let T=0;T<P.length;++T)C.addSubParam(P[T]);else C.addParam(P)}return C}constructor(m=32,C=32){if(this.maxLength=m,this.maxSubParamsLength=C,C>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(m),this.length=0,this._subParams=new Int32Array(C),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(m),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const m=new y(this.maxLength,this.maxSubParamsLength);return m.params.set(this.params),m.length=this.length,m._subParams.set(this._subParams),m._subParamsLength=this._subParamsLength,m._subParamsIdx.set(this._subParamsIdx),m._rejectDigits=this._rejectDigits,m._rejectSubDigits=this._rejectSubDigits,m._digitIsSub=this._digitIsSub,m}toArray(){const m=[];for(let C=0;C<this.length;++C){m.push(this.params[C]);const k=this._subParamsIdx[C]>>8,P=255&this._subParamsIdx[C];P-k>0&&m.push(Array.prototype.slice.call(this._subParams,k,P))}return m}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(m){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(m<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=m>v?v:m}}addSubParam(m){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(m<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=m>v?v:m,this._subParamsIdx[this.length-1]++}}hasSubParams(m){return(255&this._subParamsIdx[m])-(this._subParamsIdx[m]>>8)>0}getSubParams(m){const C=this._subParamsIdx[m]>>8,k=255&this._subParamsIdx[m];return k-C>0?this._subParams.subarray(C,k):null}getSubParamsAll(){const m={};for(let C=0;C<this.length;++C){const k=this._subParamsIdx[C]>>8,P=255&this._subParamsIdx[C];P-k>0&&(m[C]=this._subParams.slice(k,P))}return m}addDigit(m){let C;if(this._rejectDigits||!(C=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const k=this._digitIsSub?this._subParams:this.params,P=k[C-1];k[C-1]=~P?Math.min(10*P+m,v):m}}g.Params=y},5741:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.AddonManager=void 0,g.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let v=this._addons.length-1;v>=0;v--)this._addons[v].instance.dispose()}loadAddon(v,y){const M={instance:y,dispose:y.dispose,isDisposed:!1};this._addons.push(M),y.dispose=()=>this._wrappedAddonDispose(M),y.activate(v)}_wrappedAddonDispose(v){if(v.isDisposed)return;let y=-1;for(let M=0;M<this._addons.length;M++)if(this._addons[M]===v){y=M;break}if(-1===y)throw new Error("Could not dispose an addon that has not been loaded");v.isDisposed=!0,v.dispose.apply(v.instance),this._addons.splice(y,1)}}},8771:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.BufferApiView=void 0;const y=v(3785),M=v(511);g.BufferApiView=class{constructor(m,C){this._buffer=m,this.type=C}init(m){return this._buffer=m,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(m){const C=this._buffer.lines.get(m);if(C)return new y.BufferLineApiView(C)}getNullCell(){return new M.CellData}}},3785:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.BufferLineApiView=void 0;const y=v(511);g.BufferLineApiView=class{constructor(M){this._line=M}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(M,m){if(!(M<0||M>=this._line.length))return m?(this._line.loadCell(M,m),m):this._line.loadCell(M,new y.CellData)}translateToString(M,m,C){return this._line.translateToString(M,m,C)}}},8285:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.BufferNamespaceApi=void 0;const y=v(8771),M=v(8460),m=v(844);g.BufferNamespaceApi=class C extends m.Disposable{constructor(P){super(),this._core=P,this._onBufferChange=this.register(new M.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new y.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new y.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}},7975:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.ParserApi=void 0,g.ParserApi=class{constructor(v){this._core=v}registerCsiHandler(v,y){return this._core.registerCsiHandler(v,M=>y(M.toArray()))}addCsiHandler(v,y){return this.registerCsiHandler(v,y)}registerDcsHandler(v,y){return this._core.registerDcsHandler(v,(M,m)=>y(M,m.toArray()))}addDcsHandler(v,y){return this.registerDcsHandler(v,y)}registerEscHandler(v,y){return this._core.registerEscHandler(v,y)}addEscHandler(v,y){return this.registerEscHandler(v,y)}registerOscHandler(v,y){return this._core.registerOscHandler(v,y)}addOscHandler(v,y){return this.registerOscHandler(v,y)}}},7090:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.UnicodeApi=void 0,g.UnicodeApi=class{constructor(v){this._core=v}register(v){this._core.unicodeService.register(v)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(v){this._core.unicodeService.activeVersion=v}}},744:function(de,g,v){var y=this&&this.__decorate||function(l,_,h,u){var S,E=arguments.length,O=E<3?_:null===u?u=Object.getOwnPropertyDescriptor(_,h):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)O=Reflect.decorate(l,_,h,u);else for(var R=l.length-1;R>=0;R--)(S=l[R])&&(O=(E<3?S(O):E>3?S(_,h,O):S(_,h))||O);return E>3&&O&&Object.defineProperty(_,h,O),O},M=this&&this.__param||function(l,_){return function(h,u){_(h,u,l)}};Object.defineProperty(g,"__esModule",{value:!0}),g.BufferService=g.MINIMUM_ROWS=g.MINIMUM_COLS=void 0;const m=v(8460),C=v(844),k=v(5295),P=v(2585);g.MINIMUM_COLS=2,g.MINIMUM_ROWS=1;let T=g.BufferService=class extends C.Disposable{get buffer(){return this.buffers.active}constructor(l){super(),this.isUserScrolling=!1,this._onResize=this.register(new m.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new m.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(l.rawOptions.cols||0,g.MINIMUM_COLS),this.rows=Math.max(l.rawOptions.rows||0,g.MINIMUM_ROWS),this.buffers=this.register(new k.BufferSet(l,this))}resize(l,_){this.cols=l,this.rows=_,this.buffers.resize(l,_),this._onResize.fire({cols:l,rows:_})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(l,_=!1){const h=this.buffer;let u;u=this._cachedBlankLine,u&&u.length===this.cols&&u.getFg(0)===l.fg&&u.getBg(0)===l.bg||(u=h.getBlankLine(l,_),this._cachedBlankLine=u),u.isWrapped=_;const S=h.ybase+h.scrollTop,E=h.ybase+h.scrollBottom;if(0===h.scrollTop){const O=h.lines.isFull;E===h.lines.length-1?O?h.lines.recycle().copyFrom(u):h.lines.push(u.clone()):h.lines.splice(E+1,0,u.clone()),O?this.isUserScrolling&&(h.ydisp=Math.max(h.ydisp-1,0)):(h.ybase++,this.isUserScrolling||h.ydisp++)}else h.lines.shiftElements(S+1,E-S+1-1,-1),h.lines.set(E,u.clone());this.isUserScrolling||(h.ydisp=h.ybase),this._onScroll.fire(h.ydisp)}scrollLines(l,_,h){const u=this.buffer;if(l<0){if(0===u.ydisp)return;this.isUserScrolling=!0}else l+u.ydisp>=u.ybase&&(this.isUserScrolling=!1);const S=u.ydisp;u.ydisp=Math.max(Math.min(u.ydisp+l,u.ybase),0),S!==u.ydisp&&(_||this._onScroll.fire(u.ydisp))}};g.BufferService=T=y([M(0,P.IOptionsService)],T)},7994:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.CharsetService=void 0,g.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(v){this.glevel=v,this.charset=this._charsets[v]}setgCharset(v,y){this._charsets[v]=y,this.glevel===v&&(this.charset=y)}}},1753:function(de,g,v){var y=this&&this.__decorate||function(u,S,E,O){var R,x=arguments.length,L=x<3?S:null===O?O=Object.getOwnPropertyDescriptor(S,E):O;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)L=Reflect.decorate(u,S,E,O);else for(var V=u.length-1;V>=0;V--)(R=u[V])&&(L=(x<3?R(L):x>3?R(S,E,L):R(S,E))||L);return x>3&&L&&Object.defineProperty(S,E,L),L},M=this&&this.__param||function(u,S){return function(E,O){S(E,O,u)}};Object.defineProperty(g,"__esModule",{value:!0}),g.CoreMouseService=void 0;const m=v(2585),C=v(8460),k=v(844),P={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:u=>4!==u.button&&1===u.action&&(u.ctrl=!1,u.alt=!1,u.shift=!1,!0)},VT200:{events:19,restrict:u=>32!==u.action},DRAG:{events:23,restrict:u=>32!==u.action||3!==u.button},ANY:{events:31,restrict:u=>!0}};function T(u,S){let E=(u.ctrl?16:0)|(u.shift?4:0)|(u.alt?8:0);return 4===u.button?(E|=64,E|=u.action):(E|=3&u.button,4&u.button&&(E|=64),8&u.button&&(E|=128),32===u.action?E|=32:0!==u.action||S||(E|=3)),E}const l=String.fromCharCode,_={DEFAULT:u=>{const S=[T(u,!1)+32,u.col+32,u.row+32];return S[0]>255||S[1]>255||S[2]>255?"":`\x1b[M${l(S[0])}${l(S[1])}${l(S[2])}`},SGR:u=>{const S=0===u.action&&4!==u.button?"m":"M";return`\x1b[<${T(u,!0)};${u.col};${u.row}${S}`},SGR_PIXELS:u=>{const S=0===u.action&&4!==u.button?"m":"M";return`\x1b[<${T(u,!0)};${u.x};${u.y}${S}`}};let h=g.CoreMouseService=class extends k.Disposable{constructor(u,S){super(),this._bufferService=u,this._coreService=S,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new C.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const E of Object.keys(P))this.addProtocol(E,P[E]);for(const E of Object.keys(_))this.addEncoding(E,_[E]);this.reset()}addProtocol(u,S){this._protocols[u]=S}addEncoding(u,S){this._encodings[u]=S}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return 0!==this._protocols[this._activeProtocol].events}set activeProtocol(u){if(!this._protocols[u])throw new Error(`unknown protocol "${u}"`);this._activeProtocol=u,this._onProtocolChange.fire(this._protocols[u].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(u){if(!this._encodings[u])throw new Error(`unknown encoding "${u}"`);this._activeEncoding=u}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(u){if(u.col<0||u.col>=this._bufferService.cols||u.row<0||u.row>=this._bufferService.rows||4===u.button&&32===u.action||3===u.button&&32!==u.action||4!==u.button&&(2===u.action||3===u.action)||(u.col++,u.row++,32===u.action&&this._lastEvent&&this._equalEvents(this._lastEvent,u,"SGR_PIXELS"===this._activeEncoding))||!this._protocols[this._activeProtocol].restrict(u))return!1;const S=this._encodings[this._activeEncoding](u);return S&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(S):this._coreService.triggerDataEvent(S,!0)),this._lastEvent=u,!0}explainEvents(u){return{down:!!(1&u),up:!!(2&u),drag:!!(4&u),move:!!(8&u),wheel:!!(16&u)}}_equalEvents(u,S,E){if(E){if(u.x!==S.x||u.y!==S.y)return!1}else if(u.col!==S.col||u.row!==S.row)return!1;return u.button===S.button&&u.action===S.action&&u.ctrl===S.ctrl&&u.alt===S.alt&&u.shift===S.shift}};g.CoreMouseService=h=y([M(0,m.IBufferService),M(1,m.ICoreService)],h)},6975:function(de,g,v){var y=this&&this.__decorate||function(h,u,S,E){var O,R=arguments.length,x=R<3?u:null===E?E=Object.getOwnPropertyDescriptor(u,S):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(h,u,S,E);else for(var L=h.length-1;L>=0;L--)(O=h[L])&&(x=(R<3?O(x):R>3?O(u,S,x):O(u,S))||x);return R>3&&x&&Object.defineProperty(u,S,x),x},M=this&&this.__param||function(h,u){return function(S,E){u(S,E,h)}};Object.defineProperty(g,"__esModule",{value:!0}),g.CoreService=void 0;const m=v(1439),C=v(8460),k=v(844),P=v(2585),T=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let _=g.CoreService=class extends k.Disposable{constructor(h,u,S){super(),this._bufferService=h,this._logService=u,this._optionsService=S,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new C.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new C.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new C.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new C.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,m.clone)(T),this.decPrivateModes=(0,m.clone)(l)}reset(){this.modes=(0,m.clone)(T),this.decPrivateModes=(0,m.clone)(l)}triggerDataEvent(h,u=!1){if(this._optionsService.rawOptions.disableStdin)return;const S=this._bufferService.buffer;u&&this._optionsService.rawOptions.scrollOnUserInput&&S.ybase!==S.ydisp&&this._onRequestScrollToBottom.fire(),u&&this._onUserInput.fire(),this._logService.debug(`sending data "${h}"`,()=>h.split("").map(E=>E.charCodeAt(0))),this._onData.fire(h)}triggerBinaryEvent(h){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${h}"`,()=>h.split("").map(u=>u.charCodeAt(0))),this._onBinary.fire(h))}};g.CoreService=_=y([M(0,P.IBufferService),M(1,P.ILogService),M(2,P.IOptionsService)],_)},9074:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DecorationService=void 0;const y=v(8055),M=v(8460),m=v(844),C=v(6106);let k=0,P=0;g.DecorationService=class T extends m.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new C.SortedList(h=>h?.marker.line),this._onDecorationRegistered=this.register(new M.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new M.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,m.toDisposable)(()=>this.reset()))}registerDecoration(h){if(h.marker.isDisposed)return;const u=new l(h);if(u){const S=u.marker.onDispose(()=>u.dispose());u.onDispose(()=>{u&&(this._decorations.delete(u)&&this._onDecorationRemoved.fire(u),S.dispose())}),this._decorations.insert(u),this._onDecorationRegistered.fire(u)}return u}reset(){for(const h of this._decorations.values())h.dispose();this._decorations.clear()}*getDecorationsAtCell(h,u,S){var E,O,R;let x=0,L=0;for(const V of this._decorations.getKeyIterator(u))x=null!==(E=V.options.x)&&void 0!==E?E:0,L=x+(null!==(O=V.options.width)&&void 0!==O?O:1),h>=x&&h<L&&(!S||(null!==(R=V.options.layer)&&void 0!==R?R:"bottom")===S)&&(yield V)}forEachDecorationAtCell(h,u,S,E){this._decorations.forEachByKey(u,O=>{var R,x,L;k=null!==(R=O.options.x)&&void 0!==R?R:0,P=k+(null!==(x=O.options.width)&&void 0!==x?x:1),h>=k&&h<P&&(!S||(null!==(L=O.options.layer)&&void 0!==L?L:"bottom")===S)&&E(O)})}};class l extends m.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return null===this._cachedBg&&(this._cachedBg=this.options.backgroundColor?y.css.toColor(this.options.backgroundColor):void 0),this._cachedBg}get foregroundColorRGB(){return null===this._cachedFg&&(this._cachedFg=this.options.foregroundColor?y.css.toColor(this.options.foregroundColor):void 0),this._cachedFg}constructor(h){super(),this.options=h,this.onRenderEmitter=this.register(new M.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new M.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=h.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.InstantiationService=g.ServiceCollection=void 0;const y=v(2585),M=v(8343);class m{constructor(...k){this._entries=new Map;for(const[P,T]of k)this.set(P,T)}set(k,P){const T=this._entries.get(k);return this._entries.set(k,P),T}forEach(k){for(const[P,T]of this._entries.entries())k(P,T)}has(k){return this._entries.has(k)}get(k){return this._entries.get(k)}}g.ServiceCollection=m,g.InstantiationService=class{constructor(){this._services=new m,this._services.set(y.IInstantiationService,this)}setService(C,k){this._services.set(C,k)}getService(C){return this._services.get(C)}createInstance(C,...k){const P=(0,M.getServiceDependencies)(C).sort((_,h)=>_.index-h.index),T=[];for(const _ of P){const h=this._services.get(_.id);if(!h)throw new Error(`[createInstance] ${C.name} depends on UNKNOWN service ${_.id}.`);T.push(h)}const l=P.length>0?P[0].index:k.length;if(k.length!==l)throw new Error(`[createInstance] First service dependency of ${C.name} at position ${l+1} conflicts with ${k.length} static arguments`);return new C(...k,...T)}}},7866:function(de,g,v){var y=this&&this.__decorate||function(l,_,h,u){var S,E=arguments.length,O=E<3?_:null===u?u=Object.getOwnPropertyDescriptor(_,h):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)O=Reflect.decorate(l,_,h,u);else for(var R=l.length-1;R>=0;R--)(S=l[R])&&(O=(E<3?S(O):E>3?S(_,h,O):S(_,h))||O);return E>3&&O&&Object.defineProperty(_,h,O),O},M=this&&this.__param||function(l,_){return function(h,u){_(h,u,l)}};Object.defineProperty(g,"__esModule",{value:!0}),g.traceCall=g.setTraceLogger=g.LogService=void 0;const m=v(844),C=v(2585),k={trace:C.LogLevelEnum.TRACE,debug:C.LogLevelEnum.DEBUG,info:C.LogLevelEnum.INFO,warn:C.LogLevelEnum.WARN,error:C.LogLevelEnum.ERROR,off:C.LogLevelEnum.OFF};let P,T=g.LogService=class extends m.Disposable{get logLevel(){return this._logLevel}constructor(l){super(),this._optionsService=l,this._logLevel=C.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),P=this}_updateLogLevel(){this._logLevel=k[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(l){for(let _=0;_<l.length;_++)"function"==typeof l[_]&&(l[_]=l[_]())}_log(l,_,h){this._evalLazyOptionalParams(h),l.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+_,...h)}trace(l,..._){var h,u;this._logLevel<=C.LogLevelEnum.TRACE&&this._log(null!==(u=null===(h=this._optionsService.options.logger)||void 0===h?void 0:h.trace.bind(this._optionsService.options.logger))&&void 0!==u?u:console.log,l,_)}debug(l,..._){var h,u;this._logLevel<=C.LogLevelEnum.DEBUG&&this._log(null!==(u=null===(h=this._optionsService.options.logger)||void 0===h?void 0:h.debug.bind(this._optionsService.options.logger))&&void 0!==u?u:console.log,l,_)}info(l,..._){var h,u;this._logLevel<=C.LogLevelEnum.INFO&&this._log(null!==(u=null===(h=this._optionsService.options.logger)||void 0===h?void 0:h.info.bind(this._optionsService.options.logger))&&void 0!==u?u:console.info,l,_)}warn(l,..._){var h,u;this._logLevel<=C.LogLevelEnum.WARN&&this._log(null!==(u=null===(h=this._optionsService.options.logger)||void 0===h?void 0:h.warn.bind(this._optionsService.options.logger))&&void 0!==u?u:console.warn,l,_)}error(l,..._){var h,u;this._logLevel<=C.LogLevelEnum.ERROR&&this._log(null!==(u=null===(h=this._optionsService.options.logger)||void 0===h?void 0:h.error.bind(this._optionsService.options.logger))&&void 0!==u?u:console.error,l,_)}};g.LogService=T=y([M(0,C.IOptionsService)],T),g.setTraceLogger=function(l){P=l},g.traceCall=function(l,_,h){if("function"!=typeof h.value)throw new Error("not supported");const u=h.value;h.value=function(...S){if(P.logLevel!==C.LogLevelEnum.TRACE)return u.apply(this,S);P.trace(`GlyphRenderer#${u.name}(${S.map(O=>JSON.stringify(O)).join(", ")})`);const E=u.apply(this,S);return P.trace(`GlyphRenderer#${u.name} return`,E),E}}},7302:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.OptionsService=g.DEFAULT_OPTIONS=void 0;const y=v(8460),M=v(844),m=v(6114);g.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:m.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const C=["normal","bold","100","200","300","400","500","600","700","800","900"];g.OptionsService=class k extends M.Disposable{constructor(T){super(),this._onOptionChange=this.register(new y.EventEmitter),this.onOptionChange=this._onOptionChange.event;const l=Object.assign({},g.DEFAULT_OPTIONS);for(const _ in T)if(_ in l)try{l[_]=this._sanitizeAndValidateOption(_,T[_])}catch(h){console.error(h)}this.rawOptions=l,this.options=Object.assign({},l),this._setupOptions()}onSpecificOptionChange(T,l){return this.onOptionChange(_=>{_===T&&l(this.rawOptions[T])})}onMultipleOptionChange(T,l){return this.onOptionChange(_=>{-1!==T.indexOf(_)&&l()})}_setupOptions(){const T=_=>{if(!(_ in g.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);return this.rawOptions[_]},l=(_,h)=>{if(!(_ in g.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);h=this._sanitizeAndValidateOption(_,h),this.rawOptions[_]!==h&&(this.rawOptions[_]=h,this._onOptionChange.fire(_))};for(const _ in this.rawOptions){const h={get:T.bind(this,_),set:l.bind(this,_)};Object.defineProperty(this.options,_,h)}}_sanitizeAndValidateOption(T,l){switch(T){case"cursorStyle":if(l||(l=g.DEFAULT_OPTIONS[T]),"block"!==(_=l)&&"underline"!==_&&"bar"!==_)throw new Error(`"${l}" is not a valid value for ${T}`);break;case"wordSeparator":l||(l=g.DEFAULT_OPTIONS[T]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof l&&1<=l&&l<=1e3)break;l=C.includes(l)?l:g.DEFAULT_OPTIONS[T];break;case"cursorWidth":l=Math.floor(l);case"lineHeight":case"tabStopWidth":if(l<1)throw new Error(`${T} cannot be less than 1, value: ${l}`);break;case"minimumContrastRatio":l=Math.max(1,Math.min(21,Math.round(10*l)/10));break;case"scrollback":if((l=Math.min(l,4294967295))<0)throw new Error(`${T} cannot be less than 0, value: ${l}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(l<=0)throw new Error(`${T} cannot be less than or equal to 0, value: ${l}`);break;case"rows":case"cols":if(!l&&0!==l)throw new Error(`${T} must be numeric, value: ${l}`);break;case"windowsPty":l=l??{}}var _;return l}}},2660:function(de,g,v){var y=this&&this.__decorate||function(k,P,T,l){var _,h=arguments.length,u=h<3?P:null===l?l=Object.getOwnPropertyDescriptor(P,T):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(k,P,T,l);else for(var S=k.length-1;S>=0;S--)(_=k[S])&&(u=(h<3?_(u):h>3?_(P,T,u):_(P,T))||u);return h>3&&u&&Object.defineProperty(P,T,u),u},M=this&&this.__param||function(k,P){return function(T,l){P(T,l,k)}};Object.defineProperty(g,"__esModule",{value:!0}),g.OscLinkService=void 0;const m=v(2585);let C=g.OscLinkService=class{constructor(k){this._bufferService=k,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(k){const P=this._bufferService.buffer;if(void 0===k.id){const S=P.addMarker(P.ybase+P.y),E={data:k,id:this._nextId++,lines:[S]};return S.onDispose(()=>this._removeMarkerFromLink(E,S)),this._dataByLinkId.set(E.id,E),E.id}const T=k,l=this._getEntryIdKey(T),_=this._entriesWithId.get(l);if(_)return this.addLineToLink(_.id,P.ybase+P.y),_.id;const h=P.addMarker(P.ybase+P.y),u={id:this._nextId++,key:this._getEntryIdKey(T),data:T,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(u,h)),this._entriesWithId.set(u.key,u),this._dataByLinkId.set(u.id,u),u.id}addLineToLink(k,P){const T=this._dataByLinkId.get(k);if(T&&T.lines.every(l=>l.line!==P)){const l=this._bufferService.buffer.addMarker(P);T.lines.push(l),l.onDispose(()=>this._removeMarkerFromLink(T,l))}}getLinkData(k){var P;return null===(P=this._dataByLinkId.get(k))||void 0===P?void 0:P.data}_getEntryIdKey(k){return`${k.id};;${k.uri}`}_removeMarkerFromLink(k,P){const T=k.lines.indexOf(P);-1!==T&&(k.lines.splice(T,1),0===k.lines.length&&(void 0!==k.data.id&&this._entriesWithId.delete(k.key),this._dataByLinkId.delete(k.id)))}};g.OscLinkService=C=y([M(0,m.IBufferService)],C)},8343:(de,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.createDecorator=g.getServiceDependencies=g.serviceRegistry=void 0;const v="di$target",y="di$dependencies";g.serviceRegistry=new Map,g.getServiceDependencies=function(M){return M[y]||[]},g.createDecorator=function(M){if(g.serviceRegistry.has(M))return g.serviceRegistry.get(M);const m=function(C,k,P){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");var T,l,_;T=m,_=P,(l=C)[v]===l?l[y].push({id:T,index:_}):(l[y]=[{id:T,index:_}],l[v]=l)};return m.toString=()=>M,g.serviceRegistry.set(M,m),m}},2585:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.IDecorationService=g.IUnicodeService=g.IOscLinkService=g.IOptionsService=g.ILogService=g.LogLevelEnum=g.IInstantiationService=g.ICharsetService=g.ICoreService=g.ICoreMouseService=g.IBufferService=void 0;const y=v(8343);var M,m;g.IBufferService=(0,y.createDecorator)("BufferService"),g.ICoreMouseService=(0,y.createDecorator)("CoreMouseService"),g.ICoreService=(0,y.createDecorator)("CoreService"),g.ICharsetService=(0,y.createDecorator)("CharsetService"),g.IInstantiationService=(0,y.createDecorator)("InstantiationService"),(m=M||(g.LogLevelEnum=M={}))[m.TRACE=0]="TRACE",m[m.DEBUG=1]="DEBUG",m[m.INFO=2]="INFO",m[m.WARN=3]="WARN",m[m.ERROR=4]="ERROR",m[m.OFF=5]="OFF",g.ILogService=(0,y.createDecorator)("LogService"),g.IOptionsService=(0,y.createDecorator)("OptionsService"),g.IOscLinkService=(0,y.createDecorator)("OscLinkService"),g.IUnicodeService=(0,y.createDecorator)("UnicodeService"),g.IDecorationService=(0,y.createDecorator)("DecorationService")},1480:(de,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.UnicodeService=void 0;const y=v(8460),M=v(225);g.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new y.EventEmitter,this.onChange=this._onChange.event;const m=new M.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(m){if(!this._providers[m])throw new Error(`unknown Unicode version "${m}"`);this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)}register(m){this._providers[m.version]=m}wcwidth(m){return this._activeProvider.wcwidth(m)}getStringCellWidth(m){let C=0;const k=m.length;for(let P=0;P<k;++P){let T=m.charCodeAt(P);if(55296<=T&&T<=56319){if(++P>=k)return C+this.wcwidth(T);const l=m.charCodeAt(P);56320<=l&&l<=57343?T=1024*(T-55296)+l-56320+65536:C+=this.wcwidth(l)}C+=this.wcwidth(T)}return C}}}},oe={};function Z(de){var g=oe[de];if(void 0!==g)return g.exports;var v=oe[de]={exports:{}};return et[de].call(v.exports,v,v.exports,Z),v.exports}var d={};return(()=>{var de=d;Object.defineProperty(de,"__esModule",{value:!0}),de.Terminal=void 0;const g=Z(9042),v=Z(3236),y=Z(844),M=Z(5741),m=Z(8285),C=Z(7975),k=Z(7090),P=["cols","rows"];de.Terminal=class T extends y.Disposable{constructor(_){super(),this._core=this.register(new v.Terminal(_)),this._addonManager=this.register(new M.AddonManager),this._publicOptions=Object.assign({},this._core.options);const h=S=>this._core.options[S],u=(S,E)=>{this._checkReadonlyOptions(S),this._core.options[S]=E};for(const S in this._core.options){const E={get:h.bind(this,S),set:u.bind(this,S)};Object.defineProperty(this._publicOptions,S,E)}}_checkReadonlyOptions(_){if(P.includes(_))throw new Error(`Option "${_}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new C.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new k.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new m.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const _=this._core.coreService.decPrivateModes;let h="none";switch(this._core.coreMouseService.activeProtocol){case"X10":h="x10";break;case"VT200":h="vt200";break;case"DRAG":h="drag";break;case"ANY":h="any"}return{applicationCursorKeysMode:_.applicationCursorKeys,applicationKeypadMode:_.applicationKeypad,bracketedPasteMode:_.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:h,originMode:_.origin,reverseWraparoundMode:_.reverseWraparound,sendFocusMode:_.sendFocus,wraparoundMode:_.wraparound}}get options(){return this._publicOptions}set options(_){for(const h in _)this._publicOptions[h]=_[h]}blur(){this._core.blur()}focus(){this._core.focus()}resize(_,h){this._verifyIntegers(_,h),this._core.resize(_,h)}open(_){this._core.open(_)}attachCustomKeyEventHandler(_){this._core.attachCustomKeyEventHandler(_)}registerLinkProvider(_){return this._core.registerLinkProvider(_)}registerCharacterJoiner(_){return this._checkProposedApi(),this._core.registerCharacterJoiner(_)}deregisterCharacterJoiner(_){this._checkProposedApi(),this._core.deregisterCharacterJoiner(_)}registerMarker(_=0){return this._verifyIntegers(_),this._core.registerMarker(_)}registerDecoration(_){var h,u,S;return this._checkProposedApi(),this._verifyPositiveIntegers(null!==(h=_.x)&&void 0!==h?h:0,null!==(u=_.width)&&void 0!==u?u:0,null!==(S=_.height)&&void 0!==S?S:0),this._core.registerDecoration(_)}hasSelection(){return this._core.hasSelection()}select(_,h,u){this._verifyIntegers(_,h,u),this._core.select(_,h,u)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(_,h){this._verifyIntegers(_,h),this._core.selectLines(_,h)}dispose(){super.dispose()}scrollLines(_){this._verifyIntegers(_),this._core.scrollLines(_)}scrollPages(_){this._verifyIntegers(_),this._core.scrollPages(_)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(_){this._verifyIntegers(_),this._core.scrollToLine(_)}clear(){this._core.clear()}write(_,h){this._core.write(_,h)}writeln(_,h){this._core.write(_),this._core.write("\r\n",h)}paste(_){this._core.paste(_)}refresh(_,h){this._verifyIntegers(_,h),this._core.refresh(_,h)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(_){this._addonManager.loadAddon(this,_)}static get strings(){return g}_verifyIntegers(..._){for(const h of _)if(h===1/0||isNaN(h)||h%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(..._){for(const h of _)if(h&&(h===1/0||isNaN(h)||h%1!=0||h<0))throw new Error("This API only accepts positive integers")}}})(),d})()},7816:(xt,et,oe)=>{"use strict";oe.d(et,{kL:()=>gs,zX:()=>ao});var Z=oe(1180),d=oe(8137);class de{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(i,e,t,s){const o=e.duration;e.listeners[s].forEach(c=>c({chart:i,initial:e.initial,numSteps:o,currentStep:Math.min(t-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=d.r.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(i=Date.now()){let e=0;this._charts.forEach((t,s)=>{if(!t.running||!t.items.length)return;const n=t.items;let f,o=n.length-1,c=!1;for(;o>=0;--o)f=n[o],f._active?(f._total>t.duration&&(t.duration=f._total),f.tick(i),c=!0):(n[o]=n[n.length-1],n.pop());c&&(s.draw(),this._notify(s,t,i,"progress")),n.length||(t.running=!1,this._notify(s,t,i,"complete"),t.initial=!1),e+=n.length}),this._lastDate=i,0===e&&(this._running=!1)}_getAnims(i){const e=this._charts;let t=e.get(i);return t||(t={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(i,t)),t}listen(i,e,t){this._getAnims(i).listeners[e].push(t)}add(i,e){!e||!e.length||this._getAnims(i).items.push(...e)}has(i){return this._getAnims(i).items.length>0}start(i){const e=this._charts.get(i);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,s)=>Math.max(t,s._duration),0),this._refresh())}running(i){if(!this._running)return!1;const e=this._charts.get(i);return!(!e||!e.running||!e.items.length)}stop(i){const e=this._charts.get(i);if(!e||!e.items.length)return;const t=e.items;let s=t.length-1;for(;s>=0;--s)t[s].cancel();e.items=[],this._notify(i,e,Date.now(),"complete")}remove(i){return this._charts.delete(i)}}var g=new de;const v="transparent",y={boolean:(r,i,e)=>e>.5?i:r,color(r,i,e){const t=(0,d.c)(r||v),s=t.valid&&(0,d.c)(i||v);return s&&s.valid?s.mix(t,e).hexString():i},number:(r,i,e)=>r+(i-r)*e};class M{constructor(i,e,t,s){const n=e[t];s=(0,d.a)([i.to,s,n,i.from]);const o=(0,d.a)([i.from,n,s]);this._active=!0,this._fn=i.fn||y[i.type||typeof o],this._easing=d.e[i.easing]||d.e.linear,this._start=Math.floor(Date.now()+(i.delay||0)),this._duration=this._total=Math.floor(i.duration),this._loop=!!i.loop,this._target=e,this._prop=t,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(i,e,t){if(this._active){this._notify(!1);const s=this._target[this._prop],n=t-this._start,o=this._duration-n;this._start=t,this._duration=Math.floor(Math.max(o,i.duration)),this._total+=n,this._loop=!!i.loop,this._to=(0,d.a)([i.to,e,s,i.from]),this._from=(0,d.a)([i.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(i){const e=i-this._start,t=this._duration,s=this._prop,n=this._from,o=this._loop,c=this._to;let f;if(this._active=n!==c&&(o||e<t),!this._active)return this._target[s]=c,void this._notify(!0);e<0?this._target[s]=n:(f=e/t%2,f=o&&f>1?2-f:f,f=this._easing(Math.min(1,Math.max(0,f))),this._target[s]=this._fn(n,c,f))}wait(){const i=this._promises||(this._promises=[]);return new Promise((e,t)=>{i.push({res:e,rej:t})})}_notify(i){const e=i?"res":"rej",t=this._promises||[];for(let s=0;s<t.length;s++)t[s][e]()}}class m{constructor(i,e){this._chart=i,this._properties=new Map,this.configure(e)}configure(i){if(!(0,d.i)(i))return;const e=Object.keys(d.d.animation),t=this._properties;Object.getOwnPropertyNames(i).forEach(s=>{const n=i[s];if(!(0,d.i)(n))return;const o={};for(const c of e)o[c]=n[c];((0,d.b)(n.properties)&&n.properties||[s]).forEach(c=>{(c===s||!t.has(c))&&t.set(c,o)})})}_animateOptions(i,e){const t=e.options,s=function k(r,i){if(!i)return;let e=r.options;if(e)return e.$shared&&(r.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e;r.options=i}(i,t);if(!s)return[];const n=this._createAnimations(s,t);return t.$shared&&function C(r,i){const e=[],t=Object.keys(i);for(let s=0;s<t.length;s++){const n=r[t[s]];n&&n.active()&&e.push(n.wait())}return Promise.all(e)}(i.options.$animations,t).then(()=>{i.options=t},()=>{}),n}_createAnimations(i,e){const t=this._properties,s=[],n=i.$animations||(i.$animations={}),o=Object.keys(e),c=Date.now();let f;for(f=o.length-1;f>=0;--f){const b=o[f];if("$"===b.charAt(0))continue;if("options"===b){s.push(...this._animateOptions(i,e));continue}const D=e[b];let B=n[b];const j=t.get(b);if(B){if(j&&B.active()){B.update(j,D,c);continue}B.cancel()}j&&j.duration?(n[b]=B=new M(j,i,b,D),s.push(B)):i[b]=D}return s}update(i,e){if(0===this._properties.size)return void Object.assign(i,e);const t=this._createAnimations(i,e);return t.length?(g.add(this._chart,t),!0):void 0}}function P(r,i){const e=r&&r.options||{},t=e.reverse,s=void 0===e.min?i:0,n=void 0===e.max?i:0;return{start:t?n:s,end:t?s:n}}function _(r,i){const e=[],t=r._getSortedDatasetMetas(i);let s,n;for(s=0,n=t.length;s<n;++s)e.push(t[s].index);return e}function h(r,i,e,t={}){const s=r.keys,n="single"===t.mode;let o,c,f,b;if(null!==i){for(o=0,c=s.length;o<c;++o){if(f=+s[o],f===e){if(t.all)continue;break}b=r.values[f],(0,d.g)(b)&&(n||0===i||(0,d.s)(i)===(0,d.s)(b))&&(i+=b)}return i}}function S(r,i){const e=r&&r.options.stacked;return e||void 0===e&&void 0!==i.stack}function R(r,i,e){const t=r[i]||(r[i]={});return t[e]||(t[e]={})}function x(r,i,e,t){for(const s of i.getMatchingVisibleMetas(t).reverse()){const n=r[s.index];if(e&&n>0||!e&&n<0)return s.index}return null}function L(r,i){const{chart:e,_cachedMeta:t}=r,s=e._stacks||(e._stacks={}),{iScale:n,vScale:o,index:c}=t,f=n.axis,b=o.axis,D=function E(r,i,e){return`${r.id}.${i.id}.${e.stack||e.type}`}(n,o,t),B=i.length;let j;for(let Y=0;Y<B;++Y){const ne=i[Y],{[f]:ce,[b]:pe}=ne;j=(ne._stacks||(ne._stacks={}))[b]=R(s,D,ce),j[c]=pe,j._top=x(j,o,!0,t.type),j._bottom=x(j,o,!1,t.type),(j._visualValues||(j._visualValues={}))[c]=pe}}function V(r,i){const e=r.scales;return Object.keys(e).filter(t=>e[t].axis===i).shift()}function J(r,i){const e=r.controller.index,t=r.vScale&&r.vScale.axis;if(t){i=i||r._parsed;for(const s of i){const n=s._stacks;if(!n||void 0===n[t]||void 0===n[t][e])return;delete n[t][e],void 0!==n[t]._visualValues&&void 0!==n[t]._visualValues[e]&&delete n[t]._visualValues[e]}}}const be=r=>"reset"===r||"none"===r,Se=(r,i)=>i?r:Object.assign({},r);let Ce=(()=>{class r{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=S(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&J(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),n=(j,Y,ne,ce)=>"x"===j?Y:"r"===j?ce:ne,o=t.xAxisID=(0,d.v)(s.xAxisID,V(e,"x")),c=t.yAxisID=(0,d.v)(s.yAxisID,V(e,"y")),f=t.rAxisID=(0,d.v)(s.rAxisID,V(e,"r")),b=t.indexAxis,D=t.iAxisID=n(b,o,c,f),B=t.vAxisID=n(b,c,o,f);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(c),t.rScale=this.getScaleForId(f),t.iScale=this.getScaleForId(D),t.vScale=this.getScaleForId(B)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&(0,d.u)(this._data,this),e._stacked&&J(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if((0,d.i)(t))this._data=function u(r){const i=Object.keys(r),e=new Array(i.length);let t,s,n;for(t=0,s=i.length;t<s;++t)n=i[t],e[t]={x:n,y:r[n]};return e}(t);else if(s!==t){if(s){(0,d.u)(s,this);const n=this._cachedMeta;J(n),n._parsed=[]}t&&Object.isExtensible(t)&&(0,d.l)(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const o=t._stacked;t._stacked=S(t.vScale,t),t.stack!==s.stack&&(n=!0,J(t),t.stack=s.stack),this._resyncElements(e),(n||o!==t._stacked)&&L(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:n}=this,{iScale:o,_stacked:c}=s,f=o.axis;let B,j,Y,b=0===e&&t===n.length||s._sorted,D=e>0&&s._parsed[e-1];if(!1===this._parsing)s._parsed=n,s._sorted=!0,Y=n;else{Y=(0,d.b)(n[e])?this.parseArrayData(s,n,e,t):(0,d.i)(n[e])?this.parseObjectData(s,n,e,t):this.parsePrimitiveData(s,n,e,t);const ne=()=>null===j[f]||D&&j[f]<D[f];for(B=0;B<t;++B)s._parsed[B+e]=j=Y[B],b&&(ne()&&(b=!1),D=j);s._sorted=b}c&&L(this,Y)}parsePrimitiveData(e,t,s,n){const{iScale:o,vScale:c}=e,f=o.axis,b=c.axis,D=o.getLabels(),B=o===c,j=new Array(n);let Y,ne,ce;for(Y=0,ne=n;Y<ne;++Y)ce=Y+s,j[Y]={[f]:B||o.parse(D[ce],ce),[b]:c.parse(t[ce],ce)};return j}parseArrayData(e,t,s,n){const{xScale:o,yScale:c}=e,f=new Array(n);let b,D,B,j;for(b=0,D=n;b<D;++b)B=b+s,j=t[B],f[b]={x:o.parse(j[0],B),y:c.parse(j[1],B)};return f}parseObjectData(e,t,s,n){const{xScale:o,yScale:c}=e,{xAxisKey:f="x",yAxisKey:b="y"}=this._parsing,D=new Array(n);let B,j,Y,ne;for(B=0,j=n;B<j;++B)Y=B+s,ne=t[Y],D[B]={x:o.parse((0,d.f)(ne,f),Y),y:c.parse((0,d.f)(ne,b),Y)};return D}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const o=this._cachedMeta,c=t[e.axis];return h({keys:_(this.chart,!0),values:t._stacks[e.axis]._visualValues},c,o.index,{mode:s})}updateRangeFromParsed(e,t,s,n){const o=s[t.axis];let c=null===o?NaN:o;const f=n&&s._stacks[t.axis];n&&f&&(n.values=f,c=h(n,o,this._cachedMeta.index)),e.min=Math.min(e.min,c),e.max=Math.max(e.max,c)}getMinMax(e,t){const s=this._cachedMeta,n=s._parsed,o=s._sorted&&e===s.iScale,c=n.length,f=this._getOtherScale(e),b=((r,i,e)=>r&&!i.hidden&&i._stacked&&{keys:_(this.chart,!0),values:null})(t,s),D={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:B,max:j}=function O(r){const{min:i,max:e,minDefined:t,maxDefined:s}=r.getUserBounds();return{min:t?i:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}(f);let Y,ne;function ce(){ne=n[Y];const pe=ne[f.axis];return!(0,d.g)(ne[e.axis])||B>pe||j<pe}for(Y=0;Y<c&&(ce()||(this.updateRangeFromParsed(D,e,ne,b),!o));++Y);if(o)for(Y=c-1;Y>=0;--Y)if(!ce()){this.updateRangeFromParsed(D,e,ne,b);break}return D}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let n,o,c;for(n=0,o=t.length;n<o;++n)c=t[n][e.axis],(0,d.g)(c)&&s.push(c);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,n=t.vScale,o=this.getParsed(e);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function l(r){let i,e,t,s;return(0,d.i)(r)?(i=r.top,e=r.right,t=r.bottom,s=r.left):i=e=t=s=r,{top:i,right:e,bottom:t,left:s,disabled:!1===r}}((0,d.v)(this.options.clip,function T(r,i,e){if(!1===e)return!1;const t=P(r,e),s=P(i,e);return{top:s.end,right:t.end,bottom:s.start,left:t.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this._cachedMeta,n=s.data||[],o=this.chart.chartArea,c=[],f=this._drawStart||0,b=this._drawCount||n.length-f,D=this.options.drawActiveElementsOnTop;let B;for(s.dataset&&s.dataset.draw(e,o,f,b),B=f;B<f+b;++B){const j=n[B];j.hidden||(j.active&&D?c.push(j):j.draw(e,o))}for(B=0;B<c.length;++B)c[B].draw(e,o)}getStyle(e,t){const s=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const n=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const c=this._cachedMeta.data[e];o=c.$context||(c.$context=function X(r,i,e){return(0,d.j)(r,{active:!1,dataIndex:i,parsed:void 0,raw:void 0,element:e,index:i,mode:"default",type:"data"})}(this.getContext(),e,c)),o.parsed=this.getParsed(e),o.raw=n.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=function ie(r,i){return(0,d.j)(r,{active:!1,dataset:void 0,datasetIndex:i,index:i,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=s,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",s){const n="active"===t,o=this._cachedDataOpts,c=e+"-"+t,f=o[c],b=this.enableOptionSharing&&(0,d.h)(s);if(f)return Se(f,b);const D=this.chart.config,B=D.datasetElementScopeKeys(this._type,e),j=n?[`${e}Hover`,"hover",e,""]:[e,""],Y=D.getOptionScopes(this.getDataset(),B),ne=Object.keys(d.d.elements[e]),pe=D.resolveNamedOptions(Y,ne,()=>this.getContext(s,n,t),j);return pe.$shared&&(pe.$shared=b,o[c]=Object.freeze(Se(pe,b))),pe}_resolveAnimations(e,t,s){const n=this.chart,o=this._cachedDataOpts,c=`animation-${t}`,f=o[c];if(f)return f;let b;if(!1!==n.options.animation){const B=this.chart.config,j=B.datasetAnimationScopeKeys(this._type,t),Y=B.getOptionScopes(this.getDataset(),j);b=B.createResolver(Y,this.getContext(e,s,t))}const D=new m(n,b&&b.animations);return b&&b._cacheable&&(o[c]=Object.freeze(D)),D}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||be(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),n=this._sharedOptions,o=this.getSharedOptions(s),c=this.includeOptions(t,o)||o!==n;return this.updateSharedOptions(o,t,s),{sharedOptions:o,includeOptions:c}}updateElement(e,t,s,n){be(n)?Object.assign(e,s):this._resolveAnimations(t,n).update(e,s)}updateSharedOptions(e,t,s){e&&!be(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,n){e.active=n;const o=this.getStyle(t,n);this._resolveAnimations(t,s,n).update(e,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[f,b,D]of this._syncList)this[f](b,D);this._syncList=[];const n=s.length,o=t.length,c=Math.min(o,n);c&&this.parse(0,c),o>n?this._insertElements(n,o-n,e):o<n&&this._removeElements(o,n-o)}_insertElements(e,t,s=!0){const n=this._cachedMeta,o=n.data,c=e+t;let f;const b=D=>{for(D.length+=t,f=D.length-1;f>=c;f--)D[f]=D[f-t]};for(b(o),f=e;f<c;++f)o[f]=new this.dataElementType;this._parsing&&b(n._parsed),this.parse(e,t),s&&this.updateElements(o,e,t,"reset")}updateElements(e,t,s,n){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(e,t);s._stacked&&J(s,n)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,n]=e;this[t](s,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return(0,Z.Z)(r,"defaults",{}),(0,Z.Z)(r,"datasetElementType",null),(0,Z.Z)(r,"dataElementType",null),r})();function G(r){const i=r.iScale,e=function N(r,i){if(!r._cache.$bar){const e=r.getMatchingVisibleMetas(i);let t=[];for(let s=0,n=e.length;s<n;s++)t=t.concat(e[s].controller.getAllParsedValues(r));r._cache.$bar=(0,d._)(t.sort((s,n)=>s-n))}return r._cache.$bar}(i,r.type);let s,n,o,c,t=i._length;const f=()=>{32767===o||-32768===o||((0,d.h)(c)&&(t=Math.min(t,Math.abs(o-c)||t)),c=o)};for(s=0,n=e.length;s<n;++s)o=i.getPixelForValue(e[s]),f();for(c=void 0,s=0,n=i.ticks.length;s<n;++s)o=i.getPixelForTick(s),f();return t}function Be(r,i,e,t){return(0,d.b)(r)?function Ae(r,i,e,t){const s=e.parse(r[0],t),n=e.parse(r[1],t),o=Math.min(s,n),c=Math.max(s,n);let f=o,b=c;Math.abs(o)>Math.abs(c)&&(f=c,b=o),i[e.axis]=b,i._custom={barStart:f,barEnd:b,start:s,end:n,min:o,max:c}}(r,i,e,t):i[e.axis]=e.parse(r,t),i}function Ue(r,i,e,t){const s=r.iScale,n=r.vScale,o=s.getLabels(),c=s===n,f=[];let b,D,B,j;for(b=e,D=e+t;b<D;++b)j=i[b],B={},B[s.axis]=c||s.parse(o[b],b),f.push(Be(j,B,n,b));return f}function Re(r){return r&&void 0!==r.barStart&&void 0!==r.barEnd}function le(r,i,e,t){let s=i.borderSkipped;const n={};if(!s)return void(r.borderSkipped=n);if(!0===s)return void(r.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:c,reverse:f,top:b,bottom:D}=function I(r){let i,e,t,s,n;return r.horizontal?(i=r.base>r.x,e="left",t="right"):(i=r.base<r.y,e="bottom",t="top"),i?(s="end",n="start"):(s="start",n="end"),{start:e,end:t,reverse:i,top:s,bottom:n}}(r);"middle"===s&&e&&(r.enableBorderRadius=!0,(e._top||0)===t?s=b:(e._bottom||0)===t?s=D:(n[he(D,o,c,f)]=!0,s=b)),n[he(s,o,c,f)]=!0,r.borderSkipped=n}function he(r,i,e,t){return t?(r=function ge(r,i,e){return r===i?e:r===e?i:r}(r,i,e),r=je(r,e,i)):r=je(r,i,e),r}function je(r,i,e){return"start"===r?i:"end"===r?e:r}function ze(r,{inflateAmount:i},e){r.inflateAmount="auto"===i?1===e?.33:0:i}let Ze=(()=>{class r extends Ce{parsePrimitiveData(e,t,s,n){return Ue(e,t,s,n)}parseArrayData(e,t,s,n){return Ue(e,t,s,n)}parseObjectData(e,t,s,n){const{iScale:o,vScale:c}=e,{xAxisKey:f="x",yAxisKey:b="y"}=this._parsing,D="x"===o.axis?f:b,B="x"===c.axis?f:b,j=[];let Y,ne,ce,pe;for(Y=s,ne=s+n;Y<ne;++Y)pe=t[Y],ce={},ce[o.axis]=o.parse((0,d.f)(pe,D),Y),j.push(Be((0,d.f)(pe,B),ce,c,Y));return j}updateRangeFromParsed(e,t,s,n){super.updateRangeFromParsed(e,t,s,n);const o=s._custom;o&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:s,vScale:n}=t,o=this.getParsed(e),c=o._custom,f=Re(c)?"["+c.start+", "+c.end+"]":""+n.getLabelForValue(o[n.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:f}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,s,n){const o="reset"===n,{index:c,_cachedMeta:{vScale:f}}=this,b=f.getBasePixel(),D=f.isHorizontal(),B=this._getRuler(),{sharedOptions:j,includeOptions:Y}=this._getSharedOptions(t,n);for(let ne=t;ne<t+s;ne++){const ce=this.getParsed(ne),pe=o||(0,d.k)(ce[f.axis])?{base:b,head:b}:this._calculateBarValuePixels(ne),Ee=this._calculateBarIndexPixels(ne,B),ye=(ce._stacks||{})[f.axis],Fe={horizontal:D,base:pe.base,enableBorderRadius:!ye||Re(ce._custom)||c===ye._top||c===ye._bottom,x:D?pe.head:Ee.center,y:D?Ee.center:pe.head,height:D?Ee.size:Math.abs(pe.size),width:D?Math.abs(pe.size):Ee.size};Y&&(Fe.options=j||this.resolveDataElementOptions(ne,e[ne].active?"active":n));const We=Fe.options||e[ne].options;le(Fe,We,ye,c),ze(Fe,We,B.ratio),this.updateElement(e[ne],ne,Fe,n)}}_getStacks(e,t){const{iScale:s}=this._cachedMeta,n=s.getMatchingVisibleMetas(this._type).filter(b=>b.controller.options.grouped),o=s.options.stacked,c=[],f=b=>{const D=b.controller.getParsed(t),B=D&&D[b.vScale.axis];if((0,d.k)(B)||isNaN(B))return!0};for(const b of n)if((void 0===t||!f(b))&&((!1===o||-1===c.indexOf(b.stack)||void 0===o&&void 0===b.stack)&&c.push(b.stack),b.index===e))break;return c.length||c.push(void 0),c}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,s){const n=this._getStacks(e,s),o=void 0!==t?n.indexOf(t):-1;return-1===o?n.length-1:o}_getRuler(){const e=this.options,t=this._cachedMeta,s=t.iScale,n=[];let o,c;for(o=0,c=t.data.length;o<c;++o)n.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));const f=e.barThickness;return{min:f||G(t),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:f?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:s,index:n},options:{base:o,minBarLength:c}}=this,f=o||0,b=this.getParsed(e),D=b._custom,B=Re(D);let ce,pe,j=b[t.axis],Y=0,ne=s?this.applyStack(t,b,s):j;ne!==j&&(Y=ne-j,ne=j),B&&(j=D.barStart,ne=D.barEnd-D.barStart,0!==j&&(0,d.s)(j)!==(0,d.s)(D.barEnd)&&(Y=0),Y+=j);const Ee=(0,d.k)(o)||B?Y:o;let ye=t.getPixelForValue(Ee);if(ce=this.chart.getDataVisibility(e)?t.getPixelForValue(Y+ne):ye,pe=ce-ye,Math.abs(pe)<c){pe=function Ne(r,i,e){return 0!==r?(0,d.s)(r):(i.isHorizontal()?1:-1)*(i.min>=e?1:-1)}(pe,t,f)*c,j===f&&(ye-=pe/2);const Fe=t.getPixelForDecimal(0),We=t.getPixelForDecimal(1),ke=Math.min(Fe,We),He=Math.max(Fe,We);ye=Math.max(Math.min(ye,He),ke),ce=ye+pe,s&&!B&&(b._stacks[t.axis]._visualValues[n]=t.getValueForPixel(ce)-t.getValueForPixel(ye))}if(ye===t.getPixelForValue(f)){const Fe=(0,d.s)(pe)*t.getLineWidthForValue(f)/2;ye+=Fe,pe-=Fe}return{size:pe,base:ye,head:ce,center:ce+pe/2}}_calculateBarIndexPixels(e,t){const s=t.scale,n=this.options,o=n.skipNull,c=(0,d.v)(n.maxBarThickness,1/0);let f,b;if(t.grouped){const D=o?this._getStackCount(e):t.stackCount,B="flex"===n.barThickness?function se(r,i,e,t){const s=i.pixels,n=s[r];let o=r>0?s[r-1]:null,c=r<s.length-1?s[r+1]:null;const f=e.categoryPercentage;null===o&&(o=n-(null===c?i.end-i.start:c-n)),null===c&&(c=n+n-o);const b=n-(n-Math.min(o,c))/2*f;return{chunk:Math.abs(c-o)/2*f/t,ratio:e.barPercentage,start:b}}(e,t,n,D):function Q(r,i,e,t){const s=e.barThickness;let n,o;return(0,d.k)(s)?(n=i.min*e.categoryPercentage,o=e.barPercentage):(n=s*t,o=1),{chunk:n/t,ratio:o,start:i.pixels[r]-n/2}}(e,t,n,D),j=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);f=B.start+B.chunk*j+B.chunk/2,b=Math.min(c,B.chunk*B.ratio)}else f=s.getPixelForValue(this.getParsed(e)[s.axis],e),b=Math.min(c,t.min*t.ratio);return{base:f-b/2,head:f+b/2,center:f,size:b}}draw(){const e=this._cachedMeta,t=e.vScale,s=e.data,n=s.length;let o=0;for(;o<n;++o)null!==this.getParsed(o)[t.axis]&&s[o].draw(this._ctx)}}return(0,Z.Z)(r,"id","bar"),(0,Z.Z)(r,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,Z.Z)(r,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}}),r})(),Ve=(()=>{class r extends Ce{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,s,n){const o=super.parsePrimitiveData(e,t,s,n);for(let c=0;c<o.length;c++)o[c]._custom=this.resolveDataElementOptions(c+s).radius;return o}parseArrayData(e,t,s,n){const o=super.parseArrayData(e,t,s,n);for(let c=0;c<o.length;c++)o[c]._custom=(0,d.v)(t[s+c][2],this.resolveDataElementOptions(c+s).radius);return o}parseObjectData(e,t,s,n){const o=super.parseObjectData(e,t,s,n);for(let c=0;c<o.length;c++){const f=t[s+c];o[c]._custom=(0,d.v)(f&&f.r&&+f.r,this.resolveDataElementOptions(c+s).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let s=e.length-1;s>=0;--s)t=Math.max(t,e[s].size(this.resolveDataElementOptions(s))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:o}=t,c=this.getParsed(e),f=n.getLabelForValue(c.x),b=o.getLabelForValue(c.y),D=c._custom;return{label:s[e]||"",value:"("+f+", "+b+(D?", "+D:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,s,n){const o="reset"===n,{iScale:c,vScale:f}=this._cachedMeta,{sharedOptions:b,includeOptions:D}=this._getSharedOptions(t,n),B=c.axis,j=f.axis;for(let Y=t;Y<t+s;Y++){const ne=e[Y],ce=!o&&this.getParsed(Y),pe={},Ee=pe[B]=o?c.getPixelForDecimal(.5):c.getPixelForValue(ce[B]),ye=pe[j]=o?f.getBasePixel():f.getPixelForValue(ce[j]);pe.skip=isNaN(Ee)||isNaN(ye),D&&(pe.options=b||this.resolveDataElementOptions(Y,ne.active?"active":n),o&&(pe.options.radius=0)),this.updateElement(ne,Y,pe,n)}}resolveDataElementOptions(e,t){const s=this.getParsed(e);let n=super.resolveDataElementOptions(e,t);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const o=n.radius;return"active"!==t&&(n.radius=0),n.radius+=(0,d.v)(s&&s._custom,o),n}}return(0,Z.Z)(r,"id","bubble"),(0,Z.Z)(r,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,Z.Z)(r,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}}),r})(),Te=(()=>{class r extends Ce{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const s=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=s;else{let c,f,o=b=>+s[b];if((0,d.i)(s[e])){const{key:b="value"}=this._parsing;o=D=>+(0,d.f)(s[D],b)}for(c=e,f=e+t;c<f;++c)n._parsed[c]=o(c)}}_getRotation(){return(0,d.t)(this.options.rotation-90)}_getCircumference(){return(0,d.t)(this.options.circumference)}_getRotationExtents(){let e=d.T,t=-d.T;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const n=this.chart.getDatasetMeta(s).controller,o=n._getRotation(),c=n._getCircumference();e=Math.min(e,o),t=Math.max(t,o+c)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:s}=t,n=this._cachedMeta,o=n.data,c=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,f=Math.max((Math.min(s.width,s.height)-c)/2,0),b=Math.min((0,d.m)(this.options.cutout,f),1),D=this._getRingWeight(this.index),{circumference:B,rotation:j}=this._getRotationExtents(),{ratioX:Y,ratioY:ne,offsetX:ce,offsetY:pe}=function nt(r,i,e){let t=1,s=1,n=0,o=0;if(i<d.T){const c=r,f=c+i,b=Math.cos(c),D=Math.sin(c),B=Math.cos(f),j=Math.sin(f),Y=(Fe,We,ke)=>(0,d.p)(Fe,c,f,!0)?1:Math.max(We,We*e,ke,ke*e),ne=(Fe,We,ke)=>(0,d.p)(Fe,c,f,!0)?-1:Math.min(We,We*e,ke,ke*e),ce=Y(0,b,B),pe=Y(d.H,D,j),Ee=ne(d.P,b,B),ye=ne(d.P+d.H,D,j);t=(ce-Ee)/2,s=(pe-ye)/2,n=-(ce+Ee)/2,o=-(pe+ye)/2}return{ratioX:t,ratioY:s,offsetX:n,offsetY:o}}(j,B,b),Fe=Math.max(Math.min((s.width-c)/Y,(s.height-c)/ne)/2,0),We=(0,d.n)(this.options.radius,Fe),He=(We-Math.max(We*b,0))/this._getVisibleDatasetWeightTotal();this.offsetX=ce*We,this.offsetY=pe*We,n.total=this.calculateTotal(),this.outerRadius=We-He*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-He*D,0),this.updateElements(o,0,o.length,e)}_circumference(e,t){const s=this.options,n=this._cachedMeta,o=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||null===n._parsed[e]||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*o/d.T)}updateElements(e,t,s,n){const o="reset"===n,c=this.chart,f=c.chartArea,B=(f.left+f.right)/2,j=(f.top+f.bottom)/2,Y=o&&c.options.animation.animateScale,ne=Y?0:this.innerRadius,ce=Y?0:this.outerRadius,{sharedOptions:pe,includeOptions:Ee}=this._getSharedOptions(t,n);let Fe,ye=this._getRotation();for(Fe=0;Fe<t;++Fe)ye+=this._circumference(Fe,o);for(Fe=t;Fe<t+s;++Fe){const We=this._circumference(Fe,o),ke=e[Fe],He={x:B+this.offsetX,y:j+this.offsetY,startAngle:ye,endAngle:ye+We,circumference:We,outerRadius:ce,innerRadius:ne};Ee&&(He.options=pe||this.resolveDataElementOptions(Fe,ke.active?"active":n)),ye+=We,this.updateElement(ke,Fe,He,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,s=0;for(n=0;n<t.length;n++){const o=e._parsed[n];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(n)&&!t[n].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?d.T*(Math.abs(e)/t):0}getLabelAndValue(e){const s=this.chart,n=s.data.labels||[],o=(0,d.o)(this._cachedMeta._parsed[e],s.options.locale);return{label:n[e]||"",value:o}}getMaxBorderWidth(e){let t=0;const s=this.chart;let n,o,c,f,b;if(!e)for(n=0,o=s.data.datasets.length;n<o;++n)if(s.isDatasetVisible(n)){c=s.getDatasetMeta(n),e=c.data,f=c.controller;break}if(!e)return 0;for(n=0,o=e.length;n<o;++n)b=f.resolveDataElementOptions(n),"inner"!==b.borderAlign&&(t=Math.max(t,b.borderWidth||0,b.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let s=0,n=e.length;s<n;++s){const o=this.resolveDataElementOptions(s);t=Math.max(t,o.offset||0,o.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(e){return Math.max((0,d.v)(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return(0,Z.Z)(r,"id","doughnut"),(0,Z.Z)(r,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,Z.Z)(r,"descriptors",{_scriptable:i=>"spacing"!==i,_indexable:i=>"spacing"!==i&&!i.startsWith("borderDash")&&!i.startsWith("hoverBorderDash")}),(0,Z.Z)(r,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){const e=i.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t,color:s}}=i.legend.options;return e.labels.map((n,o)=>{const f=i.getDatasetMeta(0).controller.getStyle(o);return{text:n,fillStyle:f.backgroundColor,strokeStyle:f.borderColor,fontColor:s,lineWidth:f.borderWidth,pointStyle:t,hidden:!i.getDataVisibility(o),index:o}})}return[]}},onClick(i,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}}}}),r})(),Oe=(()=>{class r extends Ce{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:s,data:n=[],_dataset:o}=t,c=this.chart._animationsDisabled;let{start:f,count:b}=(0,d.q)(t,n,c);this._drawStart=f,this._drawCount=b,(0,d.w)(t)&&(f=0,b=n.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=n;const D=this.resolveDatasetElementOptions(e);this.options.showLine||(D.borderWidth=0),D.segment=this.options.segment,this.updateElement(s,void 0,{animated:!c,options:D},e),this.updateElements(n,f,b,e)}updateElements(e,t,s,n){const o="reset"===n,{iScale:c,vScale:f,_stacked:b,_dataset:D}=this._cachedMeta,{sharedOptions:B,includeOptions:j}=this._getSharedOptions(t,n),Y=c.axis,ne=f.axis,{spanGaps:ce,segment:pe}=this.options,Ee=(0,d.x)(ce)?ce:Number.POSITIVE_INFINITY,ye=this.chart._animationsDisabled||o||"none"===n,Fe=t+s,We=e.length;let ke=t>0&&this.getParsed(t-1);for(let He=0;He<We;++He){const Ye=e[He],$e=ye?Ye:{};if(He<t||He>=Fe){$e.skip=!0;continue}const Je=this.getParsed(He),ft=(0,d.k)(Je[ne]),ut=$e[Y]=c.getPixelForValue(Je[Y],He),vt=$e[ne]=o||ft?f.getBasePixel():f.getPixelForValue(b?this.applyStack(f,Je,b):Je[ne],He);$e.skip=isNaN(ut)||isNaN(vt)||ft,$e.stop=He>0&&Math.abs(Je[Y]-ke[Y])>Ee,pe&&($e.parsed=Je,$e.raw=D.data[He]),j&&($e.options=B||this.resolveDataElementOptions(He,Ye.active?"active":n)),ye||this.updateElement(Ye,He,$e,n),ke=Je}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,s=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return s;const o=n[0].size(this.resolveDataElementOptions(0)),c=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,o,c)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return(0,Z.Z)(r,"id","line"),(0,Z.Z)(r,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,Z.Z)(r,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}}),r})(),Qe=(()=>{class r extends Ce{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const s=this.chart,n=s.data.labels||[],o=(0,d.o)(this._cachedMeta._parsed[e].r,s.options.locale);return{label:n[e]||"",value:o}}parseObjectData(e,t,s,n){return d.y.bind(this)(e,t,s,n)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((s,n)=>{const o=this.getParsed(n).r;!isNaN(o)&&this.chart.getDataVisibility(n)&&(o<t.min&&(t.min=o),o>t.max&&(t.max=o))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,s=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),o=Math.max(n/2,0),f=(o-Math.max(s.cutoutPercentage?o/100*s.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=o-f*this.index,this.innerRadius=this.outerRadius-f}updateElements(e,t,s,n){const o="reset"===n,c=this.chart,b=c.options.animation,D=this._cachedMeta.rScale,B=D.xCenter,j=D.yCenter,Y=D.getIndexAngle(0)-.5*d.P;let ce,ne=Y;const pe=360/this.countVisibleElements();for(ce=0;ce<t;++ce)ne+=this._computeAngle(ce,n,pe);for(ce=t;ce<t+s;ce++){const Ee=e[ce];let ye=ne,Fe=ne+this._computeAngle(ce,n,pe),We=c.getDataVisibility(ce)?D.getDistanceFromCenterForValue(this.getParsed(ce).r):0;ne=Fe,o&&(b.animateScale&&(We=0),b.animateRotate&&(ye=Fe=Y));const ke={x:B,y:j,innerRadius:0,outerRadius:We,startAngle:ye,endAngle:Fe,options:this.resolveDataElementOptions(ce,Ee.active?"active":n)};this.updateElement(Ee,ce,ke,n)}}countVisibleElements(){let t=0;return this._cachedMeta.data.forEach((s,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,s){return this.chart.getDataVisibility(e)?(0,d.t)(this.resolveDataElementOptions(e,t).angle||s):0}}return(0,Z.Z)(r,"id","polarArea"),(0,Z.Z)(r,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,Z.Z)(r,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){const e=i.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t,color:s}}=i.legend.options;return e.labels.map((n,o)=>{const f=i.getDatasetMeta(0).controller.getStyle(o);return{text:n,fillStyle:f.backgroundColor,strokeStyle:f.borderColor,fontColor:s,lineWidth:f.borderWidth,pointStyle:t,hidden:!i.getDataVisibility(o),index:o}})}return[]}},onClick(i,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}}),r})();var dt=Object.freeze({__proto__:null,BarController:Ze,BubbleController:Ve,DoughnutController:Te,LineController:Oe,PieController:(()=>{class r extends Te{}return(0,Z.Z)(r,"id","pie"),(0,Z.Z)(r,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"}),r})(),PolarAreaController:Qe,RadarController:(()=>{class r extends Ce{getLabelAndValue(e){const t=this._cachedMeta.vScale,s=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(s[t.axis])}}parseObjectData(e,t,s,n){return d.y.bind(this)(e,t,s,n)}update(e){const t=this._cachedMeta,s=t.dataset,n=t.data||[],o=t.iScale.getLabels();if(s.points=n,"resize"!==e){const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),this.updateElement(s,void 0,{_loop:!0,_fullLoop:o.length===n.length,options:c},e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,s,n){const o=this._cachedMeta.rScale,c="reset"===n;for(let f=t;f<t+s;f++){const b=e[f],D=this.resolveDataElementOptions(f,b.active?"active":n),B=o.getPointPositionForValue(f,this.getParsed(f).r),j=c?o.xCenter:B.x,Y=c?o.yCenter:B.y,ne={x:j,y:Y,angle:B.angle,skip:isNaN(j)||isNaN(Y),options:D};this.updateElement(b,f,ne,n)}}}return(0,Z.Z)(r,"id","radar"),(0,Z.Z)(r,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,Z.Z)(r,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}}),r})(),ScatterController:(()=>{class r extends Ce{getLabelAndValue(e){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:o}=t,c=this.getParsed(e),f=n.getLabelForValue(c.x),b=o.getLabelForValue(c.y);return{label:s[e]||"",value:"("+f+", "+b+")"}}update(e){const t=this._cachedMeta,{data:s=[]}=t,n=this.chart._animationsDisabled;let{start:o,count:c}=(0,d.q)(t,s,n);if(this._drawStart=o,this._drawCount=c,(0,d.w)(t)&&(o=0,c=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:f,_dataset:b}=t;f._chart=this.chart,f._datasetIndex=this.index,f._decimated=!!b._decimated,f.points=s;const D=this.resolveDatasetElementOptions(e);D.segment=this.options.segment,this.updateElement(f,void 0,{animated:!n,options:D},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(s,o,c,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,s,n){const o="reset"===n,{iScale:c,vScale:f,_stacked:b,_dataset:D}=this._cachedMeta,B=this.resolveDataElementOptions(t,n),j=this.getSharedOptions(B),Y=this.includeOptions(n,j),ne=c.axis,ce=f.axis,{spanGaps:pe,segment:Ee}=this.options,ye=(0,d.x)(pe)?pe:Number.POSITIVE_INFINITY,Fe=this.chart._animationsDisabled||o||"none"===n;let We=t>0&&this.getParsed(t-1);for(let ke=t;ke<t+s;++ke){const He=e[ke],Ye=this.getParsed(ke),$e=Fe?He:{},Je=(0,d.k)(Ye[ce]),ft=$e[ne]=c.getPixelForValue(Ye[ne],ke),ut=$e[ce]=o||Je?f.getBasePixel():f.getPixelForValue(b?this.applyStack(f,Ye,b):Ye[ce],ke);$e.skip=isNaN(ft)||isNaN(ut)||Je,$e.stop=ke>0&&Math.abs(Ye[ne]-We[ne])>ye,Ee&&($e.parsed=Ye,$e.raw=D.data[ke]),Y&&($e.options=j||this.resolveDataElementOptions(ke,He.active?"active":n)),Fe||this.updateElement(He,ke,$e,n),We=Ye}this.updateSharedOptions(j,n,B)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let f=0;for(let b=t.length-1;b>=0;--b)f=Math.max(f,t[b].size(this.resolveDataElementOptions(b))/2);return f>0&&f}const s=e.dataset,n=s.options&&s.options.borderWidth||0;if(!t.length)return n;const o=t[0].size(this.resolveDataElementOptions(0)),c=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,o,c)/2}}return(0,Z.Z)(r,"id","scatter"),(0,Z.Z)(r,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,Z.Z)(r,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}}),r})()});function bt(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ut{static override(i){Object.assign(Ut.prototype,i)}constructor(i){(0,Z.Z)(this,"options",void 0),this.options=i||{}}init(){}formats(){return bt()}parse(){return bt()}format(){return bt()}add(){return bt()}diff(){return bt()}startOf(){return bt()}endOf(){return bt()}}var ct__date=Ut;function Zt(r,i,e,t){const{controller:s,data:n,_sorted:o}=r,c=s._cachedMeta.iScale;if(c&&i===c.axis&&"r"!==i&&o&&n.length){const f=c._reversePixels?d.A:d.B;if(!t)return f(n,i,e);if(s._sharedOptions){const b=n[0],D="function"==typeof b.getRange&&b.getRange(i);if(D){const B=f(n,i,e-D),j=f(n,i,e+D);return{lo:B.lo,hi:j.hi}}}}return{lo:0,hi:n.length-1}}function Qt(r,i,e,t,s){const n=r.getSortedVisibleDatasetMetas(),o=e[i];for(let c=0,f=n.length;c<f;++c){const{index:b,data:D}=n[c],{lo:B,hi:j}=Zt(n[c],i,o,s);for(let Y=B;Y<=j;++Y){const ne=D[Y];ne.skip||t(ne,b,Y)}}}function Jt(r,i,e,t,s){const n=[];return!s&&!r.isPointInArea(i)||Qt(r,e,i,function(c,f,b){!s&&!(0,d.C)(c,r.chartArea,0)||c.inRange(i.x,i.y,t)&&n.push({element:c,datasetIndex:f,index:b})},!0),n}function pt(r,i,e,t,s,n){return n||r.isPointInArea(i)?"r"!==e||t?function zt(r,i,e,t,s,n){let o=[];const c=function Ft(r){const i=-1!==r.indexOf("x"),e=-1!==r.indexOf("y");return function(t,s){const n=i?Math.abs(t.x-s.x):0,o=e?Math.abs(t.y-s.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}}(e);let f=Number.POSITIVE_INFINITY;return Qt(r,e,i,function b(D,B,j){const Y=D.inRange(i.x,i.y,s);if(t&&!Y)return;const ne=D.getCenterPoint(s);if(!n&&!r.isPointInArea(ne)&&!Y)return;const pe=c(i,ne);pe<f?(o=[{element:D,datasetIndex:B,index:j}],f=pe):pe===f&&o.push({element:D,datasetIndex:B,index:j})}),o}(r,i,e,t,s,n):function Kt(r,i,e,t){let s=[];return Qt(r,e,i,function n(o,c,f){const{startAngle:b,endAngle:D}=o.getProps(["startAngle","endAngle"],t),{angle:B}=(0,d.D)(o,{x:i.x,y:i.y});(0,d.p)(B,b,D)&&s.push({element:o,datasetIndex:c,index:f})}),s}(r,i,e,s):[]}function xi(r,i,e,t,s){const n=[],o="x"===e?"inXRange":"inYRange";let c=!1;return Qt(r,e,i,(f,b,D)=>{f[o](i[e],s)&&(n.push({element:f,datasetIndex:b,index:D}),c=c||f.inRange(i.x,i.y,s))}),t&&!c?[]:n}var as={evaluateInteractionItems:Qt,modes:{index(r,i,e,t){const s=(0,d.z)(i,r),n=e.axis||"x",o=e.includeInvisible||!1,c=e.intersect?Jt(r,s,n,t,o):pt(r,s,n,!1,t,o),f=[];return c.length?(r.getSortedVisibleDatasetMetas().forEach(b=>{const D=c[0].index,B=b.data[D];B&&!B.skip&&f.push({element:B,datasetIndex:b.index,index:D})}),f):[]},dataset(r,i,e,t){const s=(0,d.z)(i,r),n=e.axis||"xy",o=e.includeInvisible||!1;let c=e.intersect?Jt(r,s,n,t,o):pt(r,s,n,!1,t,o);if(c.length>0){const f=c[0].datasetIndex,b=r.getDatasetMeta(f).data;c=[];for(let D=0;D<b.length;++D)c.push({element:b[D],datasetIndex:f,index:D})}return c},point:(r,i,e,t)=>Jt(r,(0,d.z)(i,r),e.axis||"xy",t,e.includeInvisible||!1),nearest:(r,i,e,t)=>pt(r,(0,d.z)(i,r),e.axis||"xy",e.intersect,t,e.includeInvisible||!1),x:(r,i,e,t)=>xi(r,(0,d.z)(i,r),"x",e.intersect,t),y:(r,i,e,t)=>xi(r,(0,d.z)(i,r),"y",e.intersect,t)}};const pi=["left","top","right","bottom"];function hi(r,i){return r.filter(e=>e.pos===i)}function Ji(r,i){return r.filter(e=>-1===pi.indexOf(e.pos)&&e.box.axis===i)}function di(r,i){return r.sort((e,t)=>{const s=i?t:e,n=i?e:t;return s.weight===n.weight?s.index-n.index:s.weight-n.weight})}function Wi(r,i,e,t){return Math.max(r[e],i[e])+Math.max(r[t],i[t])}function At(r,i){r.top=Math.max(r.top,i.top),r.left=Math.max(r.left,i.left),r.bottom=Math.max(r.bottom,i.bottom),r.right=Math.max(r.right,i.right)}function Yt(r,i,e,t){const{pos:s,box:n}=e,o=r.maxPadding;if(!(0,d.i)(s)){e.size&&(r[s]-=e.size);const B=t[e.stack]||{size:0,count:1};B.size=Math.max(B.size,e.horizontal?n.height:n.width),e.size=B.size/B.count,r[s]+=e.size}n.getPadding&&At(o,n.getPadding());const c=Math.max(0,i.outerWidth-Wi(o,r,"left","right")),f=Math.max(0,i.outerHeight-Wi(o,r,"top","bottom")),b=c!==r.w,D=f!==r.h;return r.w=c,r.h=f,e.horizontal?{same:b,other:D}:{same:D,other:b}}function gi(r,i){const e=i.maxPadding;return function t(s){const n={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{n[o]=Math.max(i[o],e[o])}),n}(r?["left","right"]:["top","bottom"])}function Ei(r,i,e,t){const s=[];let n,o,c,f,b,D;for(n=0,o=r.length,b=0;n<o;++n){c=r[n],f=c.box,f.update(c.width||i.w,c.height||i.h,gi(c.horizontal,i));const{same:B,other:j}=Yt(i,e,c,t);b|=B&&s.length,D=D||j,f.fullSize||s.push(c)}return b&&Ei(s,i,e,t)||D}function jt(r,i,e,t,s){r.top=e,r.left=i,r.right=i+t,r.bottom=e+s,r.width=t,r.height=s}function Vt(r,i,e,t){const s=e.padding;let{x:n,y:o}=i;for(const c of r){const f=c.box,b=t[c.stack]||{count:1,placed:0,weight:1},D=c.stackWeight/b.weight||1;if(c.horizontal){const B=i.w*D,j=b.size||f.height;(0,d.h)(b.start)&&(o=b.start),f.fullSize?jt(f,s.left,o,e.outerWidth-s.right-s.left,j):jt(f,i.left+b.placed,o,B,j),b.start=o,b.placed+=B,o=f.bottom}else{const B=i.h*D,j=b.size||f.width;(0,d.h)(b.start)&&(n=b.start),f.fullSize?jt(f,n,s.top,j,e.outerHeight-s.bottom-s.top):jt(f,n,i.top+b.placed,j,B),b.start=n,b.placed+=B,n=f.right}}i.x=n,i.y=o}var Ot={addBox(r,i){r.boxes||(r.boxes=[]),i.fullSize=i.fullSize||!1,i.position=i.position||"top",i.weight=i.weight||0,i._layers=i._layers||function(){return[{z:0,draw(e){i.draw(e)}}]},r.boxes.push(i)},removeBox(r,i){const e=r.boxes?r.boxes.indexOf(i):-1;-1!==e&&r.boxes.splice(e,1)},configure(r,i,e){i.fullSize=e.fullSize,i.position=e.position,i.weight=e.weight},update(r,i,e,t){if(!r)return;const s=(0,d.E)(r.options.layout.padding),n=Math.max(i-s.width,0),o=Math.max(e-s.height,0),c=function Ai(r){const i=function Ni(r){const i=[];let e,t,s,n,o,c;for(e=0,t=(r||[]).length;e<t;++e)s=r[e],({position:n,options:{stack:o,stackWeight:c=1}}=s),i.push({index:e,box:s,pos:n,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&n+o,stackWeight:c});return i}(r),e=di(i.filter(b=>b.box.fullSize),!0),t=di(hi(i,"left"),!0),s=di(hi(i,"right")),n=di(hi(i,"top"),!0),o=di(hi(i,"bottom")),c=Ji(i,"x"),f=Ji(i,"y");return{fullSize:e,leftAndTop:t.concat(n),rightAndBottom:s.concat(f).concat(o).concat(c),chartArea:hi(i,"chartArea"),vertical:t.concat(s).concat(f),horizontal:n.concat(o).concat(c)}}(r.boxes),f=c.vertical,b=c.horizontal;(0,d.F)(r.boxes,ce=>{"function"==typeof ce.beforeLayout&&ce.beforeLayout()});const D=f.reduce((ce,pe)=>pe.box.options&&!1===pe.box.options.display?ce:ce+1,0)||1,B=Object.freeze({outerWidth:i,outerHeight:e,padding:s,availableWidth:n,availableHeight:o,vBoxMaxWidth:n/2/D,hBoxMaxHeight:o/2}),j=Object.assign({},s);At(j,(0,d.E)(t));const Y=Object.assign({maxPadding:j,w:n,h:o,x:s.left,y:s.top},s),ne=function wi(r,i){const e=function es(r){const i={};for(const e of r){const{stack:t,pos:s,stackWeight:n}=e;if(!t||!pi.includes(s))continue;const o=i[t]||(i[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=n}return i}(r),{vBoxMaxWidth:t,hBoxMaxHeight:s}=i;let n,o,c;for(n=0,o=r.length;n<o;++n){c=r[n];const{fullSize:f}=c.box,b=e[c.stack],D=b&&c.stackWeight/b.weight;c.horizontal?(c.width=D?D*t:f&&i.availableWidth,c.height=s):(c.width=t,c.height=D?D*s:f&&i.availableHeight)}return e}(f.concat(b),B);Ei(c.fullSize,Y,B,ne),Ei(f,Y,B,ne),Ei(b,Y,B,ne)&&Ei(f,Y,B,ne),function Oi(r){const i=r.maxPadding;function e(t){const s=Math.max(i[t]-r[t],0);return r[t]+=s,s}r.y+=e("top"),r.x+=e("left"),e("right"),e("bottom")}(Y),Vt(c.leftAndTop,Y,B,ne),Y.x+=Y.w,Y.y+=Y.h,Vt(c.rightAndBottom,Y,B,ne),r.chartArea={left:Y.left,top:Y.top,right:Y.left+Y.w,bottom:Y.top+Y.h,height:Y.h,width:Y.w},(0,d.F)(c.chartArea,ce=>{const pe=ce.box;Object.assign(pe,r.chartArea),pe.update(Y.w,Y.h,{left:0,top:0,right:0,bottom:0})})}};class ei{acquireContext(i,e){}releaseContext(i){return!1}addEventListener(i,e,t){}removeEventListener(i,e,t){}getDevicePixelRatio(){return 1}getMaximumSize(i,e,t,s){return e=Math.max(0,e||i.width),t=t||i.height,{width:e,height:Math.max(0,s?Math.floor(e/s):t)}}isAttached(i){return!0}updateConfig(i){}}class zi extends ei{acquireContext(i){return i&&i.getContext&&i.getContext("2d")||null}updateConfig(i){i.options.animation=!1}}const Ht="$chartjs",kt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ts=r=>null===r||""===r,Ui=!!d.K&&{passive:!0};function cs(r,i,e){r.canvas.removeEventListener(i,e,Ui)}function W(r,i){for(const e of r)if(e===i||e.contains(i))return!0}function $(r,i,e){const t=r.canvas,s=new MutationObserver(n=>{let o=!1;for(const c of n)o=o||W(c.addedNodes,t),o=o&&!W(c.removedNodes,t);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function q(r,i,e){const t=r.canvas,s=new MutationObserver(n=>{let o=!1;for(const c of n)o=o||W(c.removedNodes,t),o=o&&!W(c.addedNodes,t);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const ue=new Map;let me=0;function we(){const r=window.devicePixelRatio;r!==me&&(me=r,ue.forEach((i,e)=>{e.currentDevicePixelRatio!==r&&i()}))}function ot(r,i,e){const t=r.canvas,s=t&&(0,d.I)(t);if(!s)return;const n=(0,d.L)((c,f)=>{const b=s.clientWidth;e(c,f),b<s.clientWidth&&e()},window),o=new ResizeObserver(c=>{const f=c[0],b=f.contentRect.width,D=f.contentRect.height;0===b&&0===D||n(b,D)});return o.observe(s),function De(r,i){ue.size||window.addEventListener("resize",we),ue.set(r,i)}(r,n),o}function it(r,i,e){e&&e.disconnect(),"resize"===i&&function Xe(r){ue.delete(r),ue.size||window.removeEventListener("resize",we)}(r)}function st(r,i,e){const t=r.canvas,s=(0,d.L)(n=>{null!==r.ctx&&e(function Pi(r,i){const e=kt[r.type]||r.type,{x:t,y:s}=(0,d.z)(r,i);return{type:e,chart:i,native:r,x:void 0!==t?t:null,y:void 0!==s?s:null}}(n,r))},r);return function oi(r,i,e){r.addEventListener(i,e,Ui)}(t,i,s),s}class Pt extends ei{acquireContext(i,e){const t=i&&i.getContext&&i.getContext("2d");return t&&t.canvas===i?(function ls(r,i){const e=r.style,t=r.getAttribute("height"),s=r.getAttribute("width");if(r[Ht]={initial:{height:t,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",ts(s)){const n=(0,d.J)(r,"width");void 0!==n&&(r.width=n)}if(ts(t))if(""===r.style.height)r.height=r.width/(i||2);else{const n=(0,d.J)(r,"height");void 0!==n&&(r.height=n)}}(i,e),t):null}releaseContext(i){const e=i.canvas;if(!e[Ht])return!1;const t=e[Ht].initial;["height","width"].forEach(n=>{const o=t[n];(0,d.k)(o)?e.removeAttribute(n):e.setAttribute(n,o)});const s=t.style||{};return Object.keys(s).forEach(n=>{e.style[n]=s[n]}),e.width=e.width,delete e[Ht],!0}addEventListener(i,e,t){this.removeEventListener(i,e),(i.$proxies||(i.$proxies={}))[e]=({attach:$,detach:q,resize:ot}[e]||st)(i,e,t)}removeEventListener(i,e){const t=i.$proxies||(i.$proxies={}),s=t[e];s&&(({attach:it,detach:it,resize:it}[e]||cs)(i,e,s),t[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(i,e,t,s){return(0,d.G)(i,e,t,s)}isAttached(i){const e=(0,d.I)(i);return!(!e||!e.isConnected)}}class Ct{constructor(){(0,Z.Z)(this,"x",void 0),(0,Z.Z)(this,"y",void 0),(0,Z.Z)(this,"active",!1),(0,Z.Z)(this,"options",void 0),(0,Z.Z)(this,"$animations",void 0)}tooltipPosition(i){const{x:e,y:t}=this.getProps(["x","y"],i);return{x:e,y:t}}hasValue(){return(0,d.x)(this.x)&&(0,d.x)(this.y)}getProps(i,e){const t=this.$animations;if(!e||!t)return this;const s={};return i.forEach(n=>{s[n]=t[n]&&t[n].active()?t[n]._to:this[n]}),s}}function Xt(r,i,e,t,s){const n=(0,d.v)(t,0),o=Math.min((0,d.v)(s,r.length),r.length);let f,b,D,c=0;for(e=Math.ceil(e),s&&(f=s-t,e=f/Math.floor(f/e)),D=n;D<0;)c++,D=Math.round(n+c*e);for(b=Math.max(n,0);b<o;b++)b===D&&(i.push(r[b]),c++,D=Math.round(n+c*e))}(0,Z.Z)(Ct,"defaults",{}),(0,Z.Z)(Ct,"defaultRoutes",void 0);const hs=(r,i,e)=>"top"===i||"left"===i?r[i]+e:r[i]-e,ji=(r,i)=>Math.min(i||r,r);function Gt(r,i){const e=[],t=r.length/i,s=r.length;let n=0;for(;n<s;n+=t)e.push(r[Math.floor(n)]);return e}function fi(r,i,e){const t=r.ticks.length,s=Math.min(i,t-1),n=r._startPixel,o=r._endPixel,c=1e-6;let b,f=r.getPixelForTick(s);if(!(e&&(b=1===t?Math.max(f-n,o-f):0===i?(r.getPixelForTick(1)-f)/2:(f-r.getPixelForTick(s-1))/2,f+=s<i?b:-b,f<n-c||f>o+c)))return f}function vi(r){return r.drawTicks?r.tickLength:0}function Vi(r,i){if(!r.display)return 0;const e=(0,d.a0)(r.font,i),t=(0,d.E)(r.padding);return((0,d.b)(r.text)?r.text.length:1)*e.lineHeight+t.height}function Ti(r,i,e){let t=(0,d.a1)(r);return(e&&"right"!==i||!e&&"right"===i)&&(t=(r=>"left"===r?"right":"right"===r?"left":r)(t)),t}class si extends Ct{constructor(i){super(),this.id=i.id,this.type=i.type,this.options=void 0,this.ctx=i.ctx,this.chart=i.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(i){this.options=i.setContext(this.getContext()),this.axis=i.axis,this._userMin=this.parse(i.min),this._userMax=this.parse(i.max),this._suggestedMin=this.parse(i.suggestedMin),this._suggestedMax=this.parse(i.suggestedMax)}parse(i,e){return i}getUserBounds(){let{_userMin:i,_userMax:e,_suggestedMin:t,_suggestedMax:s}=this;return i=(0,d.O)(i,Number.POSITIVE_INFINITY),e=(0,d.O)(e,Number.NEGATIVE_INFINITY),t=(0,d.O)(t,Number.POSITIVE_INFINITY),s=(0,d.O)(s,Number.NEGATIVE_INFINITY),{min:(0,d.O)(i,t),max:(0,d.O)(e,s),minDefined:(0,d.g)(i),maxDefined:(0,d.g)(e)}}getMinMax(i){let o,{min:e,max:t,minDefined:s,maxDefined:n}=this.getUserBounds();if(s&&n)return{min:e,max:t};const c=this.getMatchingVisibleMetas();for(let f=0,b=c.length;f<b;++f)o=c[f].controller.getMinMax(this,i),s||(e=Math.min(e,o.min)),n||(t=Math.max(t,o.max));return e=n&&e>t?t:e,t=s&&e>t?e:t,{min:(0,d.O)(e,(0,d.O)(t,e)),max:(0,d.O)(t,(0,d.O)(e,t))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const i=this.chart.data;return this.options.labels||(this.isHorizontal()?i.xLabels:i.yLabels)||i.labels||[]}getLabelItems(i=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(i))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){(0,d.Q)(this.options.beforeUpdate,[this])}update(i,e,t){const{beginAtZero:s,grace:n,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=i,this.maxHeight=e,this._margins=t=Object.assign({left:0,right:0,top:0,bottom:0},t),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+t.left+t.right:this.height+t.top+t.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=(0,d.R)(this,n,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const f=c<this.ticks.length;this._convertTicksToLabels(f?Gt(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function It(r,i){const e=r.options.ticks,t=function ai(r){const i=r.options.offset,e=r._tickSize();return Math.floor(Math.min(r._length/e+(i?0:1),r._maxLength/e))}(r),s=Math.min(e.maxTicksLimit||t,t),n=e.major.enabled?function mi(r){const i=[];let e,t;for(e=0,t=r.length;e<t;e++)r[e].major&&i.push(e);return i}(i):[],o=n.length,c=n[0],f=n[o-1],b=[];if(o>s)return function Li(r,i,e,t){let o,s=0,n=e[0];for(t=Math.ceil(t),o=0;o<r.length;o++)o===n&&(i.push(r[o]),s++,n=e[s*t])}(i,b,n,o/s),b;const D=function ti(r,i,e){const t=function ui(r){const i=r.length;let e,t;if(i<2)return!1;for(t=r[0],e=1;e<i;++e)if(r[e]-r[e-1]!==t)return!1;return t}(r),s=i.length/e;if(!t)return Math.max(s,1);const n=(0,d.N)(t);for(let o=0,c=n.length-1;o<c;o++){const f=n[o];if(f>s)return f}return Math.max(s,1)}(n,i,s);if(o>0){let B,j;const Y=o>1?Math.round((f-c)/(o-1)):null;for(Xt(i,b,D,(0,d.k)(Y)?0:c-Y,c),B=0,j=o-1;B<j;B++)Xt(i,b,D,n[B],n[B+1]);return Xt(i,b,D,f,(0,d.k)(Y)?i.length:f+Y),b}return Xt(i,b,D),b}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,i=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,i=!i),this._startPixel=e,this._endPixel=t,this._reversePixels=i,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){(0,d.Q)(this.options.afterUpdate,[this])}beforeSetDimensions(){(0,d.Q)(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){(0,d.Q)(this.options.afterSetDimensions,[this])}_callHooks(i){this.chart.notifyPlugins(i,this.getContext()),(0,d.Q)(this.options[i],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){(0,d.Q)(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(i){const e=this.options.ticks;let t,s,n;for(t=0,s=i.length;t<s;t++)n=i[t],n.label=(0,d.Q)(e.callback,[n.value,t,i],this)}afterTickToLabelConversion(){(0,d.Q)(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){(0,d.Q)(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const i=this.options,e=i.ticks,t=ji(this.ticks.length,i.ticks.maxTicksLimit),s=e.minRotation||0,n=e.maxRotation;let c,f,b,o=s;if(!this._isVisible()||!e.display||s>=n||t<=1||!this.isHorizontal())return void(this.labelRotation=s);const D=this._getLabelSizes(),B=D.widest.width,j=D.highest.height,Y=(0,d.S)(this.chart.width-B,0,this.maxWidth);c=i.offset?this.maxWidth/t:Y/(t-1),B+6>c&&(c=Y/(t-(i.offset?.5:1)),f=this.maxHeight-vi(i.grid)-e.padding-Vi(i.title,this.chart.options.font),b=Math.sqrt(B*B+j*j),o=(0,d.U)(Math.min(Math.asin((0,d.S)((D.highest.height+6)/c,-1,1)),Math.asin((0,d.S)(f/b,-1,1))-Math.asin((0,d.S)(j/b,-1,1)))),o=Math.max(s,Math.min(n,o))),this.labelRotation=o}afterCalculateLabelRotation(){(0,d.Q)(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){(0,d.Q)(this.options.beforeFit,[this])}fit(){const i={width:0,height:0},{chart:e,options:{ticks:t,title:s,grid:n}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const f=Vi(s,e.options.font);if(c?(i.width=this.maxWidth,i.height=vi(n)+f):(i.height=this.maxHeight,i.width=vi(n)+f),t.display&&this.ticks.length){const{first:b,last:D,widest:B,highest:j}=this._getLabelSizes(),Y=2*t.padding,ne=(0,d.t)(this.labelRotation),ce=Math.cos(ne),pe=Math.sin(ne);c?i.height=Math.min(this.maxHeight,i.height+(t.mirror?0:pe*B.width+ce*j.height)+Y):i.width=Math.min(this.maxWidth,i.width+(t.mirror?0:ce*B.width+pe*j.height)+Y),this._calculatePadding(b,D,pe,ce)}}this._handleMargins(),c?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=i.height):(this.width=i.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(i,e,t,s){const{ticks:{align:n,padding:o},position:c}=this.options,f=0!==this.labelRotation,b="top"!==c&&"x"===this.axis;if(this.isHorizontal()){const D=this.getPixelForTick(0)-this.left,B=this.right-this.getPixelForTick(this.ticks.length-1);let j=0,Y=0;f?b?(j=s*i.width,Y=t*e.height):(j=t*i.height,Y=s*e.width):"start"===n?Y=e.width:"end"===n?j=i.width:"inner"!==n&&(j=i.width/2,Y=e.width/2),this.paddingLeft=Math.max((j-D+o)*this.width/(this.width-D),0),this.paddingRight=Math.max((Y-B+o)*this.width/(this.width-B),0)}else{let D=e.height/2,B=i.height/2;"start"===n?(D=0,B=i.height):"end"===n&&(D=e.height,B=0),this.paddingTop=D+o,this.paddingBottom=B+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){(0,d.Q)(this.options.afterFit,[this])}isHorizontal(){const{axis:i,position:e}=this.options;return"top"===e||"bottom"===e||"x"===i}isFullSize(){return this.options.fullSize}_convertTicksToLabels(i){let e,t;for(this.beforeTickToLabelConversion(),this.generateTickLabels(i),e=0,t=i.length;e<t;e++)(0,d.k)(i[e].label)&&(i.splice(e,1),t--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let i=this._labelSizes;if(!i){const e=this.options.ticks.sampleSize;let t=this.ticks;e<t.length&&(t=Gt(t,e)),this._labelSizes=i=this._computeLabelSizes(t,t.length,this.options.ticks.maxTicksLimit)}return i}_computeLabelSizes(i,e,t){const{ctx:s,_longestTextCache:n}=this,o=[],c=[],f=Math.floor(e/ji(e,t));let B,j,Y,ne,ce,pe,Ee,ye,Fe,We,ke,b=0,D=0;for(B=0;B<e;B+=f){if(ne=i[B].label,ce=this._resolveTickFontOptions(B),s.font=pe=ce.string,Ee=n[pe]=n[pe]||{data:{},gc:[]},ye=ce.lineHeight,Fe=We=0,(0,d.k)(ne)||(0,d.b)(ne)){if((0,d.b)(ne))for(j=0,Y=ne.length;j<Y;++j)ke=ne[j],!(0,d.k)(ke)&&!(0,d.b)(ke)&&(Fe=(0,d.V)(s,Ee.data,Ee.gc,Fe,ke),We+=ye)}else Fe=(0,d.V)(s,Ee.data,Ee.gc,Fe,ne),We=ye;o.push(Fe),c.push(We),b=Math.max(Fe,b),D=Math.max(We,D)}!function Ri(r,i){(0,d.F)(r,e=>{const t=e.gc,s=t.length/2;let n;if(s>i){for(n=0;n<s;++n)delete e.data[t[n]];t.splice(0,s)}})}(n,e);const He=o.indexOf(b),Ye=c.indexOf(D),$e=Je=>({width:o[Je]||0,height:c[Je]||0});return{first:$e(0),last:$e(e-1),widest:$e(He),highest:$e(Ye),widths:o,heights:c}}getLabelForValue(i){return i}getPixelForValue(i,e){return NaN}getValueForPixel(i){}getPixelForTick(i){const e=this.ticks;return i<0||i>e.length-1?null:this.getPixelForValue(e[i].value)}getPixelForDecimal(i){this._reversePixels&&(i=1-i);const e=this._startPixel+i*this._length;return(0,d.W)(this._alignToPixels?(0,d.X)(this.chart,e,0):e)}getDecimalForPixel(i){const e=(i-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:i,max:e}=this;return i<0&&e<0?e:i>0&&e>0?i:0}getContext(i){const e=this.ticks||[];if(i>=0&&i<e.length){const t=e[i];return t.$context||(t.$context=function ii(r,i,e){return(0,d.j)(r,{tick:e,index:i,type:"tick"})}(this.getContext(),i,t))}return this.$context||(this.$context=function Ii(r,i){return(0,d.j)(r,{scale:i,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const i=this.options.ticks,e=(0,d.t)(this.labelRotation),t=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),n=this._getLabelSizes(),o=i.autoSkipPadding||0,c=n?n.widest.width+o:0,f=n?n.highest.height+o:0;return this.isHorizontal()?f*t>c*s?c/t:f/s:f*s<c*t?f/t:c/s}_isVisible(){const i=this.options.display;return"auto"!==i?!!i:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(i){const e=this.axis,t=this.chart,s=this.options,{grid:n,position:o,border:c}=s,f=n.offset,b=this.isHorizontal(),B=this.ticks.length+(f?1:0),j=vi(n),Y=[],ne=c.setContext(this.getContext()),ce=ne.display?ne.width:0,pe=ce/2,Ee=function(Bt){return(0,d.X)(t,Bt,ce)};let ye,Fe,We,ke,He,Ye,$e,Je,ft,ut,vt,ni;if("top"===o)ye=Ee(this.bottom),Ye=this.bottom-j,Je=ye-pe,ut=Ee(i.top)+pe,ni=i.bottom;else if("bottom"===o)ye=Ee(this.top),ut=i.top,ni=Ee(i.bottom)-pe,Ye=ye+pe,Je=this.top+j;else if("left"===o)ye=Ee(this.right),He=this.right-j,$e=ye-pe,ft=Ee(i.left)+pe,vt=i.right;else if("right"===o)ye=Ee(this.left),ft=i.left,vt=Ee(i.right)-pe,He=ye+pe,$e=this.left+j;else if("x"===e){if("center"===o)ye=Ee((i.top+i.bottom)/2+.5);else if((0,d.i)(o)){const Bt=Object.keys(o)[0];ye=Ee(this.chart.scales[Bt].getPixelForValue(o[Bt]))}ut=i.top,ni=i.bottom,Ye=ye+pe,Je=Ye+j}else if("y"===e){if("center"===o)ye=Ee((i.left+i.right)/2);else if((0,d.i)(o)){const Bt=Object.keys(o)[0];ye=Ee(this.chart.scales[Bt].getPixelForValue(o[Bt]))}He=ye-pe,$e=He-j,ft=i.left,vt=i.right}const ki=(0,d.v)(s.ticks.maxTicksLimit,B),Dt=Math.max(1,Math.ceil(B/ki));for(Fe=0;Fe<B;Fe+=Dt){const Bt=this.getContext(Fe),$t=n.setContext(Bt),Qi=c.setContext(Bt),ci=$t.lineWidth,Or=$t.color,Dn=Qi.dash||[],Pr=Qi.dashOffset,fn=$t.tickWidth,Zs=$t.tickColor,_n=$t.tickBorderDash||[],Xs=$t.tickBorderDashOffset;We=fi(this,Fe,f),void 0!==We&&(ke=(0,d.X)(t,We,ci),b?He=$e=ft=vt=ke:Ye=Je=ut=ni=ke,Y.push({tx1:He,ty1:Ye,tx2:$e,ty2:Je,x1:ft,y1:ut,x2:vt,y2:ni,width:ci,color:Or,borderDash:Dn,borderDashOffset:Pr,tickWidth:fn,tickColor:Zs,tickBorderDash:_n,tickBorderDashOffset:Xs}))}return this._ticksLength=B,this._borderValue=ye,Y}_computeLabelItems(i){const e=this.axis,t=this.options,{position:s,ticks:n}=t,o=this.isHorizontal(),c=this.ticks,{align:f,crossAlign:b,padding:D,mirror:B}=n,j=vi(t.grid),Y=j+D,ne=B?-D:Y,ce=-(0,d.t)(this.labelRotation),pe=[];let Ee,ye,Fe,We,ke,He,Ye,$e,Je,ft,ut,vt,ni="middle";if("top"===s)He=this.bottom-ne,Ye=this._getXAxisLabelAlignment();else if("bottom"===s)He=this.top+ne,Ye=this._getXAxisLabelAlignment();else if("left"===s){const Dt=this._getYAxisLabelAlignment(j);Ye=Dt.textAlign,ke=Dt.x}else if("right"===s){const Dt=this._getYAxisLabelAlignment(j);Ye=Dt.textAlign,ke=Dt.x}else if("x"===e){if("center"===s)He=(i.top+i.bottom)/2+Y;else if((0,d.i)(s)){const Dt=Object.keys(s)[0];He=this.chart.scales[Dt].getPixelForValue(s[Dt])+Y}Ye=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===s)ke=(i.left+i.right)/2-Y;else if((0,d.i)(s)){const Dt=Object.keys(s)[0];ke=this.chart.scales[Dt].getPixelForValue(s[Dt])}Ye=this._getYAxisLabelAlignment(j).textAlign}"y"===e&&("start"===f?ni="top":"end"===f&&(ni="bottom"));const ki=this._getLabelSizes();for(Ee=0,ye=c.length;Ee<ye;++Ee){Fe=c[Ee],We=Fe.label;const Dt=n.setContext(this.getContext(Ee));$e=this.getPixelForTick(Ee)+n.labelOffset,Je=this._resolveTickFontOptions(Ee),ft=Je.lineHeight,ut=(0,d.b)(We)?We.length:1;const Bt=ut/2,$t=Dt.color,Qi=Dt.textStrokeColor,ci=Dt.textStrokeWidth;let Dn,Or=Ye;if(o?(ke=$e,"inner"===Ye&&(Or=Ee===ye-1?this.options.reverse?"left":"right":0===Ee?this.options.reverse?"right":"left":"center"),vt="top"===s?"near"===b||0!==ce?-ut*ft+ft/2:"center"===b?-ki.highest.height/2-Bt*ft+ft:ft/2-ki.highest.height:"near"===b||0!==ce?ft/2:"center"===b?ki.highest.height/2-Bt*ft:ki.highest.height-ut*ft,B&&(vt*=-1),0!==ce&&!Dt.showLabelBackdrop&&(ke+=ft/2*Math.sin(ce))):(He=$e,vt=(1-ut)*ft/2),Dt.showLabelBackdrop){const Pr=(0,d.E)(Dt.backdropPadding),fn=ki.heights[Ee],Zs=ki.widths[Ee];let _n=vt-Pr.top,Xs=0-Pr.left;switch(ni){case"middle":_n-=fn/2;break;case"bottom":_n-=fn}switch(Ye){case"center":Xs-=Zs/2;break;case"right":Xs-=Zs;break;case"inner":Ee===ye-1?Xs-=Zs:Ee>0&&(Xs-=Zs/2)}Dn={left:Xs,top:_n,width:Zs+Pr.width,height:fn+Pr.height,color:Dt.backdropColor}}pe.push({label:We,font:Je,textOffset:vt,options:{rotation:ce,color:$t,strokeColor:Qi,strokeWidth:ci,textAlign:Or,textBaseline:ni,translation:[ke,He],backdrop:Dn}})}return pe}_getXAxisLabelAlignment(){const{position:i,ticks:e}=this.options;if(-(0,d.t)(this.labelRotation))return"top"===i?"left":"right";let s="center";return"start"===e.align?s="left":"end"===e.align?s="right":"inner"===e.align&&(s="inner"),s}_getYAxisLabelAlignment(i){const{position:e,ticks:{crossAlign:t,mirror:s,padding:n}}=this.options,c=i+n,f=this._getLabelSizes().widest.width;let b,D;return"left"===e?s?(D=this.right+n,"near"===t?b="left":"center"===t?(b="center",D+=f/2):(b="right",D+=f)):(D=this.right-c,"near"===t?b="right":"center"===t?(b="center",D-=f/2):(b="left",D=this.left)):"right"===e?s?(D=this.left+n,"near"===t?b="right":"center"===t?(b="center",D-=f/2):(b="left",D-=f)):(D=this.left+c,"near"===t?b="left":"center"===t?(b="center",D+=f/2):(b="right",D=this.right)):b="right",{textAlign:b,x:D}}_computeLabelArea(){if(this.options.ticks.mirror)return;const i=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:i.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:i.width}:void 0}drawBackground(){const{ctx:i,options:{backgroundColor:e},left:t,top:s,width:n,height:o}=this;e&&(i.save(),i.fillStyle=e,i.fillRect(t,s,n,o),i.restore())}getLineWidthForValue(i){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(n=>n.value===i);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(i){const e=this.options.grid,t=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(i));let n,o;const c=(f,b,D)=>{!D.width||!D.color||(t.save(),t.lineWidth=D.width,t.strokeStyle=D.color,t.setLineDash(D.borderDash||[]),t.lineDashOffset=D.borderDashOffset,t.beginPath(),t.moveTo(f.x,f.y),t.lineTo(b.x,b.y),t.stroke(),t.restore())};if(e.display)for(n=0,o=s.length;n<o;++n){const f=s[n];e.drawOnChartArea&&c({x:f.x1,y:f.y1},{x:f.x2,y:f.y2},f),e.drawTicks&&c({x:f.tx1,y:f.ty1},{x:f.tx2,y:f.ty2},{color:f.tickColor,width:f.tickWidth,borderDash:f.tickBorderDash,borderDashOffset:f.tickBorderDashOffset})}}drawBorder(){const{chart:i,ctx:e,options:{border:t,grid:s}}=this,n=t.setContext(this.getContext()),o=t.display?n.width:0;if(!o)return;const c=s.setContext(this.getContext(0)).lineWidth,f=this._borderValue;let b,D,B,j;this.isHorizontal()?(b=(0,d.X)(i,this.left,o)-o/2,D=(0,d.X)(i,this.right,c)+c/2,B=j=f):(B=(0,d.X)(i,this.top,o)-o/2,j=(0,d.X)(i,this.bottom,c)+c/2,b=D=f),e.save(),e.lineWidth=n.width,e.strokeStyle=n.color,e.beginPath(),e.moveTo(b,B),e.lineTo(D,j),e.stroke(),e.restore()}drawLabels(i){if(!this.options.ticks.display)return;const t=this.ctx,s=this._computeLabelArea();s&&(0,d.Y)(t,s);const n=this.getLabelItems(i);for(const o of n)(0,d.Z)(t,o.label,0,o.textOffset,o.font,o.options);s&&(0,d.$)(t)}drawTitle(){const{ctx:i,options:{position:e,title:t,reverse:s}}=this;if(!t.display)return;const n=(0,d.a0)(t.font),o=(0,d.E)(t.padding),c=t.align;let f=n.lineHeight/2;"bottom"===e||"center"===e||(0,d.i)(e)?(f+=o.bottom,(0,d.b)(t.text)&&(f+=n.lineHeight*(t.text.length-1))):f+=o.top;const{titleX:b,titleY:D,maxWidth:B,rotation:j}=function ds(r,i,e,t){const{top:s,left:n,bottom:o,right:c,chart:f}=r,{chartArea:b,scales:D}=f;let j,Y,ne,B=0;const ce=o-s,pe=c-n;if(r.isHorizontal()){if(Y=(0,d.a2)(t,n,c),(0,d.i)(e)){const Ee=Object.keys(e)[0];ne=D[Ee].getPixelForValue(e[Ee])+ce-i}else ne="center"===e?(b.bottom+b.top)/2+ce-i:hs(r,e,i);j=c-n}else{if((0,d.i)(e)){const Ee=Object.keys(e)[0];Y=D[Ee].getPixelForValue(e[Ee])-pe+i}else Y="center"===e?(b.left+b.right)/2-pe+i:hs(r,e,i);ne=(0,d.a2)(t,o,s),B="left"===e?-d.H:d.H}return{titleX:Y,titleY:ne,maxWidth:j,rotation:B}}(this,f,e,c);(0,d.Z)(i,t.text,0,0,n,{color:t.color,maxWidth:B,rotation:j,textAlign:Ti(c,e,s),textBaseline:"middle",translation:[b,D]})}draw(i){this._isVisible()&&(this.drawBackground(),this.drawGrid(i),this.drawBorder(),this.drawTitle(),this.drawLabels(i))}_layers(){const i=this.options,e=i.ticks&&i.ticks.z||0,t=(0,d.v)(i.grid&&i.grid.z,-1),s=(0,d.v)(i.border&&i.border.z,0);return this._isVisible()&&this.draw===si.prototype.draw?[{z:t,draw:n=>{this.drawBackground(),this.drawGrid(n),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:n=>{this.drawLabels(n)}}]:[{z:e,draw:n=>{this.draw(n)}}]}getMatchingVisibleMetas(i){const e=this.chart.getSortedVisibleDatasetMetas(),t=this.axis+"AxisID",s=[];let n,o;for(n=0,o=e.length;n<o;++n){const c=e[n];c[t]===this.id&&(!i||c.type===i)&&s.push(c)}return s}_resolveTickFontOptions(i){const e=this.options.ticks.setContext(this.getContext(i));return(0,d.a0)(e.font)}_maxDigits(){const i=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/i}}class Bi{constructor(i,e,t){this.type=i,this.scope=e,this.override=t,this.items=Object.create(null)}isForType(i){return Object.prototype.isPrototypeOf.call(this.type.prototype,i.prototype)}register(i){const e=Object.getPrototypeOf(i);let t;(function ss(r){return"id"in r&&"defaults"in r})(e)&&(t=this.register(e));const s=this.items,n=i.id,o=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+i);return n in s||(s[n]=i,function is(r,i,e){const t=(0,d.a4)(Object.create(null),[e?d.d.get(e):{},d.d.get(i),r.defaults]);d.d.set(i,t),r.defaultRoutes&&function Ls(r,i){Object.keys(i).forEach(e=>{const t=e.split("."),s=t.pop(),n=[r].concat(t).join("."),o=i[e].split("."),c=o.pop(),f=o.join(".");d.d.route(n,s,f,c)})}(i,r.defaultRoutes),r.descriptors&&d.d.describe(i,r.descriptors)}(i,o,t),this.override&&d.d.override(i.id,i.overrides)),o}get(i){return this.items[i]}unregister(i){const e=this.items,t=i.id,s=this.scope;t in e&&delete e[t],s&&t in d.d[s]&&(delete d.d[s][t],this.override&&delete d.a3[t])}}class F{constructor(){this.controllers=new Bi(Ce,"datasets",!0),this.elements=new Bi(Ct,"elements"),this.plugins=new Bi(Object,"plugins"),this.scales=new Bi(si,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...i){this._each("register",i)}remove(...i){this._each("unregister",i)}addControllers(...i){this._each("register",i,this.controllers)}addElements(...i){this._each("register",i,this.elements)}addPlugins(...i){this._each("register",i,this.plugins)}addScales(...i){this._each("register",i,this.scales)}getController(i){return this._get(i,this.controllers,"controller")}getElement(i){return this._get(i,this.elements,"element")}getPlugin(i){return this._get(i,this.plugins,"plugin")}getScale(i){return this._get(i,this.scales,"scale")}removeControllers(...i){this._each("unregister",i,this.controllers)}removeElements(...i){this._each("unregister",i,this.elements)}removePlugins(...i){this._each("unregister",i,this.plugins)}removeScales(...i){this._each("unregister",i,this.scales)}_each(i,e,t){[...e].forEach(s=>{const n=t||this._getRegistryForType(s);t||n.isForType(s)||n===this.plugins&&s.id?this._exec(i,n,s):(0,d.F)(s,o=>{const c=t||this._getRegistryForType(o);this._exec(i,c,o)})})}_exec(i,e,t){const s=(0,d.a5)(i);(0,d.Q)(t["before"+s],[],t),e[i](t),(0,d.Q)(t["after"+s],[],t)}_getRegistryForType(i){for(let e=0;e<this._typedRegistries.length;e++){const t=this._typedRegistries[e];if(t.isForType(i))return t}return this.plugins}_get(i,e,t){const s=e.get(i);if(void 0===s)throw new Error('"'+i+'" is not a registered '+t+".");return s}}var U=new F;class te{constructor(){this._init=[]}notify(i,e,t,s){"beforeInit"===e&&(this._init=this._createDescriptors(i,!0),this._notify(this._init,i,"install"));const n=s?this._descriptors(i).filter(s):this._descriptors(i),o=this._notify(n,i,e,t);return"afterDestroy"===e&&(this._notify(n,i,"stop"),this._notify(this._init,i,"uninstall")),o}_notify(i,e,t,s){s=s||{};for(const n of i){const o=n.plugin;if(!1===(0,d.Q)(o[t],[e,s,n.options],o)&&s.cancelable)return!1}return!0}invalidate(){(0,d.k)(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(i){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(i);return this._notifyStateChanges(i),e}_createDescriptors(i,e){const t=i&&i.config,s=(0,d.v)(t.options&&t.options.plugins,{}),n=function _e(r){const i={},e=[],t=Object.keys(U.plugins.items);for(let n=0;n<t.length;n++)e.push(U.getPlugin(t[n]));const s=r.plugins||[];for(let n=0;n<s.length;n++){const o=s[n];-1===e.indexOf(o)&&(e.push(o),i[o.id]=!0)}return{plugins:e,localIds:i}}(t);return!1!==s||e?function Ke(r,{plugins:i,localIds:e},t,s){const n=[],o=r.getContext();for(const c of i){const f=c.id,b=Pe(t[f],s);null!==b&&n.push({plugin:c,options:ht(r.config,{plugin:c,local:e[f]},b,o)})}return n}(i,n,s,e):[]}_notifyStateChanges(i){const e=this._oldCache||[],t=this._cache,s=(n,o)=>n.filter(c=>!o.some(f=>c.plugin.id===f.plugin.id));this._notify(s(e,t),i,"stop"),this._notify(s(t,e),i,"start")}}function Pe(r,i){return i||!1!==r?!0===r?{}:r:null}function ht(r,{plugin:i,local:e},t,s){const n=r.pluginScopeKeys(i),o=r.getOptionScopes(t,n);return e&&i.defaults&&o.push(i.defaults),r.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Tt(r,i){return((i.datasets||{})[r]||{}).indexAxis||i.indexAxis||(d.d.datasets[r]||{}).indexAxis||"x"}function ri(r){if("x"===r||"y"===r||"r"===r)return r}function Gs(r){return"top"===r||"bottom"===r?"x":"left"===r||"right"===r?"y":void 0}function xs(r,...i){if(ri(r))return r;for(const e of i){const t=e.axis||Gs(e.position)||r.length>1&&ri(r[0].toLowerCase());if(t)return t}throw new Error(`Cannot determine type of '${r}' axis. Please provide 'axis' or 'position' option.`)}function ws(r,i,e){if(e[i+"AxisID"]===r)return{axis:i}}function qs(r){const i=r.options||(r.options={});i.plugins=(0,d.v)(i.plugins,{}),i.scales=function Rr(r,i){const e=d.a3[r.type]||{scales:{}},t=i.scales||{},s=Tt(r.type,i),n=Object.create(null);return Object.keys(t).forEach(o=>{const c=t[o];if(!(0,d.i)(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const f=xs(o,c,function Lr(r,i){if(i.data&&i.data.datasets){const e=i.data.datasets.filter(t=>t.xAxisID===r||t.yAxisID===r);if(e.length)return ws(r,"x",e[0])||ws(r,"y",e[0])}return{}}(o,r),d.d.scales[c.type]),b=function Nt(r,i){return r===i?"_index_":"_value_"}(f,s),D=e.scales||{};n[o]=(0,d.ab)(Object.create(null),[{axis:f},c,D[f],D[b]])}),r.data.datasets.forEach(o=>{const c=o.type||r.type,f=o.indexAxis||Tt(c,i),D=(d.a3[c]||{}).scales||{};Object.keys(D).forEach(B=>{const j=function Mt(r,i){let e=r;return"_index_"===r?e=i:"_value_"===r&&(e="x"===i?"y":"x"),e}(B,f),Y=o[j+"AxisID"]||j;n[Y]=n[Y]||Object.create(null),(0,d.ab)(n[Y],[{axis:j},t[Y],D[B]])})}),Object.keys(n).forEach(o=>{const c=n[o];(0,d.ab)(c,[d.d.scales[c.type],d.d.scale])}),n}(r,i)}function Qs(r){return(r=r||{}).datasets=r.datasets||[],r.labels=r.labels||[],r}const us=new Map,er=new Set;function Es(r,i){let e=us.get(r);return e||(e=i(),us.set(r,e),er.add(e)),e}const fs=(r,i,e)=>{const t=(0,d.f)(i,e);void 0!==t&&r.add(t)};class pn{constructor(i){this._config=function Js(r){return(r=r||{}).data=Qs(r.data),qs(r),r}(i),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(i){this._config.type=i}get data(){return this._config.data}set data(i){this._config.data=Qs(i)}get options(){return this._config.options}set options(i){this._config.options=i}get plugins(){return this._config.plugins}update(){const i=this._config;this.clearCache(),qs(i)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(i){return Es(i,()=>[[`datasets.${i}`,""]])}datasetAnimationScopeKeys(i,e){return Es(`${i}.transition.${e}`,()=>[[`datasets.${i}.transitions.${e}`,`transitions.${e}`],[`datasets.${i}`,""]])}datasetElementScopeKeys(i,e){return Es(`${i}-${e}`,()=>[[`datasets.${i}.elements.${e}`,`datasets.${i}`,`elements.${e}`,""]])}pluginScopeKeys(i){const e=i.id;return Es(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...i.additionalOptionScopes||[]]])}_cachedScopes(i,e){const t=this._scopeCache;let s=t.get(i);return(!s||e)&&(s=new Map,t.set(i,s)),s}getOptionScopes(i,e,t){const{options:s,type:n}=this,o=this._cachedScopes(i,t),c=o.get(e);if(c)return c;const f=new Set;e.forEach(D=>{i&&(f.add(i),D.forEach(B=>fs(f,i,B))),D.forEach(B=>fs(f,s,B)),D.forEach(B=>fs(f,d.a3[n]||{},B)),D.forEach(B=>fs(f,d.d,B)),D.forEach(B=>fs(f,d.a6,B))});const b=Array.from(f);return 0===b.length&&b.push(Object.create(null)),er.has(e)&&o.set(e,b),b}chartOptionScopes(){const{options:i,type:e}=this;return[i,d.a3[e]||{},d.d.datasets[e]||{},{type:e},d.d,d.a6]}resolveNamedOptions(i,e,t,s=[""]){const n={$shared:!0},{resolver:o,subPrefixes:c}=tr(this._resolverCache,i,s);let f=o;if(function Ir(r,i){const{isScriptable:e,isIndexable:t}=(0,d.aa)(r);for(const s of i){const n=e(s),o=t(s),c=(o||n)&&r[s];if(n&&((0,d.a7)(c)||ir(c))||o&&(0,d.b)(c))return!0}return!1}(o,e)){n.$shared=!1,t=(0,d.a7)(t)?t():t;const b=this.createResolver(i,t,c);f=(0,d.a8)(o,t,b)}for(const b of e)n[b]=f[b];return n}createResolver(i,e,t=[""],s){const{resolver:n}=tr(this._resolverCache,i,t);return(0,d.i)(e)?(0,d.a8)(n,e,void 0,s):n}}function tr(r,i,e){let t=r.get(i);t||(t=new Map,r.set(i,t));const s=e.join();let n=t.get(s);return n||(n={resolver:(0,d.a9)(i,e),subPrefixes:e.filter(c=>!c.toLowerCase().includes("hover"))},t.set(s,n)),n}const ir=r=>(0,d.i)(r)&&Object.getOwnPropertyNames(r).some(i=>(0,d.a7)(r[i])),sr=["top","bottom","left","right","chartArea"];function rr(r,i){return"top"===r||"bottom"===r||-1===sr.indexOf(r)&&"x"===i}function nr(r,i){return function(e,t){return e[r]===t[r]?e[i]-t[i]:e[r]-t[r]}}function or(r){const i=r.chart,e=i.options.animation;i.notifyPlugins("afterRender"),(0,d.Q)(e&&e.onComplete,[r],i)}function _s(r){const i=r.chart,e=i.options.animation;(0,d.Q)(e&&e.onProgress,[r],i)}function Ts(r){return(0,d.M)()&&"string"==typeof r?r=document.getElementById(r):r&&r.length&&(r=r[0]),r&&r.canvas&&(r=r.canvas),r}const ps={},Rs=r=>{const i=Ts(r);return Object.values(ps).filter(e=>e.canvas===i).pop()};function ar(r,i,e){const t=Object.keys(r);for(const s of t){const n=+s;if(n>=i){const o=r[s];delete r[s],(e>0||n>i)&&(r[n+e]=o)}}}function Ms(r,i,e){return r.options.clip?r[e]:i[e]}let gs=(()=>{class r{static register(...e){U.add(...e),Ds()}static unregister(...e){U.remove(...e),Ds()}constructor(e,t){const s=this.config=new pn(t),n=Ts(e),o=Rs(n);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const c=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||function wt(r){return!(0,d.M)()||typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas?zi:Pt}(n)),this.platform.updateConfig(s);const f=this.platform.acquireContext(n,c.aspectRatio),b=f&&f.canvas,D=b&&b.height,B=b&&b.width;this.id=(0,d.ac)(),this.ctx=f,this.canvas=b,this.width=B,this.height=D,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new te,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=(0,d.ad)(j=>this.update(j),c.resizeDelay||0),this._dataChanges=[],ps[this.id]=this,f&&b?(g.listen(this,"complete",or),g.listen(this,"progress",_s),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:n,_aspectRatio:o}=this;return(0,d.k)(e)?t&&o?o:n?s/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return U}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():(0,d.ae)(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return(0,d.af)(this.canvas,this.ctx),this}stop(){return g.stop(this),this}resize(e,t){g.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,c=this.platform.getMaximumSize(this.canvas,e,t,s.maintainAspectRatio&&this.aspectRatio),f=s.devicePixelRatio||this.platform.getDevicePixelRatio(),b=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,(0,d.ae)(this,f,!0)&&(this.notifyPlugins("resize",{size:c}),(0,d.Q)(s.onResize,[this,c],this),this.attached&&this._doResize(b)&&this.render())}ensureScalesHaveIDs(){(0,d.F)(this.options.scales||{},(s,n)=>{s.id=n})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,n=Object.keys(s).reduce((c,f)=>(c[f]=!1,c),{});let o=[];t&&(o=o.concat(Object.keys(t).map(c=>{const f=t[c],b=xs(c,f),D="r"===b,B="x"===b;return{options:f,dposition:D?"chartArea":B?"bottom":"left",dtype:D?"radialLinear":B?"category":"linear"}}))),(0,d.F)(o,c=>{const f=c.options,b=f.id,D=xs(b,f),B=(0,d.v)(f.type,c.dtype);(void 0===f.position||rr(f.position,D)!==rr(c.dposition))&&(f.position=c.dposition),n[b]=!0;let j=null;b in s&&s[b].type===B?j=s[b]:(j=new(U.getScale(B))({id:b,type:B,ctx:this.ctx,chart:this}),s[j.id]=j),j.init(f,e)}),(0,d.F)(n,(c,f)=>{c||delete s[f]}),(0,d.F)(s,c=>{Ot.configure(this,c,c.options),Ot.addBox(this,c)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((n,o)=>n.index-o.index),s>t){for(let n=t;n<s;++n)this._destroyDatasetMeta(n);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(nr("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((s,n)=>{0===t.filter(o=>o===s._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=t.length;s<n;s++){const o=t[s];let c=this.getDatasetMeta(s);const f=o.type||this.config.type;if(c.type&&c.type!==f&&(this._destroyDatasetMeta(s),c=this.getDatasetMeta(s)),c.type=f,c.indexAxis=o.indexAxis||Tt(f,this.options),c.order=o.order||0,c.index=s,c.label=""+o.label,c.visible=this.isDatasetVisible(s),c.controller)c.controller.updateIndex(s),c.controller.linkScales();else{const b=U.getController(f),{datasetElementType:D,dataElementType:B}=d.d.datasets[f];Object.assign(b,{dataElementType:U.getElement(B),datasetElementType:D&&U.getElement(D)}),c.controller=new b(this,s),e.push(c.controller)}}return this._updateMetasets(),e}_resetElements(){(0,d.F)(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let D=0,B=this.data.datasets.length;D<B;D++){const{controller:j}=this.getDatasetMeta(D),Y=!n&&-1===o.indexOf(j);j.buildOrUpdateElements(Y),c=Math.max(+j.getMaxOverflow(),c)}c=this._minPadding=s.layout.autoPadding?c:0,this._updateLayout(c),n||(0,d.F)(o,D=>{D.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(nr("z","_idx"));const{_active:f,_lastEvent:b}=this;b?this._eventHandler(b,!0):f.length&&this._updateHoverStyles(f,f,!0),this.render()}_updateScales(){(0,d.F)(this.scales,e=>{Ot.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!(0,d.ag)(t,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:o}of t)ar(e,n,"_removeElements"===s?-o:o)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=o=>new Set(e.filter(c=>c[0]===o).map((c,f)=>f+","+c.splice(1).join(","))),n=s(0);for(let o=1;o<t;o++)if(!(0,d.ag)(n,s(o)))return;return Array.from(n).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Ot.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],(0,d.F)(this.boxes,n=>{s&&"chartArea"===n.position||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,o)=>{n._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let t=0,s=this.data.datasets.length;t<s;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,(0,d.a7)(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),n={meta:s,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(s.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(g.has(this)?this.attached&&!g.running(this)&&g.start(this):(this.draw(),or({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:n}=this._resizeBeforeDraw;this._resize(s,n),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let n,o;for(n=0,o=t.length;n<o;++n){const c=t[n];(!e||c.visible)&&s.push(c)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s=e._clip,n=!s.disabled,o=function Hr(r,i){const{xScale:e,yScale:t}=r;return e&&t?{left:Ms(e,i,"left"),right:Ms(e,i,"right"),top:Ms(t,i,"top"),bottom:Ms(t,i,"bottom")}:i}(e,this.chartArea),c={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",c)&&(n&&(0,d.Y)(t,{left:!1===s.left?0:o.left-s.left,right:!1===s.right?this.width:o.right+s.right,top:!1===s.top?0:o.top-s.top,bottom:!1===s.bottom?this.height:o.bottom+s.bottom}),e.controller.draw(),n&&(0,d.$)(t),c.cancelable=!1,this.notifyPlugins("afterDatasetDraw",c))}isPointInArea(e){return(0,d.C)(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,n){const o=as.modes[t];return"function"==typeof o?o(this,e,s,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let n=s.filter(o=>o&&o._dataset===t).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=(0,d.j)(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return"boolean"==typeof s.hidden?!s.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const n=s?"show":"hide",o=this.getDatasetMeta(e),c=o.controller._resolveAnimations(void 0,n);(0,d.h)(t)?(o.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),c.update(o,{visible:s}),this.update(f=>f.datasetIndex===e?n:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),g.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),(0,d.af)(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete ps[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(o,c)=>{t.addEventListener(this,o,c),e[o]=c},n=(o,c,f)=>{o.offsetX=c,o.offsetY=f,this._eventHandler(o)};(0,d.F)(this.options.events,o=>s(o,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(b,D)=>{t.addEventListener(this,b,D),e[b]=D},n=(b,D)=>{e[b]&&(t.removeEventListener(this,b,D),delete e[b])},o=(b,D)=>{this.canvas&&this.resize(b,D)};let c;const f=()=>{n("attach",f),this.attached=!0,this.resize(),s("resize",o),s("detach",c)};c=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),s("attach",f)},t.isAttached(this.canvas)?f():c()}unbindEvents(){(0,d.F)(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},(0,d.F)(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const n=s?"set":"remove";let o,c,f,b;for("dataset"===t&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),f=0,b=e.length;f<b;++f){c=e[f];const D=c&&this.getDatasetMeta(c.datasetIndex).controller;D&&D[n+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(({datasetIndex:o,index:c})=>{const f=this.getDatasetMeta(o);if(!f)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:f.data[c],index:c}});!(0,d.ah)(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,s){const n=this.options.hover,o=(b,D)=>b.filter(B=>!D.some(j=>B.datasetIndex===j.datasetIndex&&B.index===j.index)),c=o(t,e),f=s?e:o(e,t);c.length&&this.updateHoverStyle(c,n.mode,!1),f.length&&n.mode&&this.updateHoverStyle(f,n.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=c=>(c.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",s,n))return;const o=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(o||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:n=[],options:o}=this,f=this._getActiveElements(e,n,s,t),b=(0,d.ai)(e),D=function Fr(r,i,e,t){return e&&"mouseout"!==r.type?t?i:r:null}(e,this._lastEvent,s,b);s&&(this._lastEvent=null,(0,d.Q)(o.onHover,[e,f,this],this),b&&(0,d.Q)(o.onClick,[e,f,this],this));const B=!(0,d.ah)(f,n);return(B||t)&&(this._active=f,this._updateHoverStyles(f,n,t)),this._lastEvent=D,B}_getActiveElements(e,t,s,n){if("mouseout"===e.type)return[];if(!s)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,n)}}return(0,Z.Z)(r,"defaults",d.d),(0,Z.Z)(r,"instances",ps),(0,Z.Z)(r,"overrides",d.a3),(0,Z.Z)(r,"registry",U),(0,Z.Z)(r,"version","4.4.1"),(0,Z.Z)(r,"getChart",Rs),r})();function Ds(){return(0,d.F)(gs.instances,r=>r._plugins.invalidate())}function Mi(r,i,e,t){return{x:e+r*Math.cos(i),y:t+r*Math.sin(i)}}function ms(r,i,e,t,s,n){const{x:o,y:c,startAngle:f,pixelMargin:b,innerRadius:D}=i,B=Math.max(i.outerRadius+t+e-b,0),j=D>0?D+t+e+b:0;let Y=0;const ne=s-f;if(t){const $t=((D>0?D-t:0)+(B>0?B-t:0))/2;Y=(ne-(0!==$t?ne*$t/($t+t):ne))/2}const pe=(ne-Math.max(.001,ne*B-e/d.P)/B)/2,Ee=f+pe+Y,ye=s-pe-Y,{outerStart:Fe,outerEnd:We,innerStart:ke,innerEnd:He}=function Nr(r,i,e,t){const s=function lr(r){return(0,d.ak)(r,["outerStart","outerEnd","innerStart","innerEnd"])}(r.options.borderRadius),n=(e-i)/2,o=Math.min(n,t*i/2),c=f=>{const b=(e-Math.min(n,f))*t/2;return(0,d.S)(f,0,Math.min(n,b))};return{outerStart:c(s.outerStart),outerEnd:c(s.outerEnd),innerStart:(0,d.S)(s.innerStart,0,o),innerEnd:(0,d.S)(s.innerEnd,0,o)}}(i,j,B,ye-Ee),Ye=B-Fe,$e=B-We,Je=Ee+Fe/Ye,ft=ye-We/$e,ut=j+ke,vt=j+He,ni=Ee+ke/ut,ki=ye-He/vt;if(r.beginPath(),n){const Dt=(Je+ft)/2;if(r.arc(o,c,B,Je,Dt),r.arc(o,c,B,Dt,ft),We>0){const ci=Mi($e,ft,o,c);r.arc(ci.x,ci.y,We,ft,ye+d.H)}const Bt=Mi(vt,ye,o,c);if(r.lineTo(Bt.x,Bt.y),He>0){const ci=Mi(vt,ki,o,c);r.arc(ci.x,ci.y,He,ye+d.H,ki+Math.PI)}const $t=(ye-He/j+(Ee+ke/j))/2;if(r.arc(o,c,j,ye-He/j,$t,!0),r.arc(o,c,j,$t,Ee+ke/j,!0),ke>0){const ci=Mi(ut,ni,o,c);r.arc(ci.x,ci.y,ke,ni+Math.PI,Ee-d.H)}const Qi=Mi(Ye,Ee,o,c);if(r.lineTo(Qi.x,Qi.y),Fe>0){const ci=Mi(Ye,Je,o,c);r.arc(ci.x,ci.y,Fe,Ee-d.H,Je)}}else{r.moveTo(o,c);const Dt=Math.cos(Je)*B+o,Bt=Math.sin(Je)*B+c;r.lineTo(Dt,Bt);const $t=Math.cos(ft)*B+o,Qi=Math.sin(ft)*B+c;r.lineTo($t,Qi)}r.closePath()}class vs extends Ct{constructor(i){super(),(0,Z.Z)(this,"circumference",void 0),(0,Z.Z)(this,"endAngle",void 0),(0,Z.Z)(this,"fullCircles",void 0),(0,Z.Z)(this,"innerRadius",void 0),(0,Z.Z)(this,"outerRadius",void 0),(0,Z.Z)(this,"pixelMargin",void 0),(0,Z.Z)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,i&&Object.assign(this,i)}inRange(i,e,t){const s=this.getProps(["x","y"],t),{angle:n,distance:o}=(0,d.D)(s,{x:i,y:e}),{startAngle:c,endAngle:f,innerRadius:b,outerRadius:D,circumference:B}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],t),j=(this.options.spacing+this.options.borderWidth)/2,ne=(0,d.v)(B,f-c)>=d.T||(0,d.p)(n,c,f),ce=(0,d.aj)(o,b+j,D+j);return ne&&ce}getCenterPoint(i){const{x:e,y:t,startAngle:s,endAngle:n,innerRadius:o,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],i),{offset:f,spacing:b}=this.options,D=(s+n)/2,B=(o+c+b+f)/2;return{x:e+Math.cos(D)*B,y:t+Math.sin(D)*B}}tooltipPosition(i){return this.getCenterPoint(i)}draw(i){const{options:e,circumference:t}=this,s=(e.offset||0)/4,n=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=t>d.T?Math.floor(t/d.T):0,0===t||this.innerRadius<0||this.outerRadius<0)return;i.save();const c=(this.startAngle+this.endAngle)/2;i.translate(Math.cos(c)*s,Math.sin(c)*s);const b=s*(1-Math.sin(Math.min(d.P,t||0)));i.fillStyle=e.backgroundColor,i.strokeStyle=e.borderColor,function Is(r,i,e,t,s){const{fullCircles:n,startAngle:o,circumference:c}=i;let f=i.endAngle;if(n){ms(r,i,e,t,f,s);for(let b=0;b<n;++b)r.fill();isNaN(c)||(f=o+(c%d.T||d.T))}ms(r,i,e,t,f,s),r.fill()}(i,this,b,n,o),function Wr(r,i,e,t,s){const{fullCircles:n,startAngle:o,circumference:c,options:f}=i,{borderWidth:b,borderJoinStyle:D,borderDash:B,borderDashOffset:j}=f,Y="inner"===f.borderAlign;if(!b)return;r.setLineDash(B||[]),r.lineDashOffset=j,Y?(r.lineWidth=2*b,r.lineJoin=D||"round"):(r.lineWidth=b,r.lineJoin=D||"bevel");let ne=i.endAngle;if(n){ms(r,i,e,t,ne,s);for(let ce=0;ce<n;++ce)r.stroke();isNaN(c)||(ne=o+(c%d.T||d.T))}Y&&function $i(r,i,e){const{startAngle:t,pixelMargin:s,x:n,y:o,outerRadius:c,innerRadius:f}=i;let b=s/c;r.beginPath(),r.arc(n,o,c,t-b,e+b),f>s?(b=s/f,r.arc(n,o,f,e+b,t-b,!0)):r.arc(n,o,s,e+d.H,t-d.H),r.closePath(),r.clip()}(r,i,ne),n||(ms(r,i,e,t,ne,s),r.stroke())}(i,this,b,n,o),i.restore()}}function Bs(r,i,e=i){r.lineCap=(0,d.v)(e.borderCapStyle,i.borderCapStyle),r.setLineDash((0,d.v)(e.borderDash,i.borderDash)),r.lineDashOffset=(0,d.v)(e.borderDashOffset,i.borderDashOffset),r.lineJoin=(0,d.v)(e.borderJoinStyle,i.borderJoinStyle),r.lineWidth=(0,d.v)(e.borderWidth,i.borderWidth),r.strokeStyle=(0,d.v)(e.borderColor,i.borderColor)}function zr(r,i,e){r.lineTo(e.x,e.y)}function bs(r,i,e={}){const t=r.length,{start:s=0,end:n=t-1}=e,{start:o,end:c}=i,f=Math.max(s,o),b=Math.min(n,c);return{count:t,start:f,loop:i.loop,ilen:b<f&&!(s<o&&n<o||s>c&&n>c)?t+b-f:b-f}}function hr(r,i,e,t){const{points:s,options:n}=i,{count:o,start:c,loop:f,ilen:b}=bs(s,e,t),D=function cr(r){return r.stepped?d.ar:r.tension||"monotone"===r.cubicInterpolationMode?d.as:zr}(n);let Y,ne,ce,{move:B=!0,reverse:j}=t||{};for(Y=0;Y<=b;++Y)ne=s[(c+(j?b-Y:Y))%o],!ne.skip&&(B?(r.moveTo(ne.x,ne.y),B=!1):D(r,ce,ne,j,n.stepped),ce=ne);return f&&(ne=s[(c+(j?b:0))%o],D(r,ce,ne,j,n.stepped)),!!f}function dr(r,i,e,t){const s=i.points,{count:n,start:o,ilen:c}=bs(s,e,t),{move:f=!0,reverse:b}=t||{};let j,Y,ne,ce,pe,Ee,D=0,B=0;const ye=We=>(o+(b?c-We:We))%n,Fe=()=>{ce!==pe&&(r.lineTo(D,pe),r.lineTo(D,ce),r.lineTo(D,Ee))};for(f&&(Y=s[ye(0)],r.moveTo(Y.x,Y.y)),j=0;j<=c;++j){if(Y=s[ye(j)],Y.skip)continue;const We=Y.x,ke=Y.y,He=0|We;He===ne?(ke<ce?ce=ke:ke>pe&&(pe=ke),D=(B*D+We)/++B):(Fe(),r.lineTo(We,ke),ne=He,B=0,ce=pe=ke),Ee=ke}Fe()}function Fs(r){const i=r.options;return r._decimated||r._loop||i.tension||"monotone"===i.cubicInterpolationMode||i.stepped||i.borderDash&&i.borderDash.length?hr:dr}(0,Z.Z)(vs,"id","arc"),(0,Z.Z)(vs,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),(0,Z.Z)(vs,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,Z.Z)(vs,"descriptors",{_scriptable:!0,_indexable:r=>"borderDash"!==r});const jr="function"==typeof Path2D;let bi=(()=>{class r extends Ct{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;!s.tension&&"monotone"!==s.cubicInterpolationMode||s.stepped||this._pointsUpdated||((0,d.al)(this._points,s,e,s.spanGaps?this._loop:this._fullLoop,t),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=(0,d.am)(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,s=e.length;return s&&this.points[e[s-1].end]}interpolate(e,t){const s=this.options,n=e[t],o=this.points,c=(0,d.an)(this,{property:t,start:n,end:n});if(!c.length)return;const f=[],b=function ur(r){return r.stepped?d.ao:r.tension||"monotone"===r.cubicInterpolationMode?d.ap:d.aq}(s);let D,B;for(D=0,B=c.length;D<B;++D){const{start:j,end:Y}=c[D],ne=o[j],ce=o[Y];if(ne===ce){f.push(ne);continue}const Ee=b(ne,ce,Math.abs((n-ne[t])/(ce[t]-ne[t])),s.stepped);Ee[t]=e[t],f.push(Ee)}return 1===f.length?f[0]:f}pathSegment(e,t,s){return Fs(this)(e,this,t,s)}path(e,t,s){const n=this.segments,o=Fs(this);let c=this._loop;t=t||0,s=s||this.points.length-t;for(const f of n)c&=o(e,this,f,{start:t,end:t+s-1});return!!c}draw(e,t,s,n){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function Vr(r,i,e,t){jr&&!i.options.segment?function Hs(r,i,e,t){let s=i._path;s||(s=i._path=new Path2D,i.path(s,e,t)&&s.closePath()),Bs(r,i.options),r.stroke(s)}(r,i,e,t):function Ur(r,i,e,t){const{segments:s,options:n}=i,o=Fs(i);for(const c of s)Bs(r,n,c.style),r.beginPath(),o(r,i,c,{start:e,end:e+t-1})&&r.closePath(),r.stroke()}(r,i,e,t)}(e,this,s,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return(0,Z.Z)(r,"id","line"),(0,Z.Z)(r,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,Z.Z)(r,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,Z.Z)(r,"descriptors",{_scriptable:!0,_indexable:i=>"borderDash"!==i&&"fill"!==i}),r})();function Ns(r,i,e,t){const s=r.options,{[e]:n}=r.getProps([e],t);return Math.abs(i-n)<s.radius+s.hitRadius}let $r=(()=>{class r extends Ct{constructor(e){super(),(0,Z.Z)(this,"parsed",void 0),(0,Z.Z)(this,"skip",void 0),(0,Z.Z)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,s){const n=this.options,{x:o,y:c}=this.getProps(["x","y"],s);return Math.pow(e-o,2)+Math.pow(t-c,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return Ns(this,e,"x",t)}inYRange(e,t){return Ns(this,e,"y",t)}getCenterPoint(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}size(e){let t=(e=e||this.options||{}).radius||0;return t=Math.max(t,t&&e.hoverRadius||0),2*(t+(t&&e.borderWidth||0))}draw(e,t){const s=this.options;this.skip||s.radius<.1||!(0,d.C)(this,t,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,(0,d.at)(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}return(0,Z.Z)(r,"id","point"),(0,Z.Z)(r,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,Z.Z)(r,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),r})();function fr(r,i){const{x:e,y:t,base:s,width:n,height:o}=r.getProps(["x","y","base","width","height"],i);let c,f,b,D,B;return r.horizontal?(B=o/2,c=Math.min(e,s),f=Math.max(e,s),b=t-B,D=t+B):(B=n/2,c=e-B,f=e+B,b=Math.min(t,s),D=Math.max(t,s)),{left:c,top:b,right:f,bottom:D}}function Fi(r,i,e,t){return r?0:(0,d.S)(i,e,t)}function Ws(r,i,e,t){const s=null===i,n=null===e,c=r&&!(s&&n)&&fr(r,t);return c&&(s||(0,d.aj)(i,c.left,c.right))&&(n||(0,d.aj)(e,c.top,c.bottom))}function pr(r,i){r.rect(i.x,i.y,i.w,i.h)}function rs(r,i,e={}){const t=r.x!==e.x?-i:0,s=r.y!==e.y?-i:0;return{x:r.x+t,y:r.y+s,w:r.w+((r.x+r.w!==e.x+e.w?i:0)-t),h:r.h+((r.y+r.h!==e.y+e.h?i:0)-s),radius:r.radius}}class Ki extends Ct{constructor(i){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,i&&Object.assign(this,i)}draw(i){const{inflateAmount:e,options:{borderColor:t,backgroundColor:s}}=this,{inner:n,outer:o}=function Yr(r){const i=fr(r),e=i.right-i.left,t=i.bottom-i.top,s=function Kr(r,i,e){const s=r.borderSkipped,n=(0,d.av)(r.options.borderWidth);return{t:Fi(s.top,n.top,0,e),r:Fi(s.right,n.right,0,i),b:Fi(s.bottom,n.bottom,0,e),l:Fi(s.left,n.left,0,i)}}(r,e/2,t/2),n=function ks(r,i,e){const{enableBorderRadius:t}=r.getProps(["enableBorderRadius"]),s=r.options.borderRadius,n=(0,d.aw)(s),o=Math.min(i,e),c=r.borderSkipped,f=t||(0,d.i)(s);return{topLeft:Fi(!f||c.top||c.left,n.topLeft,0,o),topRight:Fi(!f||c.top||c.right,n.topRight,0,o),bottomLeft:Fi(!f||c.bottom||c.left,n.bottomLeft,0,o),bottomRight:Fi(!f||c.bottom||c.right,n.bottomRight,0,o)}}(r,e/2,t/2);return{outer:{x:i.left,y:i.top,w:e,h:t,radius:n},inner:{x:i.left+s.l,y:i.top+s.t,w:e-s.l-s.r,h:t-s.t-s.b,radius:{topLeft:Math.max(0,n.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,n.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,n.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,n.bottomRight-Math.max(s.b,s.r))}}}}(this),c=function _r(r){return r.topLeft||r.topRight||r.bottomLeft||r.bottomRight}(o.radius)?d.au:pr;i.save(),(o.w!==n.w||o.h!==n.h)&&(i.beginPath(),c(i,rs(o,e,n)),i.clip(),c(i,rs(n,-e,o)),i.fillStyle=t,i.fill("evenodd")),i.beginPath(),c(i,rs(n,e)),i.fillStyle=s,i.fill(),i.restore()}inRange(i,e,t){return Ws(this,i,e,t)}inXRange(i,e){return Ws(this,i,null,e)}inYRange(i,e){return Ws(this,null,i,e)}getCenterPoint(i){const{x:e,y:t,base:s,horizontal:n}=this.getProps(["x","y","base","horizontal"],i);return{x:n?(e+s)/2:e,y:n?t:(t+s)/2}}getRange(i){return"x"===i?this.width/2:this.height/2}}(0,Z.Z)(Ki,"id","bar"),(0,Z.Z)(Ki,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,Z.Z)(Ki,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Zr=Object.freeze({__proto__:null,ArcElement:vs,BarElement:Ki,LineElement:bi,PointElement:$r});const zs=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Hi=zs.map(r=>r.replace("rgb(","rgba(").replace(")",", 0.5)"));function gr(r){return zs[r%zs.length]}function mr(r){return Hi[r%Hi.length]}function vr(r){let i;for(i in r)if(r[i].borderColor||r[i].backgroundColor)return!0;return!1}var Jr={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(r,i,e){if(!e.enabled)return;const{data:{datasets:t},options:s}=r.config,{elements:n}=s;if(!e.forceOverride&&(vr(t)||function Qr(r){return r&&(r.borderColor||r.backgroundColor)}(s)||n&&vr(n)))return;const o=function qr(r){let i=0;return(e,t)=>{const s=r.getDatasetMeta(t).controller;s instanceof Te?i=function Gr(r,i){return r.backgroundColor=r.data.map(()=>gr(i++)),i}(e,i):s instanceof Qe?i=function As(r,i){return r.backgroundColor=r.data.map(()=>mr(i++)),i}(e,i):s&&(i=function Xr(r,i){return r.borderColor=gr(i),r.backgroundColor=mr(i),++i}(e,i))}}(r);t.forEach(o)}};function br(r){if(r._decimated){const i=r._data;delete r._decimated,delete r._data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,writable:!0,value:i})}}function Sr(r){r.data.datasets.forEach(i=>{br(i)})}var tn={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(r,i,e)=>{if(!e.enabled)return void Sr(r);const t=r.width;r.data.datasets.forEach((s,n)=>{const{_data:o,indexAxis:c}=s,f=r.getDatasetMeta(n),b=o||s.data;if("y"===(0,d.a)([c,r.options.indexAxis])||!f.controller.supportsDecimation)return;const D=r.scales[f.xAxisID];if("linear"!==D.type&&"time"!==D.type||r.options.parsing)return;let ne,{start:B,count:j}=function Et(r,i){const e=i.length;let s,t=0;const{iScale:n}=r,{min:o,max:c,minDefined:f,maxDefined:b}=n.getUserBounds();return f&&(t=(0,d.S)((0,d.B)(i,n.axis,o).lo,0,e-1)),s=b?(0,d.S)((0,d.B)(i,n.axis,c).hi+1,t,e)-t:e-t,{start:t,count:s}}(f,b);if(j<=(e.threshold||4*t))br(s);else{switch((0,d.k)(o)&&(s._data=b,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(ce){this._data=ce}})),e.algorithm){case"lttb":ne=function Yi(r,i,e,t,s){const n=s.samples||t;if(n>=e)return r.slice(i,i+e);const o=[],c=(e-2)/(n-2);let f=0;const b=i+e-1;let B,j,Y,ne,ce,D=i;for(o[f++]=r[D],B=0;B<n-2;B++){let ye,pe=0,Ee=0;const Fe=Math.floor((B+1)*c)+1+i,We=Math.min(Math.floor((B+2)*c)+1,e)+i,ke=We-Fe;for(ye=Fe;ye<We;ye++)pe+=r[ye].x,Ee+=r[ye].y;pe/=ke,Ee/=ke;const He=Math.floor(B*c)+1+i,Ye=Math.min(Math.floor((B+1)*c)+1,e)+i,{x:$e,y:Je}=r[D];for(Y=ne=-1,ye=He;ye<Ye;ye++)ne=.5*Math.abs(($e-pe)*(r[ye].y-Je)-($e-r[ye].x)*(Ee-Je)),ne>Y&&(Y=ne,j=r[ye],ce=ye);o[f++]=j,D=ce}return o[f++]=r[b],o}(b,B,j,t,e);break;case"min-max":ne=function en(r,i,e,t){let o,c,f,b,D,B,j,Y,ne,ce,s=0,n=0;const pe=[],ye=r[i].x,We=r[i+e-1].x-ye;for(o=i;o<i+e;++o){c=r[o],f=(c.x-ye)/We*t,b=c.y;const ke=0|f;if(ke===D)b<ne?(ne=b,B=o):b>ce&&(ce=b,j=o),s=(n*s+c.x)/++n;else{const He=o-1;if(!(0,d.k)(B)&&!(0,d.k)(j)){const Ye=Math.min(B,j),$e=Math.max(B,j);Ye!==Y&&Ye!==He&&pe.push({...r[Ye],x:s}),$e!==Y&&$e!==He&&pe.push({...r[$e],x:s})}o>0&&He!==Y&&pe.push(r[He]),pe.push(c),D=ke,n=0,ne=ce=b,B=j=Y=o}}return pe}(b,B,j,t);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}s._decimated=ne}})},destroy(r){Sr(r)}};function Us(r,i,e,t){if(t)return;let s=i[r],n=e[r];return"angle"===r&&(s=(0,d.ay)(s),n=(0,d.ay)(n)),{property:r,start:s,end:n}}function Ss(r,i,e){for(;i>r;i--){const t=e[i];if(!isNaN(t.x)&&!isNaN(t.y))break}return i}function ns(r,i,e,t){return r&&i?t(r[e],i[e]):r?r[e]:i?i[e]:0}function js(r,i){let e=[],t=!1;return(0,d.b)(r)?(t=!0,e=r):e=function yr(r,i){const{x:e=null,y:t=null}=r||{},s=i.points,n=[];return i.segments.forEach(({start:o,end:c})=>{c=Ss(o,c,s);const f=s[o],b=s[c];null!==t?(n.push({x:f.x,y:t}),n.push({x:b.x,y:t})):null!==e&&(n.push({x:e,y:f.y}),n.push({x:e,y:b.y}))}),n}(r,i),e.length?new bi({points:e,options:{tension:0},_loop:t,_fullLoop:t}):null}function Os(r){return r&&!1!==r.fill}function rn(r,i,e){let s=r[i].fill;const n=[i];let o;if(!e)return s;for(;!1!==s&&-1===n.indexOf(s);){if(!(0,d.g)(s))return s;if(o=r[s],!o)return!1;if(o.visible)return s;n.push(s),s=o.fill}return!1}function Cr(r,i,e){const t=function Tr(r){const i=r.options,e=i.fill;let t=(0,d.v)(e&&e.target,e);return void 0===t&&(t=!!i.backgroundColor),!1!==t&&null!==t&&(!0===t?"origin":t)}(r);if((0,d.i)(t))return!isNaN(t.value)&&t;let s=parseFloat(t);return(0,d.g)(s)&&Math.floor(s)===s?function xr(r,i,e,t){return("-"===r||"+"===r)&&(e=i+e),!(e===i||e<0||e>=t)&&e}(t[0],i,s,e):["origin","start","end","stack","shape"].indexOf(t)>=0&&t}function p(r,i,e){const t=[];for(let s=0;s<e.length;s++){const n=e[s],{first:o,last:c,point:f}=w(n,i,"x");if(!(!f||o&&c))if(o)t.unshift(f);else if(r.push(f),!c)break}r.push(...t)}function w(r,i,e){const t=r.interpolate(i,e);if(!t)return{};const s=t[e],n=r.segments,o=r.points;let c=!1,f=!1;for(let b=0;b<n.length;b++){const D=n[b],B=o[D.start][e],j=o[D.end][e];if((0,d.aj)(s,B,j)){c=s===B,f=s===j;break}}return{first:c,last:f,point:t}}class A{constructor(i){this.x=i.x,this.y=i.y,this.radius=i.radius}pathSegment(i,e,t){const{x:s,y:n,radius:o}=this;return i.arc(s,n,o,(e=e||{start:0,end:d.T}).end,e.start,!0),!t.bounds}interpolate(i){const{x:e,y:t,radius:s}=this,n=i.angle;return{x:e+Math.cos(n)*s,y:t+Math.sin(n)*s,angle:n}}}function xe(r,i,e){const t=function H(r){const{chart:i,fill:e,line:t}=r;if((0,d.g)(e))return function K(r,i){const e=r.getDatasetMeta(i);return e&&r.isDatasetVisible(i)?e.dataset:null}(i,e);if("stack"===e)return function Vs(r){const{scale:i,index:e,line:t}=r,s=[],n=t.segments,o=t.points,c=function a(r,i){const e=[],t=r.getMatchingVisibleMetas("line");for(let s=0;s<t.length;s++){const n=t[s];if(n.index===i)break;n.hidden||e.unshift(n.dataset)}return e}(i,e);c.push(js({x:null,y:i.bottom},t));for(let f=0;f<n.length;f++){const b=n[f];for(let D=b.start;D<=b.end;D++)p(s,o[D],c)}return new bi({points:s,options:{}})}(r);if("shape"===e)return!0;const s=function ee(r){return(r.scale||{}).getPointPositionForValue?function fe(r){const{scale:i,fill:e}=r,t=i.options,s=i.getLabels().length,n=t.reverse?i.max:i.min,o=function Er(r,i,e){let t;return t="start"===r?e:"end"===r?i.options.reverse?i.min:i.max:(0,d.i)(r)?r.value:i.getBaseValue(),t}(e,i,n),c=[];if(t.grid.circular){const f=i.getPointPositionForValue(0,n);return new A({x:f.x,y:f.y,radius:i.getDistanceFromCenterForValue(o)})}for(let f=0;f<s;++f)c.push(i.getPointPositionForValue(f,o));return c}(r):function ae(r){const{scale:i={},fill:e}=r,t=function wr(r,i){let e=null;return"start"===r?e=i.bottom:"end"===r?e=i.top:(0,d.i)(r)?e=i.getPixelForValue(r.value):i.getBasePixel&&(e=i.getBasePixel()),e}(e,i);if((0,d.g)(t)){const s=i.isHorizontal();return{x:s?t:null,y:s?null:t}}return null}(r)}(r);return s instanceof A?s:js(s,t)}(i),{line:s,scale:n,axis:o}=i,c=s.options,f=c.fill,b=c.backgroundColor,{above:D=b,below:B=b}=f||{};t&&s.points.length&&((0,d.Y)(r,e),function Ie(r,i){const{line:e,target:t,above:s,below:n,area:o,scale:c}=i,f=e._loop?"angle":i.axis;r.save(),"x"===f&&n!==s&&(qe(r,t,o.top),rt(r,{line:e,target:t,color:s,scale:c,property:f}),r.restore(),r.save(),qe(r,t,o.bottom)),rt(r,{line:e,target:t,color:n,scale:c,property:f}),r.restore()}(r,{line:s,target:t,above:D,below:B,area:e,scale:n,axis:o}),(0,d.$)(r))}function qe(r,i,e){const{segments:t,points:s}=i;let n=!0,o=!1;r.beginPath();for(const c of t){const{start:f,end:b}=c,D=s[f],B=s[Ss(f,b,s)];n?(r.moveTo(D.x,D.y),n=!1):(r.lineTo(D.x,e),r.lineTo(D.x,D.y)),o=!!i.pathSegment(r,c,{move:o}),o?r.closePath():r.lineTo(B.x,e)}r.lineTo(i.first().x,e),r.closePath(),r.clip()}function rt(r,i){const{line:e,target:t,property:s,color:n,scale:o}=i,c=function sn(r,i,e){const t=r.segments,s=r.points,n=i.points,o=[];for(const c of t){let{start:f,end:b}=c;b=Ss(f,b,s);const D=Us(e,s[f],s[b],c.loop);if(!i.segments){o.push({source:c,target:D,start:s[f],end:s[b]});continue}const B=(0,d.an)(i,D);for(const j of B){const Y=Us(e,n[j.start],n[j.end],j.loop),ne=(0,d.ax)(c,s,Y);for(const ce of ne)o.push({source:ce,target:j,start:{[e]:ns(D,Y,"start",Math.max)},end:{[e]:ns(D,Y,"end",Math.min)}})}}return o}(e,t,s);for(const{source:f,target:b,start:D,end:B}of c){const{style:{backgroundColor:j=n}={}}=f,Y=!0!==t;r.save(),r.fillStyle=j,yt(r,o,Y&&Us(s,D,B)),r.beginPath();const ne=!!e.pathSegment(r,f);let ce;if(Y){ne?r.closePath():Lt(r,t,B,s);const pe=!!t.pathSegment(r,b,{move:ne,reverse:!0});ce=ne&&pe,ce||Lt(r,t,D,s)}r.closePath(),r.fill(ce?"evenodd":"nonzero"),r.restore()}}function yt(r,i,e){const{top:t,bottom:s}=i.chart.chartArea,{property:n,start:o,end:c}=e||{};"x"===n&&(r.beginPath(),r.rect(o,t,c-o,s-t),r.clip())}function Lt(r,i,e,t){const s=i.interpolate(e,t);s&&r.lineTo(s.x,s.y)}var at={id:"filler",afterDatasetsUpdate(r,i,e){const t=(r.data.datasets||[]).length,s=[];let n,o,c,f;for(o=0;o<t;++o)n=r.getDatasetMeta(o),c=n.dataset,f=null,c&&c.options&&c instanceof bi&&(f={visible:r.isDatasetVisible(o),index:o,fill:Cr(c,o,t),chart:r,axis:n.controller.options.indexAxis,scale:n.vScale,line:c}),n.$filler=f,s.push(f);for(o=0;o<t;++o)f=s[o],f&&!1!==f.fill&&(f.fill=rn(s,o,e.propagate))},beforeDraw(r,i,e){const t="beforeDraw"===e.drawTime,s=r.getSortedVisibleDatasetMetas(),n=r.chartArea;for(let o=s.length-1;o>=0;--o){const c=s[o].$filler;c&&(c.line.updateControlPoints(n,c.axis),t&&c.fill&&xe(r.ctx,c,n))}},beforeDatasetsDraw(r,i,e){if("beforeDatasetsDraw"!==e.drawTime)return;const t=r.getSortedVisibleDatasetMetas();for(let s=t.length-1;s>=0;--s){const n=t[s].$filler;Os(n)&&xe(r.ctx,n,r.chartArea)}},beforeDatasetDraw(r,i,e){const t=i.meta.$filler;!Os(t)||"beforeDatasetDraw"!==e.drawTime||xe(r.ctx,t,r.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ge=(r,i)=>{let{boxHeight:e=i,boxWidth:t=i}=r;return r.usePointStyle&&(e=Math.min(e,i),t=r.pointStyleWidth||Math.min(t,i)),{boxWidth:t,boxHeight:e,itemHeight:Math.max(i,e)}};class Zi extends Ct{constructor(i){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=i.chart,this.options=i.options,this.ctx=i.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(i,e,t){this.maxWidth=i,this.maxHeight=e,this._margins=t,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const i=this.options.labels||{};let e=(0,d.Q)(i.generateLabels,[this.chart],this)||[];i.filter&&(e=e.filter(t=>i.filter(t,this.chart.data))),i.sort&&(e=e.sort((t,s)=>i.sort(t,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:i,ctx:e}=this;if(!i.display)return void(this.width=this.height=0);const t=i.labels,s=(0,d.a0)(t.font),n=s.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:f}=Ge(t,n);let b,D;e.font=s.string,this.isHorizontal()?(b=this.maxWidth,D=this._fitRows(o,n,c,f)+10):(D=this.maxHeight,b=this._fitCols(o,s,c,f)+10),this.width=Math.min(b,i.maxWidth||this.maxWidth),this.height=Math.min(D,i.maxHeight||this.maxHeight)}_fitRows(i,e,t,s){const{ctx:n,maxWidth:o,options:{labels:{padding:c}}}=this,f=this.legendHitBoxes=[],b=this.lineWidths=[0],D=s+c;let B=i;n.textAlign="left",n.textBaseline="middle";let j=-1,Y=-D;return this.legendItems.forEach((ne,ce)=>{const pe=t+e/2+n.measureText(ne.text).width;(0===ce||b[b.length-1]+pe+2*c>o)&&(B+=D,b[b.length-(ce>0?0:1)]=0,Y+=D,j++),f[ce]={left:0,top:Y,row:j,width:pe,height:s},b[b.length-1]+=pe+c}),B}_fitCols(i,e,t,s){const{ctx:n,maxHeight:o,options:{labels:{padding:c}}}=this,f=this.legendHitBoxes=[],b=this.columnSizes=[],D=o-i;let B=c,j=0,Y=0,ne=0,ce=0;return this.legendItems.forEach((pe,Ee)=>{const{itemWidth:ye,itemHeight:Fe}=function ys(r,i,e,t,s){const n=function nn(r,i,e,t){let s=r.text;return s&&"string"!=typeof s&&(s=s.reduce((n,o)=>n.length>o.length?n:o)),i+e.size/2+t.measureText(s).width}(t,r,i,e),o=function on(r,i,e){let t=r;return"string"!=typeof i.text&&(t=Mr(i,e)),t}(s,t,i.lineHeight);return{itemWidth:n,itemHeight:o}}(t,e,n,pe,s);Ee>0&&Y+Fe+2*c>D&&(B+=j+c,b.push({width:j,height:Y}),ne+=j+c,ce++,j=Y=0),f[Ee]={left:ne,top:Y,col:ce,width:ye,height:Fe},j=Math.max(j,ye),Y+=Fe+c}),B+=j,b.push({width:j,height:Y}),B}adjustHitBoxes(){if(!this.options.display)return;const i=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:t,labels:{padding:s},rtl:n}}=this,o=(0,d.az)(n,this.left,this.width);if(this.isHorizontal()){let c=0,f=(0,d.a2)(t,this.left+s,this.right-this.lineWidths[c]);for(const b of e)c!==b.row&&(c=b.row,f=(0,d.a2)(t,this.left+s,this.right-this.lineWidths[c])),b.top+=this.top+i+s,b.left=o.leftForLtr(o.x(f),b.width),f+=b.width+s}else{let c=0,f=(0,d.a2)(t,this.top+i+s,this.bottom-this.columnSizes[c].height);for(const b of e)b.col!==c&&(c=b.col,f=(0,d.a2)(t,this.top+i+s,this.bottom-this.columnSizes[c].height)),b.top=f,b.left+=this.left+s,b.left=o.leftForLtr(o.x(b.left),b.width),f+=b.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const i=this.ctx;(0,d.Y)(i,this),this._draw(),(0,d.$)(i)}}_draw(){const{options:i,columnSizes:e,lineWidths:t,ctx:s}=this,{align:n,labels:o}=i,c=d.d.color,f=(0,d.az)(i.rtl,this.left,this.width),b=(0,d.a0)(o.font),{padding:D}=o,B=b.size,j=B/2;let Y;this.drawTitle(),s.textAlign=f.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=b.string;const{boxWidth:ne,boxHeight:ce,itemHeight:pe}=Ge(o,B),Fe=this.isHorizontal(),We=this._computeTitleHeight();Y=Fe?{x:(0,d.a2)(n,this.left+D,this.right-t[0]),y:this.top+D+We,line:0}:{x:this.left+D,y:(0,d.a2)(n,this.top+We+D,this.bottom-e[0].height),line:0},(0,d.aA)(this.ctx,i.textDirection);const ke=pe+D;this.legendItems.forEach((He,Ye)=>{s.strokeStyle=He.fontColor,s.fillStyle=He.fontColor;const $e=s.measureText(He.text).width,Je=f.textAlign(He.textAlign||(He.textAlign=o.textAlign)),ft=ne+j+$e;let ut=Y.x,vt=Y.y;f.setWidth(this.width),Fe?Ye>0&&ut+ft+D>this.right&&(vt=Y.y+=ke,Y.line++,ut=Y.x=(0,d.a2)(n,this.left+D,this.right-t[Y.line])):Ye>0&&vt+ke>this.bottom&&(ut=Y.x=ut+e[Y.line].width+D,Y.line++,vt=Y.y=(0,d.a2)(n,this.top+We+D,this.bottom-e[Y.line].height)),function(He,Ye,$e){if(isNaN(ne)||ne<=0||isNaN(ce)||ce<0)return;s.save();const Je=(0,d.v)($e.lineWidth,1);if(s.fillStyle=(0,d.v)($e.fillStyle,c),s.lineCap=(0,d.v)($e.lineCap,"butt"),s.lineDashOffset=(0,d.v)($e.lineDashOffset,0),s.lineJoin=(0,d.v)($e.lineJoin,"miter"),s.lineWidth=Je,s.strokeStyle=(0,d.v)($e.strokeStyle,c),s.setLineDash((0,d.v)($e.lineDash,[])),o.usePointStyle){const ft={radius:ce*Math.SQRT2/2,pointStyle:$e.pointStyle,rotation:$e.rotation,borderWidth:Je},ut=f.xPlus(He,ne/2);(0,d.aD)(s,ft,ut,Ye+j,o.pointStyleWidth&&ne)}else{const ft=Ye+Math.max((B-ce)/2,0),ut=f.leftForLtr(He,ne),vt=(0,d.aw)($e.borderRadius);s.beginPath(),Object.values(vt).some(ni=>0!==ni)?(0,d.au)(s,{x:ut,y:ft,w:ne,h:ce,radius:vt}):s.rect(ut,ft,ne,ce),s.fill(),0!==Je&&s.stroke()}s.restore()}(f.x(ut),vt,He),ut=(0,d.aB)(Je,ut+ne+j,Fe?ut+ft:this.right,i.rtl),function(He,Ye,$e){(0,d.Z)(s,$e.text,He,Ye+pe/2,b,{strikethrough:$e.hidden,textAlign:f.textAlign($e.textAlign)})}(f.x(ut),vt,He),Fe?Y.x+=ft+D:Y.y+="string"!=typeof He.text?Mr(He,b.lineHeight)+D:ke}),(0,d.aC)(this.ctx,i.textDirection)}drawTitle(){const i=this.options,e=i.title,t=(0,d.a0)(e.font),s=(0,d.E)(e.padding);if(!e.display)return;const n=(0,d.az)(i.rtl,this.left,this.width),o=this.ctx,c=e.position,b=s.top+t.size/2;let D,B=this.left,j=this.width;if(this.isHorizontal())j=Math.max(...this.lineWidths),D=this.top+b,B=(0,d.a2)(i.align,B,this.right-j);else{const ne=this.columnSizes.reduce((ce,pe)=>Math.max(ce,pe.height),0);D=b+(0,d.a2)(i.align,this.top,this.bottom-ne-i.labels.padding-this._computeTitleHeight())}const Y=(0,d.a2)(c,B,B+j);o.textAlign=n.textAlign((0,d.a1)(c)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=t.string,(0,d.Z)(o,e.text,Y,D,t)}_computeTitleHeight(){const i=this.options.title,e=(0,d.a0)(i.font),t=(0,d.E)(i.padding);return i.display?e.lineHeight+t.height:0}_getLegendItemAt(i,e){let t,s,n;if((0,d.aj)(i,this.left,this.right)&&(0,d.aj)(e,this.top,this.bottom))for(n=this.legendHitBoxes,t=0;t<n.length;++t)if(s=n[t],(0,d.aj)(i,s.left,s.left+s.width)&&(0,d.aj)(e,s.top,s.top+s.height))return this.legendItems[t];return null}handleEvent(i){const e=this.options;if(!function Dr(r,i){return!(("mousemove"!==r&&"mouseout"!==r||!i.onHover&&!i.onLeave)&&(!i.onClick||"click"!==r&&"mouseup"!==r))}(i.type,e))return;const t=this._getLegendItemAt(i.x,i.y);if("mousemove"===i.type||"mouseout"===i.type){const s=this._hoveredItem,n=((r,i)=>null!==r&&null!==i&&r.datasetIndex===i.datasetIndex&&r.index===i.index)(s,t);s&&!n&&(0,d.Q)(e.onLeave,[i,s,this],this),this._hoveredItem=t,t&&!n&&(0,d.Q)(e.onHover,[i,t,this],this)}else t&&(0,d.Q)(e.onClick,[i,t,this],this)}}function Mr(r,i){return i*(r.text?r.text.length:0)}var os={id:"legend",_element:Zi,start(r,i,e){const t=r.legend=new Zi({ctx:r.ctx,options:e,chart:r});Ot.configure(r,t,e),Ot.addBox(r,t)},stop(r){Ot.removeBox(r,r.legend),delete r.legend},beforeUpdate(r,i,e){const t=r.legend;Ot.configure(r,t,e),t.options=e},afterUpdate(r){const i=r.legend;i.buildLabels(),i.adjustHitBoxes()},afterEvent(r,i){i.replay||r.legend.handleEvent(i.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(r,i,e){const t=i.datasetIndex,s=e.chart;s.isDatasetVisible(t)?(s.hide(t),i.hidden=!0):(s.show(t),i.hidden=!1)},onHover:null,onLeave:null,labels:{color:r=>r.chart.options.color,boxWidth:40,padding:10,generateLabels(r){const i=r.data.datasets,{labels:{usePointStyle:e,pointStyle:t,textAlign:s,color:n,useBorderRadius:o,borderRadius:c}}=r.legend.options;return r._getSortedDatasetMetas().map(f=>{const b=f.controller.getStyle(e?0:void 0),D=(0,d.E)(b.borderWidth);return{text:i[f.index].label,fillStyle:b.backgroundColor,fontColor:n,hidden:!f.visible,lineCap:b.borderCapStyle,lineDash:b.borderDash,lineDashOffset:b.borderDashOffset,lineJoin:b.borderJoinStyle,lineWidth:(D.width+D.height)/4,strokeStyle:b.borderColor,pointStyle:t||b.pointStyle,rotation:b.rotation,textAlign:s||b.textAlign,borderRadius:o&&(c||b.borderRadius),datasetIndex:f.index}},this)}},title:{color:r=>r.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:r=>!r.startsWith("on"),labels:{_scriptable:r=>!["generateLabels","filter","sort"].includes(r)}}};class Ps extends Ct{constructor(i){super(),this.chart=i.chart,this.options=i.options,this.ctx=i.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(i,e){const t=this.options;if(this.left=0,this.top=0,!t.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=i,this.height=this.bottom=e;const s=(0,d.b)(t.text)?t.text.length:1;this._padding=(0,d.E)(t.padding);const n=s*(0,d.a0)(t.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const i=this.options.position;return"top"===i||"bottom"===i}_drawArgs(i){const{top:e,left:t,bottom:s,right:n,options:o}=this,c=o.align;let b,D,B,f=0;return this.isHorizontal()?(D=(0,d.a2)(c,t,n),B=e+i,b=n-t):("left"===o.position?(D=t+i,B=(0,d.a2)(c,s,e),f=-.5*d.P):(D=n-i,B=(0,d.a2)(c,e,s),f=.5*d.P),b=s-e),{titleX:D,titleY:B,maxWidth:b,rotation:f}}draw(){const i=this.ctx,e=this.options;if(!e.display)return;const t=(0,d.a0)(e.font),n=t.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:f,rotation:b}=this._drawArgs(n);(0,d.Z)(i,e.text,0,0,t,{color:e.color,maxWidth:f,rotation:b,textAlign:(0,d.a1)(e.align),textBaseline:"middle",translation:[o,c]})}}var An={id:"title",_element:Ps,start(r,i,e){!function kn(r,i){const e=new Ps({ctx:r.ctx,options:i,chart:r});Ot.configure(r,e,i),Ot.addBox(r,e),r.titleBlock=e}(r,e)},stop(r){Ot.removeBox(r,r.titleBlock),delete r.titleBlock},beforeUpdate(r,i,e){const t=r.titleBlock;Ot.configure(r,t,e),t.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const $s=new WeakMap;var On={id:"subtitle",start(r,i,e){const t=new Ps({ctx:r.ctx,options:e,chart:r});Ot.configure(r,t,e),Ot.addBox(r,t),$s.set(r,t)},stop(r){Ot.removeBox(r,$s.get(r)),$s.delete(r)},beforeUpdate(r,i,e){const t=$s.get(r);Ot.configure(r,t,e),t.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ks={average(r){if(!r.length)return!1;let i,e,t=0,s=0,n=0;for(i=0,e=r.length;i<e;++i){const o=r[i].element;if(o&&o.hasValue()){const c=o.tooltipPosition();t+=c.x,s+=c.y,++n}}return{x:t/n,y:s/n}},nearest(r,i){if(!r.length)return!1;let n,o,c,e=i.x,t=i.y,s=Number.POSITIVE_INFINITY;for(n=0,o=r.length;n<o;++n){const f=r[n].element;if(f&&f.hasValue()){const b=f.getCenterPoint(),D=(0,d.aE)(i,b);D<s&&(s=D,c=f)}}if(c){const f=c.tooltipPosition();e=f.x,t=f.y}return{x:e,y:t}}};function Di(r,i){return i&&((0,d.b)(i)?Array.prototype.push.apply(r,i):r.push(i)),r}function Xi(r){return("string"==typeof r||r instanceof String)&&r.indexOf("\n")>-1?r.split("\n"):r}function Pn(r,i){const{element:e,datasetIndex:t,index:s}=i,n=r.getDatasetMeta(t).controller,{label:o,value:c}=n.getLabelAndValue(s);return{chart:r,label:o,parsed:n.getParsed(s),raw:r.data.datasets[t].data[s],formattedValue:c,dataset:n.getDataset(),dataIndex:s,datasetIndex:t,element:e}}function an(r,i){const e=r.chart.ctx,{body:t,footer:s,title:n}=r,{boxWidth:o,boxHeight:c}=i,f=(0,d.a0)(i.bodyFont),b=(0,d.a0)(i.titleFont),D=(0,d.a0)(i.footerFont),B=n.length,j=s.length,Y=t.length,ne=(0,d.E)(i.padding);let ce=ne.height,pe=0,Ee=t.reduce((We,ke)=>We+ke.before.length+ke.lines.length+ke.after.length,0);Ee+=r.beforeBody.length+r.afterBody.length,B&&(ce+=B*b.lineHeight+(B-1)*i.titleSpacing+i.titleMarginBottom),Ee&&(ce+=Y*(i.displayColors?Math.max(c,f.lineHeight):f.lineHeight)+(Ee-Y)*f.lineHeight+(Ee-1)*i.bodySpacing),j&&(ce+=i.footerMarginTop+j*D.lineHeight+(j-1)*i.footerSpacing);let ye=0;const Fe=function(We){pe=Math.max(pe,e.measureText(We).width+ye)};return e.save(),e.font=b.string,(0,d.F)(r.title,Fe),e.font=f.string,(0,d.F)(r.beforeBody.concat(r.afterBody),Fe),ye=i.displayColors?o+2+i.boxPadding:0,(0,d.F)(t,We=>{(0,d.F)(We.before,Fe),(0,d.F)(We.lines,Fe),(0,d.F)(We.after,Fe)}),ye=0,e.font=D.string,(0,d.F)(r.footer,Fe),e.restore(),pe+=ne.width,{width:pe,height:ce}}function In(r,i,e,t){const{x:s,width:n}=e,{width:o,chartArea:{left:c,right:f}}=r;let b="center";return"center"===t?b=s<=(c+f)/2?"left":"right":s<=n/2?b="left":s>=o-n/2&&(b="right"),function Rn(r,i,e,t){const{x:s,width:n}=t,o=e.caretSize+e.caretPadding;if("left"===r&&s+n+o>i.width||"right"===r&&s-n-o<0)return!0}(b,r,i,e)&&(b="center"),b}function gn(r,i,e){const t=e.yAlign||i.yAlign||function Ln(r,i){const{y:e,height:t}=i;return e<t/2?"top":e>r.height-t/2?"bottom":"center"}(r,e);return{xAlign:e.xAlign||i.xAlign||In(r,i,e,t),yAlign:t}}function mn(r,i,e,t){const{caretSize:s,caretPadding:n,cornerRadius:o}=r,{xAlign:c,yAlign:f}=e,b=s+n,{topLeft:D,topRight:B,bottomLeft:j,bottomRight:Y}=(0,d.aw)(o);let ne=function Bn(r,i){let{x:e,width:t}=r;return"right"===i?e-=t:"center"===i&&(e-=t/2),e}(i,c);const ce=function Fn(r,i,e){let{y:t,height:s}=r;return"top"===i?t+=e:t-="bottom"===i?s+e:s/2,t}(i,f,b);return"center"===f?"left"===c?ne+=b:"right"===c&&(ne-=b):"left"===c?ne-=Math.max(D,j)+s:"right"===c&&(ne+=Math.max(B,Y)+s),{x:(0,d.S)(ne,0,t.width-i.width),y:(0,d.S)(ce,0,t.height-i.height)}}function kr(r,i,e){const t=(0,d.E)(e.padding);return"center"===i?r.x+r.width/2:"right"===i?r.x+r.width-t.right:r.x+t.left}function vn(r){return Di([],Xi(r))}function Nn(r,i){const e=i&&i.dataset&&i.dataset.tooltip&&i.dataset.tooltip.callbacks;return e?r.override(e):r}const bn={beforeTitle:d.aF,title(r){if(r.length>0){const i=r[0],e=i.chart.data.labels,t=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return i.dataset.label||"";if(i.label)return i.label;if(t>0&&i.dataIndex<t)return e[i.dataIndex]}return""},afterTitle:d.aF,beforeBody:d.aF,beforeLabel:d.aF,label(r){if(this&&this.options&&"dataset"===this.options.mode)return r.label+": "+r.formattedValue||r.formattedValue;let i=r.dataset.label||"";i&&(i+=": ");const e=r.formattedValue;return(0,d.k)(e)||(i+=e),i},labelColor(r){const e=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(r){const e=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:d.aF,afterBody:d.aF,beforeFooter:d.aF,footer:d.aF,afterFooter:d.aF};function li(r,i,e,t){const s=r[i].call(e,t);return typeof s>"u"?bn[i].call(e,t):s}let Sn=(()=>{class r extends Ct{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&t.options.animation&&s.animations,o=new m(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function Hn(r,i,e){return(0,d.j)(r,{tooltip:i,tooltipItems:e,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:s}=t,n=li(s,"beforeTitle",this,e),o=li(s,"title",this,e),c=li(s,"afterTitle",this,e);let f=[];return f=Di(f,Xi(n)),f=Di(f,Xi(o)),f=Di(f,Xi(c)),f}getBeforeBody(e,t){return vn(li(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,n=[];return(0,d.F)(e,o=>{const c={before:[],lines:[],after:[]},f=Nn(s,o);Di(c.before,Xi(li(f,"beforeLabel",this,o))),Di(c.lines,li(f,"label",this,o)),Di(c.after,Xi(li(f,"afterLabel",this,o))),n.push(c)}),n}getAfterBody(e,t){return vn(li(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,n=li(s,"beforeFooter",this,e),o=li(s,"footer",this,e),c=li(s,"afterFooter",this,e);let f=[];return f=Di(f,Xi(n)),f=Di(f,Xi(o)),f=Di(f,Xi(c)),f}_createItems(e){const t=this._active,s=this.chart.data,n=[],o=[],c=[];let b,D,f=[];for(b=0,D=t.length;b<D;++b)f.push(Pn(this.chart,t[b]));return e.filter&&(f=f.filter((B,j,Y)=>e.filter(B,j,Y,s))),e.itemSort&&(f=f.sort((B,j)=>e.itemSort(B,j,s))),(0,d.F)(f,B=>{const j=Nn(e.callbacks,B);n.push(li(j,"labelColor",this,B)),o.push(li(j,"labelPointStyle",this,B)),c.push(li(j,"labelTextColor",this,B))}),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=c,this.dataPoints=f,f}update(e,t){const s=this.options.setContext(this.getContext()),n=this._active;let o,c=[];if(n.length){const f=Ks[s.position].call(this,n,this._eventPosition);c=this._createItems(s),this.title=this.getTitle(c,s),this.beforeBody=this.getBeforeBody(c,s),this.body=this.getBody(c,s),this.afterBody=this.getAfterBody(c,s),this.footer=this.getFooter(c,s);const b=this._size=an(this,s),D=Object.assign({},f,b),B=gn(this.chart,s,D),j=mn(s,D,B,this.chart);this.xAlign=B.xAlign,this.yAlign=B.yAlign,o={opacity:1,x:j.x,y:j.y,width:b.width,height:b.height,caretX:f.x,caretY:f.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=c,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,n){const o=this.getCaretPosition(e,s,n);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,s){const{xAlign:n,yAlign:o}=this,{caretSize:c,cornerRadius:f}=s,{topLeft:b,topRight:D,bottomLeft:B,bottomRight:j}=(0,d.aw)(f),{x:Y,y:ne}=e,{width:ce,height:pe}=t;let Ee,ye,Fe,We,ke,He;return"center"===o?(ke=ne+pe/2,"left"===n?(Ee=Y,ye=Ee-c,We=ke+c,He=ke-c):(Ee=Y+ce,ye=Ee+c,We=ke-c,He=ke+c),Fe=Ee):(ye="left"===n?Y+Math.max(b,B)+c:"right"===n?Y+ce-Math.max(D,j)-c:this.caretX,"top"===o?(We=ne,ke=We-c,Ee=ye-c,Fe=ye+c):(We=ne+pe,ke=We+c,Ee=ye+c,Fe=ye-c),He=We),{x1:Ee,x2:ye,x3:Fe,y1:We,y2:ke,y3:He}}drawTitle(e,t,s){const n=this.title,o=n.length;let c,f,b;if(o){const D=(0,d.az)(s.rtl,this.x,this.width);for(e.x=kr(this,s.titleAlign,s),t.textAlign=D.textAlign(s.titleAlign),t.textBaseline="middle",c=(0,d.a0)(s.titleFont),f=s.titleSpacing,t.fillStyle=s.titleColor,t.font=c.string,b=0;b<o;++b)t.fillText(n[b],D.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+f,b+1===o&&(e.y+=s.titleMarginBottom-f)}}_drawColorBox(e,t,s,n,o){const c=this.labelColors[s],f=this.labelPointStyles[s],{boxHeight:b,boxWidth:D}=o,B=(0,d.a0)(o.bodyFont),j=kr(this,"left",o),Y=n.x(j),ce=t.y+(b<B.lineHeight?(B.lineHeight-b)/2:0);if(o.usePointStyle){const pe={radius:Math.min(D,b)/2,pointStyle:f.pointStyle,rotation:f.rotation,borderWidth:1},Ee=n.leftForLtr(Y,D)+D/2,ye=ce+b/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,(0,d.at)(e,pe,Ee,ye),e.strokeStyle=c.borderColor,e.fillStyle=c.backgroundColor,(0,d.at)(e,pe,Ee,ye)}else{e.lineWidth=(0,d.i)(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,e.strokeStyle=c.borderColor,e.setLineDash(c.borderDash||[]),e.lineDashOffset=c.borderDashOffset||0;const pe=n.leftForLtr(Y,D),Ee=n.leftForLtr(n.xPlus(Y,1),D-2),ye=(0,d.aw)(c.borderRadius);Object.values(ye).some(Fe=>0!==Fe)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,(0,d.au)(e,{x:pe,y:ce,w:D,h:b,radius:ye}),e.fill(),e.stroke(),e.fillStyle=c.backgroundColor,e.beginPath(),(0,d.au)(e,{x:Ee,y:ce+1,w:D-2,h:b-2,radius:ye}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(pe,ce,D,b),e.strokeRect(pe,ce,D,b),e.fillStyle=c.backgroundColor,e.fillRect(Ee,ce+1,D-2,b-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:n}=this,{bodySpacing:o,bodyAlign:c,displayColors:f,boxHeight:b,boxWidth:D,boxPadding:B}=s,j=(0,d.a0)(s.bodyFont);let Y=j.lineHeight,ne=0;const ce=(0,d.az)(s.rtl,this.x,this.width),pe=function(Je){t.fillText(Je,ce.x(e.x+ne),e.y+Y/2),e.y+=Y+o},Ee=ce.textAlign(c);let ye,Fe,We,ke,He,Ye,$e;for(t.textAlign=c,t.textBaseline="middle",t.font=j.string,e.x=kr(this,Ee,s),t.fillStyle=s.bodyColor,(0,d.F)(this.beforeBody,pe),ne=f&&"right"!==Ee?"center"===c?D/2+B:D+2+B:0,ke=0,Ye=n.length;ke<Ye;++ke){for(ye=n[ke],Fe=this.labelTextColors[ke],t.fillStyle=Fe,(0,d.F)(ye.before,pe),We=ye.lines,f&&We.length&&(this._drawColorBox(t,e,ke,ce,s),Y=Math.max(j.lineHeight,b)),He=0,$e=We.length;He<$e;++He)pe(We[He]),Y=j.lineHeight;(0,d.F)(ye.after,pe)}ne=0,Y=j.lineHeight,(0,d.F)(this.afterBody,pe),e.y-=o}drawFooter(e,t,s){const n=this.footer,o=n.length;let c,f;if(o){const b=(0,d.az)(s.rtl,this.x,this.width);for(e.x=kr(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=b.textAlign(s.footerAlign),t.textBaseline="middle",c=(0,d.a0)(s.footerFont),t.fillStyle=s.footerColor,t.font=c.string,f=0;f<o;++f)t.fillText(n[f],b.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+s.footerSpacing}}drawBackground(e,t,s,n){const{xAlign:o,yAlign:c}=this,{x:f,y:b}=e,{width:D,height:B}=s,{topLeft:j,topRight:Y,bottomLeft:ne,bottomRight:ce}=(0,d.aw)(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(f+j,b),"top"===c&&this.drawCaret(e,t,s,n),t.lineTo(f+D-Y,b),t.quadraticCurveTo(f+D,b,f+D,b+Y),"center"===c&&"right"===o&&this.drawCaret(e,t,s,n),t.lineTo(f+D,b+B-ce),t.quadraticCurveTo(f+D,b+B,f+D-ce,b+B),"bottom"===c&&this.drawCaret(e,t,s,n),t.lineTo(f+ne,b+B),t.quadraticCurveTo(f,b+B,f,b+B-ne),"center"===c&&"left"===o&&this.drawCaret(e,t,s,n),t.lineTo(f,b+j),t.quadraticCurveTo(f,b,f+j,b),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,n=s&&s.x,o=s&&s.y;if(n||o){const c=Ks[e.position].call(this,this._active,this._eventPosition);if(!c)return;const f=this._size=an(this,e),b=Object.assign({},c,this._size),D=gn(t,e,b),B=mn(e,b,D,t);(n._to!==B.x||o._to!==B.y)&&(this.xAlign=D.xAlign,this.yAlign=D.yAlign,this.width=f.width,this.height=f.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,B))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const c=(0,d.E)(t.padding);t.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=s,this.drawBackground(o,e,n,t),(0,d.aA)(e,t.textDirection),o.y+=c.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),(0,d.aC)(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,n=e.map(({datasetIndex:f,index:b})=>{const D=this.chart.getDatasetMeta(f);if(!D)throw new Error("Cannot find a dataset at index "+f);return{datasetIndex:f,element:D.data[b],index:b}}),o=!(0,d.ah)(s,n),c=this._positionChanged(n,t);(o||c)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,s=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,o=this._active||[],c=this._getActiveElements(e,o,t,s),f=this._positionChanged(c,e),b=t||!(0,d.ah)(c,o)||f;return b&&(this._active=c,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),b}_getActiveElements(e,t,s,n){const o=this.options;if("mouseout"===e.type)return[];if(!n)return t.filter(f=>this.chart.data.datasets[f.datasetIndex]&&void 0!==this.chart.getDatasetMeta(f.datasetIndex).controller.getParsed(f.index));const c=this.chart.getElementsAtEventForMode(e,o.mode,o,s);return o.reverse&&c.reverse(),c}_positionChanged(e,t){const{caretX:s,caretY:n,options:o}=this,c=Ks[o.position].call(this,e,t);return!1!==c&&(s!==c.x||n!==c.y)}}return(0,Z.Z)(r,"positioners",Ks),r})();var zn=Object.freeze({__proto__:null,Colors:Jr,Decimation:tn,Filler:at,Legend:os,SubTitle:On,Title:An,Tooltip:{id:"tooltip",_element:Sn,positioners:Ks,afterInit(r,i,e){e&&(r.tooltip=new Sn({chart:r,options:e}))},beforeUpdate(r,i,e){r.tooltip&&r.tooltip.initialize(e)},reset(r,i,e){r.tooltip&&r.tooltip.initialize(e)},afterDraw(r){const i=r.tooltip;if(i&&i._willRender()){const e={tooltip:i};if(!1===r.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0}))return;i.draw(r.ctx),r.notifyPlugins("afterTooltipDraw",e)}},afterEvent(r,i){r.tooltip&&r.tooltip.handleEvent(i.event,i.replay,i.inChartArea)&&(i.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(r,i)=>i.bodyFont.size,boxWidth:(r,i)=>i.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:bn},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:r=>"filter"!==r&&"itemSort"!==r&&"external"!==r,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});function yn(r){const i=this.getLabels();return r>=0&&r<i.length?i[r]:r}let Cn=(()=>{class r extends si{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const s=this.getLabels();for(const{index:n,label:o}of t)s[n]===o&&s.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if((0,d.k)(e))return null;const s=this.getLabels();return((r,i)=>null===r?null:(0,d.S)(Math.round(r),0,i))(t=isFinite(t)&&s[t]===e?t:function jn(r,i,e,t){const s=r.indexOf(i);return-1===s?((r,i,e,t)=>("string"==typeof i?(e=r.push(i)-1,t.unshift({index:e,label:i})):isNaN(i)&&(e=null),e))(r,i,e,t):s!==r.lastIndexOf(i)?e:s}(s,e,(0,d.v)(t,e),this._addedLabels),s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(s=0),t||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const e=this.min,t=this.max,s=this.options.offset,n=[];let o=this.getLabels();o=0===e&&t===o.length-1?o:o.slice(e,t+1),this._valueRange=Math.max(o.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let c=e;c<=t;c++)n.push({value:c});return n}getLabelForValue(e){return yn.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}return(0,Z.Z)(r,"id","category"),(0,Z.Z)(r,"defaults",{ticks:{callback:yn}}),r})();function xn(r,i,{horizontal:e,minRotation:t}){const s=(0,d.t)(t),n=(e?Math.sin(s):Math.cos(s))||.001;return Math.min(i/n,.75*i*(""+r).length)}class Ar extends si{constructor(i){super(i),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(i,e){return(0,d.k)(i)||("number"==typeof i||i instanceof Number)&&!isFinite(+i)?null:+i}handleTickRangeOptions(){const{beginAtZero:i}=this.options,{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:n}=this;const o=f=>s=e?s:f,c=f=>n=t?n:f;if(i){const f=(0,d.s)(s),b=(0,d.s)(n);f<0&&b<0?c(0):f>0&&b>0&&o(0)}if(s===n){let f=0===n?1:Math.abs(.05*n);c(n+f),i||o(s-f)}this.min=s,this.max=n}getTickLimit(){const i=this.options.ticks;let s,{maxTicksLimit:e,stepSize:t}=i;return t?(s=Math.ceil(this.max/t)-Math.floor(this.min/t)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${t} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const i=this.options,e=i.ticks;let t=this.getTickLimit();t=Math.max(2,t);const o=function Vn(r,i){const e=[],{bounds:s,step:n,min:o,max:c,precision:f,count:b,maxTicks:D,maxDigits:B,includeBounds:j}=r,Y=n||1,ne=D-1,{min:ce,max:pe}=i,Ee=!(0,d.k)(o),ye=!(0,d.k)(c),Fe=!(0,d.k)(b),We=(pe-ce)/(B+1);let He,Ye,$e,Je,ke=(0,d.aH)((pe-ce)/ne/Y)*Y;if(ke<1e-14&&!Ee&&!ye)return[{value:ce},{value:pe}];Je=Math.ceil(pe/ke)-Math.floor(ce/ke),Je>ne&&(ke=(0,d.aH)(Je*ke/ne/Y)*Y),(0,d.k)(f)||(He=Math.pow(10,f),ke=Math.ceil(ke*He)/He),"ticks"===s?(Ye=Math.floor(ce/ke)*ke,$e=Math.ceil(pe/ke)*ke):(Ye=ce,$e=pe),Ee&&ye&&n&&(0,d.aI)((c-o)/n,ke/1e3)?(Je=Math.round(Math.min((c-o)/ke,D)),ke=(c-o)/Je,Ye=o,$e=c):Fe?(Ye=Ee?o:Ye,$e=ye?c:$e,Je=b-1,ke=($e-Ye)/Je):(Je=($e-Ye)/ke,Je=(0,d.aJ)(Je,Math.round(Je),ke/1e3)?Math.round(Je):Math.ceil(Je));const ft=Math.max((0,d.aK)(ke),(0,d.aK)(Ye));He=Math.pow(10,(0,d.k)(f)?ft:f),Ye=Math.round(Ye*He)/He,$e=Math.round($e*He)/He;let ut=0;for(Ee&&(j&&Ye!==o?(e.push({value:o}),Ye<o&&ut++,(0,d.aJ)(Math.round((Ye+ut*ke)*He)/He,o,xn(o,We,r))&&ut++):Ye<o&&ut++);ut<Je;++ut){const vt=Math.round((Ye+ut*ke)*He)/He;if(ye&&vt>c)break;e.push({value:vt})}return ye&&j&&$e!==c?e.length&&(0,d.aJ)(e[e.length-1].value,c,xn(c,We,r))?e[e.length-1].value=c:e.push({value:c}):(!ye||$e===c)&&e.push({value:$e}),e}({maxTicks:t,bounds:i.bounds,min:i.min,max:i.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===i.bounds&&(0,d.aG)(o,this,"value"),i.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const i=this.ticks;let e=this.min,t=this.max;if(super.configure(),this.options.offset&&i.length){const s=(t-e)/Math.max(i.length-1,1)/2;e-=s,t+=s}this._startValue=e,this._endValue=t,this._valueRange=t-e}getLabelForValue(i){return(0,d.o)(i,this.chart.options.locale,this.options.ticks.format)}}class ln extends Ar{determineDataLimits(){const{min:i,max:e}=this.getMinMax(!0);this.min=(0,d.g)(i)?i:0,this.max=(0,d.g)(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const i=this.isHorizontal(),e=i?this.width:this.height,t=(0,d.t)(this.options.ticks.minRotation),s=(i?Math.sin(t):Math.cos(t))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,n.lineHeight/s))}getPixelForValue(i){return null===i?NaN:this.getPixelForDecimal((i-this._startValue)/this._valueRange)}getValueForPixel(i){return this._startValue+this.getDecimalForPixel(i)*this._valueRange}}(0,Z.Z)(ln,"id","linear"),(0,Z.Z)(ln,"defaults",{ticks:{callback:d.aL.formatters.numeric}});const Si=r=>Math.floor((0,d.aM)(r)),Gi=(r,i)=>Math.pow(10,Si(r)+i);function wn(r){return r/Math.pow(10,Si(r))==1}function qi(r,i,e){const t=Math.pow(10,e),s=Math.floor(r/t);return Math.ceil(i/t)-s}class z extends si{constructor(i){super(i),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(i,e){const t=Ar.prototype.parse.apply(this,[i,e]);if(0!==t)return(0,d.g)(t)&&t>0?t:null;this._zero=!0}determineDataLimits(){const{min:i,max:e}=this.getMinMax(!0);this.min=(0,d.g)(i)?Math.max(0,i):null,this.max=(0,d.g)(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!(0,d.g)(this._userMin)&&(this.min=i===Gi(this.min,0)?Gi(this.min,-1):Gi(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:i,maxDefined:e}=this.getUserBounds();let t=this.min,s=this.max;const n=c=>t=i?t:c,o=c=>s=e?s:c;t===s&&(t<=0?(n(1),o(10)):(n(Gi(t,-1)),o(Gi(s,1)))),t<=0&&n(Gi(s,-1)),s<=0&&o(Gi(t,1)),this.min=t,this.max=s}buildTicks(){const i=this.options,t=function $n(r,{min:i,max:e}){i=(0,d.O)(r.min,i);const t=[],s=Si(i);let n=function En(r,i){let t=Si(i-r);for(;qi(r,i,t)>10;)t++;for(;qi(r,i,t)<10;)t--;return Math.min(t,Si(r))}(i,e),o=n<0?Math.pow(10,Math.abs(n)):1;const c=Math.pow(10,n),f=s>n?Math.pow(10,s):0,b=Math.round((i-f)*o)/o,D=Math.floor((i-f)/c/10)*c*10;let B=Math.floor((b-D)/Math.pow(10,n)),j=(0,d.O)(r.min,Math.round((f+D+B*Math.pow(10,n))*o)/o);for(;j<e;)t.push({value:j,major:wn(j),significand:B}),B>=10?B=B<15?15:20:B++,B>=20&&(n++,B=2,o=n>=0?1:o),j=Math.round((f+D+B*Math.pow(10,n))*o)/o;const Y=(0,d.O)(r.max,j);return t.push({value:Y,major:wn(Y),significand:B}),t}({min:this._userMin,max:this._userMax},this);return"ticks"===i.bounds&&(0,d.aG)(t,this,"value"),i.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(i){return void 0===i?"0":(0,d.o)(i,this.chart.options.locale,this.options.ticks.format)}configure(){const i=this.min;super.configure(),this._startValue=(0,d.aM)(i),this._valueRange=(0,d.aM)(this.max)-(0,d.aM)(i)}getPixelForValue(i){return(void 0===i||0===i)&&(i=this.min),null===i||isNaN(i)?NaN:this.getPixelForDecimal(i===this.min?0:((0,d.aM)(i)-this._startValue)/this._valueRange)}getValueForPixel(i){const e=this.getDecimalForPixel(i);return Math.pow(10,this._startValue+e*this._valueRange)}}function re(r){const i=r.ticks;if(i.display&&r.display){const e=(0,d.E)(i.backdropPadding);return(0,d.v)(i.font&&i.font.size,d.d.font.size)+e.height}return 0}function ve(r,i,e){return e=(0,d.b)(e)?e:[e],{w:(0,d.aN)(r,i.string,e),h:e.length*i.lineHeight}}function Le(r,i,e,t,s){return r===t||r===s?{start:i-e/2,end:i+e/2}:r<t||r>s?{start:i-e,end:i}:{start:i,end:i+e}}function St(r,i,e,t,s){const n=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let c=0,f=0;t.start<i.l?(c=(i.l-t.start)/n,r.l=Math.min(r.l,i.l-c)):t.end>i.r&&(c=(t.end-i.r)/n,r.r=Math.max(r.r,i.r+c)),s.start<i.t?(f=(i.t-s.start)/o,r.t=Math.min(r.t,i.t-f)):s.end>i.b&&(f=(s.end-i.b)/o,r.b=Math.max(r.b,i.b+f))}function mt(r,i,e){const t=r.drawingArea,{extra:s,additionalAngle:n,padding:o,size:c}=e,f=r.getPointPosition(i,t+s+o,n),b=Math.round((0,d.U)((0,d.ay)(f.angle+d.H))),D=function Ys(r,i,e){return 90===e||270===e?r-=i/2:(e>270||e<90)&&(r-=i),r}(f.y,c.h,b),B=function yi(r){return 0===r||180===r?"center":r<180?"left":"right"}(b),j=function _i(r,i,e){return"right"===e?r-=i:"center"===e&&(r-=i/2),r}(f.x,c.w,B);return{visible:!0,x:f.x,y:D,textAlign:B,left:j,top:D,right:j+c.w,bottom:D+c.h}}function gt(r,i){if(!i)return!0;const{left:e,top:t,right:s,bottom:n}=r;return!((0,d.C)({x:e,y:t},i)||(0,d.C)({x:e,y:n},i)||(0,d.C)({x:s,y:t},i)||(0,d.C)({x:s,y:n},i))}function cn(r,i,e){const{left:t,top:s,right:n,bottom:o}=e,{backdropColor:c}=i;if(!(0,d.k)(c)){const f=(0,d.aw)(i.borderRadius),b=(0,d.E)(i.backdropPadding);r.fillStyle=c;const D=t-b.left,B=s-b.top,j=n-t+b.width,Y=o-s+b.height;Object.values(f).some(ne=>0!==ne)?(r.beginPath(),(0,d.au)(r,{x:D,y:B,w:j,h:Y,radius:f}),r.fill()):r.fillRect(D,B,j,Y)}}function dn(r,i,e,t){const{ctx:s}=r;if(e)s.arc(r.xCenter,r.yCenter,i,0,d.T);else{let n=r.getPointPosition(0,i);s.moveTo(n.x,n.y);for(let o=1;o<t;o++)n=r.getPointPosition(o,i),s.lineTo(n.x,n.y)}}(0,Z.Z)(z,"id","logarithmic"),(0,Z.Z)(z,"defaults",{ticks:{callback:d.aL.formatters.logarithmic,major:{enabled:!0}}});class un extends Ar{constructor(i){super(i),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const i=this._padding=(0,d.E)(re(this.options)/2),e=this.width=this.maxWidth-i.width,t=this.height=this.maxHeight-i.height;this.xCenter=Math.floor(this.left+e/2+i.left),this.yCenter=Math.floor(this.top+t/2+i.top),this.drawingArea=Math.floor(Math.min(e,t)/2)}determineDataLimits(){const{min:i,max:e}=this.getMinMax(!1);this.min=(0,d.g)(i)&&!isNaN(i)?i:0,this.max=(0,d.g)(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/re(this.options))}generateTickLabels(i){Ar.prototype.generateTickLabels.call(this,i),this._pointLabels=this.getLabels().map((e,t)=>{const s=(0,d.Q)(this.options.pointLabels.callback,[e,t],this);return s||0===s?s:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const i=this.options;i.display&&i.pointLabels.display?function lt(r){const i={l:r.left+r._padding.left,r:r.right-r._padding.right,t:r.top+r._padding.top,b:r.bottom-r._padding.bottom},e=Object.assign({},i),t=[],s=[],n=r._pointLabels.length,o=r.options.pointLabels,c=o.centerPointLabels?d.P/n:0;for(let f=0;f<n;f++){const b=o.setContext(r.getPointLabelContext(f));s[f]=b.padding;const D=r.getPointPosition(f,r.drawingArea+s[f],c),B=(0,d.a0)(b.font),j=ve(r.ctx,B,r._pointLabels[f]);t[f]=j;const Y=(0,d.ay)(r.getIndexAngle(f)+c),ne=Math.round((0,d.U)(Y));St(e,i,Y,Le(ne,D.x,j.w,0,180),Le(ne,D.y,j.h,90,270))}r.setCenterPoint(i.l-e.l,e.r-i.r,i.t-e.t,e.b-i.b),r._pointLabelItems=function Rt(r,i,e){const t=[],s=r._pointLabels.length,n=r.options,{centerPointLabels:o,display:c}=n.pointLabels,f={extra:re(n)/2,additionalAngle:o?d.P/s:0};let b;for(let D=0;D<s;D++){f.padding=e[D],f.size=i[D];const B=mt(r,D,f);t.push(B),"auto"===c&&(B.visible=gt(B,b),B.visible&&(b=B))}return t}(r,t,s)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(i,e,t,s){this.xCenter+=Math.floor((i-e)/2),this.yCenter+=Math.floor((t-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(i,e,t,s))}getIndexAngle(i){return(0,d.ay)(i*(d.T/(this._pointLabels.length||1))+(0,d.t)(this.options.startAngle||0))}getDistanceFromCenterForValue(i){if((0,d.k)(i))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-i)*e:(i-this.min)*e}getValueForDistanceFromCenter(i){if((0,d.k)(i))return NaN;const e=i/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(i){const e=this._pointLabels||[];if(i>=0&&i<e.length){const t=e[i];return function io(r,i,e){return(0,d.j)(r,{label:e,index:i,type:"pointLabel"})}(this.getContext(),i,t)}}getPointPosition(i,e,t=0){const s=this.getIndexAngle(i)-d.H+t;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(i,e){return this.getPointPosition(i,this.getDistanceFromCenterForValue(e))}getBasePosition(i){return this.getPointPositionForValue(i||0,this.getBaseValue())}getPointLabelPosition(i){const{left:e,top:t,right:s,bottom:n}=this._pointLabelItems[i];return{left:e,top:t,right:s,bottom:n}}drawBackground(){const{backgroundColor:i,grid:{circular:e}}=this.options;if(i){const t=this.ctx;t.save(),t.beginPath(),dn(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),t.closePath(),t.fillStyle=i,t.fill(),t.restore()}}drawGrid(){const i=this.ctx,e=this.options,{angleLines:t,grid:s,border:n}=e,o=this._pointLabels.length;let c,f,b;if(e.pointLabels.display&&function hn(r,i){const{ctx:e,options:{pointLabels:t}}=r;for(let s=i-1;s>=0;s--){const n=r._pointLabelItems[s];if(!n.visible)continue;const o=t.setContext(r.getPointLabelContext(s));cn(e,o,n);const c=(0,d.a0)(o.font),{x:f,y:b,textAlign:D}=n;(0,d.Z)(e,r._pointLabels[s],f,b+c.lineHeight/2,c,{color:o.color,textAlign:D,textBaseline:"middle"})}}(this,o),s.display&&this.ticks.forEach((D,B)=>{if(0!==B){f=this.getDistanceFromCenterForValue(D.value);const j=this.getContext(B),Y=s.setContext(j),ne=n.setContext(j);!function to(r,i,e,t,s){const n=r.ctx,o=i.circular,{color:c,lineWidth:f}=i;!o&&!t||!c||!f||e<0||(n.save(),n.strokeStyle=c,n.lineWidth=f,n.setLineDash(s.dash),n.lineDashOffset=s.dashOffset,n.beginPath(),dn(r,e,o,t),n.closePath(),n.stroke(),n.restore())}(this,Y,f,o,ne)}}),t.display){for(i.save(),c=o-1;c>=0;c--){const D=t.setContext(this.getPointLabelContext(c)),{color:B,lineWidth:j}=D;!j||!B||(i.lineWidth=j,i.strokeStyle=B,i.setLineDash(D.borderDash),i.lineDashOffset=D.borderDashOffset,f=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),b=this.getPointPosition(c,f),i.beginPath(),i.moveTo(this.xCenter,this.yCenter),i.lineTo(b.x,b.y),i.stroke())}i.restore()}}drawBorder(){}drawLabels(){const i=this.ctx,e=this.options,t=e.ticks;if(!t.display)return;const s=this.getIndexAngle(0);let n,o;i.save(),i.translate(this.xCenter,this.yCenter),i.rotate(s),i.textAlign="center",i.textBaseline="middle",this.ticks.forEach((c,f)=>{if(0===f&&!e.reverse)return;const b=t.setContext(this.getContext(f)),D=(0,d.a0)(b.font);if(n=this.getDistanceFromCenterForValue(this.ticks[f].value),b.showLabelBackdrop){i.font=D.string,o=i.measureText(c.label).width,i.fillStyle=b.backdropColor;const B=(0,d.E)(b.backdropPadding);i.fillRect(-o/2-B.left,-n-D.size/2-B.top,o+B.width,D.size+B.height)}(0,d.Z)(i,c.label,0,-n,D,{color:b.color,strokeColor:b.textStrokeColor,strokeWidth:b.textStrokeWidth})}),i.restore()}drawTitle(){}}(0,Z.Z)(un,"id","radialLinear"),(0,Z.Z)(un,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:d.aL.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:r=>r,padding:5,centerPointLabels:!1}}),(0,Z.Z)(un,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,Z.Z)(un,"descriptors",{angleLines:{_fallback:"grid"}});const Tn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ci=Object.keys(Tn);function Xn(r,i){return r-i}function Gn(r,i){if((0,d.k)(i))return null;const e=r._adapter,{parser:t,round:s,isoWeekday:n}=r._parseOpts;let o=i;return"function"==typeof t&&(o=t(o)),(0,d.g)(o)||(o="string"==typeof t?e.parse(o,t):e.parse(o)),null===o?null:(s&&(o="week"!==s||!(0,d.x)(n)&&!0!==n?e.startOf(o,s):e.startOf(o,"isoWeek",n)),+o)}function qn(r,i,e,t){const s=Ci.length;for(let n=Ci.indexOf(r);n<s-1;++n){const o=Tn[Ci[n]];if(o.common&&Math.ceil((e-i)/((o.steps?o.steps:Number.MAX_SAFE_INTEGER)*o.size))<=t)return Ci[n]}return Ci[s-1]}function Qn(r,i,e){if(e){if(e.length){const{lo:t,hi:s}=(0,d.aP)(e,i);r[e[t]>=i?e[t]:e[s]]=!0}}else r[i]=!0}function Jn(r,i,e){const t=[],s={},n=i.length;let o,c;for(o=0;o<n;++o)c=i[o],s[c]=o,t.push({value:c,major:!1});return 0!==n&&e?function no(r,i,e,t){const s=r._adapter,n=+s.startOf(i[0].value,t),o=i[i.length-1].value;let c,f;for(c=n;c<=o;c=+s.add(c,1,t))f=e[c],f>=0&&(i[f].major=!0);return i}(r,t,s,e):t}let Kn=(()=>{class r extends si{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const s=e.time||(e.time={}),n=this._adapter=new ct__date(e.adapters.date);n.init(t),(0,d.ab)(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Gn(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:n,max:o,minDefined:c,maxDefined:f}=this.getUserBounds();function b(D){!c&&!isNaN(D.min)&&(n=Math.min(n,D.min)),!f&&!isNaN(D.max)&&(o=Math.max(o,D.max))}(!c||!f)&&(b(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&b(this.getMinMax(!1))),n=(0,d.g)(n)&&!isNaN(n)?n:+t.startOf(Date.now(),s),o=(0,d.g)(o)&&!isNaN(o)?o:+t.endOf(Date.now(),s)+1,this.min=Math.min(n,o-1),this.max=Math.max(n+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,n="labels"===s.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const o=this.min,f=(0,d.aO)(n,o,this.max);return this._unit=t.unit||(s.autoSkip?qn(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):function so(r,i,e,t,s){for(let n=Ci.length-1;n>=Ci.indexOf(e);n--){const o=Ci[n];if(Tn[o].common&&r._adapter.diff(s,t,o)>=i-1)return o}return Ci[e?Ci.indexOf(e):0]}(this,f.length,t.minUnit,this.min,this.max)),this._majorUnit=s.major.enabled&&"year"!==this._unit?function ro(r){for(let i=Ci.indexOf(r)+1,e=Ci.length;i<e;++i)if(Tn[Ci[i]].common)return Ci[i]}(this._unit):void 0,this.initOffsets(n),e.reverse&&f.reverse(),Jn(this,f,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n,o,t=0,s=0;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),t=1===e.length?1-n:(this.getDecimalForValue(e[1])-n)/2,o=this.getDecimalForValue(e[e.length-1]),s=1===e.length?o:(o-this.getDecimalForValue(e[e.length-2]))/2);const c=e.length<3?.5:.25;t=(0,d.S)(t,0,c),s=(0,d.S)(s,0,c),this._offsets={start:t,end:s,factor:1/(t+1+s)}}_generate(){const e=this._adapter,t=this.min,s=this.max,n=this.options,o=n.time,c=o.unit||qn(o.minUnit,t,s,this._getLabelCapacity(t)),f=(0,d.v)(n.ticks.stepSize,1),b="week"===c&&o.isoWeekday,D=(0,d.x)(b)||!0===b,B={};let Y,ne,j=t;if(D&&(j=+e.startOf(j,"isoWeek",b)),j=+e.startOf(j,D?"day":c),e.diff(s,t,c)>1e5*f)throw new Error(t+" and "+s+" are too far apart with stepSize of "+f+" "+c);const ce="data"===n.ticks.source&&this.getDataTimestamps();for(Y=j,ne=0;Y<s;Y=+e.add(Y,f,c),ne++)Qn(B,Y,ce);return(Y===s||"ticks"===n.bounds||1===ne)&&Qn(B,Y,ce),Object.keys(B).sort(Xn).map(pe=>+pe)}getLabelForValue(e){const s=this.options.time;return this._adapter.format(e,s.tooltipFormat?s.tooltipFormat:s.displayFormats.datetime)}format(e,t){return this._adapter.format(e,t||this.options.time.displayFormats[this._unit])}_tickFormatFunction(e,t,s,n){const o=this.options,c=o.ticks.callback;if(c)return(0,d.Q)(c,[e,t,s],this);const f=o.time.displayFormats,b=this._unit,D=this._majorUnit,j=D&&f[D],Y=s[t];return this._adapter.format(e,n||(D&&j&&Y&&Y.major?j:b&&f[b]))}generateTickLabels(e){let t,s,n;for(t=0,s=e.length;t<s;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,n=(0,d.t)(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(n),c=Math.sin(n),f=this._resolveTickFontOptions(0).size;return{w:s*o+f*c,h:s*c+f*o}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,n=s[t.unit]||s.millisecond,o=this._tickFormatFunction(e,0,Jn(this,[e],this._majorUnit),n),c=this._getLabelSize(o),f=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return f>0?f:1}getDataTimestamps(){let t,s,e=this._cache.data||[];if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,s=n.length;t<s;++t)e=e.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const n=this.getLabels();for(t=0,s=n.length;t<s;++t)e.push(Gn(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return(0,d._)(e.sort(Xn))}}return(0,Z.Z)(r,"id","time"),(0,Z.Z)(r,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}}),r})();function Mn(r,i,e){let n,o,c,f,t=0,s=r.length-1;e?(i>=r[t].pos&&i<=r[s].pos&&({lo:t,hi:s}=(0,d.B)(r,"pos",i)),({pos:n,time:c}=r[t]),({pos:o,time:f}=r[s])):(i>=r[t].time&&i<=r[s].time&&({lo:t,hi:s}=(0,d.B)(r,"time",i)),({time:n,pos:c}=r[t]),({time:o,pos:f}=r[s]));const b=o-n;return b?c+(f-c)*(i-n)/b:c}class Yn extends Kn{constructor(i){super(i),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const i=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(i);this._minPos=Mn(e,this.min),this._tableRange=Mn(e,this.max)-this._minPos,super.initOffsets(i)}buildLookupTable(i){const{min:e,max:t}=this,s=[],n=[];let o,c,f,b,D;for(o=0,c=i.length;o<c;++o)b=i[o],b>=e&&b<=t&&s.push(b);if(s.length<2)return[{time:e,pos:0},{time:t,pos:1}];for(o=0,c=s.length;o<c;++o)D=s[o+1],f=s[o-1],b=s[o],Math.round((D+f)/2)!==b&&n.push({time:b,pos:o/(c-1)});return n}_generate(){const i=this.min,e=this.max;let t=super.getDataTimestamps();return(!t.includes(i)||!t.length)&&t.splice(0,0,i),(!t.includes(e)||1===t.length)&&t.push(e),t.sort((s,n)=>s-n)}_getTimestampsForTable(){let i=this._cache.all||[];if(i.length)return i;const e=this.getDataTimestamps(),t=this.getLabelTimestamps();return i=e.length&&t.length?this.normalize(e.concat(t)):e.length?e:t,i=this._cache.all=i,i}getDecimalForValue(i){return(Mn(this._table,i)-this._minPos)/this._tableRange}getValueForPixel(i){const e=this._offsets,t=this.getDecimalForPixel(i)/e.factor-e.end;return Mn(this._table,t*this._tableRange+this._minPos,!0)}}(0,Z.Z)(Yn,"id","timeseries"),(0,Z.Z)(Yn,"defaults",Kn.defaults);const ao=[dt,Zr,zn,Object.freeze({__proto__:null,CategoryScale:Cn,LinearScale:ln,LogarithmicScale:z,RadialLinearScale:un,TimeScale:Kn,TimeSeriesScale:Yn})]},8137:(xt,et,oe)=>{"use strict";function Z(a){return a+.5|0}oe.d(et,{$:()=>Es,A:()=>Pt,B:()=>st,C:()=>us,D:()=>$,E:()=>ar,F:()=>Zt,G:()=>qr,H:()=>jt,I:()=>pr,J:()=>Jr,K:()=>Qr,L:()=>Xt,M:()=>_r,N:()=>ts,O:()=>Wt,P:()=>At,Q:()=>ct,R:()=>Hr,S:()=>De,T:()=>Yt,U:()=>Pi,V:()=>ws,W:()=>Xe,X:()=>Rr,Y:()=>er,Z:()=>Br,_:()=>ti,a:()=>Ms,a0:()=>Fr,a1:()=>Cs,a2:()=>hs,a3:()=>ht,a4:()=>zt,a5:()=>Ni,a6:()=>Tt,a7:()=>wi,a8:()=>$i,a9:()=>Ds,aA:()=>sn,aB:()=>ji,aC:()=>Us,aD:()=>Js,aE:()=>q,aF:()=>nt,aG:()=>oi,aH:()=>kt,aI:()=>Ui,aJ:()=>Ht,aK:()=>W,aL:()=>Pe,aM:()=>ei,aN:()=>Lr,aO:()=>wt,aP:()=>it,aa:()=>lr,ab:()=>pt,ac:()=>Te,ad:()=>ui,ae:()=>vr,af:()=>qs,ag:()=>Ai,ah:()=>Qt,ai:()=>Wi,aj:()=>ot,ak:()=>Ts,al:()=>Ws,am:()=>xr,an:()=>Os,ao:()=>en,ap:()=>br,aq:()=>Yi,ar:()=>fs,as:()=>pn,at:()=>Qs,au:()=>sr,av:()=>ps,aw:()=>Rs,ax:()=>js,ay:()=>me,az:()=>tn,b:()=>Qe,c:()=>Ti,d:()=>Gs,e:()=>Ii,f:()=>di,g:()=>_t,h:()=>es,i:()=>tt,j:()=>gs,k:()=>Oe,l:()=>It,m:()=>bt,n:()=>Ut,o:()=>U,p:()=>we,q:()=>Gt,r:()=>Li,s:()=>zi,t:()=>cs,u:()=>ai,v:()=>dt,w:()=>fi,x:()=>ls,y:()=>jr,z:()=>Xr});const d=(a,p,w)=>Math.max(Math.min(a,w),p);function de(a){return d(Z(2.55*a),0,255)}function v(a){return d(Z(255*a),0,255)}function y(a){return d(Z(a/2.55)/100,0,1)}function M(a){return d(Z(100*a),0,100)}const m={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},C=[..."0123456789ABCDEF"],k=a=>C[15&a],P=a=>C[(240&a)>>4]+C[15&a],T=a=>(240&a)>>4==(15&a);const S=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function E(a,p,w){const A=p*Math.min(w,1-w),H=(K,ee=(K+a/30)%12)=>w-A*Math.max(Math.min(ee-3,9-ee,1),-1);return[H(0),H(8),H(4)]}function O(a,p,w){const A=(H,K=(H+a/60)%6)=>w-w*p*Math.max(Math.min(K,4-K,1),0);return[A(5),A(3),A(1)]}function R(a,p,w){const A=E(a,1,.5);let H;for(p+w>1&&(H=1/(p+w),p*=H,w*=H),H=0;H<3;H++)A[H]*=1-p-w,A[H]+=p;return A}function L(a){const w=a.r/255,A=a.g/255,H=a.b/255,K=Math.max(w,A,H),ee=Math.min(w,A,H),ae=(K+ee)/2;let fe,xe,Ie;return K!==ee&&(Ie=K-ee,xe=ae>.5?Ie/(2-K-ee):Ie/(K+ee),fe=function x(a,p,w,A,H){return a===H?(p-w)/A+(p<w?6:0):p===H?(w-a)/A+2:(a-p)/A+4}(w,A,H,Ie,K),fe=60*fe+.5),[0|fe,xe||0,ae]}function V(a,p,w,A){return(Array.isArray(p)?a(p[0],p[1],p[2]):a(p,w,A)).map(v)}function ie(a,p,w){return V(E,a,p,w)}function be(a){return(a%360+360)%360}const N={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},G={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let se;const Be=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,Ne=a=>a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055,I=a=>a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4);function he(a,p,w){if(a){let A=L(a);A[p]=Math.max(0,Math.min(A[p]+A[p]*w,0===p?360:1)),A=ie(A),a.r=A[0],a.g=A[1],a.b=A[2]}}function ge(a,p){return a&&Object.assign(p||{},a)}function je(a){var p={r:0,g:0,b:0,a:255};return Array.isArray(a)?a.length>=3&&(p={r:a[0],g:a[1],b:a[2],a:255},a.length>3&&(p.a=v(a[3]))):(p=ge(a,{r:0,g:0,b:0,a:1})).a=v(p.a),p}function ze(a){return"r"===a.charAt(0)?function Ue(a){const p=Be.exec(a);let A,H,K,w=255;if(p){if(p[7]!==A){const ee=+p[7];w=p[8]?de(ee):d(255*ee,0,255)}return A=+p[1],H=+p[3],K=+p[5],A=255&(p[2]?de(A):d(A,0,255)),H=255&(p[4]?de(H):d(H,0,255)),K=255&(p[6]?de(K):d(K,0,255)),{r:A,g:H,b:K,a:w}}}(a):function Se(a){const p=S.exec(a);let A,w=255;if(!p)return;p[5]!==A&&(w=p[6]?de(+p[5]):v(+p[5]));const H=be(+p[2]),K=+p[3]/100,ee=+p[4]/100;return A="hwb"===p[1]?function X(a,p,w){return V(R,a,p,w)}(H,K,ee):"hsv"===p[1]?function J(a,p,w){return V(O,a,p,w)}(H,K,ee):ie(H,K,ee),{r:A[0],g:A[1],b:A[2],a:w}}(a)}class Ze{constructor(p){if(p instanceof Ze)return p;const w=typeof p;let A;"object"===w?A=je(p):"string"===w&&(A=function _(a){var w,p=a.length;return"#"===a[0]&&(4===p||5===p?w={r:255&17*m[a[1]],g:255&17*m[a[2]],b:255&17*m[a[3]],a:5===p?17*m[a[4]]:255}:(7===p||9===p)&&(w={r:m[a[1]]<<4|m[a[2]],g:m[a[3]]<<4|m[a[4]],b:m[a[5]]<<4|m[a[6]],a:9===p?m[a[7]]<<4|m[a[8]]:255})),w}(p)||function Ae(a){se||(se=function Q(){const a={},p=Object.keys(G),w=Object.keys(N);let A,H,K,ee,ae;for(A=0;A<p.length;A++){for(ee=ae=p[A],H=0;H<w.length;H++)K=w[H],ae=ae.replace(K,N[K]);K=parseInt(G[ee],16),a[ae]=[K>>16&255,K>>8&255,255&K]}return a}(),se.transparent=[0,0,0,0]);const p=se[a.toLowerCase()];return p&&{r:p[0],g:p[1],b:p[2],a:4===p.length?p[3]:255}}(p)||ze(p)),this._rgb=A,this._valid=!!A}get valid(){return this._valid}get rgb(){var p=ge(this._rgb);return p&&(p.a=y(p.a)),p}set rgb(p){this._rgb=je(p)}rgbString(){return this._valid?function Re(a){return a&&(a.a<255?`rgba(${a.r}, ${a.g}, ${a.b}, ${y(a.a)})`:`rgb(${a.r}, ${a.g}, ${a.b})`)}(this._rgb):void 0}hexString(){return this._valid?function u(a){var p=(a=>T(a.r)&&T(a.g)&&T(a.b)&&T(a.a))(a)?k:P;return a?"#"+p(a.r)+p(a.g)+p(a.b)+((a,p)=>a<255?p(a):"")(a.a,p):void 0}(this._rgb):void 0}hslString(){return this._valid?function Ce(a){if(!a)return;const p=L(a),w=p[0],A=M(p[1]),H=M(p[2]);return a.a<255?`hsla(${w}, ${A}%, ${H}%, ${y(a.a)})`:`hsl(${w}, ${A}%, ${H}%)`}(this._rgb):void 0}mix(p,w){if(p){const A=this.rgb,H=p.rgb;let K;const ee=w===K?.5:w,ae=2*ee-1,fe=A.a-H.a,xe=((ae*fe==-1?ae:(ae+fe)/(1+ae*fe))+1)/2;K=1-xe,A.r=255&xe*A.r+K*H.r+.5,A.g=255&xe*A.g+K*H.g+.5,A.b=255&xe*A.b+K*H.b+.5,A.a=ee*A.a+(1-ee)*H.a,this.rgb=A}return this}interpolate(p,w){return p&&(this._rgb=function le(a,p,w){const A=I(y(a.r)),H=I(y(a.g)),K=I(y(a.b));return{r:v(Ne(A+w*(I(y(p.r))-A))),g:v(Ne(H+w*(I(y(p.g))-H))),b:v(Ne(K+w*(I(y(p.b))-K))),a:a.a+w*(p.a-a.a)}}(this._rgb,p._rgb,w)),this}clone(){return new Ze(this.rgb)}alpha(p){return this._rgb.a=v(p),this}clearer(p){return this._rgb.a*=1-p,this}greyscale(){const p=this._rgb,w=Z(.3*p.r+.59*p.g+.11*p.b);return p.r=p.g=p.b=w,this}opaquer(p){return this._rgb.a*=1+p,this}negate(){const p=this._rgb;return p.r=255-p.r,p.g=255-p.g,p.b=255-p.b,this}lighten(p){return he(this._rgb,2,p),this}darken(p){return he(this._rgb,2,-p),this}saturate(p){return he(this._rgb,1,p),this}desaturate(p){return he(this._rgb,1,-p),this}rotate(p){return function Me(a,p){var w=L(a);w[0]=be(w[0]+p),w=ie(w),a.r=w[0],a.g=w[1],a.b=w[2]}(this._rgb,p),this}}function nt(){}const Te=(()=>{let a=0;return()=>a++})();function Oe(a){return null===a||typeof a>"u"}function Qe(a){if(Array.isArray&&Array.isArray(a))return!0;const p=Object.prototype.toString.call(a);return"[object"===p.slice(0,7)&&"Array]"===p.slice(-6)}function tt(a){return null!==a&&"[object Object]"===Object.prototype.toString.call(a)}function _t(a){return("number"==typeof a||a instanceof Number)&&isFinite(+a)}function Wt(a,p){return _t(a)?a:p}function dt(a,p){return typeof a>"u"?p:a}const bt=(a,p)=>"string"==typeof a&&a.endsWith("%")?parseFloat(a)/100:+a/p,Ut=(a,p)=>"string"==typeof a&&a.endsWith("%")?parseFloat(a)/100*p:+a;function ct(a,p,w){if(a&&"function"==typeof a.call)return a.apply(w,p)}function Zt(a,p,w,A){let H,K,ee;if(Qe(a))if(K=a.length,A)for(H=K-1;H>=0;H--)p.call(w,a[H],H);else for(H=0;H<K;H++)p.call(w,a[H],H);else if(tt(a))for(ee=Object.keys(a),K=ee.length,H=0;H<K;H++)p.call(w,a[ee[H]],ee[H])}function Qt(a,p){let w,A,H,K;if(!a||!p||a.length!==p.length)return!1;for(w=0,A=a.length;w<A;++w)if(H=a[w],K=p[w],H.datasetIndex!==K.datasetIndex||H.index!==K.index)return!1;return!0}function Ft(a){if(Qe(a))return a.map(Ft);if(tt(a)){const p=Object.create(null),w=Object.keys(a),A=w.length;let H=0;for(;H<A;++H)p[w[H]]=Ft(a[w[H]]);return p}return a}function Jt(a){return-1===["__proto__","prototype","constructor"].indexOf(a)}function Kt(a,p,w,A){if(!Jt(a))return;const H=p[a],K=w[a];tt(H)&&tt(K)?zt(H,K,A):p[a]=Ft(K)}function zt(a,p,w){const A=Qe(p)?p:[p],H=A.length;if(!tt(a))return a;const K=(w=w||{}).merger||Kt;let ee;for(let ae=0;ae<H;++ae){if(ee=A[ae],!tt(ee))continue;const fe=Object.keys(ee);for(let xe=0,Ie=fe.length;xe<Ie;++xe)K(fe[xe],a,ee,w)}return a}function pt(a,p){return zt(a,p,{merger:xi})}function xi(a,p,w){if(!Jt(a))return;const A=p[a],H=w[a];tt(A)&&tt(H)?pt(A,H):Object.prototype.hasOwnProperty.call(p,a)||(p[a]=Ft(H))}const pi={"":a=>a,x:a=>a.x,y:a=>a.y};function di(a,p){return(pi[p]||(pi[p]=function Ji(a){const p=function hi(a){const p=a.split("."),w=[];let A="";for(const H of p)A+=H,A.endsWith("\\")?A=A.slice(0,-1)+".":(w.push(A),A="");return w}(a);return w=>{for(const A of p){if(""===A)break;w=w&&w[A]}return w}}(p)))(a)}function Ni(a){return a.charAt(0).toUpperCase()+a.slice(1)}const es=a=>typeof a<"u",wi=a=>"function"==typeof a,Ai=(a,p)=>{if(a.size!==p.size)return!1;for(const w of a)if(!p.has(w))return!1;return!0};function Wi(a){return"mouseup"===a.type||"click"===a.type||"contextmenu"===a.type}const At=Math.PI,Yt=2*At,Oi=Yt+At,gi=Number.POSITIVE_INFINITY,Ei=At/180,jt=At/2,Vt=At/4,Ot=2*At/3,ei=Math.log10,zi=Math.sign;function Ht(a,p,w){return Math.abs(a-p)<w}function kt(a){const p=Math.round(a);a=Ht(a,p,a/1e3)?p:a;const w=Math.pow(10,Math.floor(ei(a))),A=a/w;return(A<=1?1:A<=2?2:A<=5?5:10)*w}function ts(a){const p=[],w=Math.sqrt(a);let A;for(A=1;A<w;A++)a%A==0&&(p.push(A),p.push(a/A));return w===(0|w)&&p.push(w),p.sort((H,K)=>H-K).pop(),p}function ls(a){return!isNaN(parseFloat(a))&&isFinite(a)}function Ui(a,p){const w=Math.round(a);return w-p<=a&&w+p>=a}function oi(a,p,w){let A,H,K;for(A=0,H=a.length;A<H;A++)K=a[A][w],isNaN(K)||(p.min=Math.min(p.min,K),p.max=Math.max(p.max,K))}function cs(a){return a*(At/180)}function Pi(a){return a*(180/At)}function W(a){if(!_t(a))return;let p=1,w=0;for(;Math.round(a*p)/p!==a;)p*=10,w++;return w}function $(a,p){const w=p.x-a.x,A=p.y-a.y,H=Math.sqrt(w*w+A*A);let K=Math.atan2(A,w);return K<-.5*At&&(K+=Yt),{angle:K,distance:H}}function q(a,p){return Math.sqrt(Math.pow(p.x-a.x,2)+Math.pow(p.y-a.y,2))}function ue(a,p){return(a-p+Oi)%Yt-At}function me(a){return(a%Yt+Yt)%Yt}function we(a,p,w,A){const H=me(a),K=me(p),ee=me(w),ae=me(K-H),fe=me(ee-H),xe=me(H-K),Ie=me(H-ee);return H===K||H===ee||A&&K===ee||ae>fe&&xe<Ie}function De(a,p,w){return Math.max(p,Math.min(w,a))}function Xe(a){return De(a,-32768,32767)}function ot(a,p,w,A=1e-6){return a>=Math.min(p,w)-A&&a<=Math.max(p,w)+A}function it(a,p,w){w=w||(ee=>a[ee]<p);let K,A=a.length-1,H=0;for(;A-H>1;)K=H+A>>1,w(K)?H=K:A=K;return{lo:H,hi:A}}const st=(a,p,w,A)=>it(a,w,A?H=>{const K=a[H][p];return K<w||K===w&&a[H+1][p]===w}:H=>a[H][p]<w),Pt=(a,p,w)=>it(a,w,A=>a[A][p]>=w);function wt(a,p,w){let A=0,H=a.length;for(;A<H&&a[A]<p;)A++;for(;H>A&&a[H-1]>w;)H--;return A>0||H<a.length?a.slice(A,H):a}const Ct=["push","pop","shift","splice","unshift"];function It(a,p){a._chartjs?a._chartjs.listeners.push(p):(Object.defineProperty(a,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[p]}}),Ct.forEach(w=>{const A="_onData"+Ni(w),H=a[w];Object.defineProperty(a,w,{configurable:!0,enumerable:!1,value(...K){const ee=H.apply(this,K);return a._chartjs.listeners.forEach(ae=>{"function"==typeof ae[A]&&ae[A](...K)}),ee}})}))}function ai(a,p){const w=a._chartjs;if(!w)return;const A=w.listeners,H=A.indexOf(p);-1!==H&&A.splice(H,1),!(A.length>0)&&(Ct.forEach(K=>{delete a[K]}),delete a._chartjs)}function ti(a){const p=new Set(a);return p.size===a.length?a:Array.from(p)}const Li=typeof window>"u"?function(a){return a()}:window.requestAnimationFrame;function Xt(a,p){let w=[],A=!1;return function(...H){w=H,A||(A=!0,Li.call(window,()=>{A=!1,a.apply(p,w)}))}}function ui(a,p){let w;return function(...A){return p?(clearTimeout(w),w=setTimeout(a,p,A)):a.apply(this,A),p}}const Cs=a=>"start"===a?"left":"end"===a?"right":"center",hs=(a,p,w)=>"start"===a?p:"end"===a?w:(p+w)/2,ji=(a,p,w,A)=>a===(A?"left":"right")?w:"center"===a?(p+w)/2:p;function Gt(a,p,w){const A=p.length;let H=0,K=A;if(a._sorted){const{iScale:ee,_parsed:ae}=a,fe=ee.axis,{min:xe,max:Ie,minDefined:qe,maxDefined:rt}=ee.getUserBounds();qe&&(H=De(Math.min(st(ae,fe,xe).lo,w?A:st(p,fe,ee.getPixelForValue(xe)).lo),0,A-1)),K=rt?De(Math.max(st(ae,ee.axis,Ie,!0).hi+1,w?0:st(p,fe,ee.getPixelForValue(Ie),!0).hi+1),H,A)-H:A-H}return{start:H,count:K}}function fi(a){const{xScale:p,yScale:w,_scaleRanges:A}=a,H={xmin:p.min,xmax:p.max,ymin:w.min,ymax:w.max};if(!A)return a._scaleRanges=H,!0;const K=A.xmin!==p.min||A.xmax!==p.max||A.ymin!==w.min||A.ymax!==w.max;return Object.assign(A,H),K}const Ri=a=>0===a||1===a,vi=(a,p,w)=>-Math.pow(2,10*(a-=1))*Math.sin((a-p)*Yt/w),Vi=(a,p,w)=>Math.pow(2,-10*a)*Math.sin((a-p)*Yt/w)+1,Ii={linear:a=>a,easeInQuad:a=>a*a,easeOutQuad:a=>-a*(a-2),easeInOutQuad:a=>(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1),easeInCubic:a=>a*a*a,easeOutCubic:a=>(a-=1)*a*a+1,easeInOutCubic:a=>(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2),easeInQuart:a=>a*a*a*a,easeOutQuart:a=>-((a-=1)*a*a*a-1),easeInOutQuart:a=>(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2),easeInQuint:a=>a*a*a*a*a,easeOutQuint:a=>(a-=1)*a*a*a*a+1,easeInOutQuint:a=>(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2),easeInSine:a=>1-Math.cos(a*jt),easeOutSine:a=>Math.sin(a*jt),easeInOutSine:a=>-.5*(Math.cos(At*a)-1),easeInExpo:a=>0===a?0:Math.pow(2,10*(a-1)),easeOutExpo:a=>1===a?1:1-Math.pow(2,-10*a),easeInOutExpo:a=>Ri(a)?a:a<.5?.5*Math.pow(2,10*(2*a-1)):.5*(2-Math.pow(2,-10*(2*a-1))),easeInCirc:a=>a>=1?a:-(Math.sqrt(1-a*a)-1),easeOutCirc:a=>Math.sqrt(1-(a-=1)*a),easeInOutCirc:a=>(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1),easeInElastic:a=>Ri(a)?a:vi(a,.075,.3),easeOutElastic:a=>Ri(a)?a:Vi(a,.075,.3),easeInOutElastic:a=>Ri(a)?a:a<.5?.5*vi(2*a,.1125,.45):.5+.5*Vi(2*a-1,.1125,.45),easeInBack:a=>a*a*(2.70158*a-1.70158),easeOutBack:a=>(a-=1)*a*(2.70158*a+1.70158)+1,easeInOutBack(a){let p=1.70158;return(a/=.5)<1?a*a*((1+(p*=1.525))*a-p)*.5:.5*((a-=2)*a*((1+(p*=1.525))*a+p)+2)},easeInBounce:a=>1-Ii.easeOutBounce(1-a),easeOutBounce:a=>a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,easeInOutBounce:a=>a<.5?.5*Ii.easeInBounce(2*a):.5*Ii.easeOutBounce(2*a-1)+.5};function ii(a){if(a&&"object"==typeof a){const p=a.toString();return"[object CanvasPattern]"===p||"[object CanvasGradient]"===p}return!1}function Ti(a){return ii(a)?a:new Ze(a)}function ds(a){return ii(a)?a:new Ze(a).saturate(.5).darken(.1).hexString()}const si=["x","y","borderWidth","radius","tension"],Bi=["color","borderColor","backgroundColor"],ss=new Map;function U(a,p,w){return function F(a,p){p=p||{};const w=a+JSON.stringify(p);let A=ss.get(w);return A||(A=new Intl.NumberFormat(a,p),ss.set(w,A)),A}(p,w).format(a)}const te={values:a=>Qe(a)?a:""+a,numeric(a,p,w){if(0===a)return"0";const A=this.chart.options.locale;let H,K=a;if(w.length>1){const xe=Math.max(Math.abs(w[0].value),Math.abs(w[w.length-1].value));(xe<1e-4||xe>1e15)&&(H="scientific"),K=function _e(a,p){let w=p.length>3?p[2].value-p[1].value:p[1].value-p[0].value;return Math.abs(w)>=1&&a!==Math.floor(a)&&(w=a-Math.floor(a)),w}(a,w)}const ee=ei(Math.abs(K)),ae=isNaN(ee)?1:Math.max(Math.min(-1*Math.floor(ee),20),0),fe={notation:H,minimumFractionDigits:ae,maximumFractionDigits:ae};return Object.assign(fe,this.options.ticks.format),U(a,A,fe)},logarithmic(a,p,w){if(0===a)return"0";const A=w[p].significand||a/Math.pow(10,Math.floor(ei(a)));return[1,2,3,5,10,15].includes(A)||p>.8*w.length?te.numeric.call(this,a,p,w):""}};var Pe={formatters:te};const ht=Object.create(null),Tt=Object.create(null);function Mt(a,p){if(!p)return a;const w=p.split(".");for(let A=0,H=w.length;A<H;++A){const K=w[A];a=a[K]||(a[K]=Object.create(null))}return a}function Nt(a,p,w){return"string"==typeof p?zt(Mt(a,p),w):zt(Mt(a,""),p)}class ri{constructor(p,w){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=A=>A.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(A,H)=>ds(H.backgroundColor),this.hoverBorderColor=(A,H)=>ds(H.borderColor),this.hoverColor=(A,H)=>ds(H.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(p),this.apply(w)}set(p,w){return Nt(this,p,w)}get(p){return Mt(this,p)}describe(p,w){return Nt(Tt,p,w)}override(p,w){return Nt(ht,p,w)}route(p,w,A,H){const K=Mt(this,p),ee=Mt(this,A),ae="_"+w;Object.defineProperties(K,{[ae]:{value:K[w],writable:!0},[w]:{enumerable:!0,get(){const fe=this[ae],xe=ee[H];return tt(fe)?Object.assign({},xe,fe):dt(fe,xe)},set(fe){this[ae]=fe}}})}apply(p){p.forEach(w=>w(this))}}var Gs=new ri({_scriptable:a=>!a.startsWith("on"),_indexable:a=>"events"!==a,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function is(a){a.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),a.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:p=>"onProgress"!==p&&"onComplete"!==p&&"fn"!==p}),a.set("animations",{colors:{type:"color",properties:Bi},numbers:{type:"number",properties:si}}),a.describe("animations",{_fallback:"animation"}),a.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:p=>0|p}}}})},function Ls(a){a.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function Ke(a){a.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(p,w)=>w.lineWidth,tickColor:(p,w)=>w.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Pe.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),a.route("scale.ticks","color","","color"),a.route("scale.grid","color","","borderColor"),a.route("scale.border","color","","borderColor"),a.route("scale.title","color","","color"),a.describe("scale",{_fallback:!1,_scriptable:p=>!p.startsWith("before")&&!p.startsWith("after")&&"callback"!==p&&"parser"!==p,_indexable:p=>"borderDash"!==p&&"tickBorderDash"!==p&&"dash"!==p}),a.describe("scales",{_fallback:"scale"}),a.describe("scale.ticks",{_scriptable:p=>"backdropPadding"!==p&&"callback"!==p,_indexable:p=>"backdropPadding"!==p})}]);function ws(a,p,w,A,H){let K=p[H];return K||(K=p[H]=a.measureText(H).width,w.push(H)),K>A&&(A=K),A}function Lr(a,p,w,A){let H=(A=A||{}).data=A.data||{},K=A.garbageCollect=A.garbageCollect||[];A.font!==p&&(H=A.data={},K=A.garbageCollect=[],A.font=p),a.save(),a.font=p;let ee=0;const ae=w.length;let fe,xe,Ie,qe,rt;for(fe=0;fe<ae;fe++)if(qe=w[fe],null==qe||Qe(qe)){if(Qe(qe))for(xe=0,Ie=qe.length;xe<Ie;xe++)rt=qe[xe],null!=rt&&!Qe(rt)&&(ee=ws(a,H,K,ee,rt))}else ee=ws(a,H,K,ee,qe);a.restore();const yt=K.length/2;if(yt>w.length){for(fe=0;fe<yt;fe++)delete H[K[fe]];K.splice(0,yt)}return ee}function Rr(a,p,w){const A=a.currentDevicePixelRatio,H=0!==w?Math.max(w/2,.5):0;return Math.round((p-H)*A)/A+H}function qs(a,p){(p=p||a.getContext("2d")).save(),p.resetTransform(),p.clearRect(0,0,a.width,a.height),p.restore()}function Qs(a,p,w,A){Js(a,p,w,A,null)}function Js(a,p,w,A,H){let K,ee,ae,fe,xe,Ie,qe,rt;const yt=p.pointStyle,Lt=p.rotation,at=p.radius;let Ge=(Lt||0)*Ei;if(yt&&"object"==typeof yt&&(K=yt.toString(),"[object HTMLImageElement]"===K||"[object HTMLCanvasElement]"===K))return a.save(),a.translate(w,A),a.rotate(Ge),a.drawImage(yt,-yt.width/2,-yt.height/2,yt.width,yt.height),void a.restore();if(!(isNaN(at)||at<=0)){switch(a.beginPath(),yt){default:H?a.ellipse(w,A,H/2,at,0,0,Yt):a.arc(w,A,at,0,Yt),a.closePath();break;case"triangle":Ie=H?H/2:at,a.moveTo(w+Math.sin(Ge)*Ie,A-Math.cos(Ge)*at),Ge+=Ot,a.lineTo(w+Math.sin(Ge)*Ie,A-Math.cos(Ge)*at),Ge+=Ot,a.lineTo(w+Math.sin(Ge)*Ie,A-Math.cos(Ge)*at),a.closePath();break;case"rectRounded":xe=.516*at,fe=at-xe,ee=Math.cos(Ge+Vt)*fe,qe=Math.cos(Ge+Vt)*(H?H/2-xe:fe),ae=Math.sin(Ge+Vt)*fe,rt=Math.sin(Ge+Vt)*(H?H/2-xe:fe),a.arc(w-qe,A-ae,xe,Ge-At,Ge-jt),a.arc(w+rt,A-ee,xe,Ge-jt,Ge),a.arc(w+qe,A+ae,xe,Ge,Ge+jt),a.arc(w-rt,A+ee,xe,Ge+jt,Ge+At),a.closePath();break;case"rect":if(!Lt){fe=Math.SQRT1_2*at,Ie=H?H/2:fe,a.rect(w-Ie,A-fe,2*Ie,2*fe);break}Ge+=Vt;case"rectRot":qe=Math.cos(Ge)*(H?H/2:at),ee=Math.cos(Ge)*at,ae=Math.sin(Ge)*at,rt=Math.sin(Ge)*(H?H/2:at),a.moveTo(w-qe,A-ae),a.lineTo(w+rt,A-ee),a.lineTo(w+qe,A+ae),a.lineTo(w-rt,A+ee),a.closePath();break;case"crossRot":Ge+=Vt;case"cross":qe=Math.cos(Ge)*(H?H/2:at),ee=Math.cos(Ge)*at,ae=Math.sin(Ge)*at,rt=Math.sin(Ge)*(H?H/2:at),a.moveTo(w-qe,A-ae),a.lineTo(w+qe,A+ae),a.moveTo(w+rt,A-ee),a.lineTo(w-rt,A+ee);break;case"star":qe=Math.cos(Ge)*(H?H/2:at),ee=Math.cos(Ge)*at,ae=Math.sin(Ge)*at,rt=Math.sin(Ge)*(H?H/2:at),a.moveTo(w-qe,A-ae),a.lineTo(w+qe,A+ae),a.moveTo(w+rt,A-ee),a.lineTo(w-rt,A+ee),Ge+=Vt,qe=Math.cos(Ge)*(H?H/2:at),ee=Math.cos(Ge)*at,ae=Math.sin(Ge)*at,rt=Math.sin(Ge)*(H?H/2:at),a.moveTo(w-qe,A-ae),a.lineTo(w+qe,A+ae),a.moveTo(w+rt,A-ee),a.lineTo(w-rt,A+ee);break;case"line":ee=H?H/2:Math.cos(Ge)*at,ae=Math.sin(Ge)*at,a.moveTo(w-ee,A-ae),a.lineTo(w+ee,A+ae);break;case"dash":a.moveTo(w,A),a.lineTo(w+Math.cos(Ge)*(H?H/2:at),A+Math.sin(Ge)*at);break;case!1:a.closePath()}a.fill(),p.borderWidth>0&&a.stroke()}}function us(a,p,w){return w=w||.5,!p||a&&a.x>p.left-w&&a.x<p.right+w&&a.y>p.top-w&&a.y<p.bottom+w}function er(a,p){a.save(),a.beginPath(),a.rect(p.left,p.top,p.right-p.left,p.bottom-p.top),a.clip()}function Es(a){a.restore()}function fs(a,p,w,A,H){if(!p)return a.lineTo(w.x,w.y);if("middle"===H){const K=(p.x+w.x)/2;a.lineTo(K,p.y),a.lineTo(K,w.y)}else"after"===H!=!!A?a.lineTo(p.x,w.y):a.lineTo(w.x,p.y);a.lineTo(w.x,w.y)}function pn(a,p,w,A){if(!p)return a.lineTo(w.x,w.y);a.bezierCurveTo(A?p.cp1x:p.cp2x,A?p.cp1y:p.cp2y,A?w.cp2x:w.cp1x,A?w.cp2y:w.cp1y,w.x,w.y)}function ir(a,p,w,A,H){if(H.strikethrough||H.underline){const K=a.measureText(A),ee=p-K.actualBoundingBoxLeft,ae=p+K.actualBoundingBoxRight,xe=w+K.actualBoundingBoxDescent,Ie=H.strikethrough?(w-K.actualBoundingBoxAscent+xe)/2:xe;a.strokeStyle=a.fillStyle,a.beginPath(),a.lineWidth=H.decorationWidth||2,a.moveTo(ee,Ie),a.lineTo(ae,Ie),a.stroke()}}function Ir(a,p){const w=a.fillStyle;a.fillStyle=p.color,a.fillRect(p.left,p.top,p.width,p.height),a.fillStyle=w}function Br(a,p,w,A,H,K={}){const ee=Qe(p)?p:[p],ae=K.strokeWidth>0&&""!==K.strokeColor;let fe,xe;for(a.save(),a.font=H.string,function tr(a,p){p.translation&&a.translate(p.translation[0],p.translation[1]),Oe(p.rotation)||a.rotate(p.rotation),p.color&&(a.fillStyle=p.color),p.textAlign&&(a.textAlign=p.textAlign),p.textBaseline&&(a.textBaseline=p.textBaseline)}(a,K),fe=0;fe<ee.length;++fe)xe=ee[fe],K.backdrop&&Ir(a,K.backdrop),ae&&(K.strokeColor&&(a.strokeStyle=K.strokeColor),Oe(K.strokeWidth)||(a.lineWidth=K.strokeWidth),a.strokeText(xe,w,A,K.maxWidth)),a.fillText(xe,w,A,K.maxWidth),ir(a,w,A,xe,K),A+=Number(H.lineHeight);a.restore()}function sr(a,p){const{x:w,y:A,w:H,h:K,radius:ee}=p;a.arc(w+ee.topLeft,A+ee.topLeft,ee.topLeft,1.5*At,At,!0),a.lineTo(w,A+K-ee.bottomLeft),a.arc(w+ee.bottomLeft,A+K-ee.bottomLeft,ee.bottomLeft,At,jt,!0),a.lineTo(w+H-ee.bottomRight,A+K),a.arc(w+H-ee.bottomRight,A+K-ee.bottomRight,ee.bottomRight,jt,0,!0),a.lineTo(w+H,A+ee.topRight),a.arc(w+H-ee.topRight,A+ee.topRight,ee.topRight,0,-jt,!0),a.lineTo(w+ee.topLeft,A)}const rr=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,nr=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function or(a,p){const w=(""+a).match(rr);if(!w||"normal"===w[1])return 1.2*p;switch(a=+w[2],w[3]){case"px":return a;case"%":a/=100}return p*a}const _s=a=>+a||0;function Ts(a,p){const w={},A=tt(p),H=A?Object.keys(p):p,K=tt(a)?A?ee=>dt(a[ee],a[p[ee]]):ee=>a[ee]:()=>a;for(const ee of H)w[ee]=_s(K(ee));return w}function ps(a){return Ts(a,{top:"y",right:"x",bottom:"y",left:"x"})}function Rs(a){return Ts(a,["topLeft","topRight","bottomLeft","bottomRight"])}function ar(a){const p=ps(a);return p.width=p.left+p.right,p.height=p.top+p.bottom,p}function Fr(a,p){let w=dt((a=a||{}).size,(p=p||Gs.font).size);"string"==typeof w&&(w=parseInt(w,10));let A=dt(a.style,p.style);A&&!(""+A).match(nr)&&(console.warn('Invalid font style specified: "'+A+'"'),A=void 0);const H={family:dt(a.family,p.family),lineHeight:or(dt(a.lineHeight,p.lineHeight),w),size:w,style:A,weight:dt(a.weight,p.weight),string:""};return H.string=function xs(a){return!a||Oe(a.size)||Oe(a.family)?null:(a.style?a.style+" ":"")+(a.weight?a.weight+" ":"")+a.size+"px "+a.family}(H),H}function Ms(a,p,w,A){let K,ee,ae,H=!0;for(K=0,ee=a.length;K<ee;++K)if(ae=a[K],void 0!==ae&&(void 0!==p&&"function"==typeof ae&&(ae=ae(p),H=!1),void 0!==w&&Qe(ae)&&(ae=ae[w%ae.length],H=!1),void 0!==ae))return A&&!H&&(A.cacheable=!1),ae}function Hr(a,p,w){const{min:A,max:H}=a,K=Ut(p,(H-A)/2),ee=(ae,fe)=>w&&0===ae?0:ae+fe;return{min:ee(A,-Math.abs(K)),max:ee(H,K)}}function gs(a,p){return Object.assign(Object.create(a),p)}function Ds(a,p=[""],w,A,H=(()=>a[0])){const K=w||a;typeof A>"u"&&(A=ur("_fallback",a));const ee={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:a,_rootScopes:K,_fallback:A,_getTarget:H,override:ae=>Ds([ae,...a],p,K,A)};return new Proxy(ee,{deleteProperty:(ae,fe)=>(delete ae[fe],delete ae._keys,delete a[0][fe],!0),get:(ae,fe)=>ms(ae,fe,()=>function Fs(a,p,w,A){let H;for(const K of p)if(H=ur(Nr(K,a),w),typeof H<"u")return Mi(a,H)?bs(w,A,a,H):H}(fe,p,a,ae)),getOwnPropertyDescriptor:(ae,fe)=>Reflect.getOwnPropertyDescriptor(ae._scopes[0],fe),getPrototypeOf:()=>Reflect.getPrototypeOf(a[0]),has:(ae,fe)=>Hs(ae).includes(fe),ownKeys:ae=>Hs(ae),set(ae,fe,xe){const Ie=ae._storage||(ae._storage=H());return ae[fe]=Ie[fe]=xe,delete ae._keys,!0}})}function $i(a,p,w,A){const H={_cacheable:!1,_proxy:a,_context:p,_subProxy:w,_stack:new Set,_descriptors:lr(a,A),setContext:K=>$i(a,K,w,A),override:K=>$i(a.override(K),p,w,A)};return new Proxy(H,{deleteProperty:(K,ee)=>(delete K[ee],delete a[ee],!0),get:(K,ee,ae)=>ms(K,ee,()=>function Is(a,p,w){const{_proxy:A,_context:H,_subProxy:K,_descriptors:ee}=a;let ae=A[p];return wi(ae)&&ee.isScriptable(p)&&(ae=function Wr(a,p,w,A){const{_proxy:H,_context:K,_subProxy:ee,_stack:ae}=w;if(ae.has(a))throw new Error("Recursion detected: "+Array.from(ae).join("->")+"->"+a);ae.add(a);let fe=p(K,ee||A);return ae.delete(a),Mi(a,fe)&&(fe=bs(H._scopes,H,a,fe)),fe}(p,ae,a,w)),Qe(ae)&&ae.length&&(ae=function vs(a,p,w,A){const{_proxy:H,_context:K,_subProxy:ee,_descriptors:ae}=w;if(typeof K.index<"u"&&A(a))return p[K.index%p.length];if(tt(p[0])){const fe=p,xe=H._scopes.filter(Ie=>Ie!==fe);p=[];for(const Ie of fe){const qe=bs(xe,H,a,Ie);p.push($i(qe,K,ee&&ee[a],ae))}}return p}(p,ae,a,ee.isIndexable)),Mi(p,ae)&&(ae=$i(ae,H,K&&K[p],ee)),ae}(K,ee,ae)),getOwnPropertyDescriptor:(K,ee)=>K._descriptors.allKeys?Reflect.has(a,ee)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(a,ee),getPrototypeOf:()=>Reflect.getPrototypeOf(a),has:(K,ee)=>Reflect.has(a,ee),ownKeys:()=>Reflect.ownKeys(a),set:(K,ee,ae)=>(a[ee]=ae,delete K[ee],!0)})}function lr(a,p={scriptable:!0,indexable:!0}){const{_scriptable:w=p.scriptable,_indexable:A=p.indexable,_allKeys:H=p.allKeys}=a;return{allKeys:H,scriptable:w,indexable:A,isScriptable:wi(w)?w:()=>w,isIndexable:wi(A)?A:()=>A}}const Nr=(a,p)=>a?a+Ni(p):p,Mi=(a,p)=>tt(p)&&"adapters"!==a&&(null===Object.getPrototypeOf(p)||p.constructor===Object);function ms(a,p,w){if(Object.prototype.hasOwnProperty.call(a,p))return a[p];const A=w();return a[p]=A,A}function Bs(a,p,w){return wi(a)?a(p,w):a}const zr=(a,p)=>!0===a?p:"string"==typeof a?di(p,a):void 0;function cr(a,p,w,A,H){for(const K of p){const ee=zr(w,K);if(ee){a.add(ee);const ae=Bs(ee._fallback,w,H);if(typeof ae<"u"&&ae!==w&&ae!==A)return ae}else if(!1===ee&&typeof A<"u"&&w!==A)return null}return!1}function bs(a,p,w,A){const H=p._rootScopes,K=Bs(p._fallback,w,A),ee=[...a,...H],ae=new Set;ae.add(A);let fe=hr(ae,ee,w,K||w,A);return!(null===fe||typeof K<"u"&&K!==w&&(fe=hr(ae,ee,K,fe,A),null===fe))&&Ds(Array.from(ae),[""],H,K,()=>function dr(a,p,w){const A=a._getTarget();p in A||(A[p]={});const H=A[p];return Qe(H)&&tt(w)?w:H||{}}(p,w,A))}function hr(a,p,w,A,H){for(;w;)w=cr(a,p,w,A,H);return w}function ur(a,p){for(const w of p){if(!w)continue;const A=w[a];if(typeof A<"u")return A}}function Hs(a){let p=a._keys;return p||(p=a._keys=function Ur(a){const p=new Set;for(const w of a)for(const A of Object.keys(w).filter(H=>!H.startsWith("_")))p.add(A);return Array.from(p)}(a._scopes)),p}function jr(a,p,w,A){const{iScale:H}=a,{key:K="r"}=this._parsing,ee=new Array(A);let ae,fe,xe,Ie;for(ae=0,fe=A;ae<fe;++ae)xe=ae+w,Ie=p[xe],ee[ae]={r:H.parse(di(Ie,K),xe)};return ee}const Vr=Number.EPSILON||1e-14,bi=(a,p)=>p<a.length&&!a[p].skip&&a[p],Ns=a=>"x"===a?"y":"x";function $r(a,p,w,A){const H=a.skip?p:a,K=p,ee=w.skip?p:w,ae=q(K,H),fe=q(ee,K);let xe=ae/(ae+fe),Ie=fe/(ae+fe);xe=isNaN(xe)?0:xe,Ie=isNaN(Ie)?0:Ie;const qe=A*xe,rt=A*Ie;return{previous:{x:K.x-qe*(ee.x-H.x),y:K.y-qe*(ee.y-H.y)},next:{x:K.x+rt*(ee.x-H.x),y:K.y+rt*(ee.y-H.y)}}}function ks(a,p,w){return Math.max(Math.min(a,w),p)}function Ws(a,p,w,A,H){let K,ee,ae,fe;if(p.spanGaps&&(a=a.filter(xe=>!xe.skip)),"monotone"===p.cubicInterpolationMode)!function Kr(a,p="x"){const w=Ns(p),A=a.length,H=Array(A).fill(0),K=Array(A);let ee,ae,fe,xe=bi(a,0);for(ee=0;ee<A;++ee)if(ae=fe,fe=xe,xe=bi(a,ee+1),fe){if(xe){const Ie=xe[p]-fe[p];H[ee]=0!==Ie?(xe[w]-fe[w])/Ie:0}K[ee]=ae?xe?zi(H[ee-1])!==zi(H[ee])?0:(H[ee-1]+H[ee])/2:H[ee-1]:H[ee]}(function fr(a,p,w){const A=a.length;let H,K,ee,ae,fe,xe=bi(a,0);for(let Ie=0;Ie<A-1;++Ie)if(fe=xe,xe=bi(a,Ie+1),fe&&xe){if(Ht(p[Ie],0,Vr)){w[Ie]=w[Ie+1]=0;continue}H=w[Ie]/p[Ie],K=w[Ie+1]/p[Ie],ae=Math.pow(H,2)+Math.pow(K,2),!(ae<=9)&&(ee=3/Math.sqrt(ae),w[Ie]=H*ee*p[Ie],w[Ie+1]=K*ee*p[Ie])}})(a,H,K),function Fi(a,p,w="x"){const A=Ns(w),H=a.length;let K,ee,ae,fe=bi(a,0);for(let xe=0;xe<H;++xe){if(ee=ae,ae=fe,fe=bi(a,xe+1),!ae)continue;const Ie=ae[w],qe=ae[A];ee&&(K=(Ie-ee[w])/3,ae[`cp1${w}`]=Ie-K,ae[`cp1${A}`]=qe-K*p[xe]),fe&&(K=(fe[w]-Ie)/3,ae[`cp2${w}`]=Ie+K,ae[`cp2${A}`]=qe+K*p[xe])}}(a,K,p)}(a,H);else{let xe=A?a[a.length-1]:a[0];for(K=0,ee=a.length;K<ee;++K)ae=a[K],fe=$r(xe,ae,a[Math.min(K+1,ee-(A?0:1))%ee],p.tension),ae.cp1x=fe.previous.x,ae.cp1y=fe.previous.y,ae.cp2x=fe.next.x,ae.cp2y=fe.next.y,xe=ae}p.capBezierPoints&&function Yr(a,p){let w,A,H,K,ee,ae=us(a[0],p);for(w=0,A=a.length;w<A;++w)ee=K,K=ae,ae=w<A-1&&us(a[w+1],p),K&&(H=a[w],ee&&(H.cp1x=ks(H.cp1x,p.left,p.right),H.cp1y=ks(H.cp1y,p.top,p.bottom)),ae&&(H.cp2x=ks(H.cp2x,p.left,p.right),H.cp2y=ks(H.cp2y,p.top,p.bottom)))}(a,w)}function _r(){return typeof window<"u"&&typeof document<"u"}function pr(a){let p=a.parentNode;return p&&"[object ShadowRoot]"===p.toString()&&(p=p.host),p}function rs(a,p,w){let A;return"string"==typeof a?(A=parseInt(a,10),-1!==a.indexOf("%")&&(A=A/100*p.parentNode[w])):A=a,A}const Ki=a=>a.ownerDocument.defaultView.getComputedStyle(a,null),zs=["top","right","bottom","left"];function Hi(a,p,w){const A={};w=w?"-"+w:"";for(let H=0;H<4;H++){const K=zs[H];A[K]=parseFloat(a[p+"-"+K+w])||0}return A.width=A.left+A.right,A.height=A.top+A.bottom,A}const gr=(a,p,w)=>(a>0||p>0)&&(!w||!w.shadowRoot);function Xr(a,p){if("native"in a)return a;const{canvas:w,currentDevicePixelRatio:A}=p,H=Ki(w),K="border-box"===H.boxSizing,ee=Hi(H,"padding"),ae=Hi(H,"border","width"),{x:fe,y:xe,box:Ie}=function mr(a,p){const w=a.touches,A=w&&w.length?w[0]:a,{offsetX:H,offsetY:K}=A;let ae,fe,ee=!1;if(gr(H,K,a.target))ae=H,fe=K;else{const xe=p.getBoundingClientRect();ae=A.clientX-xe.left,fe=A.clientY-xe.top,ee=!0}return{x:ae,y:fe,box:ee}}(a,w),qe=ee.left+(Ie&&ae.left),rt=ee.top+(Ie&&ae.top);let{width:yt,height:Lt}=p;return K&&(yt-=ee.width+ae.width,Lt-=ee.height+ae.height),{x:Math.round((fe-qe)/yt*w.width/A),y:Math.round((xe-rt)/Lt*w.height/A)}}const As=a=>Math.round(10*a)/10;function qr(a,p,w,A){const H=Ki(a),K=Hi(H,"margin"),ee=rs(H.maxWidth,a,"clientWidth")||gi,ae=rs(H.maxHeight,a,"clientHeight")||gi,fe=function Gr(a,p,w){let A,H;if(void 0===p||void 0===w){const K=pr(a);if(K){const ee=K.getBoundingClientRect(),ae=Ki(K),fe=Hi(ae,"border","width"),xe=Hi(ae,"padding");p=ee.width-xe.width-fe.width,w=ee.height-xe.height-fe.height,A=rs(ae.maxWidth,K,"clientWidth"),H=rs(ae.maxHeight,K,"clientHeight")}else p=a.clientWidth,w=a.clientHeight}return{width:p,height:w,maxWidth:A||gi,maxHeight:H||gi}}(a,p,w);let{width:xe,height:Ie}=fe;if("content-box"===H.boxSizing){const rt=Hi(H,"border","width"),yt=Hi(H,"padding");xe-=yt.width+rt.width,Ie-=yt.height+rt.height}return xe=Math.max(0,xe-K.width),Ie=Math.max(0,A?xe/A:Ie-K.height),xe=As(Math.min(xe,ee,fe.maxWidth)),Ie=As(Math.min(Ie,ae,fe.maxHeight)),xe&&!Ie&&(Ie=As(xe/2)),(void 0!==p||void 0!==w)&&A&&fe.height&&Ie>fe.height&&(Ie=fe.height,xe=As(Math.floor(Ie*A))),{width:xe,height:Ie}}function vr(a,p,w){const A=p||1,H=Math.floor(a.height*A),K=Math.floor(a.width*A);a.height=Math.floor(a.height),a.width=Math.floor(a.width);const ee=a.canvas;return ee.style&&(w||!ee.style.height&&!ee.style.width)&&(ee.style.height=`${a.height}px`,ee.style.width=`${a.width}px`),(a.currentDevicePixelRatio!==A||ee.height!==H||ee.width!==K)&&(a.currentDevicePixelRatio=A,ee.height=H,ee.width=K,a.ctx.setTransform(A,0,0,A,0,0),!0)}const Qr=function(){let a=!1;try{const p={get passive(){return a=!0,!1}};_r()&&(window.addEventListener("test",null,p),window.removeEventListener("test",null,p))}catch{}return a}();function Jr(a,p){const w=function Zr(a,p){return Ki(a).getPropertyValue(p)}(a,p),A=w&&w.match(/^(\d+)(\.\d+)?px$/);return A?+A[1]:void 0}function Yi(a,p,w,A){return{x:a.x+w*(p.x-a.x),y:a.y+w*(p.y-a.y)}}function en(a,p,w,A){return{x:a.x+w*(p.x-a.x),y:"middle"===A?w<.5?a.y:p.y:"after"===A?w<1?a.y:p.y:w>0?p.y:a.y}}function br(a,p,w,A){const H={x:a.cp2x,y:a.cp2y},K={x:p.cp1x,y:p.cp1y},ee=Yi(a,H,w),ae=Yi(H,K,w),fe=Yi(K,p,w),xe=Yi(ee,ae,w),Ie=Yi(ae,fe,w);return Yi(xe,Ie,w)}const Sr=function(a,p){return{x:w=>a+a+p-w,setWidth(w){p=w},textAlign:w=>"center"===w?w:"right"===w?"left":"right",xPlus:(w,A)=>w-A,leftForLtr:(w,A)=>w-A}},Et=function(){return{x:a=>a,setWidth(a){},textAlign:a=>a,xPlus:(a,p)=>a+p,leftForLtr:(a,p)=>a}};function tn(a,p,w){return a?Sr(p,w):Et()}function sn(a,p){let w,A;("ltr"===p||"rtl"===p)&&(w=a.canvas.style,A=[w.getPropertyValue("direction"),w.getPropertyPriority("direction")],w.setProperty("direction",p,"important"),a.prevTextDirection=A)}function Us(a,p){void 0!==p&&(delete a.prevTextDirection,a.canvas.style.setProperty("direction",p[0],p[1]))}function yr(a){return"angle"===a?{between:we,compare:ue,normalize:me}:{between:ot,compare:(p,w)=>p-w,normalize:p=>p}}function Ss({start:a,end:p,count:w,loop:A,style:H}){return{start:a%w,end:p%w,loop:A&&(p-a+1)%w==0,style:H}}function js(a,p,w){if(!w)return[a];const{property:A,start:H,end:K}=w,ee=p.length,{compare:ae,between:fe,normalize:xe}=yr(A),{start:Ie,end:qe,loop:rt,style:yt}=function ns(a,p,w){const{property:A,start:H,end:K}=w,{between:ee,normalize:ae}=yr(A),fe=p.length;let rt,yt,{start:xe,end:Ie,loop:qe}=a;if(qe){for(xe+=fe,Ie+=fe,rt=0,yt=fe;rt<yt&&ee(ae(p[xe%fe][A]),H,K);++rt)xe--,Ie--;xe%=fe,Ie%=fe}return Ie<xe&&(Ie+=fe),{start:xe,end:Ie,loop:qe,style:a.style}}(a,p,w),Lt=[];let qt,Zi,ys,at=!1,Ge=null;for(let os=Ie,Ps=Ie;os<=qe;++os)Zi=p[os%ee],!Zi.skip&&(qt=xe(Zi[A]),qt!==ys&&(at=fe(qt,H,K),null===Ge&&(at||fe(H,ys,qt)&&0!==ae(H,ys))&&(Ge=0===ae(qt,H)?os:Ps),null!==Ge&&(!at||0===ae(K,qt)||fe(K,ys,qt))&&(Lt.push(Ss({start:Ge,end:os,loop:rt,count:ee,style:yt})),Ge=null),Ps=os,ys=qt));return null!==Ge&&Lt.push(Ss({start:Ge,end:qe,loop:rt,count:ee,style:yt})),Lt}function Os(a,p){const w=[],A=a.segments;for(let H=0;H<A.length;H++){const K=js(A[H],a.points,p);K.length&&w.push(...K)}return w}function xr(a,p){const w=a.points,A=a.options.spanGaps,H=w.length;if(!H)return[];const K=!!a._loop,{start:ee,end:ae}=function rn(a,p,w,A){let H=0,K=p-1;if(w&&!A)for(;H<p&&!a[H].skip;)H++;for(;H<p&&a[H].skip;)H++;for(H%=p,w&&(K+=H);K>H&&a[K%p].skip;)K--;return K%=p,{start:H,end:K}}(w,H,K,A);return wr(a,!0===A?[{start:ee,end:ae,loop:K}]:function Cr(a,p,w,A){const H=a.length,K=[];let fe,ee=p,ae=a[p];for(fe=p+1;fe<=w;++fe){const xe=a[fe%H];xe.skip||xe.stop?ae.skip||(K.push({start:p%H,end:(fe-1)%H,loop:A=!1}),p=ee=xe.stop?fe:null):(ee=fe,ae.skip&&(p=fe)),ae=xe}return null!==ee&&K.push({start:p%H,end:ee%H,loop:A}),K}(w,ee,ae<ee?ae+H:ae,!!a._fullLoop&&0===ee&&ae===H-1),w,p)}function wr(a,p,w,A){return A&&A.setContext&&w?function Er(a,p,w,A){const H=a._chart.getContext(),K=Tr(a.options),{_datasetIndex:ee,options:{spanGaps:ae}}=a,fe=w.length,xe=[];let Ie=K,qe=p[0].start,rt=qe;function yt(Lt,at,Ge,qt){const Zi=ae?-1:1;if(Lt!==at){for(Lt+=fe;w[Lt%fe].skip;)Lt-=Zi;for(;w[at%fe].skip;)at+=Zi;Lt%fe!=at%fe&&(xe.push({start:Lt%fe,end:at%fe,loop:Ge,style:qt}),Ie=qt,qe=at%fe)}}for(const Lt of p){qe=ae?qe:Lt.start;let Ge,at=w[qe%fe];for(rt=qe+1;rt<=Lt.end;rt++){const qt=w[rt%fe];Ge=Tr(A.setContext(gs(H,{type:"segment",p0:at,p1:qt,p0DataIndex:(rt-1)%fe,p1DataIndex:rt%fe,datasetIndex:ee}))),Vs(Ge,Ie)&&yt(qe,rt-1,Lt.loop,Ie),at=qt,Ie=Ge}qe<rt-1&&yt(qe,rt-1,Lt.loop,Ie)}return xe}(a,p,w,A):p}function Tr(a){return{backgroundColor:a.backgroundColor,borderCapStyle:a.borderCapStyle,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderJoinStyle:a.borderJoinStyle,borderWidth:a.borderWidth,borderColor:a.borderColor}}function Vs(a,p){if(!p)return!1;const w=[],A=function(H,K){return ii(K)?(w.includes(K)||w.push(K),w.indexOf(K)):K};return JSON.stringify(a,A)!==JSON.stringify(p,A)}},7246:(xt,et,oe)=>{"use strict";oe.d(et,{jh:()=>xn,vQ:()=>$n});var Z=oe(5879),d=oe(7816),de=oe(8137),g=oe(5619),v=oe(3997);const C=function m(z,re){return z===re||z!=z&&re!=re},P=function k(z,re){for(var ve=z.length;ve--;)if(C(z[ve][0],re))return ve;return-1};var l=Array.prototype.splice;function L(z){var re=-1,ve=null==z?0:z.length;for(this.clear();++re<ve;){var Le=z[re];this.set(Le[0],Le[1])}}L.prototype.clear=function y(){this.__data__=[],this.size=0},L.prototype.delete=function _(z){var re=this.__data__,ve=P(re,z);return!(ve<0||(ve==re.length-1?re.pop():l.call(re,ve,1),--this.size,0))},L.prototype.get=function u(z){var re=this.__data__,ve=P(re,z);return ve<0?void 0:re[ve][1]},L.prototype.has=function E(z){return P(this.__data__,z)>-1},L.prototype.set=function R(z,re){var ve=this.__data__,Le=P(ve,z);return Le<0?(++this.size,ve.push([z,re])):ve[Le][1]=re,this};const V=L,Q="object"==typeof global&&global&&global.Object===Object&&global;var se="object"==typeof self&&self&&self.Object===Object&&self;const Be=Q||se||Function("return this")();var Ue=Be.Symbol,Ne=Object.prototype,I=Ne.hasOwnProperty,le=Ne.toString,he=Ue?Ue.toStringTag:void 0;var Ze=Object.prototype.toString;var Qe=Ue?Ue.toStringTag:void 0;const _t=function tt(z){return null==z?void 0===z?"[object Undefined]":"[object Null]":Qe&&Qe in Object(z)?function ge(z){var re=I.call(z,he),ve=z[he];try{z[he]=void 0;var Le=!0}catch{}var lt=le.call(z);return Le&&(re?z[he]=ve:delete z[he]),lt}(z):function Ve(z){return Ze.call(z)}(z)},dt=function Wt(z){var re=typeof z;return null!=z&&("object"==re||"function"==re)},Ft=function Qt(z){if(!dt(z))return!1;var re=_t(z);return"[object Function]"==re||"[object GeneratorFunction]"==re||"[object AsyncFunction]"==re||"[object Proxy]"==re};var z,Jt=Be["__core-js_shared__"],zt=(z=/[^.]+$/.exec(Jt&&Jt.keys&&Jt.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"";var pi=Function.prototype.toString;var Ni=/^\[object .+?Constructor\]$/,At=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Oi=function Yt(z){return!(!dt(z)||function pt(z){return!!zt&&zt in z}(z))&&(Ft(z)?At:Ni).test(function hi(z){if(null!=z){try{return pi.call(z)}catch{}try{return z+""}catch{}}return""}(z))},Vt=function jt(z,re){var ve=function gi(z,re){return z?.[re]}(z,re);return Oi(ve)?ve:void 0},ei=Vt(Be,"Map"),Ht=Vt(Object,"create");var Pi=Object.prototype.hasOwnProperty;var ue=Object.prototype.hasOwnProperty;function it(z){var re=-1,ve=null==z?0:z.length;for(this.clear();++re<ve;){var Le=z[re];this.set(Le[0],Le[1])}}it.prototype.clear=function kt(){this.__data__=Ht?Ht(null):{},this.size=0},it.prototype.delete=function ls(z){var re=this.has(z)&&delete this.__data__[z];return this.size-=re?1:0,re},it.prototype.get=function W(z){var re=this.__data__;if(Ht){var ve=re[z];return"__lodash_hash_undefined__"===ve?void 0:ve}return Pi.call(re,z)?re[z]:void 0},it.prototype.has=function me(z){var re=this.__data__;return Ht?void 0!==re[z]:ue.call(re,z)},it.prototype.set=function Xe(z,re){var ve=this.__data__;return this.size+=this.has(z)?0:1,ve[z]=Ht&&void 0===re?"__lodash_hash_undefined__":re,this};const st=it,ti=function ai(z,re){var ve=z.__data__;return function Ct(z){var re=typeof z;return"string"==re||"number"==re||"symbol"==re||"boolean"==re?"__proto__"!==z:null===z}(re)?ve["string"==typeof re?"string":"hash"]:ve.map};function fi(z){var re=-1,ve=null==z?0:z.length;for(this.clear();++re<ve;){var Le=z[re];this.set(Le[0],Le[1])}}fi.prototype.clear=function Pt(){this.size=0,this.__data__={hash:new st,map:new(ei||V),string:new st}},fi.prototype.delete=function mi(z){var re=ti(this,z).delete(z);return this.size-=re?1:0,re},fi.prototype.get=function Xt(z){return ti(this,z).get(z)},fi.prototype.has=function Cs(z){return ti(this,z).has(z)},fi.prototype.set=function ji(z,re){var ve=ti(this,z),Le=ve.size;return ve.set(z,re),this.size+=ve.size==Le?0:1,this};const Ri=fi;function ii(z){var re=this.__data__=new V(z);this.size=re.size}ii.prototype.clear=function ie(){this.__data__=new V,this.size=0},ii.prototype.delete=function J(z){var re=this.__data__,ve=re.delete(z);return this.size=re.size,ve},ii.prototype.get=function Se(z){return this.__data__.get(z)},ii.prototype.has=function Ce(z){return this.__data__.has(z)},ii.prototype.set=function Vi(z,re){var ve=this.__data__;if(ve instanceof V){var Le=ve.__data__;if(!ei||Le.length<199)return Le.push([z,re]),this.size=++ve.size,this;ve=this.__data__=new Ri(Le)}return ve.set(z,re),this.size=ve.size,this};const Ti=ii;var ds=function(){try{var z=Vt(Object,"defineProperty");return z({},"",{}),z}catch{}}();const si=ds,is=function Bi(z,re,ve){"__proto__"==re&&si?si(z,re,{configurable:!0,enumerable:!0,value:ve,writable:!0}):z[re]=ve},ss=function Ls(z,re,ve){(void 0!==ve&&!C(z[re],ve)||void 0===ve&&!(re in z))&&is(z,re,ve)};var te=function F(z){return function(re,ve,Le){for(var lt=-1,St=Object(re),mt=Le(re),gt=mt.length;gt--;){var Rt=mt[z?gt:++lt];if(!1===ve(St[Rt],Rt,St))break}return re}}();const _e=te;var Pe="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ke=Pe&&"object"==typeof module&&module&&!module.nodeType&&module,Tt=Ke&&Ke.exports===Pe?Be.Buffer:void 0,Mt=Tt?Tt.allocUnsafe:void 0;const xs=Be.Uint8Array,qs=function Rr(z,re){var ve=re?function ws(z){var re=new z.constructor(z.byteLength);return new xs(re).set(new xs(z)),re}(z.buffer):z.buffer;return new z.constructor(ve,z.byteOffset,z.length)};var us=Object.create,er=function(){function z(){}return function(re){if(!dt(re))return{};if(us)return us(re);z.prototype=re;var ve=new z;return z.prototype=void 0,ve}}();const Es=er;var tr=function fs(z,re){return function(ve){return z(re(ve))}}(Object.getPrototypeOf,Object);const ir=tr;var Ir=Object.prototype;const sr=function Br(z){var re=z&&z.constructor;return z===("function"==typeof re&&re.prototype||Ir)},_s=function or(z){return null!=z&&"object"==typeof z},Rs=function ps(z){return _s(z)&&"[object Arguments]"==_t(z)};var ar=Object.prototype,Fr=ar.hasOwnProperty,Ms=ar.propertyIsEnumerable,Hr=Rs(function(){return arguments}())?Rs:function(z){return _s(z)&&Fr.call(z,"callee")&&!Ms.call(z,"callee")};const gs=Hr,$i=Array.isArray,Mi=function Nr(z){return"number"==typeof z&&z>-1&&z%1==0&&z<=9007199254740991},Is=function ms(z){return null!=z&&Mi(z.length)&&!Ft(z)};var cr="object"==typeof exports&&exports&&!exports.nodeType&&exports,bs=cr&&"object"==typeof module&&module&&!module.nodeType&&module,dr=bs&&bs.exports===cr?Be.Buffer:void 0;const Hs=(dr?dr.isBuffer:void 0)||function Bs(){return!1};var bi=Function.prototype.toString,Ns=Object.prototype.hasOwnProperty,$r=bi.call(Object);var Et={};Et["[object Float32Array]"]=Et["[object Float64Array]"]=Et["[object Int8Array]"]=Et["[object Int16Array]"]=Et["[object Int32Array]"]=Et["[object Uint8Array]"]=Et["[object Uint8ClampedArray]"]=Et["[object Uint16Array]"]=Et["[object Uint32Array]"]=!0,Et["[object Arguments]"]=Et["[object Array]"]=Et["[object ArrayBuffer]"]=Et["[object Boolean]"]=Et["[object DataView]"]=Et["[object Date]"]=Et["[object Error]"]=Et["[object Function]"]=Et["[object Map]"]=Et["[object Number]"]=Et["[object Object]"]=Et["[object RegExp]"]=Et["[object Set]"]=Et["[object String]"]=Et["[object WeakMap]"]=!1;var Ss="object"==typeof exports&&exports&&!exports.nodeType&&exports,ns=Ss&&"object"==typeof module&&module&&!module.nodeType&&module,Os=ns&&ns.exports===Ss&&Q.process,rn=function(){try{return ns&&ns.require&&ns.require("util").types||Os&&Os.binding&&Os.binding("util")}catch{}}(),xr=rn&&rn.isTypedArray;const Er=xr?function Us(z){return function(re){return z(re)}}(xr):function tn(z){return _s(z)&&Mi(z.length)&&!!Et[_t(z)]},Vs=function Tr(z,re){if(("constructor"!==re||"function"!=typeof z[re])&&"__proto__"!=re)return z[re]};var p=Object.prototype.hasOwnProperty;const A=function w(z,re,ve){var Le=z[re];(!p.call(z,re)||!C(Le,ve)||void 0===ve&&!(re in z))&&is(z,re,ve)};var xe=/^(?:0|[1-9]\d*)$/;const qe=function Ie(z,re){var ve=typeof z;return!!(re=re??9007199254740991)&&("number"==ve||"symbol"!=ve&&xe.test(z))&&z>-1&&z%1==0&&z<re};var yt=Object.prototype.hasOwnProperty;const at=function Lt(z,re){var ve=$i(z),Le=!ve&&gs(z),lt=!ve&&!Le&&Hs(z),St=!ve&&!Le&&!lt&&Er(z),mt=ve||Le||lt||St,gt=mt?function ee(z,re){for(var ve=-1,Le=Array(z);++ve<z;)Le[ve]=re(ve);return Le}(z.length,String):[],Rt=gt.length;for(var yi in z)(re||yt.call(z,yi))&&(!mt||!("length"==yi||lt&&("offset"==yi||"parent"==yi)||St&&("buffer"==yi||"byteLength"==yi||"byteOffset"==yi)||qe(yi,Rt)))&&gt.push(yi);return gt};var ys=Object.prototype.hasOwnProperty;const on=function nn(z){if(!dt(z))return function Ge(z){var re=[];if(null!=z)for(var ve in Object(z))re.push(ve);return re}(z);var re=sr(z),ve=[];for(var Le in z)"constructor"==Le&&(re||!ys.call(z,Le))||ve.push(Le);return ve},Dr=function Mr(z){return Is(z)?at(z,!0):on(z)},Ps=function os(z){return function H(z,re,ve,Le){var lt=!ve;ve||(ve={});for(var St=-1,mt=re.length;++St<mt;){var gt=re[St],Rt=Le?Le(ve[gt],z[gt],gt,ve,z):void 0;void 0===Rt&&(Rt=z[gt]),lt?is(ve,gt,Rt):A(ve,gt,Rt)}return ve}(z,Dr(z))},An=function kn(z,re,ve,Le,lt,St,mt){var gt=Vs(z,ve),Rt=Vs(re,ve),yi=mt.get(Rt);if(yi)ss(z,ve,yi);else{var _i=St?St(gt,Rt,ve+"",z,re,mt):void 0,Ys=void 0===_i;if(Ys){var cn=$i(Rt),hn=!cn&&Hs(Rt),dn=!cn&&!hn&&Er(Rt);_i=Rt,cn||hn||dn?$i(gt)?_i=gt:function Wr(z){return _s(z)&&Is(z)}(gt)?_i=function Qs(z,re){var ve=-1,Le=z.length;for(re||(re=Array(Le));++ve<Le;)re[ve]=z[ve];return re}(gt):hn?(Ys=!1,_i=function Nt(z,re){if(re)return z.slice();var ve=z.length,Le=Mt?Mt(ve):new z.constructor(ve);return z.copy(Le),Le}(Rt,!0)):dn?(Ys=!1,_i=qs(Rt,!0)):_i=[]:function fr(z){if(!_s(z)||"[object Object]"!=_t(z))return!1;var re=ir(z);if(null===re)return!0;var ve=Ns.call(re,"constructor")&&re.constructor;return"function"==typeof ve&&ve instanceof ve&&bi.call(ve)==$r}(Rt)||gs(Rt)?(_i=gt,gs(gt)?_i=Ps(gt):(!dt(gt)||Ft(gt))&&(_i=function rr(z){return"function"!=typeof z.constructor||sr(z)?{}:Es(ir(z))}(Rt))):Ys=!1}Ys&&(mt.set(Rt,_i),lt(_i,Rt,Le,St,mt),mt.delete(Rt)),ss(z,ve,_i)}},On=function $s(z,re,ve,Le,lt){z!==re&&_e(re,function(St,mt){if(lt||(lt=new Ti),dt(St))An(z,re,mt,ve,$s,Le,lt);else{var gt=Le?Le(Vs(z,mt),St,mt+"",z,re,lt):void 0;void 0===gt&&(gt=St),ss(z,mt,gt)}},Dr)},Di=function Ks(z){return z};var an=Math.max;const gn=function In(z){return function(){return z}};var Bn=si?function(z,re){return si(z,"toString",{configurable:!0,enumerable:!1,value:gn(re),writable:!0})}:Di,vn=Date.now,bn=function Hn(z){var re=0,ve=0;return function(){var Le=vn(),lt=16-(Le-ve);if(ve=Le,lt>0){if(++re>=800)return arguments[0]}else re=0;return z.apply(void 0,arguments)}}(Bn);const li=bn,Wn=function Sn(z,re){return li(function Ln(z,re,ve){return re=an(void 0===re?z.length-1:re,0),function(){for(var Le=arguments,lt=-1,St=an(Le.length-re,0),mt=Array(St);++lt<St;)mt[lt]=Le[re+lt];lt=-1;for(var gt=Array(re+1);++lt<re;)gt[lt]=Le[lt];return gt[re]=ve(mt),function Xi(z,re,ve){switch(ve.length){case 0:return z.call(re);case 1:return z.call(re,ve[0]);case 2:return z.call(re,ve[0],ve[1]);case 3:return z.call(re,ve[0],ve[1],ve[2])}return z.apply(re,ve)}(z,this,gt)}}(z,re,Di),z+"")};var yn=function jn(z){return Wn(function(re,ve){var Le=-1,lt=ve.length,St=lt>1?ve[lt-1]:void 0,mt=lt>2?ve[2]:void 0;for(St=z.length>3&&"function"==typeof St?(lt--,St):void 0,mt&&function zn(z,re,ve){if(!dt(ve))return!1;var Le=typeof re;return!!("number"==Le?Is(ve)&&qe(re,ve.length):"string"==Le&&re in ve)&&C(ve[re],z)}(ve[0],ve[1],mt)&&(St=lt<3?void 0:St,lt=1),re=Object(re);++Le<lt;){var gt=ve[Le];gt&&z(re,gt,Le,St)}return re})}(function(z,re,ve){On(z,re,ve)});const Cn=yn;let Vn=(()=>{var z;class re{constructor(){this.colorschemesOptions=new g.X(void 0)}setColorschemesOptions(Le){this.pColorschemesOptions=Le,this.colorschemesOptions.next(Le)}getColorschemesOptions(){return this.pColorschemesOptions}}return(z=re).\u0275fac=function(Le){return new(Le||z)},z.\u0275prov=Z.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),re})(),xn=(()=>{var z;class re{constructor(Le,lt,St){this.zone=lt,this.themeService=St,this.type="bar",this.plugins=[],this.chartClick=new Z.vpe,this.chartHover=new Z.vpe,this.subs=[],this.themeOverrides={},this.ctx=Le.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe((0,v.x)()).subscribe(mt=>this.themeChanged(mt)))}ngOnChanges(Le){const lt=["type"],St=Object.getOwnPropertyNames(Le);if(St.some(mt=>lt.includes(mt))||St.every(mt=>Le[mt].isFirstChange()))this.render();else{const mt=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,mt.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,mt.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,mt.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(Le=>Le.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new d.kL(this.ctx,this.getChartConfiguration()))}update(Le){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(Le))}hideDataset(Le,lt){this.chart&&(this.chart.getDatasetMeta(Le).hidden=lt,this.update())}isDatasetHidden(Le){return this.chart?.getDatasetMeta(Le)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(Le){this.themeOverrides=Le,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return Cn({onHover:(Le,lt)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:Le,active:lt}))},onClick:(Le,lt)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:Le,active:lt}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}}return(z=re).\u0275fac=function(Le){return new(Le||z)(Z.Y36(Z.SBq),Z.Y36(Z.R0b),Z.Y36(Vn))},z.\u0275dir=Z.lG2({type:z,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[Z.TTD]}),re})();const Ar=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],ln={plugins:{colors:{enabled:!1}},datasets:{line:{backgroundColor:z=>Si(qi(z.datasetIndex),.4),borderColor:z=>Si(qi(z.datasetIndex),1),pointBackgroundColor:z=>Si(qi(z.datasetIndex),1),pointBorderColor:"#fff"},bar:{backgroundColor:z=>Si(qi(z.datasetIndex),.6),borderColor:z=>Si(qi(z.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:z=>Si(qi(z.dataIndex),.6),borderColor:"#fff"},get pie(){return this.doughnut},polarArea:{backgroundColor:z=>Si(qi(z.dataIndex),.6),borderColor:z=>Si(qi(z.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function Si(z,re){return"rgba("+z.concat(re).join(",")+")"}function Gi(z,re){return Math.floor(Math.random()*(re-z+1))+z}function qi(z=0){return Ar[z]||function wn(){return[Gi(0,255),Gi(0,255),Gi(0,255)]}()}let En=(()=>{var z;class re{constructor(){this.generateColors=!0}}return(z=re).\u0275fac=function(Le){return new(Le||z)},z.\u0275prov=Z.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),re})();d.kL.register(...d.zX);let $n=(()=>{var z;class re{constructor(Le){Le?.plugins&&d.kL.register(...Le.plugins);const lt=Cn(Le?.generateColors?ln:{},Le?.defaults||{});de.d.set(lt)}static forRoot(Le){return{ngModule:re,providers:[{provide:En,useValue:Le}]}}}return(z=re).\u0275fac=function(Le){return new(Le||z)(Z.LFG(En,8))},z.\u0275mod=Z.oAB({type:z}),z.\u0275inj=Z.cJS({}),re})()},3427:(xt,et,oe)=>{"use strict";oe.d(et,{Co:()=>Ze,UU:()=>he,nu:()=>je});var Z=oe(6028),d=oe(5879),de=oe(6223),g=oe(3680),v=oe(5683),y=oe(8525),M=oe(5619),m=oe(2096),C=oe(2572),k=oe(8645),P=oe(4664),T=oe(7398),l=oe(7921),_=oe(932),h=oe(9773),u=oe(8180),S=oe(9397),E=oe(2181),O=oe(8774),R=oe(6814),x=oe(2296),L=oe(5986),V=oe(617),ie=oe(5940),X=oe(2596),J=oe(6385);const be=["searchSelectInput"],Se=["innerSelectSearch"];function Me(Ve,nt){if(1&Ve){const Te=d.EpF();d.TgZ(0,"mat-checkbox",10),d.NdJ("change",function(Qe){d.CHM(Te);const tt=d.oxw();return d.KtG(tt._emitSelectAllBooleanToParent(Qe.checked))}),d.qZA()}if(2&Ve){const Te=d.oxw();d.Q6J("color",null==Te.matFormField?null:Te.matFormField.color)("checked",Te.toggleAllCheckboxChecked)("indeterminate",Te.toggleAllCheckboxIndeterminate)("matTooltip",Te.toggleAllCheckboxTooltipMessage)("matTooltipPosition",Te.toggleAllCheckboxTooltipPosition)}}function Ce(Ve,nt){1&Ve&&d._UZ(0,"mat-spinner",11)}function N(Ve,nt){1&Ve&&d.Hsn(0,1,["*ngIf","clearIcon; else defaultIcon"])}function G(Ve,nt){if(1&Ve&&(d.TgZ(0,"mat-icon",15),d._uU(1),d.qZA()),2&Ve){const Te=d.oxw(2);d.Q6J("svgIcon",Te.closeSvgIcon),d.xp6(1),d.hij(" ",Te.closeSvgIcon?null:Te.closeIcon," ")}}function Q(Ve,nt){if(1&Ve){const Te=d.EpF();d.TgZ(0,"button",12),d.NdJ("click",function(){d.CHM(Te);const Qe=d.oxw();return d.KtG(Qe._reset(!0))}),d.YNc(1,N,1,0,"ng-content",13),d.YNc(2,G,2,2,"ng-template",null,14,d.W1O),d.qZA()}if(2&Ve){const Te=d.MAs(3),Oe=d.oxw();d.xp6(1),d.Q6J("ngIf",Oe.clearIcon)("ngIfElse",Te)}}function se(Ve,nt){1&Ve&&d.Hsn(0,2,["*ngIf","noEntriesFound; else defaultNoEntriesFound"])}function Ae(Ve,nt){if(1&Ve&&d._uU(0),2&Ve){const Te=d.oxw(2);d.Oqu(Te.noEntriesFoundLabel)}}function Be(Ve,nt){if(1&Ve&&(d.TgZ(0,"div",16),d.YNc(1,se,1,0,"ng-content",13),d.YNc(2,Ae,1,1,"ng-template",null,17,d.W1O),d.qZA()),2&Ve){const Te=d.MAs(3),Oe=d.oxw();d.xp6(1),d.Q6J("ngIf",Oe.noEntriesFound)("ngIfElse",Te)}}const Ue=[[["",8,"mat-select-search-custom-header-content"]],[["","ngxMatSelectSearchClear",""]],[["","ngxMatSelectNoEntriesFound",""]]],Re=function(Ve,nt){return{"mat-select-search-inner-multiple":Ve,"mat-select-search-inner-toggle-all":nt}},Ne=[".mat-select-search-custom-header-content","[ngxMatSelectSearchClear]","[ngxMatSelectNoEntriesFound]"];let I=(()=>{class Ve{}return Ve.\u0275fac=function(Te){return new(Te||Ve)},Ve.\u0275dir=d.lG2({type:Ve,selectors:[["","ngxMatSelectSearchClear",""]]}),Ve})();const le=["ariaLabel","clearSearchInput","closeIcon","closeSvgIcon","disableInitialFocus","disableScrollToActiveOnOptionsChanged","enableClearOnEscapePressed","hideClearSearchButton","noEntriesFoundLabel","placeholderLabel","preventHomeEndKeyPropagation","searching"],he=new d.OlP("mat-selectsearch-default-options");let ge=(()=>{class Ve{}return Ve.\u0275fac=function(Te){return new(Te||Ve)},Ve.\u0275dir=d.lG2({type:Ve,selectors:[["","ngxMatSelectNoEntriesFound",""]]}),Ve})(),je=(()=>{class Ve{constructor(Te,Oe,Qe,tt=null,_t=null,Wt){this.matSelect=Te,this.changeDetectorRef=Oe,this._viewportRuler=Qe,this.matOption=tt,this.matFormField=_t,this.placeholderLabel="Suche",this.type="text",this.closeIcon="close",this.noEntriesFoundLabel="Keine Optionen gefunden",this.clearSearchInput=!0,this.searching=!1,this.disableInitialFocus=!1,this.enableClearOnEscapePressed=!1,this.preventHomeEndKeyPropagation=!1,this.disableScrollToActiveOnOptionsChanged=!1,this.ariaLabel="dropdown search",this.showToggleAllCheckbox=!1,this.toggleAllCheckboxChecked=!1,this.toggleAllCheckboxIndeterminate=!1,this.toggleAllCheckboxTooltipMessage="",this.toggleAllCheckboxTooltipPosition="below",this.hideClearSearchButton=!1,this.alwaysRestoreSelectedOptionsMulti=!1,this.toggleAll=new d.vpe,this.onTouched=dt=>{},this._options$=new M.X(null),this.optionsList$=this._options$.pipe((0,P.w)(dt=>dt?dt.changes.pipe((0,T.U)(bt=>bt.toArray()),(0,l.O)(dt.toArray())):(0,m.of)(null))),this.optionsLength$=this.optionsList$.pipe((0,T.U)(dt=>dt?dt.length:0)),this._formControl=new de.NI(""),this._showNoEntriesFound$=(0,C.a)([this._formControl.valueChanges,this.optionsLength$]).pipe((0,T.U)(([dt,bt])=>this.noEntriesFoundLabel&&dt&&bt===this.getOptionsLengthOffset())),this._onDestroy=new k.x,this.applyDefaultOptions(Wt)}get value(){return this._formControl.value}set _options(Te){this._options$.next(Te)}get _options(){return this._options$.getValue()}applyDefaultOptions(Te){if(Te)for(const Oe of le)Te.hasOwnProperty(Oe)&&(this[Oe]=Te[Oe])}ngOnInit(){this.matOption?(this.matOption.disabled=!0,this.matOption._getHostElement().classList.add("contains-mat-select-search"),this.matOption._getHostElement().setAttribute("aria-hidden","true")):console.error("<ngx-mat-select-search> must be placed inside a <mat-option> element"),this.matSelect.openedChange.pipe((0,_.g)(1),(0,h.R)(this._onDestroy)).subscribe(Te=>{Te?(this.updateInputWidth(),this.disableInitialFocus||this._focus()):this.clearSearchInput&&this._reset()}),this.matSelect.openedChange.pipe((0,u.q)(1),(0,P.w)(Te=>{this._options=this.matSelect.options;let Oe=this._options.toArray()[this.getOptionsLengthOffset()];return this._options.changes.pipe((0,S.b)(()=>{setTimeout(()=>{const Qe=this._options.toArray(),tt=Qe[this.getOptionsLengthOffset()],_t=this.matSelect._keyManager;_t&&this.matSelect.panelOpen&&((!this.matSelect.compareWith(Oe,tt)||!_t.activeItem||!Qe.find(dt=>this.matSelect.compareWith(dt,_t.activeItem)))&&_t.setActiveItem(this.getOptionsLengthOffset()),setTimeout(()=>{this.updateInputWidth()})),Oe=tt})}))})).pipe((0,h.R)(this._onDestroy)).subscribe(),this._showNoEntriesFound$.pipe((0,h.R)(this._onDestroy)).subscribe(Te=>{this.matOption&&(Te?this.matOption._getHostElement().classList.add("mat-select-search-no-entries-found"):this.matOption._getHostElement().classList.remove("mat-select-search-no-entries-found"))}),this._viewportRuler.change().pipe((0,h.R)(this._onDestroy)).subscribe(()=>{this.matSelect.panelOpen&&this.updateInputWidth()}),this.initMultipleHandling(),this.optionsList$.pipe((0,h.R)(this._onDestroy)).subscribe(()=>{this.changeDetectorRef.markForCheck()})}_emitSelectAllBooleanToParent(Te){this.toggleAll.emit(Te)}ngOnDestroy(){this._onDestroy.next(),this._onDestroy.complete()}_isToggleAllCheckboxVisible(){return this.matSelect.multiple&&this.showToggleAllCheckbox}_handleKeydown(Te){(Te.key&&1===Te.key.length||Te.keyCode>=Z.A&&Te.keyCode<=Z.Z||Te.keyCode>=Z.xE&&Te.keyCode<=Z.aO||Te.keyCode===Z.L_||this.preventHomeEndKeyPropagation&&(Te.keyCode===Z.Sd||Te.keyCode===Z.uR))&&Te.stopPropagation(),this.matSelect.multiple&&Te.key&&Te.keyCode===Z.K5&&setTimeout(()=>this._focus()),!0===this.enableClearOnEscapePressed&&Te.keyCode===Z.hY&&this.value&&(this._reset(!0),Te.stopPropagation())}_handleKeyup(Te){if(Te.keyCode===Z.LH||Te.keyCode===Z.JH){const Oe=this.matSelect._getAriaActiveDescendant(),Qe=this._options.toArray().findIndex(tt=>tt.id===Oe);-1!==Qe&&(this.unselectActiveDescendant(),this.activeDescendant=this._options.toArray()[Qe]._getHostElement(),this.activeDescendant.setAttribute("aria-selected","true"),this.searchSelectInput.nativeElement.setAttribute("aria-activedescendant",Oe))}}writeValue(Te){this._lastExternalInputValue=Te,this._formControl.setValue(Te),this.changeDetectorRef.markForCheck()}onBlur(){this.unselectActiveDescendant(),this.onTouched()}registerOnChange(Te){this._formControl.valueChanges.pipe((0,E.h)(Oe=>Oe!==this._lastExternalInputValue),(0,S.b)(()=>this._lastExternalInputValue=void 0),(0,h.R)(this._onDestroy)).subscribe(Te)}registerOnTouched(Te){this.onTouched=Te}_focus(){if(!this.searchSelectInput||!this.matSelect.panel)return;const Te=this.matSelect.panel.nativeElement,Oe=Te.scrollTop;this.searchSelectInput.nativeElement.focus(),Te.scrollTop=Oe}_reset(Te){this._formControl.setValue(""),Te&&this._focus()}initMultipleHandling(){this.matSelect.ngControl?(this.previousSelectedValues=this.matSelect.ngControl.value,this.matSelect.ngControl.valueChanges.pipe((0,h.R)(this._onDestroy)).subscribe(Te=>{let Oe=!1;if(this.matSelect.multiple&&(this.alwaysRestoreSelectedOptionsMulti||this._formControl.value&&this._formControl.value.length)&&this.previousSelectedValues&&Array.isArray(this.previousSelectedValues)){(!Te||!Array.isArray(Te))&&(Te=[]);const Qe=this.matSelect.options.map(tt=>tt.value);this.previousSelectedValues.forEach(tt=>{!Te.some(_t=>this.matSelect.compareWith(_t,tt))&&!Qe.some(_t=>this.matSelect.compareWith(_t,tt))&&(Te.push(tt),Oe=!0)})}this.previousSelectedValues=Te,Oe&&this.matSelect._onChange(Te)})):this.matSelect.multiple&&console.error("the mat-select containing ngx-mat-select-search must have a ngModel or formControl directive when multiple=true")}updateInputWidth(){if(!this.innerSelectSearch||!this.innerSelectSearch.nativeElement)return;let Oe,Te=this.innerSelectSearch.nativeElement;for(;Te=Te.parentElement;)if(Te.classList.contains("mat-select-panel")){Oe=Te;break}Oe&&(this.innerSelectSearch.nativeElement.style.width=Oe.clientWidth+"px")}getOptionsLengthOffset(){return this.matOption?1:0}unselectActiveDescendant(){this.activeDescendant?.removeAttribute("aria-selected"),this.searchSelectInput.nativeElement.removeAttribute("aria-activedescendant")}}return Ve.\u0275fac=function(Te){return new(Te||Ve)(d.Y36(y.gD),d.Y36(d.sBO),d.Y36(O.rL),d.Y36(g.ey,8),d.Y36(v.KE,8),d.Y36(he,8))},Ve.\u0275cmp=d.Xpm({type:Ve,selectors:[["ngx-mat-select-search"]],contentQueries:function(Te,Oe,Qe){if(1&Te&&(d.Suo(Qe,I,5),d.Suo(Qe,ge,5)),2&Te){let tt;d.iGM(tt=d.CRH())&&(Oe.clearIcon=tt.first),d.iGM(tt=d.CRH())&&(Oe.noEntriesFound=tt.first)}},viewQuery:function(Te,Oe){if(1&Te&&(d.Gf(be,7,d.SBq),d.Gf(Se,7,d.SBq)),2&Te){let Qe;d.iGM(Qe=d.CRH())&&(Oe.searchSelectInput=Qe.first),d.iGM(Qe=d.CRH())&&(Oe.innerSelectSearch=Qe.first)}},inputs:{placeholderLabel:"placeholderLabel",type:"type",closeIcon:"closeIcon",closeSvgIcon:"closeSvgIcon",noEntriesFoundLabel:"noEntriesFoundLabel",clearSearchInput:"clearSearchInput",searching:"searching",disableInitialFocus:"disableInitialFocus",enableClearOnEscapePressed:"enableClearOnEscapePressed",preventHomeEndKeyPropagation:"preventHomeEndKeyPropagation",disableScrollToActiveOnOptionsChanged:"disableScrollToActiveOnOptionsChanged",ariaLabel:"ariaLabel",showToggleAllCheckbox:"showToggleAllCheckbox",toggleAllCheckboxChecked:"toggleAllCheckboxChecked",toggleAllCheckboxIndeterminate:"toggleAllCheckboxIndeterminate",toggleAllCheckboxTooltipMessage:"toggleAllCheckboxTooltipMessage",toggleAllCheckboxTooltipPosition:"toggleAllCheckboxTooltipPosition",hideClearSearchButton:"hideClearSearchButton",alwaysRestoreSelectedOptionsMulti:"alwaysRestoreSelectedOptionsMulti"},outputs:{toggleAll:"toggleAll"},features:[d._Bn([{provide:de.JU,useExisting:(0,d.Gpc)(()=>Ve),multi:!0}])],ngContentSelectors:Ne,decls:13,vars:14,consts:[["matInput","",1,"mat-select-search-input","mat-select-search-hidden"],[1,"mat-select-search-inner","mat-typography","mat-datepicker-content","mat-tab-header",3,"ngClass"],["innerSelectSearch",""],[1,"mat-select-search-inner-row"],["class","mat-select-search-toggle-all-checkbox","matTooltipClass","ngx-mat-select-search-toggle-all-tooltip",3,"color","checked","indeterminate","matTooltip","matTooltipPosition","change",4,"ngIf"],["autocomplete","off",1,"mat-select-search-input",3,"type","formControl","placeholder","keydown","keyup","blur"],["searchSelectInput",""],["class","mat-select-search-spinner","diameter","16",4,"ngIf"],["mat-icon-button","","aria-label","Clear","class","mat-select-search-clear",3,"click",4,"ngIf"],["class","mat-select-search-no-entries-found",4,"ngIf"],["matTooltipClass","ngx-mat-select-search-toggle-all-tooltip",1,"mat-select-search-toggle-all-checkbox",3,"color","checked","indeterminate","matTooltip","matTooltipPosition","change"],["diameter","16",1,"mat-select-search-spinner"],["mat-icon-button","","aria-label","Clear",1,"mat-select-search-clear",3,"click"],[4,"ngIf","ngIfElse"],["defaultIcon",""],[3,"svgIcon"],[1,"mat-select-search-no-entries-found"],["defaultNoEntriesFound",""]],template:function(Te,Oe){1&Te&&(d.F$t(Ue),d._UZ(0,"input",0),d.TgZ(1,"div",1,2)(3,"div",3),d.YNc(4,Me,1,5,"mat-checkbox",4),d.TgZ(5,"input",5,6),d.NdJ("keydown",function(tt){return Oe._handleKeydown(tt)})("keyup",function(tt){return Oe._handleKeyup(tt)})("blur",function(){return Oe.onBlur()}),d.qZA(),d.YNc(7,Ce,1,0,"mat-spinner",7),d.YNc(8,Q,4,2,"button",8),d.Hsn(9),d.qZA(),d._UZ(10,"mat-divider"),d.qZA(),d.YNc(11,Be,4,2,"div",9),d.ALo(12,"async")),2&Te&&(d.xp6(1),d.Q6J("ngClass",d.WLB(11,Re,Oe.matSelect.multiple,Oe._isToggleAllCheckboxVisible())),d.xp6(3),d.Q6J("ngIf",Oe._isToggleAllCheckboxVisible()),d.xp6(1),d.Q6J("type",Oe.type)("formControl",Oe._formControl)("placeholder",Oe.placeholderLabel),d.uIk("aria-label",Oe.ariaLabel),d.xp6(2),d.Q6J("ngIf",Oe.searching),d.xp6(1),d.Q6J("ngIf",!Oe.hideClearSearchButton&&Oe.value&&!Oe.searching),d.xp6(3),d.Q6J("ngIf",d.lcZ(12,9,Oe._showNoEntriesFound$)))},dependencies:[R.mk,R.O5,de.Fj,de.JJ,de.oH,x.RK,L.oG,V.Hw,ie.Ou,X.gM,J.d,R.Ov],styles:[".mat-select-search-hidden[_ngcontent-%COMP%]{visibility:hidden}.mat-select-search-inner[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;z-index:100;font-size:inherit;box-shadow:none;background-color:var(--mat-select-panel-background-color)}.mat-select-search-inner.mat-select-search-inner-multiple.mat-select-search-inner-toggle-all[_ngcontent-%COMP%]   .mat-select-search-inner-row[_ngcontent-%COMP%]{display:flex;align-items:center}.mat-select-search-input[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;border:none;font-family:inherit;font-size:inherit;color:currentColor;outline:none;background-color:var(--mat-select-panel-background-color);padding:0 44px 0 16px;height:calc(3em - 1px);line-height:calc(3em - 1px)}[dir=rtl][_nghost-%COMP%]   .mat-select-search-input[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .mat-select-search-input[_ngcontent-%COMP%]{padding-right:16px;padding-left:44px}.mat-select-search-inner-toggle-all[_ngcontent-%COMP%]   .mat-select-search-input[_ngcontent-%COMP%]{padding-left:5px}.mat-select-search-no-entries-found[_ngcontent-%COMP%]{padding-top:8px}.mat-select-search-clear[_ngcontent-%COMP%]{position:absolute;right:4px;top:0}[dir=rtl][_nghost-%COMP%]   .mat-select-search-clear[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .mat-select-search-clear[_ngcontent-%COMP%]{right:auto;left:4px}.mat-select-search-spinner[_ngcontent-%COMP%]{position:absolute;right:16px;top:calc(50% - 8px)}[dir=rtl][_nghost-%COMP%]   .mat-select-search-spinner[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .mat-select-search-spinner[_ngcontent-%COMP%]{right:auto;left:16px}  .mat-mdc-option[aria-disabled=true].contains-mat-select-search{position:sticky;top:-8px;z-index:1;opacity:1;margin-top:-8px;pointer-events:all}  .mat-mdc-option[aria-disabled=true].contains-mat-select-search .mat-icon{margin-right:0;margin-left:0}  .mat-mdc-option[aria-disabled=true].contains-mat-select-search mat-pseudo-checkbox{display:none}  .mat-mdc-option[aria-disabled=true].contains-mat-select-search .mdc-list-item__primary-text{opacity:1}.mat-select-search-toggle-all-checkbox[_ngcontent-%COMP%]{padding-left:5px}[dir=rtl][_nghost-%COMP%]   .mat-select-search-toggle-all-checkbox[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .mat-select-search-toggle-all-checkbox[_ngcontent-%COMP%]{padding-left:0;padding-right:5px}"],changeDetection:0}),Ve})(),Ze=(()=>{class Ve{}return Ve.\u0275fac=function(Te){return new(Te||Ve)},Ve.\u0275mod=d.oAB({type:Ve}),Ve.\u0275inj=d.cJS({imports:[R.ez,de.UX,x.ot,L.p9,V.Ps,ie.Cq,X.AV,J.t]}),Ve})()},1180:(xt,et,oe)=>{"use strict";function Z(v){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(v)}function g(v,y,M){return(y=function de(v){var y=function d(v,y){if("object"!==Z(v)||null===v)return v;var M=v[Symbol.toPrimitive];if(void 0!==M){var m=M.call(v,y||"default");if("object"!==Z(m))return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===y?String:Number)(v)}(v,"string");return"symbol"===Z(y)?y:String(y)}(y))in v?Object.defineProperty(v,y,{value:M,enumerable:!0,configurable:!0,writable:!0}):v[y]=M,v}oe.d(et,{Z:()=>g})}}]);