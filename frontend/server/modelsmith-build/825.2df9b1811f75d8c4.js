"use strict";(self.webpackChunkmodelsmith=self.webpackChunkmodelsmith||[]).push([[825],{7825:(it,k,s)=>{s.r(k),s.d(k,{AlgorithmComparisonModule:()=>st});var d=s(6814),R=s(5154),m=s(4221);const p=(0,m.R7)({source:"[Run Records -> Records]",events:{"Get Run Records Filenames":(0,m.Ky)(),"Get Run Records Filenames Success":(0,m.Ky)(),"Get Run Records Filenames Failure":(0,m.Ky)(),"Get Run Record Summarized Data":(0,m.Ky)(),"Get Run Record Summarized Data Success":(0,m.Ky)(),"Get Run Record Summarized Data Failure":(0,m.Ky)()}});var G=s(4664),J=s(7398),z=s(6306),P=s(2096),ae=s(395),Q=s(4992);class se extends Q.eW{constructor(o){super(`run-records-filenames/${o}`,void 0,void 0,!1)}}class ie extends Q.eW{constructor(o,r){super(`run-records-summarized-data/${o}/${r}`,void 0,void 0,!1)}}var e=s(5879);let ce=(()=>{var t;class o{constructor(n,a){this.apiClient=n,this.actions$=a,this.getRunRecordsFilenames$=(0,R.GW)(()=>this.actions$.pipe((0,R.l4)(p.getRunRecordsFilenames),(0,G.w)(i=>{const{algorithmType:c}=i;return this.apiClient.serviceCall(new se(c)).pipe((0,J.U)(u=>p.getRunRecordsFilenamesSuccess({files:u})),(0,z.K)(u=>(0,P.of)(p.getRunRecordsFilenamesFailure({error:u}))))}))),this.getRunRecordSummarizedData$=(0,R.GW)(()=>this.actions$.pipe((0,R.l4)(p.getRunRecordSummarizedData),(0,G.w)(i=>{const{algorithmType:c,filename:u}=i;return this.apiClient.serviceCall(new ie(c,u)).pipe((0,J.U)(b=>p.getRunRecordSummarizedDataSuccess({record:b})),(0,z.K)(b=>(0,P.of)(p.getRunRecordSummarizedDataFailure({error:b}))))})))}}return(t=o).\u0275fac=function(n){return new(n||t)(e.LFG(ae.I),e.LFG(R.eX))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),o})();const me=(0,m.Lq)({filenames:[],summarizedRecord:{},error:""},(0,m.on)(p.getRunRecordsFilenamesSuccess,(t,{files:o})=>({...t,filenames:o,error:null})),(0,m.on)(p.getRunRecordsFilenamesFailure,(t,{error:o})=>({...t,error:o})),(0,m.on)(p.getRunRecordSummarizedData,t=>({...t,loading:!0,error:null})),(0,m.on)(p.getRunRecordSummarizedDataSuccess,(t,{record:o})=>({...t,summarizedRecord:o,error:null})),(0,m.on)(p.getRunRecordSummarizedDataFailure,(t,{error:o})=>({...t,error:o}))),de=(0,m.ZF)("runRecords"),Y=(0,m.P1)(de,t=>t.records),pe=(0,m.P1)(Y,t=>t.filenames),ue=(0,m.P1)(Y,t=>t.summarizedRecord),ge={records:me};var he=s(4245),g=s(9190),w=s(5094),B=s(9624),$=s(2655),F=s(8180),f=function(t){return t.ADD="add",t.EDIT="edit",t.VIEW="view",t}(f||{}),N=s(7582),l=s(6223),h=s(3305),_=s(8791),Ce=s(3620),fe=s(2181),H=s(836),K=s(155),A=s(4378),V=s(7820),_e=s(874),j=s(301),X=s(6455),v=s(170);const W=t=>/^#([0-9A-F]{3,4}){1,2}$/i.test(t)?ve(t):/^rgba?\(\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*\d*\.?\d+)?\)$/i.test(t)?I(t):(console.warn("Unsupported color format:",t),new v.Il(0,0,0)),I=t=>{const o=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.?\d*))?\)$/);if(o){const r=parseInt(o[1],10),n=parseInt(o[2],10),a=parseInt(o[3],10),i=parseFloat(o[4]??"1");return new v.Il(r,n,a,i)}return console.warn("Failed to parse color:",t),new v.Il(0,0,0)},ve=t=>{const o=t.replace("#","").toUpperCase();let r,n,a,i=1;if([3,4].includes(o.length))r=parseInt(o.charAt(0).repeat(2),16),n=parseInt(o.charAt(1).repeat(2),16),a=parseInt(o.charAt(2).repeat(2),16),4===o.length&&(i=parseInt(o.charAt(3).repeat(2),16)/255);else{if(![6,8].includes(o.length))return console.warn("Invalid hex color format:",t),new v.Il(0,0,0);r=parseInt(o.substring(0,2),16),n=parseInt(o.substring(2,4),16),a=parseInt(o.substring(4,6),16),8===o.length&&(i=parseInt(o.substring(6,8),16)/255)}return new v.Il(r,n,a,i)};let q=(()=>{var t;class o{constructor(n){this.store=n,this.filenames$=this.store.select(pe),this.summarizedRecord$=this.store.select(ue)}dispatch(n){this.store.dispatch(n)}}return(t=o).\u0275fac=function(n){return new(n||t)(e.LFG(m.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),o})();var Re=s(5619);const Ae=[{recordName:"IMP_VGG11",recordFilename:"2024_05_10_06:12:23_IMP_VGG11",record:{parameters:{lr:.1,epochs:2,pruning_times:3,pruning_ratio:.2,rewinding_epoch:1,best_acc:0,save_dir:"/home/ipop/modelsmith/examples_pruning/models_checkpoints",arch:"VGG11"},statistics:{algorithm_key:"IMP",execution_date:"2024-05-10 06:12:23",duration_seconds:83.97957944869995},lastRunTestingAccuracyData:[59,57.5,57.667,58.75,58.6,60,59,58.625,58.444,58.9,59.545,60,59.692,59.357,59.333,58.688,59.118,59,59.368,58.95,58.905,59.091,59.217,59.417,59.48,59.192,59.444,59.357,59.414,59.367,59.419,59.375,59.424,59.441,59.257,59.306,59.108,59.105,59.282,59.475,59.512,59.429,59.628,59.75,59.8,59.761,59.787,59.833,59.857,59.88,59.824,59.808,59.717,59.667,59.527,59.464,59.456,59.638,59.593,59.617,59.574,59.581,59.619,59.547,59.569,59.515,59.507,59.426,59.406,59.3,59.211,59.236,59.151,59.216,59.187,59.158,59.117,59.09,59.076,59.075,59.16,59.146,59.145,59.167,59.224,59.291,59.31,59.341,59.303,59.289,59.319,59.435,59.398,59.383,59.432,59.458,59.433,59.367,59.313,59.32]},chartColors:{backgroundColor:"rgba(241,196,15,0.2)",borderColor:"rgba(241,196,15,1)"}},{recordName:"IMP_ResNet18",recordFilename:"2024_05_07_10:18:01_IMP_ResNet18",record:{parameters:{lr:.1,epochs:1,pruning_times:3,pruning_ratio:.2,rewinding_epoch:1,best_acc:0,save_dir:"/home/ipop/modelsmith/examples_pruning/models_checkpoints",arch:"ResNet18"},statistics:{algorithm_key:"IMP",execution_date:"2024-05-07 10:18:01",duration_seconds:134.254967212677},lastRunTestingAccuracyData:[52,54,52.667,54,54,53.667,53.857,53.875,54.222,54.4,54.273,54.5,54.077,53.714,53.867,53.812,54.118,54.167,54.316,54.15,54.381,54.273,54.304,54.458,54.32,54.038,54.222,54.143,54.034,54.167,54.419,54.375,54.515,54.559,54.4,54.667,54.514,54.553,54.795,54.6,54.561,54.452,54.419,54.5,54.533,54.522,54.681,54.75,54.755,54.92,54.961,55.038,55.057,54.963,54.873,54.929,55.035,55.138,54.932,54.867,54.82,54.774,54.778,54.859,54.8,54.864,54.806,54.765,54.739,54.614,54.577,54.611,54.726,54.77,54.707,54.763,54.766,54.795,54.785,54.75,54.815,54.793,54.904,54.869,54.906,54.953,54.92,54.966,55.022,54.956,54.923,54.978,55.086,55.085,55.168,55.167,55.216,55.133,55.081,55.09]},chartColors:{backgroundColor:"rgba(217,176,14,0.2)",borderColor:"rgba(217,176,14,1)"}}];let x=(()=>{var t;class o{get records(){return this._records.value}get records$(){return this._records.asObservable()}addRecord(n){const i=[...this._records.value,n];this._records.next(i)}updateRecord(n,a){const i=this._records.value;if(n>=0&&n<i.length){const c=[...i];c[n]=a,this._records.next(c)}}removeRecord(n){const a=this._records.value;if(n>=0&&n<a.length){const i=a.filter((c,u)=>u!==n);this._records.next(i)}}constructor(){this._records=new Re.X(Ae)}}return(t=o).\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),o})();var xe=s(8763),ee=s(6385),te=s(2032),D=s(5683),ye=s(8525),Te=s(3680),Se=s(5940),oe=s(7754);let be=(()=>{var t;class o{get parentFormGroup(){return this.controlContainer.control}get chartFormGroup(){return this.parentFormGroup.get(this.controlKey)}get borderColorControl(){return this.chartFormGroup.get(this.CHART_BODER_COLOR_CONTROL_NAME)}get backgroundColorControl(){return this.chartFormGroup.get(this.CHART_BACKGROUND_COLOR_CONTROL_NAME)}constructor(n){this.controlContainer=n,this.controlKey="",this.CHART_BODER_COLOR_CONTROL_NAME="borderColor",this.CHART_BACKGROUND_COLOR_CONTROL_NAME="backgroundColor"}ngOnInit(){}}return(t=o).\u0275fac=function(n){return new(n||t)(e.Y36(l.gN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ms-chart-colors-form-controls"]],inputs:{controlKey:"controlKey"},features:[e._Bn([],[{provide:l.gN,useFactory:()=>(0,e.f3M)(l.gN,{skipSelf:!0})}])],decls:17,vars:7,consts:[[3,"formGroupName"],[1,"form-field-container"],["matInput","",3,"ngxMatColorPicker","formControlName"],["matSuffix","",3,"for"],["pickerBorderColor",""],["pickerBackgroundColor",""]],template:function(n,a){if(1&n&&(e.ynx(0,0),e.TgZ(1,"div",1)(2,"mat-label"),e._uU(3,"Chart border color"),e.qZA(),e.TgZ(4,"mat-form-field"),e._UZ(5,"input",2)(6,"ngx-mat-color-toggle",3)(7,"ngx-mat-color-picker",null,4),e.qZA()(),e.TgZ(9,"div",1)(10,"mat-label"),e._uU(11,"Chart background color"),e.qZA(),e.TgZ(12,"mat-form-field"),e._UZ(13,"input",2)(14,"ngx-mat-color-toggle",3)(15,"ngx-mat-color-picker",null,5),e.qZA()(),e.BQk()),2&n){const i=e.MAs(8),c=e.MAs(16);e.Q6J("formGroupName",a.controlKey),e.xp6(5),e.Q6J("ngxMatColorPicker",i)("formControlName",a.CHART_BODER_COLOR_CONTROL_NAME),e.xp6(1),e.Q6J("for",i),e.xp6(7),e.Q6J("ngxMatColorPicker",c)("formControlName",a.CHART_BACKGROUND_COLOR_CONTROL_NAME),e.xp6(1),e.Q6J("for",c)}},dependencies:[te.Nt,D.KE,D.hX,D.R9,v.p2,v._f,v._C,l.Fj,l.JJ,l.JL,l.u,l.x0]}),o})();var y,De=s(5844),re=s(7602);function Ze(t,o){if(1&t&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&t){const r=o.$implicit;e.Q6J("value",r.name)("disabled",r.disabled),e.xp6(1),e.hij(" ",r.name," ")}}function we(t,o){1&t&&(e.TgZ(0,"div")(1,"div",10),e._UZ(2,"mat-spinner",11),e.qZA()())}function Fe(t,o){if(1&t&&(e.ynx(0),e._uU(1),e.ALo(2,"readableDuration"),e.BQk()),2&t){const r=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,r.value))}}function Ne(t,o){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw().$implicit;e.xp6(1),e.Oqu(r.value)}}function Ie(t,o){1&t&&(e.TgZ(0,"div",27),e._UZ(1,"mat-divider"),e.qZA())}function Oe(t,o){if(1&t&&(e.TgZ(0,"div",19)(1,"div",20)(2,"div",21),e._uU(3),e.ALo(4,"parametersLabel"),e.qZA(),e.TgZ(5,"div",22),e.ynx(6,23),e.YNc(7,Fe,3,3,"ng-container",24),e.YNc(8,Ne,2,1,"ng-container",25),e.BQk(),e.qZA()(),e.YNc(9,Ie,2,0,"div",26),e.qZA()),2&t){const r=o.$implicit,n=o.last;e.xp6(3),e.hij("",e.lcZ(4,4,r.key),":"),e.xp6(3),e.Q6J("ngSwitch",r.key),e.xp6(1),e.Q6J("ngSwitchCase","duration_seconds"),e.xp6(2),e.Q6J("ngIf",!n)}}function Ee(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"mat-expansion-panel",16),e.NdJ("expandedChange",function(a){e.CHM(r);const i=e.oxw(3);return e.KtG(i.panelStates.statistics=a)}),e.TgZ(1,"mat-expansion-panel-header")(2,"mat-panel-title",17),e._uU(3," Statistics "),e.qZA()(),e.YNc(4,Oe,10,6,"div",18),e.qZA()}if(2&t){const r=o.$implicit,n=e.oxw(3);e.Q6J("expanded",n.panelStates.statistics),e.xp6(4),e.Q6J("ngForOf",r)}}function Le(t,o){1&t&&(e.TgZ(0,"div",27),e._UZ(1,"mat-divider"),e.qZA())}function Me(t,o){if(1&t&&(e.TgZ(0,"div",19)(1,"div",20)(2,"div",21),e._uU(3),e.ALo(4,"parametersLabel"),e.qZA(),e.TgZ(5,"div",22),e._uU(6),e.qZA()(),e.YNc(7,Le,2,0,"div",26),e.qZA()),2&t){const r=o.$implicit,n=o.last;e.xp6(3),e.hij("",e.lcZ(4,3,r.key),":"),e.xp6(3),e.hij(" ",r.value," "),e.xp6(1),e.Q6J("ngIf",!n)}}function Ue(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"mat-expansion-panel",16),e.NdJ("expandedChange",function(a){e.CHM(r);const i=e.oxw(3);return e.KtG(i.panelStates.parameters=a)}),e.TgZ(1,"mat-expansion-panel-header")(2,"mat-panel-title",17),e._uU(3," Parameters "),e.qZA()(),e.YNc(4,Me,8,5,"div",18),e.qZA()}if(2&t){const r=o.$implicit,n=e.oxw(3);e.Q6J("expanded",n.panelStates.parameters),e.xp6(4),e.Q6J("ngForOf",r)}}function ke(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"mat-expansion-panel",16),e.NdJ("expandedChange",function(a){e.CHM(r);const i=e.oxw(3);return e.KtG(i.panelStates.accuracy=a)}),e.TgZ(1,"mat-expansion-panel-header")(2,"mat-panel-title",17),e._uU(3," Last Accuracy Test Runs "),e.qZA()(),e._UZ(4,"ms-chart-colors-form-controls",28)(5,"ms-line-chart",29),e.qZA()}if(2&t){const r=e.oxw(3);e.Q6J("expanded",r.panelStates.accuracy),e.xp6(5),e.Q6J("data",r.lastRunAccuracyTestingChartData)("settings",r.testingAccuracyChartDisplaySettings)}}function Ge(t,o){if(1&t&&(e.ynx(0),e._UZ(1,"mat-divider"),e.TgZ(2,"div",12)(3,"mat-label"),e._uU(4,"Set run name"),e.qZA(),e.TgZ(5,"mat-form-field",3),e._UZ(6,"input",13),e.qZA()(),e.TgZ(7,"mat-accordion",14),e.YNc(8,Ee,5,2,"mat-expansion-panel",15),e.ALo(9,"keyvalue"),e.YNc(10,Ue,5,2,"mat-expansion-panel",15),e.ALo(11,"keyvalue"),e.YNc(12,ke,6,3,"mat-expansion-panel",15),e.ALo(13,"keyvalue"),e.qZA(),e.BQk()),2&t){const r=e.oxw(2);e.xp6(8),e.Q6J("ngIf",e.lcZ(9,3,null==r.summarizedRecord?null:r.summarizedRecord.statistics)),e.xp6(2),e.Q6J("ngIf",e.lcZ(11,5,null==r.summarizedRecord?null:r.summarizedRecord.parameters)),e.xp6(2),e.Q6J("ngIf",e.lcZ(13,7,null==r.summarizedRecord?null:r.summarizedRecord.parameters))}}function Je(t,o){if(1&t&&e.YNc(0,Ge,14,9,"ng-container",6),2&t){const r=e.oxw(),n=e.MAs(13);e.Q6J("ngIf",!!r.summarizedRecord)("ngIfElse",n)}}function ze(t,o){1&t&&e._UZ(0,"ms-empty-state",30)}let Z=((y=class{get chartFormGroup(){return this.form.get("chart")}get selectRunFormControl(){return this.form.get("selectRun")}get runNameFormControl(){return this.form.get("runName")}constructor(o,r,n,a,i,c){this.drawerRef=o,this.drawerConfig=r,this.fb=n,this.recordsFacadeService=a,this.recordsDataService=i,this.customAPILoadingService=c,this.panelStates={statistics:!0,parameters:!0,accuracy:!0},this.form=new l.cw({}),this.files=[],this.isSummarizedRecordLoading$=this.customAPILoadingService.getLoadingObservableForKey(K.dh.RUN_RECORDS_SUMMARIZED_DATA),this.testingAccuracyChartDisplaySettings={yAxisMinimumValue:0,yAxisTickInterval:20,chartDataStructure:X.nR.SINGLE_PHASE_X_AXIS,xAxisDataPointsCount:100,yAxisMaximumValue:100,isXAxisVisible:!1,areTooltipsEnabled:!0,xAxisLabelPrefix:"Step:",datasetLabelPrefix:"Test:",isChartWithCustomColorSettings:!0,customChartColors:{datasetColors:[{backgroundColor:"rgba(241, 196, 15, 0.2)",borderColor:"#f1c40f"}]}},this.lastRunAccuracyTestingChartData=[]}ngAfterViewInit(){this.restorePanelStates()}ngOnInit(){switch(this.initForm(),this.listenToChartColorChanges(),this.drawerConfig.actionType){case f.ADD:this.loadData(),this.configureAddTypeActions();break;case f.EDIT:case f.VIEW:this.configureEditOrViewTypeActions()}}listenToChartColorChanges(){this.chartFormGroup.valueChanges.pipe((0,Ce.b)(300),(0,_.t)(this)).subscribe(o=>{if((0,A.Qr)(o))return;const{backgroundColor:r,borderColor:n}=o,{rgba:a}=r,{rgba:i}=n;this.testingAccuracyChartDisplaySettings={...this.testingAccuracyChartDisplaySettings,customChartColors:{datasetColors:[{backgroundColor:a,borderColor:i}]}},this.lastRunAccuracyTestingChartData=[...this.lastRunAccuracyTestingChartData]})}configureEditOrViewTypeActions(){const{recordName:o,recordFilename:r,record:n,chartColors:a}=this.drawerConfig.data;this.drawerConfig.actionType===f.VIEW?this.form.disable():this.drawerConfig.actionType===f.EDIT&&this.selectRunFormControl.disable(),this.files=[{name:r,disabled:!0}],this.form.patchValue({selectRun:r,runName:o,chart:{borderColor:I(a.borderColor),backgroundColor:I(a.backgroundColor)}}),this.summarizedRecord=n,this.lastRunAccuracyTestingChartData=this.configureChartDataset(n),this.testingAccuracyChartDisplaySettings={...this.testingAccuracyChartDisplaySettings,hasCustomDatasetsLabels:!0,customDatasetsLabels:[o],customChartColors:{datasetColors:[{backgroundColor:a.backgroundColor||"rgba(241, 196, 15, 0.2)",borderColor:a.borderColor||"#f1c40f"}]}}}configureAddTypeActions(){this.listenToSelectRunFormValueChanges(),this.listenToSummarizedRecordChanges()}listenToSelectRunFormValueChanges(){this.selectRunFormControl.valueChanges.pipe((0,_.t)(this),(0,fe.h)(o=>!(0,A.Bm)(o))).subscribe(o=>{this.runNameFormControl.reset(),this.recordsFacadeService.dispatch(p.getRunRecordSummarizedData({algorithmType:V.Bd.PRUNING,filename:o}))})}listenToSummarizedRecordChanges(){this.recordsFacadeService.summarizedRecord$.pipe((0,_.t)(this),(0,H.T)(1)).subscribe(o=>{this.summarizedRecord=o,this.lastRunAccuracyTestingChartData=this.configureChartDataset(o);const r=this.summarizedRecord?.statistics.algorithm_key,n=this.summarizedRecord?.parameters.arch;!(0,A.Bm)(r)&&!(0,A.Bm)(n)&&this.runNameFormControl.setValue(`${r}_${n}`),this.savePanelStates(),this.restorePanelStates()})}configureChartDataset(o){return[{datasetIndex:0,values:o.lastRunTestingAccuracyData||[]}]}loadData(){this.recordsFacadeService.dispatch(p.getRunRecordsFilenames({algorithmType:V.Bd.PRUNING})),this.recordsFacadeService.filenames$.pipe((0,H.T)(1),(0,F.q)(1)).subscribe(o=>{const r=new Set(this.recordsDataService.records.map(n=>n.recordFilename));this.files=o.map(n=>({name:n,disabled:r.has(n)}))})}initForm(){const o=this.getDefaultChartColors();this.form=this.fb.group({selectRun:[null,l.kI.required],runName:[null,l.kI.required],chart:this.fb.group({borderColor:[o.borderColor,l.kI.required],backgroundColor:[o.backgroundColor,l.kI.required]})})}getDefaultChartColors(){const o=Math.max(this.recordsDataService.records.length,0),r=_e.g[j.g.YELLOW].datasetColors[o];return{borderColor:W(r.borderColor),backgroundColor:W(r.backgroundColor)}}save(o){if(o!==g.ni.SAVE)return;const{backgroundColor:r,borderColor:n}=this.form.get("chart")?.getRawValue(),{rgba:a}=r,{rgba:i}=n;this.drawerRef.close({result:{recordName:this.runNameFormControl.value,recordFilename:this.selectRunFormControl.value,record:this.summarizedRecord,chartColors:{backgroundColor:a,borderColor:i}},status:o})}close(){this.drawerRef.close()}savePanelStates(){this.panels.forEach((o,r)=>{this.panelStates[r]=o.expanded})}restorePanelStates(){this.panels.forEach((o,r)=>{void 0!==this.panelStates[r]&&(o.expanded=this.panelStates[r])})}}).\u0275fac=function(o){return new(o||y)(e.Y36(g.Pf),e.Y36(g.ZI),e.Y36(l.qu),e.Y36(q),e.Y36(x),e.Y36(K.Fv))},y.\u0275cmp=e.Xpm({type:y,selectors:[["ms-run-drawer-actions"]],viewQuery:function(o,r){if(1&o&&e.Gf(h.ib,5),2&o){let n;e.iGM(n=e.CRH())&&(r.panels=n)}},decls:14,vars:7,consts:[[3,"isSaveDisabled","actionEvent"],[3,"formGroup"],[1,"form-field-container"],["appearance","outline"],["formControlName","selectRun","placeholder","Select a run record"],[3,"value","disabled",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["content",""],["noData",""],[3,"value","disabled"],[1,"spinner-wrapper","mt-4"],["diameter","80"],[1,"form-field-container","mt-4"],["matInput","","formControlName","runName","placeholder","Set run name"],["multi",""],[3,"expanded","expandedChange",4,"ngIf"],[3,"expanded","expandedChange"],[1,"paragraph-bold-p3-small-bold"],["class","key-value-container single",4,"ngFor","ngForOf"],[1,"key-value-container","single"],[1,"key-value-pair","space-between"],[1,"key-value-key"],[1,"key-value-value"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","pt-2",4,"ngIf"],[1,"pt-2"],["controlKey","chart"],[3,"data","settings"],["title","Awaiting Run Record Selection","message","Select a run record from the dropdown to view details and statistics."]],template:function(o,r){if(1&o&&(e.TgZ(0,"ms-drawer",0),e.NdJ("actionEvent",function(a){return r.save(a)}),e.TgZ(1,"form",1)(2,"div",2)(3,"mat-label"),e._uU(4,"Select run record"),e.qZA(),e.TgZ(5,"mat-form-field",3)(6,"mat-select",4),e.YNc(7,Ze,2,3,"mat-option",5),e.qZA()()(),e.YNc(8,we,3,0,"div",6),e.ALo(9,"async"),e.YNc(10,Je,1,2,"ng-template",null,7,e.W1O),e.qZA()(),e.YNc(12,ze,1,0,"ng-template",null,8,e.W1O)),2&o){const n=e.MAs(11);e.Q6J("isSaveDisabled",r.form.invalid),e.xp6(1),e.Q6J("formGroup",r.form),e.xp6(6),e.Q6J("ngForOf",r.files),e.xp6(1),e.Q6J("ngIf",e.lcZ(9,5,r.isSummarizedRecordLoading$))("ngIfElse",n)}},dependencies:[d.sg,d.O5,d.RF,d.n9,d.ED,xe.k,ee.d,te.Nt,D.KE,D.hX,ye.gD,Te.ey,Se.Ou,h.pp,h.ib,h.yz,h.yK,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,w.w,oe.u,be,d.Ov,d.Nd,De.n,re.N],styles:[".spinner-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),y);Z=(0,N.gn)([(0,_.c)()],Z);var ne=s(2296),O=s(617),Pe=s(5195),E=s(2596);let Qe=(()=>{var t;class o{get lineClamp(){return this.maxEllipsisLines}onMouseEnter(){this.isTextOverflowing?this.tooltip.show():this.tooltip.hide()}onMouseLeave(){this.tooltip.hide()}constructor(n,a){this.tooltip=n,this.elementRef=a,this.maxEllipsisLines=2,this.display="-webkit-box",this.overflow="hidden",this.boxOrient="vertical",this.textOverflow="ellipsis",this.whiteSpace="normal",this.wordBreak="break-all"}ngAfterViewInit(){setTimeout(()=>{this.tooltip.message=this.elementRef.nativeElement.textContent.trim(),this.tooltip.position="above"},0)}get isTextOverflowing(){const n=parseInt(window.getComputedStyle(this.elementRef.nativeElement).lineHeight);return this.elementRef.nativeElement.scrollHeight>this.maxEllipsisLines*n}}return(t=o).\u0275fac=function(n){return new(n||t)(e.Y36(E.gM),e.Y36(e.SBq))},t.\u0275dir=e.lG2({type:t,selectors:[["","msUseEllipsis",""]],hostVars:14,hostBindings:function(n,a){1&n&&e.NdJ("mouseenter",function(){return a.onMouseEnter()})("mouseleave",function(){return a.onMouseLeave()}),2&n&&e.Udp("display",a.display)("overflow",a.overflow)("-webkit-box-orient",a.boxOrient)("-webkit-line-clamp",a.lineClamp)("text-overflow",a.textOverflow)("white-space",a.whiteSpace)("word-break",a.wordBreak)},inputs:{maxEllipsisLines:"maxEllipsisLines"},standalone:!0,features:[e._Bn([E.gM])]}),o})();function Ye(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"mat-card",3)(1,"div",4)(2,"div",5),e._uU(3),e.qZA(),e.TgZ(4,"div",6)(5,"button",7),e.NdJ("click",function(){const i=e.CHM(r).$implicit,c=e.oxw(2);return e.KtG(c.viewRecord(i))}),e._UZ(6,"mat-icon",8),e.qZA(),e.TgZ(7,"button",7),e.NdJ("click",function(){const a=e.CHM(r),i=a.index,c=a.$implicit,u=e.oxw(2);return e.KtG(u.editRecord(i,c))}),e._UZ(8,"mat-icon",9),e.qZA(),e.TgZ(9,"button",10),e.NdJ("click",function(){const i=e.CHM(r).index,c=e.oxw(2);return e.KtG(c.removeRecord(i))}),e.TgZ(10,"mat-icon",11),e._uU(11,"delete"),e.qZA()()()()()}if(2&t){const r=o.$implicit;e.xp6(3),e.Oqu(r.recordName)}}function Be(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Ye,12,1,"mat-card",2),e.BQk()),2&t){const r=o.ngIf;e.xp6(1),e.Q6J("ngForOf",r)}}let $e=(()=>{var t;class o{constructor(n,a){this.recordsDataService=n,this.drawerService=a}removeRecord(n){this.recordsDataService.removeRecord(n)}viewRecord(n){this.drawerService.open(Z,{title:"View Run",showSaveButton:!1,showCloseButton:!0,closeButtonLabel:"Close",actionType:f.VIEW,data:n})}editRecord(n,a){this.drawerService.open(Z,{title:"Edit Run",saveButtonLabel:"Update",showCloseButton:!0,closeButtonLabel:"Close",actionType:f.EDIT,data:a}).afterClosed().pipe((0,F.q)(1)).subscribe(c=>{const{status:u}=c;if(u===g.ni.DISMISS||u===g.ni.CLOSE)return;const{result:b}=c;(0,A.Qr)(b)||this.recordsDataService.updateRecord(n,b)})}}return(t=o).\u0275fac=function(n){return new(n||t)(e.Y36(x),e.Y36(g.zv))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ms-algorithm-comparison-list"]],decls:3,vars:3,consts:[[1,"items-wrapper"],[4,"ngIf"],["class","ms-card comparison-item",4,"ngFor","ngForOf"],[1,"ms-card","comparison-item"],[1,"item-wrapper"],["msUseEllipsis",""],[1,"record-summary-buttons-wrapper"],["mat-icon-button","","color","primary",3,"click"],["fontSet","ms","fontIcon","icon-Eye",1,"mat-primary"],["fontSet","ms","fontIcon","icon-PencilSimple",1,"mat-primary"],["mat-icon-button","","color","error",3,"click"],[1,"mat-error"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0),e.YNc(1,Be,2,1,"ng-container",1),e.ALo(2,"async"),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,a.recordsDataService.records$)))},dependencies:[d.sg,d.O5,ne.RK,O.Hw,Pe.a8,Qe,d.Ov],styles:[".items-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));grid-gap:20px;padding:20px 0}.items-wrapper[_ngcontent-%COMP%]   .ms-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0003}.items-wrapper[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.items-wrapper[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .record-summary-buttons-wrapper[_ngcontent-%COMP%]{display:flex}"]}),o})();var T,He=s(2599);let L=((T=class{constructor(o,r){this.recordsDataService=o,this.chartToolsGlobalSignalsService=r,this.testingAccuracyChartDisplaySettings={yAxisMinimumValue:0,yAxisTickInterval:20,chartDataStructure:X.nR.SINGLE_PHASE_X_AXIS,xAxisDataPointsCount:100,yAxisMaximumValue:100,datasetColorSettingsKey:j.g.YELLOW,isXAxisVisible:!1,xAxisLabelPrefix:"Step:",hasCustomDatasetsLabels:!0},this.lastRunsAccuracyTestingChartData=[]}ngOnInit(){this.listenToRecordsChanges()}listenToRecordsChanges(){this.recordsDataService.records$.pipe((0,_.t)(this)).subscribe(o=>{this.lastRunsAccuracyTestingChartData=this.configureChartDatasets(o),this.testingAccuracyChartDisplaySettings={...this.testingAccuracyChartDisplaySettings,customDatasetsLabels:o.map(r=>r.recordName),isChartWithCustomColorSettings:!0,customChartColors:{datasetColors:o.map(r=>r.chartColors)}}})}configureChartDatasets(o){const r=[];return o.forEach((n,a)=>{const{record:i}=n;r.push({datasetIndex:a,values:i.lastRunTestingAccuracyData||[]})}),r}toggleTooltip(o){this.chartToolsGlobalSignalsService.toggleTooltips=o.checked}toggleZoom(o){this.chartToolsGlobalSignalsService.toggleZoom=o.checked}}).\u0275fac=function(o){return new(o||T)(e.Y36(x),e.Y36(B.d))},T.\u0275cmp=e.Xpm({type:T,selectors:[["ms-algorithm-comparison-chart"]],decls:14,vars:2,consts:[["expanded","true"],[1,"paragraph-bold-p3-small-bold"],[1,"mt-2","flex"],["color","primary",3,"change"],[1,"flex"],["color","primary",1,"ml-2",3,"change"],[1,"ml-1"],["fontSet","ms","fontIcon","icon-Info","matTooltip","Use mouse wheel or touchpad pinch to zoom in/out. Drag to select an area for specific zoom, or use touchpad gestures to navigate."],[3,"data","settings"]],template:function(o,r){1&o&&(e.TgZ(0,"mat-expansion-panel",0)(1,"mat-expansion-panel-header")(2,"mat-panel-title",1),e._uU(3," Last Accuracy Test Runs "),e.qZA()(),e.TgZ(4,"div",2)(5,"div")(6,"mat-slide-toggle",3),e.NdJ("change",function(a){return r.toggleTooltip(a)}),e._uU(7," Enable tooltips "),e.qZA()(),e.TgZ(8,"div",4)(9,"mat-slide-toggle",5),e.NdJ("change",function(a){return r.toggleZoom(a)}),e._uU(10," Enable zoom "),e.qZA(),e.TgZ(11,"div",6),e._UZ(12,"mat-icon",7),e.qZA()()(),e._UZ(13,"ms-line-chart",8),e.qZA()),2&o&&(e.xp6(13),e.Q6J("data",r.lastRunsAccuracyTestingChartData)("settings",r.testingAccuracyChartDisplaySettings))},dependencies:[O.Hw,E.gM,He.Rr,h.ib,h.yz,h.yK,w.w]}),T);L=(0,N.gn)([(0,_.c)()],L);var M=s(3566),C=s(5313);let Ke=(()=>{var t;class o{transform(n){return"string"==typeof n&&n&&"None"!=n||"number"==typeof n&&!isNaN(n)?n.toString():"-"}}return(t=o).\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"emptyTableField",type:t,pure:!0,standalone:!0}),o})();var S;function Ve(t,o){1&t&&(e.TgZ(0,"th",9),e._uU(1,"Record Name"),e.qZA())}function je(t,o){if(1&t&&(e.TgZ(0,"td",10),e._uU(1),e.qZA()),2&t){const r=o.$implicit;e.xp6(1),e.Oqu(r.recordName)}}function Xe(t,o){if(1&t&&(e.TgZ(0,"th",9),e._uU(1),e.ALo(2,"parametersLabel"),e.qZA()),2&t){const r=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,r)," ")}}function We(t,o){if(1&t&&(e.TgZ(0,"td",10),e._uU(1),e.ALo(2,"emptyTableField"),e.qZA()),2&t){const r=o.$implicit,n=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,r[n])," ")}}function qe(t,o){1&t&&(e.ynx(0,11),e.YNc(1,Xe,3,3,"th",4),e.YNc(2,We,3,3,"td",5),e.BQk()),2&t&&e.Q6J("matColumnDef",o.$implicit)}function et(t,o){1&t&&e._UZ(0,"tr",12)}function tt(t,o){1&t&&e._UZ(0,"tr",13)}let U=((S=class{constructor(o){this.recordsDataService=o,this.dataSource=new C.by,this.displayedColumns=[]}ngOnInit(){this.recordsDataService.records$.pipe((0,_.t)(this)).subscribe(o=>{this.updateDisplayedColumns(o),this.updateDataSource(o)})}ngAfterViewInit(){(0,A.Qr)(this.sort)||setTimeout(()=>{this.dataSource.sort=this.sort},1200)}updateDisplayedColumns(o){const r=new Set;o.forEach(n=>{Object.keys(n.record.parameters).forEach(a=>{"save_dir"!==a&&r.add(a)})}),this.displayedColumns=["recordName",...Array.from(r)]}updateDataSource(o){const r=o.map(n=>({recordName:n.recordName,...n.record.parameters}));this.dataSource.data=r}}).\u0275fac=function(o){return new(o||S)(e.Y36(x))},S.\u0275cmp=e.Xpm({type:S,selectors:[["ms-algorithm-comparison-table"]],viewQuery:function(o,r){if(1&o&&e.Gf(M.YE,5),2&o){let n;e.iGM(n=e.CRH())&&(r.sort=n.first)}},decls:11,vars:4,consts:[["expanded","true"],[1,"paragraph-bold-p3-small-bold"],["mat-table","","matSort","",1,"mat-table",3,"dataSource"],["matColumnDef","recordName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","hover-highlight",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"matColumnDef"],["mat-header-row",""],["mat-row","",1,"hover-highlight"]],template:function(o,r){1&o&&(e.TgZ(0,"mat-expansion-panel",0)(1,"mat-expansion-panel-header")(2,"mat-panel-title",1),e._uU(3," Parameters "),e.qZA()(),e.TgZ(4,"table",2),e.ynx(5,3),e.YNc(6,Ve,2,0,"th",4),e.YNc(7,je,2,1,"td",5),e.BQk(),e.YNc(8,qe,3,1,"ng-container",6),e.YNc(9,et,1,0,"tr",7),e.YNc(10,tt,1,0,"tr",8),e.qZA()()),2&o&&(e.xp6(4),e.Q6J("dataSource",r.dataSource),e.xp6(4),e.Q6J("ngForOf",r.displayedColumns.slice(1)),e.xp6(1),e.Q6J("matHeaderRowDef",r.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",r.displayedColumns))},dependencies:[d.sg,C.BZ,C.fO,C.as,C.w1,C.Dz,C.nj,C.ge,C.ev,C.XQ,C.Gk,M.YE,M.nU,h.ib,h.yz,h.yK,re.N,Ke],styles:[".hover-highlight[_ngcontent-%COMP%]:hover{background-color:var(--backgrounds-80)}"]}),S);function ot(t,o){1&t&&(e.ynx(0),e._UZ(1,"ms-algorithm-comparison-list"),e.TgZ(2,"div",6),e._UZ(3,"mat-divider"),e.qZA(),e._UZ(4,"ms-algorithm-comparison-table"),e.TgZ(5,"div",6),e._UZ(6,"mat-divider"),e.qZA(),e._UZ(7,"ms-algorithm-comparison-chart"),e.BQk())}function rt(t,o){1&t&&(e.TgZ(0,"div",7),e._UZ(1,"ms-empty-state",8),e.qZA())}U=(0,N.gn)([(0,_.c)()],U);const nt=[{path:"",component:(()=>{var t;class o{constructor(n,a){this.drawerService=n,this.recordsDataService=a}openAddRunDrawer(){this.drawerService.open(Z,{title:"Add Run",saveButtonLabel:"Add",showCloseButton:!0,closeButtonLabel:"Close",actionType:f.ADD}).afterClosed().pipe((0,F.q)(1)).subscribe(a=>{const{status:i}=a;if(i===g.ni.DISMISS||i===g.ni.CLOSE)return;const{result:c}=a;this.recordsDataService.addRecord(c)})}}return(t=o).\u0275fac=function(n){return new(n||t)(e.Y36(g.zv),e.Y36(x))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ms-algorithm-comparison"]],decls:11,vars:4,consts:[[1,"heading-primary-title","title"],["mat-stroked-button","","color","primary",3,"click"],["fontSet","ms","fontIcon","icon-Plus"],[1,"mt-4"],[4,"ngIf","ngIfElse"],["noData",""],[1,"mt-4","mb-4"],[1,"no-data-wrapper"],["title","No data selected"]],template:function(n,a){if(1&n&&(e.TgZ(0,"p",0),e._uU(1,"Algorithm Comparison"),e.qZA(),e.TgZ(2,"button",1),e.NdJ("click",function(){return a.openAddRunDrawer()}),e._UZ(3,"mat-icon",2),e._uU(4," Add run\n"),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"mat-divider"),e.qZA(),e.YNc(7,ot,8,0,"ng-container",4),e.ALo(8,"async"),e.YNc(9,rt,2,0,"ng-template",null,5,e.W1O)),2&n){const i=e.MAs(10);e.xp6(7),e.Q6J("ngIf",e.lcZ(8,2,a.recordsDataService.records$).length>0)("ngIfElse",i)}},dependencies:[d.O5,ee.d,ne.lW,O.Hw,oe.u,$e,L,U,d.Ov],styles:[".no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),o})()}];let at=(()=>{var t;class o{}return(t=o).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[$.Bz.forChild(nt),$.Bz]}),o})(),st=(()=>{var t;class o{}return(t=o).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[g.zv,q,x,B.d],imports:[d.ez,at,g.kZ,he.m,m.Aw.forFeature("runRecords",ge),R.sQ.forFeature([ce]),w.w]}),o})()}}]);