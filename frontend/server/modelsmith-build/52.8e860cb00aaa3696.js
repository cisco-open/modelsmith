"use strict";(self.webpackChunkmodelsmith=self.webpackChunkmodelsmith||[]).push([[52],{2052:(z,P,o)=>{o.r(P),o.d(P,{ModelTrainingModule:()=>Tt});var M,c=o(6814),y=o(4245),a=o(7582),t=o(5879),m=o(6223),_=o(5195),f=o(5683),O=o(617),D=o(5940),N=o(8525),h=o(8791),L=o(3427),x=o(2181),C=o(7398),G=o(7921),A=o(3607),K=o(6799),Q=o(9547),T=o(4378),d=o(7820),v=o(127),S=o(3705),J=o(8471),b=o(833),Z=o(3680);function Y(i,e){1&i&&t._UZ(0,"mat-icon",13)}function W(i,e){if(1&i&&(t.TgZ(0,"mat-option",11),t._uU(1),t.YNc(2,Y,1,0,"mat-icon",12),t.qZA()),2&i){const n=e.$implicit;t.Q6J("value",n.name),t.xp6(1),t.hij(" ",n.name," "),t.xp6(1),t.Q6J("ngIf",!n.isTrained)}}function U(i,e){1&i&&(t.TgZ(0,"mat-option",14),t._uU(1,"No results found"),t.qZA())}function p(i,e){if(1&i&&(t.ynx(0),t.YNc(1,W,3,3,"mat-option",9),t.YNc(2,U,2,0,"mat-option",10),t.BQk()),2&i){const n=e.ngIf,l=t.oxw();t.xp6(1),t.Q6J("ngForOf",n)("ngForTrackBy",l.trackByModel),t.xp6(1),t.Q6J("ngIf",0===n.length)}}let r=((M=class{ngOnChanges(e){e.algorithmType&&e.algorithmType.currentValue&&this.configureModels(e.algorithmType.currentValue)}get parentFormGroup(){return this.controlContainer.control}get modelFormGroup(){return this.parentFormGroup.get(this.controlKey)}get modelControl(){return this.modelFormGroup?.get(this.MODEL_CONTROL_NAME)}constructor(e,n,l,R){this.controlContainer=e,this.modelsFacadeService=n,this.scriptFacadeService=l,this.pageRunningScriptSpiningIndicatorService=R,this.controlKey="",this.PageKey=K.C,this.RoutesList=Q.Z,this.searchModel=new m.NI,this.models=[],this.MODEL_CONTROL_NAME="model"}ngOnInit(){this.initializeForm(),this.listenToScriptStateChanges(),this.listenToSearchModelValueChanges(),this.configureModels(this.algorithmType)}configureModels(e){if(e)switch(this.getModelsByTypeSubscription?.unsubscribe(),this.getModelsByTypeSubscription=this.subscribeToModelsListChanges(e),this.modelsFacadeService.dispatch(A.o.getModelsList({algorithmType:e})),e){case d.Bd.PRUNING:this.modelsFacadeService.dispatch(A.o.getCurrentOrPreviousSelectedModel({algorithmType:d.tp.PRUNING_TRAIN}));break;case d.Bd.QUANTIZATION:this.modelsFacadeService.dispatch(A.o.getCurrentOrPreviousSelectedModel({algorithmType:d.tp.QUANTIZATION_TRAIN}));break;case d.Bd.MACHINE_UNLEARNING:this.modelsFacadeService.dispatch(A.o.getCurrentOrPreviousSelectedModel({algorithmType:d.tp.MACHINE_UNLEARNING_TRAIN}))}}listenToCurrentModelChanges(){this.modelsFacadeService.currentModel$.pipe((0,h.t)(this)).subscribe(e=>{(0,T.Bm)(e)||this.models.find(l=>l.name===e)&&this.modelControl?.patchValue(e)})}subscribeToModelsListChanges(e){let n=!1;return this.modelsFacadeService.getModelsByType(e).pipe((0,x.h)(l=>!(0,T.yD)(l)),(0,C.U)(l=>[...l].sort((R,Mt)=>Number(Mt.isTrained)-Number(R.isTrained)))).subscribe(l=>{this.models=l,this.searchModel.setValue(""),n||(this.listenToCurrentModelChanges(),n=!0)})}initializeForm(){this.parentFormGroup.addControl(this.controlKey,new m.cw({[this.MODEL_CONTROL_NAME]:new m.NI("",m.kI.required)}))}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,h.t)(this)).subscribe(e=>{(0,v.A)(e)?this.modelFormGroup.disable():this.modelFormGroup.enable()})}listenToSearchModelValueChanges(){this.filteredModels=this.searchModel.valueChanges.pipe((0,h.t)(this),(0,G.O)(""),(0,C.U)(e=>this.filterModels(e)))}filterModels(e){const n=e.toLowerCase();return this.models.filter(l=>l.name.toLowerCase().includes(n))}trackByModel(e,n){return n.name}ngOnDestroy(){this.parentFormGroup.removeControl(this.controlKey)}}).\u0275fac=function(e){return new(e||M)(t.Y36(m.gN),t.Y36(S.V),t.Y36(J.O),t.Y36(b.T))},M.\u0275cmp=t.Xpm({type:M,selectors:[["ms-panel-model-training"]],inputs:{controlKey:"controlKey",algorithmType:"algorithmType"},standalone:!0,features:[t._Bn([],[{provide:m.gN,useFactory:()=>(0,t.f3M)(m.gN,{skipSelf:!0})}]),t.TTD,t.jDz],decls:12,vars:5,consts:[[1,"ms-card","model-card"],[1,"panel-title-wrapper"],[1,"heading-sub-section-title"],[1,"form-field-container",3,"formGroupName"],["appearance","outline","subscriptSizing","dynamic"],["formControlName","model","placeholder","Select a model..."],["label","Predefined Models"],[3,"formControl"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["disabled","",4,"ngIf"],[3,"value"],["class","mat-error","fontSet","ms","fontIcon","icon-X",4,"ngIf"],["fontSet","ms","fontIcon","icon-X",1,"mat-error"],["disabled",""]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2),t._uU(3,"Model"),t.qZA()(),t.TgZ(4,"div",3)(5,"mat-form-field",4)(6,"mat-select",5)(7,"mat-optgroup",6)(8,"mat-option"),t._UZ(9,"ngx-mat-select-search",7),t.qZA(),t.YNc(10,p,3,3,"ng-container",8),t.ALo(11,"async"),t.qZA()()()()()),2&e&&(t.xp6(4),t.Q6J("formGroupName",n.controlKey),t.xp6(5),t.Q6J("formControl",n.searchModel),t.xp6(1),t.Q6J("ngIf",t.lcZ(11,3,n.filteredModels)))},dependencies:[m.UX,m.JJ,m.JL,m.oH,m.u,m.x0,_.QW,_.a8,f.lN,f.KE,N.LD,N.gD,Z.ey,Z.Nv,O.Ps,O.Hw,c.ez,c.sg,c.O5,c.Ov,L.Co,L.nu,D.Cq],styles:[".panel-title-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:12px}.panel-title-wrapper[_ngcontent-%COMP%]   .train-models[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),M);r=(0,a.gn)([(0,h.c)()],r);var F,s=o(1668),g=o(1501),u=o(2655),w=o(3620),H=o(3997),X=o(39),B=o(9532),q=o(2296),k=o(836),tt=o(8180);function et(i,e){if(1&i&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&i){const n=e.$implicit;t.Q6J("value",n.key),t.xp6(1),t.hij(" ",n.value," ")}}let V=((F=class{get parentFormGroup(){return this.controlContainer.control}get algorithmTypeFormGroup(){return this.parentFormGroup.get(this.controlKey)}get algorithmTypeFormControl(){return this.algorithmTypeFormGroup.get(this.ALGORITHM_TYPE_CONTROL_NAME)}constructor(e,n){this.controlContainer=e,this.scriptFacadeService=n,this.controlKey="",this.algorithmTypesOptions=d.VN.filter(l=>l.key!==d.Bd.TRAIN),this.ALGORITHM_TYPE_CONTROL_NAME="algorithmType"}ngOnInit(){this.initForm(),this.loadInitialData(),this.listenToScriptStateChanges()}loadInitialData(){this.scriptFacadeService.scriptDetails$.pipe((0,k.T)(1),(0,tt.q)(1),(0,x.h)(e=>!(0,T.Bm)(e?.algKey)),(0,C.U)(e=>e.algKey)).subscribe(e=>{switch(e){case d.tp.MACHINE_UNLEARNING_TRAIN:this.algorithmTypeFormControl.patchValue(d.Bd.MACHINE_UNLEARNING);break;case d.tp.PRUNING_TRAIN:this.algorithmTypeFormControl.patchValue(d.Bd.PRUNING);break;case d.tp.QUANTIZATION_TRAIN:this.algorithmTypeFormControl.patchValue(d.Bd.QUANTIZATION);break;default:{const n=(0,d.t6)(e);if((0,T.Bm)(n))break;this.algorithmTypeFormControl.patchValue(n)}}}),this.scriptFacadeService.dispatch(X.aj.getCurrentOrLastActiveScriptDetails())}initForm(){this.parentFormGroup.addControl(this.controlKey,new m.cw({[this.ALGORITHM_TYPE_CONTROL_NAME]:new m.NI(d.Bd.PRUNING,m.kI.required)}))}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,h.t)(this)).subscribe(e=>{(0,v.A)(e)?this.algorithmTypeFormGroup.disable():this.algorithmTypeFormGroup.enable()})}trackByAlgorithmType(e,n){return n.key}}).\u0275fac=function(e){return new(e||F)(t.Y36(m.gN),t.Y36(B.OF))},F.\u0275cmp=t.Xpm({type:F,selectors:[["ms-panel-algorithm-type"]],inputs:{controlKey:"controlKey"},features:[t._Bn([],[{provide:m.gN,useFactory:()=>(0,t.f3M)(m.gN,{skipSelf:!0})}])],decls:8,vars:4,consts:[[1,"ms-card","parameters-card"],[1,"heading-sub-section-title"],[3,"formGroupName"],[1,"form-field-container"],["appearance","outline","subscriptSizing","dynamic"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"p",1),t._uU(2,"Algorithm Type"),t.qZA(),t.ynx(3,2),t.TgZ(4,"div",3)(5,"mat-form-field",4)(6,"mat-select",5),t.YNc(7,et,2,2,"mat-option",6),t.qZA()()(),t.BQk(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("formGroupName",n.controlKey),t.xp6(3),t.Q6J("formControlName",n.ALGORITHM_TYPE_CONTROL_NAME),t.xp6(1),t.Q6J("ngForOf",n.algorithmTypesOptions)("ngForTrackBy",n.trackByAlgorithmType))},dependencies:[c.sg,_.a8,f.KE,N.gD,Z.ey,m.JJ,m.JL,m.u,m.x0]}),F);V=(0,a.gn)([(0,h.c)()],V);var E,at=o(6385),nt=o(7754),ot=o(1260),it=o(5844),rt=o(7602);function st(i,e){if(1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"adaptiveFileSize"),t.BQk()),2&i){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,n.value))}}function lt(i,e){if(1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"date"),t.BQk()),2&i){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,n.value,"medium"))}}function mt(i,e){if(1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"readableDuration"),t.BQk()),2&i){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,n.value))}}function ct(i,e){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(n.value)}}function pt(i,e){1&i&&(t.TgZ(0,"div",15),t._UZ(1,"mat-divider"),t.qZA())}function dt(i,e){if(1&i&&(t.TgZ(0,"div")(1,"div",8)(2,"div",9),t._uU(3),t.ALo(4,"parametersLabel"),t.qZA(),t.TgZ(5,"div",10),t.ynx(6,11),t.YNc(7,st,3,3,"ng-container",12),t.YNc(8,lt,3,4,"ng-container",12),t.YNc(9,mt,3,3,"ng-container",12),t.YNc(10,ct,2,1,"ng-container",13),t.BQk(),t.qZA()(),t.YNc(11,pt,2,0,"div",14),t.qZA()),2&i){const n=e.$implicit,l=e.last;t.xp6(3),t.hij("",t.lcZ(4,6,n.key),":"),t.xp6(3),t.Q6J("ngSwitch",n.key),t.xp6(1),t.Q6J("ngSwitchCase","file_size_bytes"),t.xp6(1),t.Q6J("ngSwitchCase","creation_date"),t.xp6(1),t.Q6J("ngSwitchCase","training_duration_seconds"),t.xp6(2),t.Q6J("ngIf",!l)}}function gt(i,e){if(1&i&&(t.TgZ(0,"div",6),t.YNc(1,dt,12,8,"div",7),t.qZA()),2&i){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",n)}}function ht(i,e){if(1&i&&(t.TgZ(0,"div",4),t.YNc(1,gt,2,1,"div",5),t.qZA()),2&i){const n=e.$implicit;t.oxw();const l=t.MAs(6);t.xp6(1),t.Q6J("ngIf",n.length>0)("ngIfElse",l)}}function ut(i,e){1&i&&t._UZ(0,"ms-empty-state",16)}let $=((E=class{constructor(e){this.modelsFacadeService=e,this.metadata={}}ngOnInit(){this.modelsFacadeService.modelMetadata$.pipe((0,k.T)(1),(0,h.t)(this)).subscribe(e=>{this.metadata=e})}}).\u0275fac=function(e){return new(e||E)(t.Y36(S.V))},E.\u0275cmp=t.Xpm({type:E,selectors:[["ms-panel-model-metadata"]],decls:7,vars:3,consts:[[1,"ms-card","metadata-card"],[1,"heading-sub-section-title"],["class","metadata-wrapper",4,"ngIf"],["noMetadata",""],[1,"metadata-wrapper"],["class","key-value-container single",4,"ngIf","ngIfElse"],[1,"key-value-container","single"],[4,"ngFor","ngForOf"],[1,"key-value-pair","space-between"],[1,"key-value-key"],[1,"key-value-value"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","pt-2",4,"ngIf"],[1,"pt-2"],["title","No metadata available"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"p",1),t._uU(2,"Model Training Information"),t.qZA(),t.YNc(3,ht,2,2,"div",2),t.ALo(4,"keyvalue"),t.YNc(5,ut,1,0,"ng-template",null,3,t.W1O),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",t.lcZ(4,1,n.metadata)))},dependencies:[c.sg,c.O5,c.RF,c.n9,c.ED,at.d,_.a8,nt.u,c.uU,c.Nd,ot.G,it.n,rt.N],styles:[".metadata-wrapper[_ngcontent-%COMP%]{max-height:300px;overflow:auto;padding-right:20px}"]}),E);var I;$=(0,a.gn)([(0,h.c)()],$);const _t=["panelParameters"];let j=((I=class{constructor(e,n,l,R){this.navigationService=e,this.scriptFacadeService=n,this.snackbarService=l,this.modelsFacadeService=R,this.form=new m.cw({}),this.isScriptActive=!1,this.selectedAlgorithmType=d.Bd.PRUNING,this.selectedAlgorithmKey=d.tp.PRUNING_TRAIN}ngOnInit(){this.listenToAlgorithmPanelChanges(),this.listenToScriptStateChanges(),this.listenToFormChangesToLoadModelMetadata()}listenToAlgorithmPanelChanges(){this.form.valueChanges.pipe((0,w.b)(50),(0,C.U)(()=>{const e=this.form.getRawValue();return e.algorithmTypeGroup&&e.algorithmTypeGroup.algorithmType}),(0,H.x)(),(0,x.h)(e=>!!e),(0,h.t)(this)).subscribe(e=>{this.selectedAlgorithmType=e,this.selectedAlgorithmKey=d.R0[e]})}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,h.t)(this)).subscribe(e=>{this.isScriptActive=(0,v.A)(e),(0,v.A)(e)?this.form.disable():this.form.enable()})}listenToFormChangesToLoadModelMetadata(){this.form.valueChanges.pipe((0,w.b)(50),(0,C.U)(e=>{const n=e.algorithmTypeGroup?.algorithmType,l=e.model?.model;return{algorithmType:n,model:l}}),(0,H.x)((e,n)=>JSON.stringify(e)===JSON.stringify(n)),(0,x.h)(({algorithmType:e,model:n})=>!(0,T.Bm)(e)&&!(0,T.Bm)(n)),(0,h.t)(this)).subscribe(({algorithmType:e,model:n})=>{this.modelsFacadeService.dispatch(A.o.getModelMetadata({algorithmType:e,modelName:n}))})}submit(){if((0,T.kK)(this.selectedAlgorithmType))return void this.snackbarService.showError("Select an algorithm before running a script.");const{model:e}=this.form.getRawValue(),{model:n}=e,l={alg:this.selectedAlgorithmKey,params:{...this.panelParametersComponent.parametersFormatted,arch:n}};this.scriptFacadeService.dispatch(X.aj.callScript({configs:l}))}}).\u0275fac=function(e){return new(e||I)(t.Y36(B.f5),t.Y36(B.OF),t.Y36(B.QD),t.Y36(S.V))},I.\u0275cmp=t.Xpm({type:I,selectors:[["ms-model-training"]],viewQuery:function(e,n){if(1&e&&t.Gf(_t,5),2&e){let l;t.iGM(l=t.CRH())&&(n.panelParametersComponent=l.first)}},decls:17,vars:4,consts:[[1,"heading-primary-title","title"],[1,"page-wrapper"],[1,"left",3,"formGroup"],["controlKey","algorithmTypeGroup"],["controlKey","model",3,"algorithmType"],["controlKey","params",3,"algorithm"],["panelParameters",""],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-stroked-button","","color","primary",1,"ml-2",3,"click"],["fontSet","ms","fontIcon","icon-ArrowLeft"],[1,"right"]],template:function(e,n){1&e&&(t.TgZ(0,"p",0),t._uU(1,"Model Training"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2),t._UZ(4,"ms-panel-algorithm-type",3)(5,"ms-panel-model-training",4)(6,"ms-panel-model-metadata")(7,"ms-panel-parameters",5,6),t.TgZ(9,"div")(10,"button",7),t.NdJ("click",function(){return n.submit()}),t._uU(11," Run "),t.qZA(),t.TgZ(12,"button",8),t.NdJ("click",function(){return n.navigationService.goToPreviousPage()}),t._UZ(13,"mat-icon",9),t._uU(14," Go back "),t.qZA()()(),t.TgZ(15,"div",10),t._UZ(16,"ms-terminal"),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("formGroup",n.form),t.xp6(2),t.Q6J("algorithmType",n.selectedAlgorithmType),t.xp6(2),t.Q6J("algorithm",n.selectedAlgorithmKey),t.xp6(3),t.Q6J("disabled",n.isScriptActive||n.form.invalid))},dependencies:[q.lW,O.Hw,m.JL,m.sg,g.d,r,s.w,V,$],styles:[".title[_ngcontent-%COMP%]{margin-bottom:13px}"]}),I);j=(0,a.gn)([(0,h.c)()],j);const ft=[{path:"",component:j}];let vt=(()=>{var i;class e{}return(i=e).\u0275fac=function(l){return new(l||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.Bz.forChild(ft),u.Bz]}),e})(),Tt=(()=>{var i;class e{}return(i=e).\u0275fac=function(l){return new(l||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[c.ez,y.m,vt,g.d,r,s.w]}),e})()},7754:(z,P,o)=>{o.d(P,{u:()=>y});var c=o(5879);let y=(()=>{var a;class t{constructor(){this.title="",this.message=""}}return(a=t).\u0275fac=function(_){return new(_||a)},a.\u0275cmp=c.Xpm({type:a,selectors:[["ms-empty-state"]],inputs:{title:"title",message:"message"},standalone:!0,features:[c.jDz],decls:6,vars:2,consts:[["src","assets/icons/empty-state.svg"],[1,"heading-section-title"],[1,"paragraph-regular-p2-large"]],template:function(_,f){1&_&&(c.TgZ(0,"div"),c._UZ(1,"img",0),c.TgZ(2,"div",1),c._uU(3),c.qZA(),c.TgZ(4,"div",2),c._uU(5),c.qZA()()),2&_&&(c.xp6(3),c.Oqu(f.title),c.xp6(2),c.Oqu(f.message))},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:100%;text-align:center}div[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}img[_ngcontent-%COMP%]{max-width:100%;height:auto}"]}),t})()},1668:(z,P,o)=>{o.d(P,{w:()=>U});var v,c=o(7582),y=o(6814),a=o(5879),t=o(6223),m=o(5195),_=o(5986),f=o(5683),O=o(2032),D=o(8525),N=o(2596),h=o(8791),L=o(7398),x=o(836),C=o(3946),G=o(9547),A=o(8279),K=o(127),Q=o(3221),T=o(8471),d=o(3680);function S(p,r){if(1&p&&(a.TgZ(0,"div",10)(1,"mat-label"),a._uU(2),a.qZA(),a.TgZ(3,"mat-form-field",11),a._UZ(4,"input",12)(5,"mat-icon",13),a.qZA()()),2&p){const s=a.oxw(),g=s.$implicit,u=s.index;a.xp6(2),a.Oqu(g.label),a.xp6(2),a.Q6J("formControlName",u)("placeholder",g.placeholder)("type",g.inputType),a.xp6(1),a.s9C("matTooltip",g.help)}}function J(p,r){if(1&p&&(a.TgZ(0,"mat-option",16),a._uU(1),a.qZA()),2&p){const s=r.$implicit;a.Q6J("value",s.value),a.xp6(1),a.hij(" ",s.viewValue," ")}}function b(p,r){if(1&p&&(a.TgZ(0,"div",10)(1,"mat-label"),a._uU(2),a.qZA(),a.TgZ(3,"mat-form-field",11)(4,"mat-select",14),a.YNc(5,J,2,2,"mat-option",15),a.qZA(),a._UZ(6,"mat-icon",13),a.qZA()()),2&p){const s=a.oxw(),g=s.$implicit,u=s.index;a.xp6(2),a.Oqu(g.label),a.xp6(2),a.Q6J("formControlName",u),a.xp6(1),a.Q6J("ngForOf",g.options),a.xp6(1),a.s9C("matTooltip",g.help)}}function Z(p,r){if(1&p&&(a.TgZ(0,"div",17)(1,"mat-checkbox",14),a._uU(2),a.qZA(),a.TgZ(3,"div",18),a._UZ(4,"mat-icon",19),a.qZA()()),2&p){const s=a.oxw(),g=s.index,u=s.$implicit;a.xp6(1),a.Q6J("formControlName",g),a.xp6(1),a.Oqu(u.label),a.xp6(2),a.s9C("matTooltip",u.help)}}function M(p,r){if(1&p&&(a.ynx(0),a.YNc(1,S,6,5,"div",8),a.YNc(2,b,7,4,"div",8),a.YNc(3,Z,5,3,"div",9),a.BQk()),2&p){const s=r.$implicit;a.xp6(1),a.Q6J("ngIf","text"===s.inputType||"number"===s.inputType),a.xp6(1),a.Q6J("ngIf","select"===s.inputType),a.xp6(1),a.Q6J("ngIf","checkbox"===s.inputType)}}function Y(p,r){if(1&p&&(a.TgZ(0,"div",4),a.ynx(1,5),a.TgZ(2,"div",6),a.YNc(3,M,4,3,"ng-container",7),a.qZA(),a.BQk(),a.qZA()),2&p){const s=a.oxw();a.xp6(1),a.Q6J("formGroupName",s.controlKey),a.xp6(2),a.Q6J("ngForOf",s.parameters)}}function W(p,r){1&p&&(a.TgZ(0,"p",20),a._uU(1,"No parameters configured."),a.qZA())}let U=((v=class{ngOnChanges(r){r.algorithm&&r.algorithm.currentValue&&(this.alg=r.algorithm.currentValue,this.loadParametersForAlgorithm(this.alg))}get parentFormGroup(){return this.controlContainer.control}get paramsFormGroup(){return this.parentFormGroup.get(this.controlKey)}get parametersFormArray(){return this.paramsFormGroup.get("parametersArray")}constructor(r,s,g,u){this.fb=r,this.controlContainer=s,this.parametersFacadeService=g,this.scriptFacadeService=u,this.controlKey="",this.RoutesList=G.Z,this.alg=A.k2,this.isScriptActive=!1,this.parameters=[]}ngOnInit(){this.initForm(),this.listenToScriptStateChanges()}initForm(){this.parentFormGroup.addControl(this.controlKey,new t.cw({parametersArray:new t.Oe([])}))}loadParametersForAlgorithm(r){this.parametersFacadeService.dispatch(C.j.loadParameters({arg:r})),this.parametersFacadeService.parameters$.pipe((0,L.U)(s=>s[r]?.data||[]),(0,x.T)(1),(0,h.t)(this)).subscribe(s=>{this.buildFormArray(s)})}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,h.t)(this)).subscribe(r=>{this.isScriptActive=(0,K.A)(r)})}buildFormArray(r){this.parametersFormArray.clear(),r.forEach(s=>{this.parametersFormArray.push(this.fb.control(s.defaultValue))}),this.isScriptActive?this.paramsFormGroup.disable():this.paramsFormGroup.enable(),this.parameters=r}get parametersFormatted(){const r={},s=this.parametersFormArray.getRawValue();return this.parameters.forEach((g,u)=>{r[g.argName]=s[u]}),r}ngOnDestroy(){this.parentFormGroup.removeControl(this.controlKey)}}).\u0275fac=function(r){return new(r||v)(a.Y36(t.qu),a.Y36(t.gN),a.Y36(Q.E),a.Y36(T.O))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ms-panel-parameters"]],inputs:{controlKey:"controlKey",algorithm:"algorithm"},standalone:!0,features:[a._Bn([],[{provide:t.gN,useFactory:()=>(0,a.f3M)(t.gN,{skipSelf:!0})}]),a.TTD,a.jDz],decls:6,vars:2,consts:[[1,"ms-card","parameters-card"],[1,"heading-sub-section-title"],["class","parameters-wrapper",4,"ngIf","ngIfElse"],["noParametersTemplate",""],[1,"parameters-wrapper"],[3,"formGroupName"],["formArrayName","parametersArray"],[4,"ngFor","ngForOf"],["class","form-field-container",4,"ngIf"],["class","form-field-container inline-container mb-[22px]",4,"ngIf"],[1,"form-field-container"],["appearance","outline"],["matInput","",3,"formControlName","placeholder","type"],["fontSet","ms","fontIcon","icon-Info","matSuffix","",3,"matTooltip"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-field-container","inline-container","mb-[22px]"],[1,"ml-2"],["fontSet","ms","fontIcon","icon-Info",3,"matTooltip"],[1,"no-parameters-message"]],template:function(r,s){if(1&r&&(a.TgZ(0,"mat-card",0)(1,"p",1),a._uU(2,"Parameters"),a.qZA(),a.YNc(3,Y,4,2,"div",2),a.YNc(4,W,2,0,"ng-template",null,3,a.W1O),a.qZA()),2&r){const g=a.MAs(5);a.xp6(3),a.Q6J("ngIf",s.parameters.length)("ngIfElse",g)}},dependencies:[y.ez,y.sg,y.O5,O.c,O.Nt,f.KE,f.hX,f.R9,t.UX,t.Fj,t.JJ,t.JL,t.u,t.x0,t.CE,m.QW,m.a8,f.lN,D.LD,D.gD,d.ey,N.AV,N.gM,_.p9,_.oG],styles:[".parameters-card[_ngcontent-%COMP%]   .parameters-wrapper[_ngcontent-%COMP%]{max-height:400px;overflow:auto;padding-right:20px}.parameters-card[_ngcontent-%COMP%]   .parameters-wrapper[_ngcontent-%COMP%]   .parameter-divider[_ngcontent-%COMP%]{margin-bottom:20px}"]}),v);U=(0,c.gn)([(0,h.c)()],U)}}]);