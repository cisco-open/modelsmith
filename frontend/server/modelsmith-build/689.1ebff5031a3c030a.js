"use strict";(self.webpackChunkmodelsmith=self.webpackChunkmodelsmith||[]).push([[689],{2689:(X,v,i)=>{i.r(v),i.d(v,{ModelCompressionModule:()=>x});var A=i(6814),G=i(4245),y=i(3328),C=i(1668),T=i(1543),g=i(4190),S=i(7582),s=i(6223),c=i(8791),R=i(3620),Q=i(7398),J=i(3997),F=i(2181),O=i(39),I=i(9547),N=i(4378);const P="custommodel";var l,a=i(7820),d=i(127),t=i(5879),M=i(8471),L=i(999),B=i(8450),U=i(2296),j=i(8180),h=i(8279),E=i(5195),z=i(5683),D=i(8525),Z=i(3680);function b(r,e){if(1&r&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.Q6J("value",o.key),t.xp6(1),t.hij(" ",o.value," ")}}function Y(r,e){if(1&r&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.Q6J("value",o.key),t.xp6(1),t.hij(" ",o.value," ")}}let u=((l=class{get parentFormGroup(){return this.controlContainer.control}get algorithmFormGroup(){return this.parentFormGroup.get(this.controlKey)}get algorithmFormControl(){return this.algorithmFormGroup?.get(this.ALGORITHM_CONTROL_NAME)}constructor(e,o){this.controlContainer=e,this.scriptFacadeService=o,this.controlKey="",this.pruningAlgorithmsList=h.dD,this.quantAlgorithmsList=h.A3,this.ALGORITHM_CONTROL_NAME="alg"}ngOnInit(){this.initForm(),this.listenToScriptStateChanges(),this.loadInitialData()}loadInitialData(){this.scriptFacadeService.scriptDetails$.pipe((0,j.q)(1),(0,F.h)(e=>!!e?.algKey)).subscribe(e=>{const o=e.type,p=o===a.Bd.PRUNING||o===a.Bd.QUANTIZATION?e.algKey:h.k2;this.algorithmFormControl?.setValue(p)}),this.scriptFacadeService.dispatch(O.aj.getCurrentOrLastActiveScriptDetails())}initForm(){this.parentFormGroup.addControl(this.controlKey,new s.cw({[this.ALGORITHM_CONTROL_NAME]:new s.NI(h.k2,s.kI.required)}))}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,c.t)(this)).subscribe(e=>{(0,d.A)(e)?this.algorithmFormGroup.disable():this.algorithmFormGroup.enable()})}trackByAlgorithmKey(e,o){return o.key}ngOnDestroy(){this.parentFormGroup.removeControl(this.controlKey)}}).\u0275fac=function(e){return new(e||l)(t.Y36(s.gN),t.Y36(M.O))},l.\u0275cmp=t.Xpm({type:l,selectors:[["ms-panel-algorithm"]],inputs:{controlKey:"controlKey"},features:[t._Bn([],[{provide:s.gN,useFactory:()=>(0,t.f3M)(s.gN,{skipSelf:!0})}])],decls:10,vars:6,consts:[[1,"ms-card","algorithm-card"],[1,"heading-sub-section-title"],[1,"form-field-container",3,"formGroupName"],["appearance","outline","subscriptSizing","dynamic"],[3,"formControlName"],["label","Pruning"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["label","Quantization"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"p",1),t._uU(2,"Algorithm"),t.qZA(),t.TgZ(3,"div",2)(4,"mat-form-field",3)(5,"mat-select",4)(6,"mat-optgroup",5),t.YNc(7,b,2,2,"mat-option",6),t.qZA(),t.TgZ(8,"mat-optgroup",7),t.YNc(9,Y,2,2,"mat-option",6),t.qZA()()()()()),2&e&&(t.xp6(3),t.Q6J("formGroupName",o.controlKey),t.xp6(2),t.Q6J("formControlName",o.ALGORITHM_CONTROL_NAME),t.xp6(2),t.Q6J("ngForOf",o.pruningAlgorithmsList)("ngForTrackBy",o.trackByAlgorithmKey),t.xp6(2),t.Q6J("ngForOf",o.quantAlgorithmsList)("ngForTrackBy",o.trackByAlgorithmKey))},dependencies:[A.sg,E.a8,z.KE,D.gD,Z.ey,Z.Nv,s.JJ,s.JL,s.u,s.x0]}),l);var m;u=(0,S.gn)([(0,c.c)()],u);const $=["panelParameters"];let f=((m=class{constructor(e,o,n,p){this.scriptFacadeService=e,this.fileService=o,this.snackbarService=n,this.router=p,this.form=new s.cw({}),this.AlgorithmType=a.Bd,this.isScriptActive=!1,this.isQuantAlgorithmSelected=!1,this.selectedAlgorithm=a.pW.IMP,this.selectedAlgorithmType=a.Bd.PRUNING}ngOnInit(){this.listenToAlgorithmPanelChanges(),this.listenToScriptStateChanges()}listenToAlgorithmPanelChanges(){this.form.valueChanges.pipe((0,R.b)(50),(0,Q.U)(()=>{const e=this.form.getRawValue();return e.algorithm&&e.algorithm.alg}),(0,J.x)(),(0,F.h)(e=>!(0,N.kK)(e)),(0,c.t)(this)).subscribe(e=>{this.selectedAlgorithm=e,this.selectedAlgorithmType=(0,a.t6)(e),console.log(this.selectedAlgorithmType)})}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,c.t)(this)).subscribe(e=>{this.isScriptActive=(0,d.A)(e),(0,d.A)(e)?this.form.disable():this.form.enable()})}submit(){if((0,N.kK)(this.selectedAlgorithm))return void this.snackbarService.showError("Select an algorithm before running a script.");const{algorithm:e,model:o}=this.form.getRawValue(),{model:n}=o;if(n===P&&!this.fileService.isFileLoaded)return void this.snackbarService.showError("Please select a predefined model or upload a custom file.");let p=n===P?function K(r){let e=r.replace(/[^a-zA-Z0-9_]/g,"_");return/^[0-9_]/.test(e)&&(e="file_"+e),/.py$/.test(e)||(e+=".py"),e}(this.fileService?.file.name):n;const W={...e,params:{...this.panelParametersComponent.parametersFormatted,arch:p}};this.scriptFacadeService.dispatch(O.aj.callScript({configs:W}))}goToChartPage(){this.router.navigate([I.Z.RUNNING.ROOT])}}).\u0275fac=function(e){return new(e||m)(t.Y36(M.O),t.Y36(L.I),t.Y36(B.QD),t.Y36(g.F0))},m.\u0275cmp=t.Xpm({type:m,selectors:[["ms-machine-unlearning"]],viewQuery:function(e,o){if(1&e&&t.Gf($,5),2&e){let n;t.iGM(n=t.CRH())&&(o.panelParametersComponent=n.first)}},decls:17,vars:5,consts:[[1,"heading-primary-title","title"],[1,"page-wrapper",3,"formGroup"],[1,"left"],[3,"formGroup"],["controlKey","algorithm"],["panelAlgorithm",""],["controlKey","model",3,"algorithmType"],["controlKey","params",3,"algorithm"],["panelParameters",""],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","primary",1,"ml-2",3,"click"],[1,"right"]],template:function(e,o){1&e&&(t.TgZ(0,"p",0),t._uU(1,"Project Settings"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2),t.ynx(4,3),t._UZ(5,"ms-panel-algorithm",4,5)(7,"ms-panel-model",6)(8,"ms-panel-parameters",7,8),t.BQk(),t.TgZ(10,"div")(11,"button",9),t.NdJ("click",function(){return o.submit()}),t._uU(12," Run "),t.qZA(),t.TgZ(13,"button",10),t.NdJ("click",function(){return o.goToChartPage()}),t._uU(14,"View Chart"),t.qZA()()(),t.TgZ(15,"div",11),t._UZ(16,"ms-terminal"),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("algorithmType",o.selectedAlgorithmType),t.xp6(1),t.Q6J("algorithm",o.selectedAlgorithm),t.xp6(3),t.Q6J("disabled",o.isScriptActive||o.form.invalid))},dependencies:[U.lW,s.JL,s.sg,T.d,y.d,C.w,u],styles:[".title[_ngcontent-%COMP%]{margin-bottom:13px}"]}),m);f=(0,S.gn)([(0,c.c)()],f);const H=[{path:"",component:f}];let V=(()=>{var r;class e{}return(r=e).\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[g.Bz.forChild(H),g.Bz]}),e})(),x=(()=>{var r;class e{}return(r=e).\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[A.ez,G.m,V,T.d,y.d,C.w]}),e})()}}]);