"use strict";(self.webpackChunkmodelsmith=self.webpackChunkmodelsmith||[]).push([[298],{4378:(R,h,e)=>{function p(l){return"[object Object]"===Object.prototype.toString.call(l)&&0===Object.keys(l).length}function i(l){return null==l||""===l}function u(l){return Array.isArray(l)&&0===l.length}e.d(h,{Bm:()=>i,Qr:()=>p,yD:()=>u})},3328:(R,h,e)=>{e.d(h,{d:()=>O});var c,C=e(7582),p=e(6814),t=e(5879),i=e(6223),u=e(5195),l=e(5683),g=e(617),f=e(8525),M=e(8791),E=e(3427),P=e(1374),v=e(7398),I=e(7921),T=e(3607),D=e(4378),x=e(7820),y=e(127),U=e(3705),F=e(8471),A=e(3680);function K(m,a){1&m&&t._UZ(0,"mat-icon",12)}function L(m,a){if(1&m&&(t.TgZ(0,"mat-option",10),t._uU(1),t.YNc(2,K,1,0,"mat-icon",11),t.qZA()),2&m){const r=a.$implicit;t.Q6J("value",r.name)("disabled",!r.isTrained),t.xp6(1),t.hij(" ",r.name," "),t.xp6(1),t.Q6J("ngIf",!r.isTrained)}}function B(m,a){1&m&&(t.TgZ(0,"mat-option",13),t._uU(1,"No results found"),t.qZA())}function N(m,a){if(1&m&&(t.ynx(0),t.YNc(1,L,3,4,"mat-option",8),t.YNc(2,B,2,0,"mat-option",9),t.BQk()),2&m){const r=a.ngIf,s=t.oxw();t.xp6(1),t.Q6J("ngForOf",r)("ngForTrackBy",s.trackByModel),t.xp6(1),t.Q6J("ngIf",0===r.length)}}let O=((c=class{ngOnChanges(a){a.algorithm&&a.algorithm.currentValue&&this.configureModels(a.algorithm.currentValue)}get parentFormGroup(){return this.controlContainer.control}get modelFormGroup(){return this.parentFormGroup.get(this.controlKey)}get modelControl(){return this.modelFormGroup.get(this.MODEL_CONTROL_NAME)}constructor(a,r,s){this.controlContainer=a,this.modelsFacadeService=r,this.scriptFacadeService=s,this.controlKey="",this.searchModel=new i.NI,this.models=[],this.MODEL_CONTROL_NAME="model"}ngOnInit(){this.initializeForm(),this.listenToScriptStateChanges(),this.listenToSearchModelValueChanges(),this.listenToCurrentModelChanges()}configureModels(a){const r=(0,x.t6)(a);r&&(this.fetchModels(r),this.modelsFacadeService.dispatch(T.o.getCurrentOrPreviousSelectedModel({algorithmType:r})))}listenToCurrentModelChanges(){this.modelsFacadeService.currentModel$.pipe((0,M.t)(this)).subscribe(a=>{(0,D.Bm)(a)||this.modelControl?.patchValue(a)})}fetchModels(a){this.modelsFacadeService.getModelsByType(a).pipe((0,P.P)(r=>!(0,D.yD)(r)),(0,v.U)(r=>[...r].sort((s,o)=>Number(o.isTrained)-Number(s.isTrained)))).subscribe(r=>{this.models=r,this.searchModel.setValue("")}),this.modelsFacadeService.dispatch(T.o.getModelsList({algorithmType:a}))}initializeForm(){this.parentFormGroup.addControl(this.controlKey,new i.cw({[this.MODEL_CONTROL_NAME]:new i.NI("",i.kI.required)}))}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,M.t)(this)).subscribe(a=>{(0,y.A)(a)?this.modelFormGroup.disable():this.modelFormGroup.enable()})}listenToSearchModelValueChanges(){this.filteredModels=this.searchModel.valueChanges.pipe((0,M.t)(this),(0,I.O)(""),(0,v.U)(a=>this.filterModels(a)))}filterModels(a){const r=a.toLowerCase();return this.models.filter(s=>s.name.toLowerCase().includes(r))}trackByModel(a,r){return r.name}ngOnDestroy(){this.parentFormGroup.removeControl(this.controlKey)}}).\u0275fac=function(a){return new(a||c)(t.Y36(i.gN),t.Y36(U.V),t.Y36(F.O))},c.\u0275cmp=t.Xpm({type:c,selectors:[["ms-panel-model"]],inputs:{controlKey:"controlKey",algorithm:"algorithm"},standalone:!0,features:[t._Bn([],[{provide:i.gN,useFactory:()=>(0,t.f3M)(i.gN,{skipSelf:!0})}]),t.TTD,t.jDz],decls:11,vars:5,consts:[[1,"ms-card","model-card"],[1,"heading-sub-section-title"],[1,"form-field-container",3,"formGroupName"],["appearance","outline","subscriptSizing","dynamic"],["formControlName","model","placeholder","Select a model..."],["label","Predefined Models"],[3,"formControl"],[4,"ngIf"],[3,"value","disabled",4,"ngFor","ngForOf","ngForTrackBy"],["disabled","",4,"ngIf"],[3,"value","disabled"],["class","mat-error","fontSet","ms","fontIcon","icon-X",4,"ngIf"],["fontSet","ms","fontIcon","icon-X",1,"mat-error"],["disabled",""]],template:function(a,r){1&a&&(t.TgZ(0,"mat-card",0)(1,"p",1),t._uU(2,"Model"),t.qZA(),t.TgZ(3,"div",2)(4,"mat-form-field",3)(5,"mat-select",4)(6,"mat-optgroup",5)(7,"mat-option"),t._UZ(8,"ngx-mat-select-search",6),t.qZA(),t.YNc(9,N,3,3,"ng-container",7),t.ALo(10,"async"),t.qZA()()()()()),2&a&&(t.xp6(3),t.Q6J("formGroupName",r.controlKey),t.xp6(5),t.Q6J("formControl",r.searchModel),t.xp6(1),t.Q6J("ngIf",t.lcZ(10,3,r.filteredModels)))},dependencies:[i.UX,i.JJ,i.JL,i.oH,i.u,i.x0,u.QW,u.a8,l.lN,l.KE,f.LD,f.gD,A.ey,A.Nv,g.Ps,g.Hw,p.ez,p.sg,p.O5,p.Ov,E.Co,E.nu]}),c);O=(0,C.gn)([(0,M.c)()],O)},1668:(R,h,e)=>{e.d(h,{w:()=>r});var c,C=e(7582),p=e(6814),t=e(5879),i=e(6223),u=e(5195),l=e(5986),g=e(5683),f=e(2032),M=e(8525),E=e(2596),P=e(8791),v=e(7398),I=e(836),T=e(3946),D=e(9547),x=e(8279),y=e(127),U=e(3221),F=e(8471),A=e(3680);function K(s,o){if(1&s&&(t.TgZ(0,"div",10)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-form-field",11),t._UZ(4,"input",12)(5,"mat-icon",13),t.qZA()()),2&s){const n=t.oxw(),_=n.$implicit,d=n.index;t.xp6(2),t.Oqu(_.label),t.xp6(2),t.Q6J("formControlName",d)("placeholder",_.placeholder)("type",_.inputType),t.xp6(1),t.s9C("matTooltip",_.help)}}function L(s,o){if(1&s&&(t.TgZ(0,"mat-option",16),t._uU(1),t.qZA()),2&s){const n=o.$implicit;t.Q6J("value",n.value),t.xp6(1),t.hij(" ",n.viewValue," ")}}function B(s,o){if(1&s&&(t.TgZ(0,"div",10)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-form-field",11)(4,"mat-select",14),t.YNc(5,L,2,2,"mat-option",15),t.qZA(),t._UZ(6,"mat-icon",13),t.qZA()()),2&s){const n=t.oxw(),_=n.$implicit,d=n.index;t.xp6(2),t.Oqu(_.label),t.xp6(2),t.Q6J("formControlName",d),t.xp6(1),t.Q6J("ngForOf",_.options),t.xp6(1),t.s9C("matTooltip",_.help)}}function N(s,o){if(1&s&&(t.TgZ(0,"div",17)(1,"mat-checkbox",14),t._uU(2),t.qZA(),t.TgZ(3,"div",18),t._UZ(4,"mat-icon",19),t.qZA()()),2&s){const n=t.oxw(),_=n.index,d=n.$implicit;t.xp6(1),t.Q6J("formControlName",_),t.xp6(1),t.Oqu(d.label),t.xp6(2),t.s9C("matTooltip",d.help)}}function O(s,o){if(1&s&&(t.ynx(0),t.YNc(1,K,6,5,"div",8),t.YNc(2,B,7,4,"div",8),t.YNc(3,N,5,3,"div",9),t.BQk()),2&s){const n=o.$implicit;t.xp6(1),t.Q6J("ngIf","text"===n.inputType||"number"===n.inputType),t.xp6(1),t.Q6J("ngIf","select"===n.inputType),t.xp6(1),t.Q6J("ngIf","checkbox"===n.inputType)}}function m(s,o){if(1&s&&(t.TgZ(0,"div",4),t.ynx(1,5),t.TgZ(2,"div",6),t.YNc(3,O,4,3,"ng-container",7),t.qZA(),t.BQk(),t.qZA()),2&s){const n=t.oxw();t.xp6(1),t.Q6J("formGroupName",n.controlKey),t.xp6(2),t.Q6J("ngForOf",n.parameters)}}function a(s,o){1&s&&(t.TgZ(0,"p",20),t._uU(1,"No parameters configured."),t.qZA())}let r=((c=class{ngOnChanges(o){o.algorithm&&o.algorithm.currentValue&&(this.alg=o.algorithm.currentValue,this.loadParametersForAlgorithm(this.alg))}get parentFormGroup(){return this.controlContainer.control}get paramsFormGroup(){return this.parentFormGroup.get(this.controlKey)}get parametersFormArray(){return this.paramsFormGroup.get("parametersArray")}constructor(o,n,_,d){this.fb=o,this.controlContainer=n,this.parametersFacadeService=_,this.scriptFacadeService=d,this.controlKey="",this.RoutesList=D.Z,this.alg=x.k2,this.isScriptActive=!1,this.parameters=[]}ngOnInit(){this.initializeForm(),this.listenToScriptStateChanges()}initializeForm(){this.parentFormGroup.addControl(this.controlKey,new i.cw({parametersArray:new i.Oe([])}))}loadParametersForAlgorithm(o){this.parametersFacadeService.dispatch(T.j.loadParameters({arg:o})),this.parametersFacadeService.parameters$.pipe((0,v.U)(n=>n[o]?.data||[]),(0,I.T)(1),(0,P.t)(this)).subscribe(n=>{this.buildFormArray(n)})}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,P.t)(this)).subscribe(o=>{this.isScriptActive=(0,y.A)(o)})}buildFormArray(o){this.parametersFormArray.clear(),o.forEach(n=>{this.parametersFormArray.push(this.fb.control(n.defaultValue))}),this.isScriptActive?this.paramsFormGroup.disable():this.paramsFormGroup.enable(),this.parameters=o}get parametersFormatted(){const o={},n=this.parametersFormArray.getRawValue();return this.parameters.forEach((_,d)=>{o[_.argName]=n[d]}),o}ngOnDestroy(){this.parentFormGroup.removeControl(this.controlKey)}}).\u0275fac=function(o){return new(o||c)(t.Y36(i.qu),t.Y36(i.gN),t.Y36(U.E),t.Y36(F.O))},c.\u0275cmp=t.Xpm({type:c,selectors:[["ms-panel-parameters"]],inputs:{controlKey:"controlKey",algorithm:"algorithm"},standalone:!0,features:[t._Bn([],[{provide:i.gN,useFactory:()=>(0,t.f3M)(i.gN,{skipSelf:!0})}]),t.TTD,t.jDz],decls:6,vars:2,consts:[[1,"ms-card","parameters-card"],[1,"heading-sub-section-title"],["class","parameters-wrapper",4,"ngIf","ngIfElse"],["noParametersTemplate",""],[1,"parameters-wrapper"],[3,"formGroupName"],["formArrayName","parametersArray"],[4,"ngFor","ngForOf"],["class","form-field-container",4,"ngIf"],["class","form-field-container inline-container mb-[22px]",4,"ngIf"],[1,"form-field-container"],["appearance","outline"],["matInput","",3,"formControlName","placeholder","type"],["fontSet","ms","fontIcon","icon-Info","matSuffix","",3,"matTooltip"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-field-container","inline-container","mb-[22px]"],[1,"ml-2"],["fontSet","ms","fontIcon","icon-Info",3,"matTooltip"],[1,"no-parameters-message"]],template:function(o,n){if(1&o&&(t.TgZ(0,"mat-card",0)(1,"p",1),t._uU(2,"Parameters"),t.qZA(),t.YNc(3,m,4,2,"div",2),t.YNc(4,a,2,0,"ng-template",null,3,t.W1O),t.qZA()),2&o){const _=t.MAs(5);t.xp6(3),t.Q6J("ngIf",n.parameters.length)("ngIfElse",_)}},dependencies:[p.ez,p.sg,p.O5,f.c,f.Nt,g.KE,g.hX,g.R9,i.UX,i.Fj,i.JJ,i.JL,i.u,i.x0,i.CE,u.QW,u.a8,g.lN,M.LD,M.gD,A.ey,E.AV,E.gM,l.p9,l.oG],styles:[".parameters-card[_ngcontent-%COMP%]   .parameters-wrapper[_ngcontent-%COMP%]{max-height:400px;overflow:auto;padding-right:20px}.parameters-card[_ngcontent-%COMP%]   .parameters-wrapper[_ngcontent-%COMP%]   .parameter-divider[_ngcontent-%COMP%]{margin-bottom:20px}"]}),c);r=(0,C.gn)([(0,P.c)()],r)}}]);