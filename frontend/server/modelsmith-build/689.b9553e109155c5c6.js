"use strict";(self.webpackChunkmodelsmith=self.webpackChunkmodelsmith||[]).push([[689],{2689:(k,A,i)=>{i.r(A),i.d(A,{ModelCompressionModule:()=>W});var y=i(6814),G=i(4245),C=i(3328),T=i(1668),S=i(1501),g=i(2655),F=i(7582),s=i(6223),c=i(8791),R=i(3620),Q=i(7398),J=i(3997),O=i(2181),N=i(39),I=i(9547),d=i(4378);const M="custommodel";var l,a=i(7820),u=i(127),t=i(5879),P=i(8471),L=i(999),B=i(8450),U=i(2296),j=i(836),E=i(8180),h=i(8279),z=i(5195),D=i(5683),Y=i(8525),Z=i(3680);function b(r,o){if(1&r&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij(" ",e.value," ")}}function $(r,o){if(1&r&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij(" ",e.value," ")}}let f=((l=class{get parentFormGroup(){return this.controlContainer.control}get algorithmFormGroup(){return this.parentFormGroup.get(this.controlKey)}get algorithmFormControl(){return this.algorithmFormGroup?.get(this.ALGORITHM_CONTROL_NAME)}constructor(o,e){this.controlContainer=o,this.scriptFacadeService=e,this.controlKey="",this.pruningAlgorithmsList=h.dD,this.quantAlgorithmsList=h.A3,this.ALGORITHM_CONTROL_NAME="alg"}ngOnInit(){this.initForm(),this.listenToScriptStateChanges(),this.loadInitialData()}loadInitialData(){this.scriptFacadeService.scriptDetails$.pipe((0,j.T)(1),(0,E.q)(1),(0,O.h)(o=>!(0,d.Bm)(o?.algKey))).subscribe(o=>{const e=o.type,p=e===a.Bd.PRUNING||e===a.Bd.QUANTIZATION?o.algKey:h.k2;this.algorithmFormControl?.setValue(p)}),this.scriptFacadeService.dispatch(N.aj.getCurrentOrLastActiveScriptDetails())}initForm(){this.parentFormGroup.addControl(this.controlKey,new s.cw({[this.ALGORITHM_CONTROL_NAME]:new s.NI(h.k2,s.kI.required)}))}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,c.t)(this)).subscribe(o=>{(0,u.A)(o)?this.algorithmFormGroup.disable():this.algorithmFormGroup.enable()})}trackByAlgorithmKey(o,e){return e.key}ngOnDestroy(){this.parentFormGroup.removeControl(this.controlKey)}}).\u0275fac=function(o){return new(o||l)(t.Y36(s.gN),t.Y36(P.O))},l.\u0275cmp=t.Xpm({type:l,selectors:[["ms-panel-algorithm"]],inputs:{controlKey:"controlKey"},features:[t._Bn([],[{provide:s.gN,useFactory:()=>(0,t.f3M)(s.gN,{skipSelf:!0})}])],decls:10,vars:6,consts:[[1,"ms-card","algorithm-card"],[1,"heading-sub-section-title"],[1,"form-field-container",3,"formGroupName"],["appearance","outline","subscriptSizing","dynamic"],[3,"formControlName"],["label","Pruning"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["label","Quantization"],[3,"value"]],template:function(o,e){1&o&&(t.TgZ(0,"mat-card",0)(1,"p",1),t._uU(2,"Algorithm"),t.qZA(),t.TgZ(3,"div",2)(4,"mat-form-field",3)(5,"mat-select",4)(6,"mat-optgroup",5),t.YNc(7,b,2,2,"mat-option",6),t.qZA(),t.TgZ(8,"mat-optgroup",7),t.YNc(9,$,2,2,"mat-option",6),t.qZA()()()()()),2&o&&(t.xp6(3),t.Q6J("formGroupName",e.controlKey),t.xp6(2),t.Q6J("formControlName",e.ALGORITHM_CONTROL_NAME),t.xp6(2),t.Q6J("ngForOf",e.pruningAlgorithmsList)("ngForTrackBy",e.trackByAlgorithmKey),t.xp6(2),t.Q6J("ngForOf",e.quantAlgorithmsList)("ngForTrackBy",e.trackByAlgorithmKey))},dependencies:[y.sg,z.a8,D.KE,Y.gD,Z.ey,Z.Nv,s.JJ,s.JL,s.u,s.x0]}),l);var m;f=(0,F.gn)([(0,c.c)()],f);const H=["panelParameters"];let v=((m=class{constructor(o,e,n,p){this.scriptFacadeService=o,this.fileService=e,this.snackbarService=n,this.router=p,this.form=new s.cw({}),this.AlgorithmType=a.Bd,this.isScriptActive=!1,this.isQuantAlgorithmSelected=!1,this.selectedAlgorithm=a.pW.IMP,this.selectedAlgorithmType=a.Bd.PRUNING}ngOnInit(){this.listenToAlgorithmPanelChanges(),this.listenToScriptStateChanges()}listenToAlgorithmPanelChanges(){this.form.valueChanges.pipe((0,R.b)(50),(0,Q.U)(()=>{const o=this.form.getRawValue();return o.algorithm&&o.algorithm.alg}),(0,J.x)(),(0,O.h)(o=>!(0,d.kK)(o)),(0,c.t)(this)).subscribe(o=>{this.selectedAlgorithm=o,this.selectedAlgorithmType=(0,a.t6)(o)})}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,c.t)(this)).subscribe(o=>{this.isScriptActive=(0,u.A)(o),(0,u.A)(o)?this.form.disable():this.form.enable()})}submit(){if((0,d.kK)(this.selectedAlgorithm))return void this.snackbarService.showError("Select an algorithm before running a script.");const{algorithm:o,model:e}=this.form.getRawValue(),{model:n}=e;if(n===M&&!this.fileService.isFileLoaded)return void this.snackbarService.showError("Please select a predefined model or upload a custom file.");let p=n===M?function K(r){let o=r.replace(/[^a-zA-Z0-9_]/g,"_");return/^[0-9_]/.test(o)&&(o="file_"+o),/.py$/.test(o)||(o+=".py"),o}(this.fileService?.file.name):n;const X={...o,params:{...this.panelParametersComponent.parametersFormatted,arch:p}};this.scriptFacadeService.dispatch(N.aj.callScript({configs:X}))}goToChartPage(){this.router.navigate([I.Z.RUNNING.ROOT])}}).\u0275fac=function(o){return new(o||m)(t.Y36(P.O),t.Y36(L.I),t.Y36(B.QD),t.Y36(g.F0))},m.\u0275cmp=t.Xpm({type:m,selectors:[["ms-machine-unlearning"]],viewQuery:function(o,e){if(1&o&&t.Gf(H,5),2&o){let n;t.iGM(n=t.CRH())&&(e.panelParametersComponent=n.first)}},decls:17,vars:5,consts:[[1,"heading-primary-title","title"],[1,"page-wrapper",3,"formGroup"],[1,"left"],[3,"formGroup"],["controlKey","algorithm"],["panelAlgorithm",""],["controlKey","model",3,"algorithmType"],["controlKey","params",3,"algorithm"],["panelParameters",""],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","primary",1,"ml-2",3,"click"],[1,"right"]],template:function(o,e){1&o&&(t.TgZ(0,"p",0),t._uU(1,"Model Compression"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2),t.ynx(4,3),t._UZ(5,"ms-panel-algorithm",4,5)(7,"ms-panel-model",6)(8,"ms-panel-parameters",7,8),t.BQk(),t.TgZ(10,"div")(11,"button",9),t.NdJ("click",function(){return e.submit()}),t._uU(12," Run "),t.qZA(),t.TgZ(13,"button",10),t.NdJ("click",function(){return e.goToChartPage()}),t._uU(14,"View Chart"),t.qZA()()(),t.TgZ(15,"div",11),t._UZ(16,"ms-terminal"),t.qZA()()),2&o&&(t.xp6(2),t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("formGroup",e.form),t.xp6(3),t.Q6J("algorithmType",e.selectedAlgorithmType),t.xp6(1),t.Q6J("algorithm",e.selectedAlgorithm),t.xp6(3),t.Q6J("disabled",e.isScriptActive||e.form.invalid))},dependencies:[U.lW,s.JL,s.sg,S.d,C.d,T.w,f],styles:[".title[_ngcontent-%COMP%]{margin-bottom:13px}"]}),m);v=(0,F.gn)([(0,c.c)()],v);const V=[{path:"",component:v}];let x=(()=>{var r;class o{}return(r=o).\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[g.Bz.forChild(V),g.Bz]}),o})(),W=(()=>{var r;class o{}return(r=o).\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[y.ez,G.m,x,S.d,C.d,T.w]}),o})()}}]);