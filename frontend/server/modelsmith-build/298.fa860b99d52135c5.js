"use strict";(self.webpackChunkmodelsmith=self.webpackChunkmodelsmith||[]).push([[298],{3328:(R,D,t)=>{t.d(D,{d:()=>P});var m,A=t(7582),p=t(6814),e=t(5879),s=t(6223),M=t(5195),u=t(5683),d=t(617),h=t(8525),g=t(8791),f=t(3427),E=t(1374),O=t(7398),I=t(7921),T=t(3607),C=t(4378),x=t(7820),y=t(127),F=t(3705),L=t(8471),v=t(3680);function U(_,a){1&_&&e._UZ(0,"mat-icon",12)}function K(_,a){if(1&_&&(e.TgZ(0,"mat-option",10),e._uU(1),e.YNc(2,U,1,0,"mat-icon",11),e.qZA()),2&_){const i=a.$implicit,o=e.oxw(2);e.Q6J("value",i.name)("disabled",!o.areNotTrainedItemsSelectable&&!i.isTrained),e.xp6(1),e.hij(" ",i.name," "),e.xp6(1),e.Q6J("ngIf",!i.isTrained)}}function B(_,a){1&_&&(e.TgZ(0,"mat-option",13),e._uU(1,"No results found"),e.qZA())}function N(_,a){if(1&_&&(e.ynx(0),e.YNc(1,K,3,4,"mat-option",8),e.YNc(2,B,2,0,"mat-option",9),e.BQk()),2&_){const i=a.ngIf,o=e.oxw();e.xp6(1),e.Q6J("ngForOf",i)("ngForTrackBy",o.trackByModel),e.xp6(1),e.Q6J("ngIf",0===i.length)}}let P=((m=class{ngOnChanges(a){a.algorithmType&&a.algorithmType.currentValue&&this.configureModels(a.algorithmType.currentValue)}get parentFormGroup(){return this.controlContainer.control}get modelFormGroup(){return this.parentFormGroup.get(this.controlKey)}get modelControl(){return this.modelFormGroup.get(this.MODEL_CONTROL_NAME)}constructor(a,i,o){this.controlContainer=a,this.modelsFacadeService=i,this.scriptFacadeService=o,this.controlKey="",this.areNotTrainedItemsSelectable=!1,this.isInitialLoadForTrainTypeModels=!1,this.searchModel=new s.NI,this.models=[],this.MODEL_CONTROL_NAME="model"}ngOnInit(){this.initializeForm(),this.listenToScriptStateChanges(),this.listenToSearchModelValueChanges(),this.listenToCurrentModelChanges()}configureModels(a){a&&(this.fetchModels(a),this.modelsFacadeService.dispatch(T.o.getCurrentOrPreviousSelectedModel({algorithmType:this.isInitialLoadForTrainTypeModels?x.Bd.TRAIN:a})))}listenToCurrentModelChanges(){this.modelsFacadeService.currentModel$.pipe((0,g.t)(this)).subscribe(a=>{(0,C.Bm)(a)||this.modelControl?.patchValue(a)})}fetchModels(a){this.modelsFacadeService.getModelsByType(a).pipe((0,E.P)(i=>!(0,C.yD)(i)),(0,O.U)(i=>[...i].sort((o,r)=>Number(r.isTrained)-Number(o.isTrained)))).subscribe(i=>{this.models=i,this.searchModel.setValue("")}),this.modelsFacadeService.dispatch(T.o.getModelsList({algorithmType:a}))}initializeForm(){this.parentFormGroup.addControl(this.controlKey,new s.cw({[this.MODEL_CONTROL_NAME]:new s.NI("",s.kI.required)}))}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,g.t)(this)).subscribe(a=>{(0,y.A)(a)?this.modelFormGroup.disable():this.modelFormGroup.enable()})}listenToSearchModelValueChanges(){this.filteredModels=this.searchModel.valueChanges.pipe((0,g.t)(this),(0,I.O)(""),(0,O.U)(a=>this.filterModels(a)))}filterModels(a){const i=a.toLowerCase();return this.models.filter(o=>o.name.toLowerCase().includes(i))}trackByModel(a,i){return i.name}ngOnDestroy(){this.parentFormGroup.removeControl(this.controlKey)}}).\u0275fac=function(a){return new(a||m)(e.Y36(s.gN),e.Y36(F.V),e.Y36(L.O))},m.\u0275cmp=e.Xpm({type:m,selectors:[["ms-panel-model"]],inputs:{controlKey:"controlKey",algorithmType:"algorithmType",areNotTrainedItemsSelectable:"areNotTrainedItemsSelectable",isInitialLoadForTrainTypeModels:"isInitialLoadForTrainTypeModels"},standalone:!0,features:[e._Bn([],[{provide:s.gN,useFactory:()=>(0,e.f3M)(s.gN,{skipSelf:!0})}]),e.TTD,e.jDz],decls:11,vars:5,consts:[[1,"ms-card","model-card"],[1,"heading-sub-section-title"],[1,"form-field-container",3,"formGroupName"],["appearance","outline","subscriptSizing","dynamic"],["formControlName","model","placeholder","Select a model..."],["label","Predefined Models"],[3,"formControl"],[4,"ngIf"],[3,"value","disabled",4,"ngFor","ngForOf","ngForTrackBy"],["disabled","",4,"ngIf"],[3,"value","disabled"],["class","mat-error","fontSet","ms","fontIcon","icon-X",4,"ngIf"],["fontSet","ms","fontIcon","icon-X",1,"mat-error"],["disabled",""]],template:function(a,i){1&a&&(e.TgZ(0,"mat-card",0)(1,"p",1),e._uU(2,"Model"),e.qZA(),e.TgZ(3,"div",2)(4,"mat-form-field",3)(5,"mat-select",4)(6,"mat-optgroup",5)(7,"mat-option"),e._UZ(8,"ngx-mat-select-search",6),e.qZA(),e.YNc(9,N,3,3,"ng-container",7),e.ALo(10,"async"),e.qZA()()()()()),2&a&&(e.xp6(3),e.Q6J("formGroupName",i.controlKey),e.xp6(5),e.Q6J("formControl",i.searchModel),e.xp6(1),e.Q6J("ngIf",e.lcZ(10,3,i.filteredModels)))},dependencies:[s.UX,s.JJ,s.JL,s.oH,s.u,s.x0,M.QW,M.a8,u.lN,u.KE,h.LD,h.gD,v.ey,v.Nv,d.Ps,d.Hw,p.ez,p.sg,p.O5,p.Ov,f.Co,f.nu]}),m);P=(0,A.gn)([(0,g.c)()],P)},1668:(R,D,t)=>{t.d(D,{w:()=>i});var m,A=t(7582),p=t(6814),e=t(5879),s=t(6223),M=t(5195),u=t(5986),d=t(5683),h=t(2032),g=t(8525),f=t(2596),E=t(8791),O=t(7398),I=t(836),T=t(3946),C=t(9547),x=t(8279),y=t(127),F=t(3221),L=t(8471),v=t(3680);function U(o,r){if(1&o&&(e.TgZ(0,"div",10)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-form-field",11),e._UZ(4,"input",12)(5,"mat-icon",13),e.qZA()()),2&o){const n=e.oxw(),l=n.$implicit,c=n.index;e.xp6(2),e.Oqu(l.label),e.xp6(2),e.Q6J("formControlName",c)("placeholder",l.placeholder)("type",l.inputType),e.xp6(1),e.s9C("matTooltip",l.help)}}function K(o,r){if(1&o&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&o){const n=r.$implicit;e.Q6J("value",n.value),e.xp6(1),e.hij(" ",n.viewValue," ")}}function B(o,r){if(1&o&&(e.TgZ(0,"div",10)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-form-field",11)(4,"mat-select",14),e.YNc(5,K,2,2,"mat-option",15),e.qZA(),e._UZ(6,"mat-icon",13),e.qZA()()),2&o){const n=e.oxw(),l=n.$implicit,c=n.index;e.xp6(2),e.Oqu(l.label),e.xp6(2),e.Q6J("formControlName",c),e.xp6(1),e.Q6J("ngForOf",l.options),e.xp6(1),e.s9C("matTooltip",l.help)}}function N(o,r){if(1&o&&(e.TgZ(0,"div",17)(1,"mat-checkbox",14),e._uU(2),e.qZA(),e.TgZ(3,"div",18),e._UZ(4,"mat-icon",19),e.qZA()()),2&o){const n=e.oxw(),l=n.index,c=n.$implicit;e.xp6(1),e.Q6J("formControlName",l),e.xp6(1),e.Oqu(c.label),e.xp6(2),e.s9C("matTooltip",c.help)}}function P(o,r){if(1&o&&(e.ynx(0),e.YNc(1,U,6,5,"div",8),e.YNc(2,B,7,4,"div",8),e.YNc(3,N,5,3,"div",9),e.BQk()),2&o){const n=r.$implicit;e.xp6(1),e.Q6J("ngIf","text"===n.inputType||"number"===n.inputType),e.xp6(1),e.Q6J("ngIf","select"===n.inputType),e.xp6(1),e.Q6J("ngIf","checkbox"===n.inputType)}}function _(o,r){if(1&o&&(e.TgZ(0,"div",4),e.ynx(1,5),e.TgZ(2,"div",6),e.YNc(3,P,4,3,"ng-container",7),e.qZA(),e.BQk(),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("formGroupName",n.controlKey),e.xp6(2),e.Q6J("ngForOf",n.parameters)}}function a(o,r){1&o&&(e.TgZ(0,"p",20),e._uU(1,"No parameters configured."),e.qZA())}let i=((m=class{ngOnChanges(r){r.algorithm&&r.algorithm.currentValue&&(this.alg=r.algorithm.currentValue,this.loadParametersForAlgorithm(this.alg))}get parentFormGroup(){return this.controlContainer.control}get paramsFormGroup(){return this.parentFormGroup.get(this.controlKey)}get parametersFormArray(){return this.paramsFormGroup.get("parametersArray")}constructor(r,n,l,c){this.fb=r,this.controlContainer=n,this.parametersFacadeService=l,this.scriptFacadeService=c,this.controlKey="",this.RoutesList=C.Z,this.alg=x.k2,this.isScriptActive=!1,this.parameters=[]}ngOnInit(){this.initForm(),this.listenToScriptStateChanges()}initForm(){this.parentFormGroup.addControl(this.controlKey,new s.cw({parametersArray:new s.Oe([])}))}loadParametersForAlgorithm(r){this.parametersFacadeService.dispatch(T.j.loadParameters({arg:r})),this.parametersFacadeService.parameters$.pipe((0,O.U)(n=>n[r]?.data||[]),(0,I.T)(1),(0,E.t)(this)).subscribe(n=>{this.buildFormArray(n)})}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,E.t)(this)).subscribe(r=>{this.isScriptActive=(0,y.A)(r)})}buildFormArray(r){this.parametersFormArray.clear(),r.forEach(n=>{this.parametersFormArray.push(this.fb.control(n.defaultValue))}),this.isScriptActive?this.paramsFormGroup.disable():this.paramsFormGroup.enable(),this.parameters=r}get parametersFormatted(){const r={},n=this.parametersFormArray.getRawValue();return this.parameters.forEach((l,c)=>{r[l.argName]=n[c]}),r}ngOnDestroy(){this.parentFormGroup.removeControl(this.controlKey)}}).\u0275fac=function(r){return new(r||m)(e.Y36(s.qu),e.Y36(s.gN),e.Y36(F.E),e.Y36(L.O))},m.\u0275cmp=e.Xpm({type:m,selectors:[["ms-panel-parameters"]],inputs:{controlKey:"controlKey",algorithm:"algorithm"},standalone:!0,features:[e._Bn([],[{provide:s.gN,useFactory:()=>(0,e.f3M)(s.gN,{skipSelf:!0})}]),e.TTD,e.jDz],decls:6,vars:2,consts:[[1,"ms-card","parameters-card"],[1,"heading-sub-section-title"],["class","parameters-wrapper",4,"ngIf","ngIfElse"],["noParametersTemplate",""],[1,"parameters-wrapper"],[3,"formGroupName"],["formArrayName","parametersArray"],[4,"ngFor","ngForOf"],["class","form-field-container",4,"ngIf"],["class","form-field-container inline-container mb-[22px]",4,"ngIf"],[1,"form-field-container"],["appearance","outline"],["matInput","",3,"formControlName","placeholder","type"],["fontSet","ms","fontIcon","icon-Info","matSuffix","",3,"matTooltip"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-field-container","inline-container","mb-[22px]"],[1,"ml-2"],["fontSet","ms","fontIcon","icon-Info",3,"matTooltip"],[1,"no-parameters-message"]],template:function(r,n){if(1&r&&(e.TgZ(0,"mat-card",0)(1,"p",1),e._uU(2,"Parameters"),e.qZA(),e.YNc(3,_,4,2,"div",2),e.YNc(4,a,2,0,"ng-template",null,3,e.W1O),e.qZA()),2&r){const l=e.MAs(5);e.xp6(3),e.Q6J("ngIf",n.parameters.length)("ngIfElse",l)}},dependencies:[p.ez,p.sg,p.O5,h.c,h.Nt,d.KE,d.hX,d.R9,s.UX,s.Fj,s.JJ,s.JL,s.u,s.x0,s.CE,M.QW,M.a8,d.lN,g.LD,g.gD,v.ey,f.AV,f.gM,u.p9,u.oG],styles:[".parameters-card[_ngcontent-%COMP%]   .parameters-wrapper[_ngcontent-%COMP%]{max-height:400px;overflow:auto;padding-right:20px}.parameters-card[_ngcontent-%COMP%]   .parameters-wrapper[_ngcontent-%COMP%]   .parameter-divider[_ngcontent-%COMP%]{margin-bottom:20px}"]}),m);i=(0,A.gn)([(0,E.c)()],i)}}]);