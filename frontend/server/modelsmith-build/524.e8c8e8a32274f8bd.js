(self.webpackChunkmodelsmith=self.webpackChunkmodelsmith||[]).push([[524],{4378:(Ct,qe,se)=>{"use strict";function u(he){return he&&"object"==typeof he&&!Array.isArray(he)&&0===Object.keys(he).length&&he.constructor===Object}se.d(qe,{Q:()=>u})},8279:(Ct,qe,se)=>{"use strict";se.d(qe,{A3:()=>he,Gr:()=>y,MZ:()=>T,dD:()=>u,k2:()=>v});var U=se(7820);const u=[{key:U.pW.IPG,value:"GraSP pruning"},{key:U.pW.IPM,value:"Magnitude-based init pruning"},{key:U.pW.IPR,value:"Random init pruning"},{key:U.pW.IMP,value:"Iterative Magnitude Pruning"},{key:U.pW.OMP,value:"One-shot Magnitude Pruning"},{key:U.pW.IPS,value:"Init Pruning Snip"},{key:U.pW.IPSY,value:"Init Pruning Synflow"}],he=[{key:U.y0.BPTQ,value:"Basic PTQ"},{key:U.y0.BRECQ,value:"Brec-q"},{key:U.y0.MINMAXPTQ,value:"Minmax-ptq"}],g=[...u,...he],v=U.pW.IMP,y=m=>g.filter(w=>m.includes(w.key)).map(w=>w.value),T=m=>{const w=u.find(L=>L.value===m);if(w)return w.key;const D=he.find(L=>L.value===m);return D?D.key:null}},7820:(Ct,qe,se)=>{"use strict";se.d(qe,{Bd:()=>U,pW:()=>he,rj:()=>g,t6:()=>y,tp:()=>v,y0:()=>u});var U=function(T){return T.QUANTIZATION="quantization",T.PRUNING="pruning",T.MACHINE_UNLEARNING="machine_unlearning",T.TRAIN="train",T}(U||{}),u=function(T){return T.BPTQ="BPTQ",T.BRECQ="BRECQ",T.MINMAXPTQ="MINMAXPTQ",T}(u||{}),he=function(T){return T.IPG="IPG",T.IPM="IPM",T.IPR="IPR",T.IMP="IMP",T.OMP="OMP",T.IPS="IPS",T.IPSY="IPSY",T}(he||{}),g=function(T){return T.MU="MU",T}(g||{}),v=function(T){return T.MUT="MUT",T}(v||{});function y(T){return Object.values(he).includes(T)?U.PRUNING:Object.values(u).includes(T)?U.QUANTIZATION:Object.values(g).includes(T)?U.MACHINE_UNLEARNING:Object.values(v).includes(T)?U.TRAIN:null}},5360:(Ct,qe,se)=>{"use strict";se.d(qe,{A:()=>u});var U=function(he){return he.RUNNING="running",he.NOT_RUNNING="not_running",he.STOPPING="stopping",he.ERROR="error",he}(U||{});function u(he){return!!he&&(he===U.RUNNING||he===U.STOPPING)}},2848:(Ct,qe,se)=>{"use strict";se.d(qe,{N:()=>he});var U=se(5879);const u=["*"];let he=(()=>{var g;class v{}return(g=v).\u0275fac=function(T){return new(T||g)},g.\u0275cmp=U.Xpm({type:g,selectors:[["ms-background-gradient"]],ngContentSelectors:u,decls:2,vars:0,consts:[[1,"full-page-gradient"]],template:function(T,m){1&T&&(U.F$t(),U.TgZ(0,"div",0),U.Hsn(1),U.qZA())},styles:[".full-page-gradient[_ngcontent-%COMP%]{height:100vh;width:100vw;background:linear-gradient(to right,var(--header-left),var(--header-right))}"]}),v})()},9622:(Ct,qe,se)=>{"use strict";se.d(qe,{C:()=>v});var U=se(5879),u=se(6814),he=se(5195);function g(y,T){if(1&y){const m=U.EpF();U.TgZ(0,"mat-card",2),U.NdJ("click",function(){const L=U.CHM(m).$implicit,M=U.oxw();return U.KtG(M.selectCard(L))}),U.TgZ(1,"span",3),U._uU(2),U.qZA()()}if(2&y){const m=T.$implicit,w=U.oxw();U.ekj("selected",w.activeCard===m),U.xp6(2),U.Oqu(m)}}let v=(()=>{var y;class T{constructor(){this.options=[],this.selectedOption=new U.vpe,this.activeCard=null}selectCard(w){this.activeCard=this.activeCard===w?null:w,this.selectedOption.emit(this.activeCard)}trackByOption(w,D){return D}}return(y=T).\u0275fac=function(w){return new(w||y)},y.\u0275cmp=U.Xpm({type:y,selectors:[["ms-card-selector"]],inputs:{options:"options"},outputs:{selectedOption:"selectedOption"},decls:2,vars:2,consts:[[1,"cards-section"],["class","ms-card action-card",3,"selected","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ms-card","action-card",3,"click"],[1,"heading-sub-section-title"]],template:function(w,D){1&w&&(U.TgZ(0,"div",0),U.YNc(1,g,3,3,"mat-card",1),U.qZA()),2&w&&(U.xp6(1),U.Q6J("ngForOf",D.options)("ngForTrackBy",D.trackByOption))},dependencies:[u.sg,he.a8],styles:[".cards-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"]}),T})()},9901:(Ct,qe,se)=>{"use strict";se.d(qe,{u:()=>u});var U=se(5879);let u=(()=>{var he;class g{constructor(){this.title="",this.message=""}}return(he=g).\u0275fac=function(y){return new(y||he)},he.\u0275cmp=U.Xpm({type:he,selectors:[["ms-empty-state"]],inputs:{title:"title",message:"message"},decls:6,vars:2,consts:[["src","assets/icons/empty-state.svg"],[1,"heading-section-title"],[1,"paragraph-regular-p2-large"]],template:function(y,T){1&y&&(U.TgZ(0,"div"),U._UZ(1,"img",0),U.TgZ(2,"div",1),U._uU(3),U.qZA(),U.TgZ(4,"div",2),U._uU(5),U.qZA()()),2&y&&(U.xp6(3),U.Oqu(T.title),U.xp6(2),U.Oqu(T.message))},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:100%;text-align:center}div[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}img[_ngcontent-%COMP%]{max-width:100%;height:auto}"]}),g})()},127:(Ct,qe,se)=>{"use strict";se.d(qe,{J:()=>L});var U=se(5879),u=se(8450),he=se(999),g=se(6814),v=se(2296),y=se(617);const T=["dropzone"],m=["fileInput"];function w(M,l){if(1&M){const f=U.EpF();U.ynx(0),U.TgZ(1,"div",4)(2,"span",5),U._uU(3," Uploaded: "),U.TgZ(4,"b"),U._uU(5),U.qZA()(),U.TgZ(6,"button",6),U.NdJ("click",function(d){return U.CHM(f),U.oxw().removeFile(),U.KtG(d.stopPropagation())}),U._uU(7,"Remove"),U.qZA()(),U.BQk()}if(2&M){const f=U.oxw();U.xp6(5),U.Oqu(f.uploadedFileName)}}function D(M,l){if(1&M){const f=U.EpF();U.TgZ(0,"input",7,8),U.NdJ("change",function(d){U.CHM(f);const b=U.oxw();return U.KtG(b.onFileSelected(d))}),U.qZA(),U.TgZ(2,"div",9),U._UZ(3,"mat-icon",10),U.TgZ(4,"div"),U._uU(5," Drag & Drop your file here or "),U.TgZ(6,"span",11),U.NdJ("click",function(){U.CHM(f);const d=U.MAs(1);return U.KtG(d.click())}),U._uU(7,"browse"),U.qZA(),U._uU(8," to select. "),U.qZA()()}}let L=(()=>{var M;class l{constructor(c,d){this.snackbarService=c,this.fileService=d,this.uploadedFileName=null}onFileDrop(c){c.preventDefault(),this.dropzone.nativeElement.classList.remove("dragover"),c.dataTransfer&&c.dataTransfer.files&&c.dataTransfer.files.length&&this.validateAndUpload(c.dataTransfer.files[0])}onDragOver(c){c.preventDefault(),this.dropzone.nativeElement.classList.add("dragover")}onDragLeave(c){c.preventDefault(),this.dropzone.nativeElement.classList.remove("dragover")}onFileSelected(c){const d=c.target;d.files&&d.files.length&&this.validateAndUpload(d.files[0]),d.value=""}validateAndUpload(c){["text/python","text/plain","text/x-python","application/x-python-code","text/x-python-script"].includes(c.type)&&c.size<=5242880?this.handleFileSelection(c):this.snackbarService.showError(c.size>5242880?"File size exceeds the allowed limit":"Unsupported file type")}handleFileSelection(c){(new FormData).append("file",c,c.name),this.uploadedFileName=c.name,this.fileService.file=c}removeFile(){this.uploadedFileName=null,this.fileService.clearFile()}}return(M=l).\u0275fac=function(c){return new(c||M)(U.Y36(u.QD),U.Y36(he.I))},M.\u0275cmp=U.Xpm({type:M,selectors:[["ms-file-upload"]],viewQuery:function(c,d){if(1&c&&(U.Gf(T,5),U.Gf(m,5)),2&c){let b;U.iGM(b=U.CRH())&&(d.dropzone=b.first),U.iGM(b=U.CRH())&&(d.fileInput=b.first)}},decls:5,vars:2,consts:[["role","button","aria-label","File upload drop zone",1,"dropzone",3,"drop","dragover","dragleave"],["dropzone",""],[4,"ngIf","ngIfElse"],["uploadPrompt",""],[1,"uploaded-file-container"],[1,"uploaded-file-name"],["mat-raised-button","","color","warn",3,"click"],["type","file","hidden","",3,"change"],["fileInput",""],[1,"upload-prompt"],["fontSet","ms","fontIcon","icon-UploadSimple"],[1,"select-file",3,"click"]],template:function(c,d){if(1&c&&(U.TgZ(0,"div",0,1),U.NdJ("drop",function(E){return d.onFileDrop(E)})("dragover",function(E){return d.onDragOver(E)})("dragleave",function(E){return d.onDragLeave(E)}),U.YNc(2,w,8,1,"ng-container",2),U.YNc(3,D,9,0,"ng-template",null,3,U.W1O),U.qZA()),2&c){const b=U.MAs(4);U.xp6(2),U.Q6J("ngIf",d.uploadedFileName)("ngIfElse",b)}},dependencies:[g.O5,v.lW,y.Hw],styles:[".dropzone[_ngcontent-%COMP%]{border:2px dashed var(--backgrounds-400);padding:20px;height:120px;text-align:center;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color .3s,border-color .3s}.dropzone.file-uploaded[_ngcontent-%COMP%]{height:auto;border:none;padding:0}.dropzone[_ngcontent-%COMP%]:hover, .dropzone.dragover[_ngcontent-%COMP%]{background-color:var(--backgrounds-100);border-color:var(--primary-400)}.uploaded-file-container[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--backgrounds-100);border-radius:4px;padding:5px 10px;margin-top:10px;transition:all .3s ease-in-out}.uploaded-file-container[_ngcontent-%COMP%]   .uploaded-file-name[_ngcontent-%COMP%]{flex-grow:1;margin-right:10px;color:var(--foregrounds-700)}.upload-prompt[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.upload-prompt[_ngcontent-%COMP%]   .select-file[_ngcontent-%COMP%]{color:var(--primary-400);text-decoration:underline;cursor:pointer}"]}),l})()},2704:(Ct,qe,se)=>{"use strict";se.d(qe,{w:()=>Pi});var U=se(7582),u=se(8791),he=se(7816),g=se(7246),v=se(932),y=se(6732),T=se(4378),m=se(5360),w=se(6210),D=se(4323),L=se(7271),M=se.n(L),l=se(8137);const f=W=>W&&W.enabled&&W.modifierKey,c=(W,$)=>W&&$[W+"Key"],d=(W,$)=>W&&!$[W+"Key"];function b(W,$,q){return void 0===W||("string"==typeof W?-1!==W.indexOf($):"function"==typeof W&&-1!==W({chart:q}).indexOf($))}function E(W,$){return"function"==typeof W&&(W=W({chart:$})),"string"==typeof W?{x:-1!==W.indexOf("x"),y:-1!==W.indexOf("y")}:{x:!1,y:!1}}function C(W,$,q){const{mode:de="xy",scaleMode:pe,overScaleMode:Ee}=W||{},Me=function R({x:W,y:$},q){const de=q.scales,pe=Object.keys(de);for(let Ee=0;Ee<pe.length;Ee++){const Me=de[pe[Ee]];if($>=Me.top&&$<=Me.bottom&&W>=Me.left&&W<=Me.right)return Me}return null}($,q),Xe=E(de,q),ot=E(pe,q);if(Ee){const st=E(Ee,q);for(const Pt of["x","y"])st[Pt]&&(ot[Pt]=Xe[Pt],Xe[Pt]=!1)}if(Me&&ot[Me.axis])return[Me];const it=[];return(0,l.F)(q.scales,function(st){Xe[st.axis]&&it.push(st)}),it}const P=new WeakMap;function K(W){let $=P.get(W);return $||($={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{}},P.set(W,$)),$}function X(W,$,q){const de=W.max-W.min,pe=de*($-1),Ee=W.isHorizontal()?q.x:q.y,Me=Math.max(0,Math.min(1,(W.getValueForPixel(Ee)-W.min)/de||0));return{min:pe*Me,max:pe*(1-Me)}}function J(W,$,q,de,pe){let Ee=q[de];if("original"===Ee){const Me=W.originalScaleLimits[$.id][de];Ee=(0,l.v)(Me.options,Me.scale)}return(0,l.v)(Ee,pe)}function ve(W,{min:$,max:q},de,pe=!1){const Ee=K(W.chart),{id:Me,axis:Xe,options:ot}=W,it=de&&(de[Me]||de[Xe])||{},{minRange:st=0}=it,Pt=J(Ee,W,it,"min",-1/0),Et=J(Ee,W,it,"max",1/0),xt=pe?Math.max(q-$,st):W.max-W.min,It=(xt-q+$)/2;return q+=It,($-=It)<Pt?($=Pt,q=Math.min(Pt+xt,Et)):q>Et&&(q=Et,$=Math.max(Et-xt,Pt)),ot.min=$,ot.max=q,Ee.updatedScaleLimits[W.id]={min:$,max:q},W.parse($)!==W.min||W.parse(q)!==W.max}const N=W=>0===W||isNaN(W)?0:W<0?Math.min(Math.round(W),-1):Math.max(Math.round(W),1),He={second:500,minute:3e4,hour:18e5,day:432e5,week:3024e5,month:1296e6,quarter:5184e6,year:157248e5};function We(W,$,q,de=!1){const{min:pe,max:Ee,options:Me}=W,ot=He[Me.time&&Me.time.round]||0,it=W.getValueForPixel(W.getPixelForValue(pe+ot)-$),st=W.getValueForPixel(W.getPixelForValue(Ee+ot)-$),{min:Pt=-1/0,max:Et=1/0}=de&&q&&q[W.axis]||{};return!!(isNaN(it)||isNaN(st)||it<Pt||st>Et)||ve(W,{min:it,max:st},q,de)}function Re(W,$,q){return We(W,$,q,!0)}const Ke={category:function Q(W,$,q,de){const pe=X(W,$,q);return W.min===W.max&&$<1&&function G(W){const q=W.getLabels().length-1;W.min>0&&(W.min-=1),W.max<q&&(W.max+=1)}(W),ve(W,{min:W.min+N(pe.min),max:W.max-N(pe.max)},de,!0)},default:function De(W,$,q,de){const pe=X(W,$,q);return ve(W,{min:W.min+pe.min,max:W.max-pe.max},de,!0)}},I={default:function Ce(W,$,q,de){ve(W,function me(W,$,q){const de=W.getValueForPixel($),pe=W.getValueForPixel(q);return{min:Math.min(de,pe),max:Math.max(de,pe)}}(W,$,q),de,!0)}},le={category:function ke(W,$,q){const pe=W.getLabels().length-1;let{min:Ee,max:Me}=W;const Xe=Math.max(Me-Ee,1),ot=Math.round(function re(W){return W.isHorizontal()?W.width:W.height}(W)/Math.max(Xe,10)),it=Math.round(Math.abs($/ot));let st;return $<-ot?(Me=Math.min(Me+it,pe),Ee=1===Xe?Me:Me-Xe,st=Me===pe):$>ot&&(Ee=Math.max(0,Ee-it),Me=1===Xe?Ee:Ee+Xe,st=0===Ee),ve(W,{min:Ee,max:Me},q)||st},default:We,logarithmic:Re,timeseries:Re};function ye(W,$){(0,l.F)(W,(q,de)=>{$[de]||delete W[de]})}function $e(W,$){const{scales:q}=W,{originalScaleLimits:de,updatedScaleLimits:pe}=$;return(0,l.F)(q,function(Ee){(function Se(W,$,q){const{id:de,options:{min:pe,max:Ee}}=W;if(!$[de]||!q[de])return!0;const Me=q[de];return Me.min!==pe||Me.max!==Ee})(Ee,de,pe)&&(de[Ee.id]={min:{scale:Ee.min,options:Ee.options.min},max:{scale:Ee.max,options:Ee.options.max}})}),ye(de,q),ye(pe,q),de}function ze(W,$,q,de){(0,l.Q)(Ke[W.type]||Ke.default,[W,$,q,de])}function Ze(W,$,q,de,pe){(0,l.Q)(I[W.type]||I.default,[W,$,q,de,pe])}function Ue(W){const $=W.chartArea;return{x:($.left+$.right)/2,y:($.top+$.bottom)/2}}function nt(W,$,q="none"){const{x:de=1,y:pe=1,focalPoint:Ee=Ue(W)}="number"==typeof $?{x:$,y:$}:$,Me=K(W),{options:{limits:Xe,zoom:ot}}=Me;$e(W,Me);const it=1!==de,st=1!==pe,Pt=C(ot,Ee,W);(0,l.F)(Pt||W.scales,function(Et){Et.isHorizontal()&&it?ze(Et,de,Ee,Xe):!Et.isHorizontal()&&st&&ze(Et,pe,Ee,Xe)}),W.update(q),(0,l.Q)(ot.onZoom,[{chart:W}])}function Te(W,$,q,de="none"){const pe=K(W),{options:{limits:Ee,zoom:Me}}=pe,{mode:Xe="xy"}=Me;$e(W,pe);const ot=b(Xe,"x",W),it=b(Xe,"y",W);(0,l.F)(W.scales,function(st){st.isHorizontal()&&ot?Ze(st,$.x,q.x,Ee):!st.isHorizontal()&&it&&Ze(st,$.y,q.y,Ee)}),W.update(de),(0,l.Q)(Me.onZoom,[{chart:W}])}function Wt(W,$,q,de){const{panDelta:pe}=de,Ee=pe[W.id]||0;(0,l.s)(Ee)===(0,l.s)($)&&($+=Ee),pe[W.id]=(0,l.Q)(le[W.type]||le.default,[W,$,q])?0:$}function dt(W,$,q,de="none"){const{x:pe=0,y:Ee=0}="number"==typeof $?{x:$,y:$}:$,Me=K(W),{options:{pan:Xe,limits:ot}}=Me,{onPan:it}=Xe||{};$e(W,Me);const st=0!==pe,Pt=0!==Ee;(0,l.F)(q||W.scales,function(Et){Et.isHorizontal()&&st?Wt(Et,pe,ot,Me):!Et.isHorizontal()&&Pt&&Wt(Et,Ee,ot,Me)}),W.update(de),(0,l.Q)(it,[{chart:W}])}function bt(W){const $=K(W);$e(W,$);const q={};for(const de of Object.keys(W.scales)){const{min:pe,max:Ee}=$.originalScaleLimits[de]||{min:{},max:{}};q[de]={min:pe.scale,max:Ee.scale}}return q}function ct(W,$){const{handlers:q}=K(W),de=q[$];de&&de.target&&(de.target.removeEventListener($,de),delete q[$])}function Zt(W,$,q,de){const{handlers:pe,options:Ee}=K(W),Me=pe[q];Me&&Me.target===$||(ct(W,q),pe[q]=Xe=>de(W,Xe,Ee),pe[q].target=$,$.addEventListener(q,pe[q]))}function Qt(W,$){const q=K(W);q.dragStart&&(q.dragging=!0,q.dragEnd=$,W.update("none"))}function Ft(W,$){const q=K(W);!q.dragStart||"Escape"!==$.key||(ct(W,"keydown"),q.dragging=!1,q.dragStart=q.dragEnd=null,W.update("none"))}function Jt(W,$,q){const{onZoomStart:de,onZoomRejected:pe}=q;if(de){const Ee=(0,l.z)($,W);if(!1===(0,l.Q)(de,[{chart:W,event:$,point:Ee}]))return(0,l.Q)(pe,[{chart:W,event:$}]),!1}}function $t(W,$){const q=K(W),{pan:de,zoom:pe={}}=q.options;if(0!==$.button||c(f(de),$)||d(f(pe.drag),$))return(0,l.Q)(pe.onZoomRejected,[{chart:W,event:$}]);!1!==Jt(W,$,pe)&&(q.dragStart=$,Zt(W,W.canvas,"mousemove",Qt),Zt(W,window.document,"keydown",Ft))}function Ut(W,$,q,de){const pe=b($,"x",W),Ee=b($,"y",W);let{top:Me,left:Xe,right:ot,bottom:it,width:st,height:Pt}=W.chartArea;const Et=(0,l.z)(q,W),xt=(0,l.z)(de,W);pe&&(Xe=Math.min(Et.x,xt.x),ot=Math.max(Et.x,xt.x)),Ee&&(Me=Math.min(Et.y,xt.y),it=Math.max(Et.y,xt.y));const It=ot-Xe,ai=it-Me;return{left:Xe,top:Me,right:ot,bottom:it,width:It,height:ai,zoomX:pe&&It?1+(st-It)/st:1,zoomY:Ee&&ai?1+(Pt-ai)/Pt:1}}function pt(W,$){const q=K(W);if(!q.dragStart)return;ct(W,"mousemove");const{mode:de,onZoomComplete:pe,drag:{threshold:Ee=0}}=q.options.zoom,Me=Ut(W,de,q.dragStart,$),Xe=b(de,"x",W)?Me.width:0,ot=b(de,"y",W)?Me.height:0,it=Math.sqrt(Xe*Xe+ot*ot);if(q.dragStart=q.dragEnd=null,it<=Ee)return q.dragging=!1,void W.update("none");Te(W,{x:Me.left,y:Me.top},{x:Me.right,y:Me.bottom},"zoom"),setTimeout(()=>q.dragging=!1,500),(0,l.Q)(pe,[{chart:W}])}function as(W,$){const{handlers:{onZoomComplete:q},options:{zoom:de}}=K(W);if(!function xi(W,$,q){if(!d(f(q.wheel),$))return!1!==Jt(W,$,q)&&($.cancelable&&$.preventDefault(),void 0!==$.deltaY)||void 0;(0,l.Q)(q.onZoomRejected,[{chart:W,event:$}])}(W,$,de))return;const pe=$.target.getBoundingClientRect(),Ee=1+($.deltaY>=0?-de.wheel.speed:de.wheel.speed);nt(W,{x:Ee,y:Ee,focalPoint:{x:$.clientX-pe.left,y:$.clientY-pe.top}}),q&&q()}function di(W,$){return function(q,de){const{pan:pe,zoom:Ee={}}=$.options;if(!pe||!pe.enabled)return!1;const Me=de&&de.srcEvent;return!(Me&&!$.panning&&"mouse"===de.pointerType&&(d(f(pe),Me)||c(f(Ee.drag),Me))&&((0,l.Q)(pe.onPanRejected,[{chart:W,event:de}]),1))}}function es(W,$,q){if($.scale){const{center:de,pointers:pe}=q,Ee=1/$.scale*q.scale,Me=q.target.getBoundingClientRect(),Xe=function Ni(W,$){const q=Math.abs(W.clientX-$.clientX),de=Math.abs(W.clientY-$.clientY),pe=q/de;let Ee,Me;return pe>.3&&pe<1.7?Ee=Me=!0:q>de?Ee=!0:Me=!0,{x:Ee,y:Me}}(pe[0],pe[1]),ot=$.options.zoom.mode;nt(W,{x:Xe.x&&b(ot,"x",W)?Ee:1,y:Xe.y&&b(ot,"y",W)?Ee:1,focalPoint:{x:de.x-Me.left,y:de.y-Me.top}}),$.scale=q.scale}}function Wi(W,$,q){const de=$.delta;de&&($.panning=!0,dt(W,{x:q.deltaX-de.x,y:q.deltaY-de.y},$.panScales),$.delta={x:q.deltaX,y:q.deltaY})}const Ai=new WeakMap;function Vt(W,$,q){const de=q.zoom.drag,{dragStart:pe,dragEnd:Ee}=K(W);if(de.drawTime!==$||!Ee)return;const{left:Me,top:Xe,width:ot,height:it}=Ut(W,q.zoom.mode,pe,Ee),st=W.ctx;st.save(),st.beginPath(),st.fillStyle=de.backgroundColor||"rgba(225,225,225,0.3)",st.fillRect(Me,Xe,ot,it),de.borderWidth>0&&(st.lineWidth=de.borderWidth,st.strokeStyle=de.borderColor||"rgba(225,225,225)",st.strokeRect(Me,Xe,ot,it)),st.restore()}var At={id:"zoom",version:"2.0.1",defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(W,$,q){K(W).options=q,Object.prototype.hasOwnProperty.call(q.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(q.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(q.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),M()&&function gi(W,$){const q=K(W),de=W.canvas,{pan:pe,zoom:Ee}=$,Me=new(M().Manager)(de);Ee&&Ee.pinch.enabled&&(Me.add(new(M().Pinch)),Me.on("pinchstart",()=>function Ei(W,$){$.options.zoom.pinch.enabled&&($.scale=1)}(0,q)),Me.on("pinch",Xe=>es(W,q,Xe)),Me.on("pinchend",Xe=>function ki(W,$,q){$.scale&&(es(W,$,q),$.scale=null,(0,l.Q)($.options.zoom.onZoomComplete,[{chart:W}]))}(W,q,Xe))),pe&&pe.enabled&&(Me.add(new(M().Pan)({threshold:pe.threshold,enable:di(W,q)})),Me.on("panstart",Xe=>function kt(W,$,q){const{enabled:de,onPanStart:pe,onPanRejected:Ee}=$.options.pan;if(!de)return;const Me=q.target.getBoundingClientRect(),Xe={x:q.center.x-Me.left,y:q.center.y-Me.top};if(!1===(0,l.Q)(pe,[{chart:W,event:q,point:Xe}]))return(0,l.Q)(Ee,[{chart:W,event:q}]);$.panScales=C($.options.pan,Xe,W),$.delta={x:0,y:0},clearTimeout($.panEndTimeout),Wi(W,$,q)}(W,q,Xe)),Me.on("panmove",Xe=>Wi(W,q,Xe)),Me.on("panend",()=>function Yt(W,$){$.delta=null,$.panning&&($.panEndTimeout=setTimeout(()=>$.panning=!1,500),(0,l.Q)($.options.pan.onPanComplete,[{chart:W}]))}(W,q))),Ai.set(W,Me)}(W,q),W.pan=(pe,Ee,Me)=>dt(W,pe,Ee,Me),W.zoom=(pe,Ee)=>nt(W,pe,Ee),W.zoomRect=(pe,Ee,Me)=>Te(W,pe,Ee,Me),W.zoomScale=(pe,Ee,Me)=>function Ae(W,$,q,de="none"){$e(W,K(W)),ve(W.scales[$],q,void 0,!0),W.update(de)}(W,pe,Ee,Me),W.resetZoom=pe=>function Je(W,$="default"){const q=K(W),de=$e(W,q);(0,l.F)(W.scales,function(pe){const Ee=pe.options;de[pe.id]?(Ee.min=de[pe.id].min.options,Ee.max=de[pe.id].max.options):(delete Ee.min,delete Ee.max)}),W.update($),(0,l.Q)(q.options.zoom.onZoomComplete,[{chart:W}])}(W,pe),W.getZoomLevel=()=>function _t(W){const $=K(W);let q=1,de=1;return(0,l.F)(W.scales,function(pe){const Ee=function tt(W,$){const q=W.originalScaleLimits[$];if(!q)return;const{min:de,max:pe}=q;return(0,l.v)(pe.options,pe.scale)-(0,l.v)(de.options,de.scale)}($,pe.id);if(Ee){const Me=Math.round(Ee/(pe.max-pe.min)*100)/100;q=Math.min(q,Me),de=Math.max(de,Me)}}),q<1?q:de}(W),W.getInitialScaleBounds=()=>bt(W),W.isZoomedOrPanned=()=>function zt(W){const $=bt(W);for(const q of Object.keys(W.scales)){const{min:de,max:pe}=$[q];if(void 0!==de&&W.scales[q].min!==de||void 0!==pe&&W.scales[q].max!==pe)return!0}return!1}(W)},beforeEvent(W){const $=K(W);if($.panning||$.dragging)return!1},beforeUpdate:function(W,$,q){K(W).options=q,function hi(W,$){const q=W.canvas,{wheel:de,drag:pe,onZoomComplete:Ee}=$.zoom;de.enabled?(Zt(W,q,"wheel",as),function pi(W,$,q,de){q&&(K(W).handlers[$]=function A(W,$){let q;return function(){return clearTimeout(q),q=setTimeout(W,$),$}}(()=>(0,l.Q)(q,[{chart:W}]),de))}(W,"onZoomComplete",Ee,250)):ct(W,"wheel"),pe.enabled?(Zt(W,q,"mousedown",$t),Zt(W,q.ownerDocument,"mouseup",pt)):(ct(W,"mousedown"),ct(W,"mousemove"),ct(W,"mouseup"),ct(W,"keydown"))}(W,q)},beforeDatasetsDraw(W,$,q){Vt(W,"beforeDatasetsDraw",q)},afterDatasetsDraw(W,$,q){Vt(W,"afterDatasetsDraw",q)},beforeDraw(W,$,q){Vt(W,"beforeDraw",q)},afterDraw(W,$,q){Vt(W,"afterDraw",q)},stop:function(W){(function Ji(W){ct(W,"mousedown"),ct(W,"mousemove"),ct(W,"mouseup"),ct(W,"wheel"),ct(W,"click"),ct(W,"keydown")})(W),M()&&function wi(W){const $=Ai.get(W);$&&($.remove("pinchstart"),$.remove("pinch"),$.remove("pinchend"),$.remove("panstart"),$.remove("pan"),$.remove("panend"),$.destroy(),Ai.delete(W))}(W),function ie(W){P.delete(W)}(W)},panFunctions:le,zoomFunctions:Ke,zoomRectFunctions:I},ei=se(3973);const Ui={[ei.g.GREEN]:{datasetColors:[{borderColor:"#40dab7",backgroundColor:"rgba(64, 218, 183, 0.2)"},{borderColor:"#3ac4a5",backgroundColor:"rgba(58, 196, 165, 0.2)"},{borderColor:"#33ae92",backgroundColor:"rgba(51, 174, 146, 0.2)"},{borderColor:"#2d9980",backgroundColor:"rgba(45, 153, 128, 0.2)"},{borderColor:"#26836e",backgroundColor:"rgba(38, 131, 110, 0.2)"},{borderColor:"#206d5c",backgroundColor:"rgba(32, 109, 92, 0.2)"},{borderColor:"#1a5749",backgroundColor:"rgba(26, 87, 73, 0.2)"},{borderColor:"#134137",backgroundColor:"rgba(19, 65, 55, 0.2)"},{borderColor:"#0d2c25",backgroundColor:"rgba(13, 44, 37, 0.2)"},{borderColor:"#061612",backgroundColor:"rgba(6, 22, 18, 0.2)"}]},[ei.g.BLUE]:{datasetColors:[{borderColor:"#29aadc",backgroundColor:"rgba(41, 170, 220, 0.2)"},{borderColor:"#2599c6",backgroundColor:"rgba(37, 153, 198, 0.2)"},{borderColor:"#2188b0",backgroundColor:"rgba(33, 136, 176, 0.2)"},{borderColor:"#1d779a",backgroundColor:"rgba(29, 119, 154, 0.2)"},{borderColor:"#196684",backgroundColor:"rgba(25, 102, 132, 0.2)"},{borderColor:"#15556e",backgroundColor:"rgba(21, 85, 110, 0.2)"},{borderColor:"#104458",backgroundColor:"rgba(16, 68, 88, 0.2)"},{borderColor:"#0c3342",backgroundColor:"rgba(12, 51, 66, 0.2)"},{borderColor:"#08222c",backgroundColor:"rgba(8, 34, 44, 0.2)"},{borderColor:"#041116",backgroundColor:"rgba(4, 17, 22, 0.2)"}]},[ei.g.RED]:{datasetColors:[{borderColor:"#b02863",backgroundColor:"rgba(176, 40, 99, 0.2)"},{borderColor:"#9e2459",backgroundColor:"rgba(158, 36, 89, 0.2)"},{borderColor:"#8d204f",backgroundColor:"rgba(141, 32, 79, 0.2)"},{borderColor:"#7b1c45",backgroundColor:"rgba(123, 28, 69, 0.2)"},{borderColor:"#6a183b",backgroundColor:"rgba(106, 24, 59, 0.2)"},{borderColor:"#581432",backgroundColor:"rgba(88, 20, 50, 0.2)"},{borderColor:"#461028",backgroundColor:"rgba(70, 16, 40, 0.2)"},{borderColor:"#350c1e",backgroundColor:"rgba(53, 12, 30, 0.2)"},{borderColor:"#230814",backgroundColor:"rgba(35, 8, 20, 0.2)"},{borderColor:"#12040a",backgroundColor:"rgba(18, 4, 10, 0.2)"}]},[ei.g.YELLOW]:{datasetColors:[{borderColor:"#f1c40f",backgroundColor:"rgba(241, 196, 15, 0.2)"},{borderColor:"#d9b00e",backgroundColor:"rgba(217, 176, 14, 0.2)"},{borderColor:"#c19d0c",backgroundColor:"rgba(193, 157, 12, 0.2)"},{borderColor:"#a9890b",backgroundColor:"rgba(169, 137, 11, 0.2)"},{borderColor:"#917609",backgroundColor:"rgba(145, 118, 9, 0.2)"},{borderColor:"#796208",backgroundColor:"rgba(121, 98, 8, 0.2)"},{borderColor:"#604e06",backgroundColor:"rgba(96, 78, 6, 0.2)"},{borderColor:"#483b04",backgroundColor:"rgba(72, 59, 4, 0.2)"},{borderColor:"#302703",backgroundColor:"rgba(48, 39, 3, 0.2)"},{borderColor:"#181401",backgroundColor:"rgba(24, 20, 1, 0.2)"}]}};class Ht{static registerZoomPlugin(){he.kL.register(At)}static createXAxisLabels($,q,de){return Array.from({length:$*q},(pe,Ee)=>Ee%q==0?`${de?.xAxisLabelPrefix} ${Ee/q}`:"")}static createSinglePhaseAxisLabels($,q){const de=q.xAxisInitialLabelValue??1;return Array.from({length:$},(pe,Ee)=>`${q?.xAxisLabelPrefix} ${Ee+de}`)}static createSinglePhaseSkipOneAxisLabels($,q){return Array.from({length:$},(de,pe)=>0===pe?"":`${q?.xAxisLabelPrefix} ${pe-1}`)}static configureChartOptions($){return{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},scales:{y:{display:!0,min:$.yAxisMinimumValue,max:$.yAxisMaximumValue,ticks:{display:$.isYAxisVisible,stepSize:$.yAxisTickInterval}},x:{display:$.isXAxisVisible,type:"category",ticks:{autoSkip:!1},grid:{drawOnChartArea:!0,color:q=>q.tick&&""!==q.tick.label?"rgba(225, 228, 232, 1)":"transparent",lineWidth:1,tickLength:10},border:{display:!0,width:1,color:"rgba(225, 228, 232, 1)",dash:[],dashOffset:0}}},plugins:{tooltip:{mode:"index",intersect:!1},legend:{display:$.isDatasetLabelVisible},zoom:{pan:{mode:"xy"},limits:{y:{min:$?.zoomRangeLimits?.min||0,max:$?.zoomRangeLimits?.max||void 0},x:{min:0}}}}}}static prepareSinglePhaseChartDataStructure($,q){return{datasets:[],labels:this.createSinglePhaseAxisLabels($,q)}}static prepareSinglePhaseSkipOneChartDataStructure($,q){return{datasets:[],labels:this.createSinglePhaseSkipOneAxisLabels($,q)}}static prepareChartDataStructure($=D.oj,q=D.ZW,de){return{datasets:[],labels:this.createXAxisLabels($,q,de)}}static initializeDatasetTemplate($,q){const de=Ui[q?.datasetColorSettingsKey||D.sl],pe=de.datasetColors?.[$%de.datasetColors.length]||{borderColor:"black",backgroundColor:"white"};return{label:`${q?.datasetLabelPrefix||""} ${$}`,data:[],borderColor:pe.borderColor,backgroundColor:pe.backgroundColor,fill:"origin",pointRadius:0,pointHoverRadius:0,pointBackgroundColor:pe.borderColor,pointHoverBackgroundColor:pe.borderColor,pointHoverBorderColor:pe.borderColor}}}var oi,Ot=se(5879),ts=se(5214),ls=se(8471),zi=se(9643);const cs=["chartContainer"];let Pi=((oi=class{constructor($,q,de){this.websocketService=$,this.scriptFacadeService=q,this.chartToolsGlobalSignalsService=de,this.data=[],this.latestValuesToUpdate=[],this.updateInterval=500,this.lineChartType="line",this.isScriptActive=!1,this.maxY=0}ngOnInit(){this.registerPlugins(),this.listenToScriptStateChanges(),this.listenToChartWebsocketEvents(),this.listenToToolsSignals()}registerPlugins(){Ht.registerZoomPlugin()}ngOnChanges($){$.settings&&$.settings.currentValue&&this.initializeChartSettings(),$.data&&$.data.currentValue&&this.prependNewChartData($.data.currentValue)}listenToToolsSignals(){this.chartToolsGlobalSignalsService.toggleTooltips$.pipe((0,v.g)(100),(0,u.t)(this)).subscribe($=>{(0,T.Q)(this.lineChartOptions)||(he.kL.defaults.plugins.tooltip.enabled=$,this.chart&&this.chart.update())}),this.chartToolsGlobalSignalsService.toggleZoom$.pipe((0,v.g)(100),(0,u.t)(this)).subscribe($=>{(0,T.Q)(this.lineChartOptions)||(he.kL.defaults.plugins.zoom.pan.enabled=$,he.kL.defaults.plugins.zoom.zoom.wheel.enabled=$,this.updateCursor($),!$&&this.chart&&this.chart.chart?.resetZoom(),this.chart&&this.chart?.render())})}updateCursor($){this.chartContainer.nativeElement.classList[$?"add":"remove"]("zoom-cursor")}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,u.t)(this)).subscribe($=>{this.isScriptActive=(0,m.A)($),this.isScriptActive?this.startAutoUpdate():this.stopAutoUpdate(),this.updateChartSettingsBasedOnScriptState()})}updateChartSettingsBasedOnScriptState(){let $=!1;this.lineChartData&&this.lineChartData.datasets&&(this.lineChartData.datasets.forEach(q=>{q.pointHoverRadius=this.isScriptActive?0:5}),$=!0),$&&this.chart?.update()}initializeChartSettings(){switch(this.lineChartOptions=Ht.configureChartOptions(this.settings),this.updateChartSettingsBasedOnScriptState(),this.settings?.chartDataStructure){case D.nR.SINGLE_PHASE_X_AXIS:this.lineChartData=Ht.prepareSinglePhaseChartDataStructure(this.settings.xAxisDataPointsCount,this.settings);break;case D.nR.SINGLE_PHASE_X_AXIS_SKIP_ONE:this.lineChartData=Ht.prepareSinglePhaseSkipOneChartDataStructure(this.settings.xAxisDataPointsCount,this.settings);break;case D.nR.MUlTI_PHASE_X_AXIS:this.lineChartData=Ht.prepareChartDataStructure(this.settings.xAxisRepetitionCount,this.settings.xAxisDataPointsCount,this.settings)}this.chart?.update()}listenToChartWebsocketEvents(){this.websocketService.chartsMessages$.pipe((0,u.t)(this)).subscribe($=>{switch($.topic){case y.D.UPDATE_LATEST_VALUE:{const{data:Me}=$,{accuracy:Xe,loss:ot,sparsity:it,datasetIndex:st}=Me;void 0!==Xe&&this.realtimeUpdateMetric===w.L.ACCURACY?this.addLatestValueToChart(st,Xe):void 0!==ot&&this.realtimeUpdateMetric===w.L.LOSS?this.addLatestValueToChart(st,ot):void 0!==it&&this.realtimeUpdateMetric===w.L.SPARSITY&&this.addLatestValueToChart(0,it);break}case y.D.UPDATE_TESTING:const{data:q}=$,{accuracy:de,loss:pe,datasetIndex:Ee}=q;void 0!==de&&this.realtimeUpdateMetric===w.L.TESTING_ACCURACY?this.addLatestValueToChart(Ee,de):void 0!==pe&&this.realtimeUpdateMetric===w.L.TESTING_LOSS&&this.addLatestValueToChart(Ee,pe)}})}prependNewChartData($){if($.forEach(q=>{const de=q.datasetIndex;this.ensureDatasetLength(de);const pe=this.lineChartData.datasets[de];pe.data=[...q.values,...pe.data]}),this.settings.isYAxisDynamic){const q=$.flatMap(de=>de.values);this.updateDynamicYAxis(q)}this.chart?.update()}startAutoUpdate(){this.updateInterval<=0||(this.updateIntervalId=setInterval(()=>this.refreshChartData(),this.updateInterval))}refreshChartData(){try{if(!this.latestValuesToUpdate.length)return;this.latestValuesToUpdate.forEach($=>{this.ensureDatasetLength($.datasetIndex),this.lineChartData.datasets[$.datasetIndex].data.push($.value)}),this.settings.isYAxisDynamic&&this.updateDynamicYAxis(this.latestValuesToUpdate.map($=>$.value)),this.chart?.update(),this.latestValuesToUpdate.splice(0,this.latestValuesToUpdate.length)}catch($){console.error("Error updating chart:",$)}}updateDynamicYAxis($){if(0===$.length)return;const q=$.reduce((de,pe)=>Math.max(de,pe));q>this.maxY&&(this.maxY=Math.ceil((q+(this.settings?.dynamicYAxisGrowthOffset||D.NK))/(this.settings?.dynamicYAxisGrowthRoundFactor||D.CE))*(this.settings?.dynamicYAxisGrowthRoundFactor||D.CE),this.updateAxisMaxLimits(this.maxY),this.chart?.render())}updateAxisMaxLimits($){this.lineChartOptions&&this.lineChartOptions.scales&&this.lineChartOptions.scales.y&&(this.lineChartOptions.scales.y.max=$)}ensureDatasetLength($){for(;$>=this.lineChartData.datasets.length;)this.lineChartData.datasets.push(Ht.initializeDatasetTemplate(this.lineChartData.datasets.length,this.settings))}addLatestValueToChart($,q){null!=q&&this.latestValuesToUpdate.push({datasetIndex:$,value:q})}stopAutoUpdate(){this.updateIntervalId&&clearInterval(this.updateIntervalId)}resetTools(){this.chartToolsGlobalSignalsService.toggleTooltips=!1,this.chartToolsGlobalSignalsService.toggleZoom=!1}ngOnDestroy(){this.resetTools(),this.stopAutoUpdate()}}).\u0275fac=function($){return new($||oi)(Ot.Y36(ts.i),Ot.Y36(ls.O),Ot.Y36(zi.d))},oi.\u0275cmp=Ot.Xpm({type:oi,selectors:[["ms-line-chart"]],viewQuery:function($,q){if(1&$&&(Ot.Gf(g.jh,5),Ot.Gf(cs,5)),2&$){let de;Ot.iGM(de=Ot.CRH())&&(q.chart=de.first),Ot.iGM(de=Ot.CRH())&&(q.chartContainer=de.first)}},inputs:{data:"data",realtimeUpdateMetric:"realtimeUpdateMetric",settings:"settings",updateInterval:"updateInterval"},features:[Ot.TTD],decls:4,vars:3,consts:[["chartContainer",""],["baseChart","","id","chart",3,"data","options","type"],["chart",""]],template:function($,q){1&$&&(Ot.TgZ(0,"div",null,0),Ot._UZ(2,"canvas",1,2),Ot.qZA()),2&$&&(Ot.xp6(2),Ot.Q6J("data",q.lineChartData)("options",q.lineChartOptions)("type",q.lineChartType))},dependencies:[g.jh],styles:["#chart[_ngcontent-%COMP%]{display:block;height:250px;width:100%!important}.zoom-cursor[_ngcontent-%COMP%]{cursor:crosshair}"],changeDetection:0}),oi);Pi=(0,U.gn)([(0,u.c)()],Pi)},9643:(Ct,qe,se)=>{"use strict";se.d(qe,{d:()=>he});var U=se(5619),u=se(5879);let he=(()=>{var g;class v{get toggleZoom$(){return this._toggleZoomSubject.asObservable()}set toggleZoom(T){this._toggleZoomSubject.next(T)}get toggleTooltips$(){return this._toggleTooltipsSubject.asObservable()}set toggleTooltips(T){this._toggleTooltipsSubject.next(T)}constructor(){this._toggleTooltipsSubject=new U.X(!1),this._toggleZoomSubject=new U.X(!1)}}return(g=v).\u0275fac=function(T){return new(T||g)},g.\u0275prov=u.Yz7({token:g,factory:g.\u0275fac}),v})()},9534:(Ct,qe,se)=>{"use strict";se.d(qe,{w:()=>He});var ve,U=se(7582),u=se(8791),he=se(7921),g=se(3620),v=se(3997),y=se(9397),T=se(4664),m=se(7398),w=se(836),D=se(8180),L=se(3946),M=se(9547),l=se(8279),f=se(5360),c=se(5879),d=se(3221),b=se(6223),E=se(8471),A=se(6814),R=se(617),C=se(5195),P=se(2032),K=se(5683),ie=se(8525),X=se(3680),J=se(5986),me=se(2596);function De(We,Re){if(1&We&&(c.TgZ(0,"div",10)(1,"mat-label"),c._uU(2),c.qZA(),c.TgZ(3,"mat-form-field",11),c._UZ(4,"input",12)(5,"mat-icon",13),c.qZA()()),2&We){const Ke=c.oxw(),I=Ke.$implicit,le=Ke.index;c.xp6(2),c.Oqu(I.label),c.xp6(2),c.Q6J("formControlName",le)("placeholder",I.placeholder)("type",I.inputType),c.xp6(1),c.s9C("matTooltip",I.help)}}function Ce(We,Re){if(1&We&&(c.TgZ(0,"mat-option",16),c._uU(1),c.qZA()),2&We){const Ke=Re.$implicit;c.Q6J("value",Ke.value),c.xp6(1),c.hij(" ",Ke.viewValue," ")}}function N(We,Re){if(1&We&&(c.TgZ(0,"div",10)(1,"mat-label"),c._uU(2),c.qZA(),c.TgZ(3,"mat-form-field",11)(4,"mat-select",14),c.YNc(5,Ce,2,2,"mat-option",15),c.qZA(),c._UZ(6,"mat-icon",13),c.qZA()()),2&We){const Ke=c.oxw(),I=Ke.$implicit,le=Ke.index;c.xp6(2),c.Oqu(I.label),c.xp6(2),c.Q6J("formControlName",le),c.xp6(1),c.Q6J("ngForOf",I.options),c.xp6(1),c.s9C("matTooltip",I.help)}}function G(We,Re){if(1&We&&(c.TgZ(0,"div",17)(1,"mat-checkbox",14),c._uU(2),c.qZA(),c.TgZ(3,"div",18),c._UZ(4,"mat-icon",19),c.qZA()()),2&We){const Ke=c.oxw(),I=Ke.index,le=Ke.$implicit;c.xp6(1),c.Q6J("formControlName",I),c.xp6(1),c.Oqu(le.label),c.xp6(2),c.s9C("matTooltip",le.help)}}function Q(We,Re){if(1&We&&(c.ynx(0),c.YNc(1,De,6,5,"div",8),c.YNc(2,N,7,4,"div",8),c.YNc(3,G,5,3,"div",9),c.BQk()),2&We){const Ke=Re.$implicit;c.xp6(1),c.Q6J("ngIf","text"===Ke.inputType||"number"===Ke.inputType),c.xp6(1),c.Q6J("ngIf","select"===Ke.inputType),c.xp6(1),c.Q6J("ngIf","checkbox"===Ke.inputType)}}function re(We,Re){if(1&We&&(c.TgZ(0,"div",4)(1,"form",5)(2,"div",6),c.YNc(3,Q,4,3,"ng-container",7),c.qZA()()()),2&We){const Ke=c.oxw();c.xp6(1),c.Q6J("formGroup",Ke.form),c.xp6(2),c.Q6J("ngForOf",Ke.parameters)}}function ke(We,Re){1&We&&(c.TgZ(0,"p",20),c._uU(1,"No parameters configured."),c.qZA())}let He=((ve=class{get parametersArray(){return this.form.get("parametersArray")}constructor(Re,Ke,I,le){this.parametersFacadeService=Re,this.controlContainer=Ke,this.fb=I,this.scriptFacadeService=le,this.RoutesList=M.Z,this.isScriptActive=!1,this.alg=l.k2,this.parameters=[]}ngOnInit(){this.form=this.fb.group({parametersArray:this.fb.array([])}),this.controlContainer?.control?.parent?.setControl(this.controlContainer.name,this.form),this.listenToScriptStateChanges(),this.listenToAlgorithmChanges()}listenToAlgorithmChanges(){const Ke=this.form.parent.get("algorithm.alg")?.value||l.k2;this.form.parent.get("algorithm.alg")?.valueChanges.pipe((0,he.O)(Ke),(0,g.b)(50),(0,v.x)(),(0,y.b)(I=>{this.alg=I,this.parametersFacadeService.dispatch(L.j.loadParameters({arg:I}))}),(0,T.w)(()=>this.parametersFacadeService.parameters$.pipe((0,m.U)(I=>I[this.alg]?.data||[]),(0,w.T)(1),(0,D.q)(1))),(0,u.t)(this)).subscribe(I=>{this.parameters=I,this.buildFormArray(this.parameters)})}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,u.t)(this)).subscribe(Re=>{this.isScriptActive=(0,f.A)(Re)})}buildFormArray(Re){this.parametersArray.clear(),Re.forEach(Ke=>{this.parametersArray.push(this.fb.control(Ke.defaultValue))}),this.isScriptActive?this.form.disable():this.form.enable()}get parametersFormatted(){const Re={},Ke=this.parametersArray.getRawValue();return this.parameters.forEach((I,le)=>{Re[I.argName]=Ke[le]}),Re}}).\u0275fac=function(Re){return new(Re||ve)(c.Y36(d.E),c.Y36(b.gN),c.Y36(b.qu),c.Y36(E.O))},ve.\u0275cmp=c.Xpm({type:ve,selectors:[["ms-panel-parameters"]],decls:6,vars:2,consts:[[1,"ms-card","parameters-card"],[1,"heading-sub-section-title"],["class","parameters-wrapper",4,"ngIf","ngIfElse"],["noParametersTemplate",""],[1,"parameters-wrapper"],[3,"formGroup"],["formArrayName","parametersArray"],[4,"ngFor","ngForOf"],["class","form-field-container",4,"ngIf"],["class","form-field-container inline-container mb-[22px]",4,"ngIf"],[1,"form-field-container"],["appearance","outline"],["matInput","",3,"formControlName","placeholder","type"],["fontSet","ms","fontIcon","icon-Info","matSuffix","",3,"matTooltip"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-field-container","inline-container","mb-[22px]"],[1,"ml-2"],["fontSet","ms","fontIcon","icon-Info",3,"matTooltip"],[1,"no-parameters-message"]],template:function(Re,Ke){if(1&Re&&(c.TgZ(0,"mat-card",0)(1,"p",1),c._uU(2,"Parameters"),c.qZA(),c.YNc(3,re,4,2,"div",2),c.YNc(4,ke,2,0,"ng-template",null,3,c.W1O),c.qZA()),2&Re){const I=c.MAs(5);c.xp6(3),c.Q6J("ngIf",Ke.parameters.length)("ngIfElse",I)}},dependencies:[A.sg,A.O5,R.Hw,C.a8,P.Nt,K.KE,K.hX,K.R9,ie.gD,X.ey,J.oG,me.gM,b._Y,b.Fj,b.JJ,b.JL,b.sg,b.u,b.CE],styles:[".parameters-card[_ngcontent-%COMP%]   .parameters-wrapper[_ngcontent-%COMP%]{max-height:400px;overflow:auto;padding-right:20px}.parameters-card[_ngcontent-%COMP%]   .parameters-wrapper[_ngcontent-%COMP%]   .parameter-divider[_ngcontent-%COMP%]{margin-bottom:20px}"]}),ve);He=(0,U.gn)([(0,u.c)()],He)},4852:(Ct,qe,se)=>{"use strict";se.d(qe,{N:()=>T});var U=se(5879),u=se(4279),he=se(8471),g=se(2296),v=se(617),y=se(2596);let T=(()=>{var m;class w{constructor(L){this.scriptFacadeService=L,this.clearTerminal=new U.vpe,this.scrollToTopTerminal=new U.vpe,this.scrollToBottomTerminal=new U.vpe}ctaStopScript(){this.scriptFacadeService.dispatch(u.a.stopScript())}}return(m=w).\u0275fac=function(L){return new(L||m)(U.Y36(he.O))},m.\u0275cmp=U.Xpm({type:m,selectors:[["ms-terminal-toolbar"]],outputs:{clearTerminal:"clearTerminal",scrollToTopTerminal:"scrollToTopTerminal",scrollToBottomTerminal:"scrollToBottomTerminal"},decls:10,vars:0,consts:[[1,"buttons-wrapper"],["mat-icon-button","","color","primary","matTooltip","Scroll to top",3,"click"],["fontSet","ms","fontIcon","icon-ArrowUp"],["mat-icon-button","","color","primary","matTooltip","Scroll to bottom",3,"click"],["fontSet","ms","fontIcon","icon-ArrowDown"],["mat-icon-button","","color","primary","matTooltip","Clear terminal",3,"click"],["mat-icon-button","","color","warn","matTooltip","Stop current process.",3,"click"],["fontSet","ms","fontIcon","icon-X",1,"mat-error"]],template:function(L,M){1&L&&(U.TgZ(0,"div",0)(1,"button",1),U.NdJ("click",function(){return M.scrollToTopTerminal.emit()}),U._UZ(2,"mat-icon",2),U.qZA(),U.TgZ(3,"button",3),U.NdJ("click",function(){return M.scrollToBottomTerminal.emit()}),U._UZ(4,"mat-icon",4),U.qZA(),U.TgZ(5,"button",5),U.NdJ("click",function(){return M.clearTerminal.emit()}),U.TgZ(6,"mat-icon"),U._uU(7," clear_all"),U.qZA()(),U.TgZ(8,"button",6),U.NdJ("click",function(){return M.ctaStopScript()}),U._UZ(9,"mat-icon",7),U.qZA()())},dependencies:[g.RK,v.Hw,y.gM]}),w})()},6349:(Ct,qe,se)=>{"use strict";se.d(qe,{d:()=>d});var f,U=se(7582),u=se(8791),he=se(836),g=se(8180),v=se(6885),T=se(6708),w=se(6690),D=se(5879),L=se(5214),M=se(7177),l=se(4852);const c=["terminal"];let d=((f=class{constructor(E,A){this.websocketService=E,this.terminalFacadeService=A,this.messagesBuffer=[],this.displayWebSocketMessages=!1,this.terminal=new v.Terminal({cursorBlink:!0,theme:{background:"#D0D4D9",foreground:"#000000",cursor:"#000000"}}),this.fitAddon=new T.FitAddon,this.websocketService.terminalMessages$.pipe((0,u.t)(this)).subscribe(R=>{this.displayWebSocketMessages?this.terminal.writeln(R):this.messagesBuffer.push(R)})}ngOnInit(){this.initializeTerminal(),this.loadLatestMessages()}loadLatestMessages(){this.terminalFacadeService.messages$.pipe((0,he.T)(1),(0,g.q)(1)).subscribe(E=>{E.forEach(A=>this.terminal.writeln(A)),this.messagesBuffer.forEach(A=>this.terminal.writeln(A)),this.messagesBuffer=[],this.displayWebSocketMessages=!0}),this.terminalFacadeService.dispatch(w.W.getLatestMessages())}ngAfterViewInit(){setTimeout(()=>{this.adjustHeightToParent()},0),this.fitTerminalToContainer()}initializeTerminal(){this.terminal.loadAddon(this.fitAddon),this.terminal.open(this.terminalDiv.nativeElement),this.terminal.writeln("Welcome to Modelsmith terminal!\r\n"),this.setupResizeObserver()}setupResizeObserver(){this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver(()=>this.fitTerminalToContainer()),this.resizeObserver.observe(this.terminalDiv.nativeElement)}fitTerminalToContainer(){this.fitAddon.fit()}adjustHeightToParent(){const E=this.terminalDiv.nativeElement.parentElement.parentElement.parentElement;E&&E.parentElement&&(this.terminalDiv.nativeElement.style.height=E.parentElement.offsetHeight-170+"px")}clearTerminal(){this.terminalFacadeService.dispatch(w.W.postClearHistory()),this.terminal.clear()}scrollToTopTerminal(){this.terminal.scrollToTop()}scrollToBottomTerminal(){this.terminal.scrollToBottom()}ngOnDestroy(){this.resizeObserver?.disconnect()}}).\u0275fac=function(E){return new(E||f)(D.Y36(L.i),D.Y36(M.c))},f.\u0275cmp=D.Xpm({type:f,selectors:[["ms-terminal"]],viewQuery:function(E,A){if(1&E&&D.Gf(c,7),2&E){let R;D.iGM(R=D.CRH())&&(A.terminalDiv=R.first)}},decls:9,vars:0,consts:[[1,"ms-terminal-wrapper"],[1,"top-terminal-section"],[1,"heading-section-title","mb-1","flex","items-center"],[3,"clearTerminal","scrollToTopTerminal","scrollToBottomTerminal"],[1,"terminal"],[1,"terminal-wrapper"],["terminal",""]],template:function(E,A){1&E&&(D.TgZ(0,"div",0)(1,"div",1)(2,"div",2),D._uU(3,"Terminal"),D.qZA(),D.TgZ(4,"div")(5,"ms-terminal-toolbar",3),D.NdJ("clearTerminal",function(){return A.clearTerminal()})("scrollToTopTerminal",function(){return A.scrollToTopTerminal()})("scrollToBottomTerminal",function(){return A.scrollToBottomTerminal()}),D.qZA()()(),D.TgZ(6,"div",4),D._UZ(7,"div",5,6),D.qZA()())},dependencies:[l.N],styles:['/**\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n * https://github.com/chjj/term.js\n * @license MIT\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n * Originally forked from (with the author\'s permission):\n *   Fabrice Bellard\'s javascript vt100 for jslinux:\n *   http://bellard.org/jslinux/\n *   Copyright (c) 2011 Fabrice Bellard\n *   The original design remains. The terminal itself\n *   has been extended to include xterm CSI codes, among\n *   other features.\n */.xterm{cursor:text;position:relative;user-select:none;-ms-user-select:none;-webkit-user-select:none}.xterm.focus,.xterm:focus{outline:none}.xterm .xterm-helpers{position:absolute;top:0;z-index:5}.xterm .xterm-helper-textarea{padding:0;border:0;margin:0;position:absolute;opacity:0;left:-9999em;top:0;width:0;height:0;z-index:-5;white-space:nowrap;overflow:hidden;resize:none}.xterm .composition-view{background:#000;color:#fff;display:none;position:absolute;white-space:nowrap;z-index:1}.xterm .composition-view.active{display:block}.xterm .xterm-viewport{background-color:#000;overflow-y:scroll;cursor:default;position:absolute;inset:0}.xterm .xterm-screen{position:relative}.xterm .xterm-screen canvas{position:absolute;left:0;top:0}.xterm .xterm-scroll-area{visibility:hidden}.xterm-char-measure-element{display:inline-block;visibility:hidden;position:absolute;top:0;left:-9999em;line-height:normal}.xterm.enable-mouse-events{cursor:default}.xterm.xterm-cursor-pointer,.xterm .xterm-cursor-pointer{cursor:pointer}.xterm.column-select.focus{cursor:crosshair}.xterm .xterm-accessibility,.xterm .xterm-message{position:absolute;inset:0;z-index:10;color:transparent;pointer-events:none}.xterm .live-region{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}.xterm-dim{opacity:1!important}.xterm-underline-1{text-decoration:underline}.xterm-underline-2{-webkit-text-decoration:double underline;text-decoration:double underline}.xterm-underline-3{-webkit-text-decoration:wavy underline;text-decoration:wavy underline}.xterm-underline-4{-webkit-text-decoration:dotted underline;text-decoration:dotted underline}.xterm-underline-5{-webkit-text-decoration:dashed underline;text-decoration:dashed underline}.xterm-overline{text-decoration:overline}.xterm-overline.xterm-underline-1{text-decoration:overline underline}.xterm-overline.xterm-underline-2{-webkit-text-decoration:overline double underline;text-decoration:overline double underline}.xterm-overline.xterm-underline-3{-webkit-text-decoration:overline wavy underline;text-decoration:overline wavy underline}.xterm-overline.xterm-underline-4{-webkit-text-decoration:overline dotted underline;text-decoration:overline dotted underline}.xterm-overline.xterm-underline-5{-webkit-text-decoration:overline dashed underline;text-decoration:overline dashed underline}.xterm-strikethrough{text-decoration:line-through}.xterm-screen .xterm-decoration-container .xterm-decoration{z-index:6;position:absolute}.xterm-screen .xterm-decoration-container .xterm-decoration.xterm-decoration-top-layer{z-index:7}.xterm-decoration-overview-ruler{z-index:8;position:absolute;top:0;right:0;pointer-events:none}.xterm-decoration-top{z-index:2;position:relative}.ms-terminal-wrapper{overflow-x:auto}.ms-terminal-wrapper .terminal-wrapper{border:10px solid var(--terminal-color);background-color:var(--terminal-color);border-radius:10px}.ms-terminal-wrapper .xterm-viewport{overflow-y:auto!important}.ms-terminal-wrapper .top-terminal-section{display:flex;justify-content:space-between}\n'],encapsulation:2}),f);d=(0,U.gn)([(0,u.c)()],d)},3706:(Ct,qe,se)=>{"use strict";se.d(qe,{I:()=>he});var U=se(617),u=se(5879);let he=(()=>{var g;class v{constructor(T,m,w){this.el=T,this.renderer=m,this.viewContainer=w,this.isHidden=!0}ngOnInit(){const T=this.el.nativeElement,m=this.createIcon();this.setupIconInContainer(T,m),m.location.nativeElement.addEventListener("click",()=>{this.toggleVisibility(T,m.instance)})}createIcon(){const T=this.viewContainer.createComponent(U.Hw);return T.instance.fontIcon=this.isHidden?"visibility_off":"visibility",T}setupIconInContainer(T,m){const w=this.renderer.createElement("div");this.renderer.addClass(w,v.CLASS_ICON_SUFFIX),this.renderer.setStyle(m.location.nativeElement,"padding","0"),this.renderer.setAttribute(T,"type",this.isHidden?"password":"text"),this.renderer.appendChild(w,m.location.nativeElement),this.renderer.appendChild(T?.parentElement?.parentElement,w)}toggleVisibility(T,m){this.isHidden=!this.isHidden,this.renderer.setAttribute(T,"type",this.isHidden?"password":"text"),m.fontIcon=this.isHidden?"visibility_off":"visibility"}}return(g=v).CLASS_ICON_SUFFIX="mat-mdc-form-field-icon-suffix",g.\u0275fac=function(T){return new(T||g)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.s_b))},g.\u0275dir=u.lG2({type:g,selectors:[["","msPasswordToggle",""]]}),v})()},6398:(Ct,qe,se)=>{"use strict";se.d(qe,{X:()=>v});var U=se(5879),u=se(6814),he=se(5683);function g(y,T){if(1&y&&(U.TgZ(0,"mat-error",1),U._uU(1),U.qZA()),2&y){const m=U.oxw();U.xp6(1),U.hij(" ",m.text,"\n")}}let v=(()=>{var y;class T{constructor(){}}return(y=T).\u0275fac=function(w){return new(w||y)},y.\u0275cmp=U.Xpm({type:y,selectors:[["ms-error-message"]],inputs:{text:"text"},decls:1,vars:1,consts:[["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(w,D){1&w&&U.YNc(0,g,2,1,"mat-error",0),2&w&&U.Q6J("ngIf",D.text)},dependencies:[u.O5,he.TO],styles:[".error-message[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in-translate .3s}@keyframes _ngcontent-%COMP%_fade-in-translate{0%{opacity:0;transform:translateY(-100%)}to{opacity:1;transform:translateY(0)}}"],changeDetection:0}),T})()},8970:(Ct,qe,se)=>{"use strict";se.d(qe,{o:()=>M});var U=se(8645),u=se(9773),he=se(6398);var D=se(5879),L=se(6223);let M=(()=>{var l;class f{constructor(d,b){this.control=d,this.vcr=b,this._destroyed$=new U.x}onBlur(){this.control.invalid&&!this.control.disabled&&this.insertErrorComponent()}ngOnInit(){this.control.touched&&this.control.invalid&&!this.control.disabled&&this.insertErrorComponent(),this.control?.statusChanges?.pipe((0,u.R)(this._destroyed$)).subscribe(()=>{this.control.touched&&this.control.invalid&&!this.control.disabled&&this.insertErrorComponent(),(this.control.valid||this.control.disabled)&&this.destroyErrorComponent()})}insertErrorComponent(){if(!this.componentRef){this.componentRef=this.vcr.createComponent(he.X);const d=this.componentRef.location.nativeElement;d.parentElement?.parentElement?.parentElement?.parentElement?.getElementsByClassName("mat-mdc-form-field-subscript-wrapper")[0]?.getElementsByClassName("mat-mdc-form-field-hint-wrapper")[0]?.getElementsByClassName("mat-mdc-form-field-hint-spacer")[0].appendChild(d)}this.componentRef.instance&&(this.componentRef.instance.text=function y(l){if(!l)return;const f=Object.keys(l)[0];switch(f){case"required":return"Field required";case"email":return"Email required";case"onlyDigits":return"Only numeric characters allowed";default:return f}}(this.control.errors))}destroyErrorComponent(){this.componentRef&&(this.vcr.remove(),this.componentRef.destroy(),this.componentRef=void 0)}ngOnDestroy(){this.destroyErrorComponent(),this._destroyed$.next(),this._destroyed$.complete()}}return(l=f).\u0275fac=function(d){return new(d||l)(D.Y36(L.a5),D.Y36(D.s_b))},l.\u0275dir=D.lG2({type:l,selectors:[["","msErrorDisplay",""]],hostBindings:function(d,b){1&d&&D.NdJ("blur",function(){return b.onBlur()})}}),f})()},3973:(Ct,qe,se)=>{"use strict";se.d(qe,{g:()=>U});var U=function(u){return u.GREEN="green",u.RED="red",u.YELLOW="yellow",u.BLUE="blue",u}(U||{})},6210:(Ct,qe,se)=>{"use strict";se.d(qe,{L:()=>U});var U=function(u){return u.ACCURACY="accuracy",u.TESTING_ACCURACY="testingAccuracy",u.LOSS="loss",u.TESTING_LOSS="testingLoss",u.SPARSITY="sparsity",u}(U||{})},4323:(Ct,qe,se)=>{"use strict";se.d(qe,{CE:()=>he,NK:()=>u,O1:()=>y,ZW:()=>v,cS:()=>w,nR:()=>m,oj:()=>T,sl:()=>g});var U=se(3973);const u=5,he=5,g=U.g.GREEN,v=390,y=99,T=2;var m=function(D){return D.SINGLE_PHASE_X_AXIS="singlePhase",D.SINGLE_PHASE_X_AXIS_SKIP_ONE="singlePhaseXAxisSkipOne",D.MUlTI_PHASE_X_AXIS="multiplePhase",D}(m||{});const w={isXAxisVisible:!0,isYAxisVisible:!0,xAxisLabelPrefix:"Epoch:",datasetLabelPrefix:"Pruning:",yAxisMinimumValue:0,yAxisTickInterval:20,datasetColorSettingsKey:U.g.GREEN}},8524:(Ct,qe,se)=>{"use strict";se.d(qe,{m:()=>Ce});var U=se(6814),u=se(6223),he=se(1303),g=se(7246),v=se(3427),l=(se(2848),se(9622),se(9901),se(127),se(8110),se(4966),se(2704),se(9643)),X=(se(8976),se(9534),se(2618),se(7136),se(5482),se(4852),se(6349),se(3896),se(3706),se(6398),se(8970),se(4376)),J=se(5879);let Ce=(()=>{var N;class G{}return(N=G).\u0275fac=function(re){return new(re||N)},N.\u0275mod=J.oAB({type:N}),N.\u0275inj=J.cJS({providers:[{provide:v.UU,useValue:{placeholderLabel:"Search...",noEntriesFoundLabel:"No matching entries found..."}},l.d],imports:[U.ez,he.Bz,X.q,u.u5,u.UX,v.Co,g.vQ,X.q,u.u5,u.UX,v.Co]}),G})()},7271:(Ct,qe,se)=>{var U;!function(u,he,g,v){"use strict";var d,y=["","webkit","Moz","MS","ms","o"],T=he.createElement("div"),m="function",w=Math.round,D=Math.abs,L=Date.now;function M(F,j,te){return setTimeout(R(F,te),j)}function l(F,j,te){return!!Array.isArray(F)&&(f(F,te[j],te),!0)}function f(F,j,te){var fe;if(F)if(F.forEach)F.forEach(j,te);else if(F.length!==v)for(fe=0;fe<F.length;)j.call(te,F[fe],fe,F),fe++;else for(fe in F)F.hasOwnProperty(fe)&&j.call(te,F[fe],fe,F)}function c(F,j,te){var fe="DEPRECATED METHOD: "+j+"\n"+te+" AT \n";return function(){var Pe=new Error("get-stack-trace"),Ve=Pe&&Pe.stack?Pe.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ht=u.console&&(u.console.warn||u.console.log);return ht&&ht.call(u.console,fe,Ve),F.apply(this,arguments)}}d="function"!=typeof Object.assign?function(j){if(j===v||null===j)throw new TypeError("Cannot convert undefined or null to object");for(var te=Object(j),fe=1;fe<arguments.length;fe++){var Pe=arguments[fe];if(Pe!==v&&null!==Pe)for(var Ve in Pe)Pe.hasOwnProperty(Ve)&&(te[Ve]=Pe[Ve])}return te}:Object.assign;var b=c(function(j,te,fe){for(var Pe=Object.keys(te),Ve=0;Ve<Pe.length;)(!fe||fe&&j[Pe[Ve]]===v)&&(j[Pe[Ve]]=te[Pe[Ve]]),Ve++;return j},"extend","Use `assign`."),E=c(function(j,te){return b(j,te,!0)},"merge","Use `assign`.");function A(F,j,te){var Pe,fe=j.prototype;(Pe=F.prototype=Object.create(fe)).constructor=F,Pe._super=fe,te&&d(Pe,te)}function R(F,j){return function(){return F.apply(j,arguments)}}function C(F,j){return typeof F==m?F.apply(j&&j[0]||v,j):F}function P(F,j){return F===v?j:F}function K(F,j,te){f(me(j),function(fe){F.addEventListener(fe,te,!1)})}function ie(F,j,te){f(me(j),function(fe){F.removeEventListener(fe,te,!1)})}function X(F,j){for(;F;){if(F==j)return!0;F=F.parentNode}return!1}function J(F,j){return F.indexOf(j)>-1}function me(F){return F.trim().split(/\s+/g)}function ve(F,j,te){if(F.indexOf&&!te)return F.indexOf(j);for(var fe=0;fe<F.length;){if(te&&F[fe][te]==j||!te&&F[fe]===j)return fe;fe++}return-1}function De(F){return Array.prototype.slice.call(F,0)}function Ce(F,j,te){for(var fe=[],Pe=[],Ve=0;Ve<F.length;){var ht=j?F[Ve][j]:F[Ve];ve(Pe,ht)<0&&fe.push(F[Ve]),Pe[Ve]=ht,Ve++}return te&&(fe=j?fe.sort(function(Mt,Nt){return Mt[j]>Nt[j]}):fe.sort()),fe}function N(F,j){for(var te,fe,Pe=j[0].toUpperCase()+j.slice(1),Ve=0;Ve<y.length;){if((fe=(te=y[Ve])?te+Pe:j)in F)return fe;Ve++}return v}var G=1;function re(F){var j=F.ownerDocument||F;return j.defaultView||j.parentWindow||u}var He="ontouchstart"in u,We=N(u,"PointerEvent")!==v,Re=He&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Ke="touch",le="mouse",ye=25,$e=1,Ze=4,Ue=8,nt=1,Te=2,Ae=4,Je=8,tt=16,_t=Te|Ae,Wt=Je|tt,dt=_t|Wt,bt=["x","y"],zt=["clientX","clientY"];function ct(F,j){var te=this;this.manager=F,this.callback=j,this.element=F.element,this.target=F.options.inputTarget,this.domHandler=function(fe){C(F.options.enable,[F])&&te.handler(fe)},this.init()}function Qt(F,j,te){var fe=te.pointers.length,Pe=te.changedPointers.length,Ve=j&$e&&fe-Pe==0,ht=j&(Ze|Ue)&&fe-Pe==0;te.isFirst=!!Ve,te.isFinal=!!ht,Ve&&(F.session={}),te.eventType=j,function Ft(F,j){var te=F.session,fe=j.pointers,Pe=fe.length;te.firstInput||(te.firstInput=Ut(j)),Pe>1&&!te.firstMultiple?te.firstMultiple=Ut(j):1===Pe&&(te.firstMultiple=!1);var Ve=te.firstInput,ht=te.firstMultiple,Tt=ht?ht.center:Ve.center,Mt=j.center=pt(fe);j.timeStamp=L(),j.deltaTime=j.timeStamp-Ve.timeStamp,j.angle=hi(Tt,Mt),j.distance=pi(Tt,Mt),function Jt(F,j){var te=j.center,fe=F.offsetDelta||{},Pe=F.prevDelta||{},Ve=F.prevInput||{};(j.eventType===$e||Ve.eventType===Ze)&&(Pe=F.prevDelta={x:Ve.deltaX||0,y:Ve.deltaY||0},fe=F.offsetDelta={x:te.x,y:te.y}),j.deltaX=Pe.x+(te.x-fe.x),j.deltaY=Pe.y+(te.y-fe.y)}(te,j),j.offsetDirection=as(j.deltaX,j.deltaY);var Nt=xi(j.deltaTime,j.deltaX,j.deltaY);j.overallVelocityX=Nt.x,j.overallVelocityY=Nt.y,j.overallVelocity=D(Nt.x)>D(Nt.y)?Nt.x:Nt.y,j.scale=ht?function di(F,j){return pi(j[0],j[1],zt)/pi(F[0],F[1],zt)}(ht.pointers,fe):1,j.rotation=ht?function Ji(F,j){return hi(j[1],j[0],zt)+hi(F[1],F[0],zt)}(ht.pointers,fe):0,j.maxPointers=te.prevInput?j.pointers.length>te.prevInput.maxPointers?j.pointers.length:te.prevInput.maxPointers:j.pointers.length,function $t(F,j){var Pe,Ve,ht,Tt,te=F.lastInterval||j,fe=j.timeStamp-te.timeStamp;if(j.eventType!=Ue&&(fe>ye||te.velocity===v)){var Mt=j.deltaX-te.deltaX,Nt=j.deltaY-te.deltaY,ri=xi(fe,Mt,Nt);Ve=ri.x,ht=ri.y,Pe=D(ri.x)>D(ri.y)?ri.x:ri.y,Tt=as(Mt,Nt),F.lastInterval=j}else Pe=te.velocity,Ve=te.velocityX,ht=te.velocityY,Tt=te.direction;j.velocity=Pe,j.velocityX=Ve,j.velocityY=ht,j.direction=Tt}(te,j);var ri=F.element;X(j.srcEvent.target,ri)&&(ri=j.srcEvent.target),j.target=ri}(F,te),F.emit("hammer.input",te),F.recognize(te),F.session.prevInput=te}function Ut(F){for(var j=[],te=0;te<F.pointers.length;)j[te]={clientX:w(F.pointers[te].clientX),clientY:w(F.pointers[te].clientY)},te++;return{timeStamp:L(),pointers:j,center:pt(j),deltaX:F.deltaX,deltaY:F.deltaY}}function pt(F){var j=F.length;if(1===j)return{x:w(F[0].clientX),y:w(F[0].clientY)};for(var te=0,fe=0,Pe=0;Pe<j;)te+=F[Pe].clientX,fe+=F[Pe].clientY,Pe++;return{x:w(te/j),y:w(fe/j)}}function xi(F,j,te){return{x:j/F||0,y:te/F||0}}function as(F,j){return F===j?nt:D(F)>=D(j)?F<0?Te:Ae:j<0?Je:tt}function pi(F,j,te){te||(te=bt);var fe=j[te[0]]-F[te[0]],Pe=j[te[1]]-F[te[1]];return Math.sqrt(fe*fe+Pe*Pe)}function hi(F,j,te){return te||(te=bt),180*Math.atan2(j[te[1]]-F[te[1]],j[te[0]]-F[te[0]])/Math.PI}ct.prototype={handler:function(){},init:function(){this.evEl&&K(this.element,this.evEl,this.domHandler),this.evTarget&&K(this.target,this.evTarget,this.domHandler),this.evWin&&K(re(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ie(this.element,this.evEl,this.domHandler),this.evTarget&&ie(this.target,this.evTarget,this.domHandler),this.evWin&&ie(re(this.element),this.evWin,this.domHandler)}};var Ni={mousedown:$e,mousemove:2,mouseup:Ze},es="mousedown",Ei="mousemove mouseup";function ki(){this.evEl=es,this.evWin=Ei,this.pressed=!1,ct.apply(this,arguments)}A(ki,ct,{handler:function(j){var te=Ni[j.type];te&$e&&0===j.button&&(this.pressed=!0),2&te&&1!==j.which&&(te=Ze),this.pressed&&(te&Ze&&(this.pressed=!1),this.callback(this.manager,te,{pointers:[j],changedPointers:[j],pointerType:le,srcEvent:j}))}});var Wi={pointerdown:$e,pointermove:2,pointerup:Ze,pointercancel:Ue,pointerout:Ue},kt={2:Ke,3:"pen",4:le,5:"kinect"},Yt="pointerdown",Ai="pointermove pointerup pointercancel";function gi(){this.evEl=Yt,this.evWin=Ai,ct.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}u.MSPointerEvent&&!u.PointerEvent&&(Yt="MSPointerDown",Ai="MSPointerMove MSPointerUp MSPointerCancel"),A(gi,ct,{handler:function(j){var te=this.store,fe=!1,Pe=j.type.toLowerCase().replace("ms",""),Ve=Wi[Pe],ht=kt[j.pointerType]||j.pointerType,Tt=ht==Ke,Mt=ve(te,j.pointerId,"pointerId");Ve&$e&&(0===j.button||Tt)?Mt<0&&(te.push(j),Mt=te.length-1):Ve&(Ze|Ue)&&(fe=!0),!(Mt<0)&&(te[Mt]=j,this.callback(this.manager,Ve,{pointers:te,changedPointers:[j],pointerType:ht,srcEvent:j}),fe&&te.splice(Mt,1))}});var wi={touchstart:$e,touchmove:2,touchend:Ze,touchcancel:Ue};function At(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,ct.apply(this,arguments)}function ei(F,j){var te=De(F.touches),fe=De(F.changedTouches);return j&(Ze|Ue)&&(te=Ce(te.concat(fe),"identifier",!0)),[te,fe]}A(At,ct,{handler:function(j){var te=wi[j.type];if(te===$e&&(this.started=!0),this.started){var fe=ei.call(this,j,te);te&(Ze|Ue)&&fe[0].length-fe[1].length==0&&(this.started=!1),this.callback(this.manager,te,{pointers:fe[0],changedPointers:fe[1],pointerType:Ke,srcEvent:j})}}});var Ui={touchstart:$e,touchmove:2,touchend:Ze,touchcancel:Ue},Ht="touchstart touchmove touchend touchcancel";function Ot(){this.evTarget=Ht,this.targetIds={},ct.apply(this,arguments)}function ts(F,j){var te=De(F.touches),fe=this.targetIds;if(j&(2|$e)&&1===te.length)return fe[te[0].identifier]=!0,[te,te];var Pe,Ve,ht=De(F.changedTouches),Tt=[],Mt=this.target;if(Ve=te.filter(function(Nt){return X(Nt.target,Mt)}),j===$e)for(Pe=0;Pe<Ve.length;)fe[Ve[Pe].identifier]=!0,Pe++;for(Pe=0;Pe<ht.length;)fe[ht[Pe].identifier]&&Tt.push(ht[Pe]),j&(Ze|Ue)&&delete fe[ht[Pe].identifier],Pe++;return Tt.length?[Ce(Ve.concat(Tt),"identifier",!0),Tt]:void 0}A(Ot,ct,{handler:function(j){var te=Ui[j.type],fe=ts.call(this,j,te);fe&&this.callback(this.manager,te,{pointers:fe[0],changedPointers:fe[1],pointerType:Ke,srcEvent:j})}});var ls=2500;function oi(){ct.apply(this,arguments);var F=R(this.handler,this);this.touch=new Ot(this.manager,F),this.mouse=new ki(this.manager,F),this.primaryTouch=null,this.lastTouches=[]}function cs(F,j){F&$e?(this.primaryTouch=j.changedPointers[0].identifier,Pi.call(this,j)):F&(Ze|Ue)&&Pi.call(this,j)}function Pi(F){var j=F.changedPointers[0];if(j.identifier===this.primaryTouch){var te={x:j.clientX,y:j.clientY};this.lastTouches.push(te);var fe=this.lastTouches;setTimeout(function(){var Ve=fe.indexOf(te);Ve>-1&&fe.splice(Ve,1)},ls)}}function W(F){for(var j=F.srcEvent.clientX,te=F.srcEvent.clientY,fe=0;fe<this.lastTouches.length;fe++){var Pe=this.lastTouches[fe],Ve=Math.abs(j-Pe.x),ht=Math.abs(te-Pe.y);if(Ve<=25&&ht<=25)return!0}return!1}A(oi,ct,{handler:function(j,te,fe){var Ve=fe.pointerType==le;if(!(Ve&&fe.sourceCapabilities&&fe.sourceCapabilities.firesTouchEvents)){if(fe.pointerType==Ke)cs.call(this,te,fe);else if(Ve&&W.call(this,fe))return;this.callback(j,te,fe)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var $=N(T.style,"touchAction"),q=$!==v,de="compute",Ee="manipulation",Me="none",Xe="pan-x",ot="pan-y",it=function Et(){if(!q)return!1;var F={},j=u.CSS&&u.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(te){F[te]=!j||u.CSS.supports("touch-action",te)}),F}();function st(F,j){this.manager=F,this.set(j)}st.prototype={set:function(F){F==de&&(F=this.compute()),q&&this.manager.element.style&&it[F]&&(this.manager.element.style[$]=F),this.actions=F.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var F=[];return f(this.manager.recognizers,function(j){C(j.options.enable,[j])&&(F=F.concat(j.getTouchAction()))}),function Pt(F){if(J(F,Me))return Me;var j=J(F,Xe),te=J(F,ot);return j&&te?Me:j||te?j?Xe:ot:J(F,Ee)?Ee:"auto"}(F.join(" "))},preventDefaults:function(F){var j=F.srcEvent,te=F.offsetDirection;if(!this.manager.session.prevented){var fe=this.actions,Pe=J(fe,Me)&&!it[Me],Ve=J(fe,ot)&&!it[ot],ht=J(fe,Xe)&&!it[Xe];if(Pe&&1===F.pointers.length&&F.distance<2&&F.deltaTime<250)return;return ht&&Ve||!(Pe||Ve&&te&_t||ht&&te&Wt)?void 0:this.preventSrc(j)}j.preventDefault()},preventSrc:function(F){this.manager.session.prevented=!0,F.preventDefault()}};var xt=1;function ui(F){this.options=d({},this.defaults,F||{}),this.id=function Q(){return G++}(),this.manager=null,this.options.enable=P(this.options.enable,!0),this.state=xt,this.simultaneous={},this.requireFail=[]}function Cs(F){return 16&F?"cancel":8&F?"end":4&F?"move":2&F?"start":""}function hs(F){return F==tt?"down":F==Je?"up":F==Te?"left":F==Ae?"right":""}function ji(F,j){var te=j.manager;return te?te.get(F):F}function Gt(){ui.apply(this,arguments)}function fi(){Gt.apply(this,arguments),this.pX=null,this.pY=null}function Ri(){Gt.apply(this,arguments)}function vi(){ui.apply(this,arguments),this._timer=null,this._input=null}function Vi(){Gt.apply(this,arguments)}function Ii(){Gt.apply(this,arguments)}function ii(){ui.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ti(F,j){return(j=j||{}).recognizers=P(j.recognizers,Ti.defaults.preset),new Bi(F,j)}function Bi(F,j){this.options=d({},Ti.defaults,j||{}),this.options.inputTarget=this.options.inputTarget||F,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=F,this.input=function Zt(F){return new(F.options.inputClass||(We?gi:Re?Ot:He?oi:ki))(F,Qt)}(this),this.touchAction=new st(this,this.options.touchAction),is(this,!0),f(this.options.recognizers,function(te){var fe=this.add(new te[0](te[1]));te[2]&&fe.recognizeWith(te[2]),te[3]&&fe.requireFailure(te[3])},this)}function is(F,j){var fe,te=F.element;te.style&&(f(F.options.cssProps,function(Pe,Ve){fe=N(te.style,Ve),j?(F.oldCssProps[fe]=te.style[fe],te.style[fe]=Pe):te.style[fe]=F.oldCssProps[fe]||""}),j||(F.oldCssProps={}))}ui.prototype={defaults:{},set:function(F){return d(this.options,F),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(F){if(l(F,"recognizeWith",this))return this;var j=this.simultaneous;return j[(F=ji(F,this)).id]||(j[F.id]=F,F.recognizeWith(this)),this},dropRecognizeWith:function(F){return l(F,"dropRecognizeWith",this)||(F=ji(F,this),delete this.simultaneous[F.id]),this},requireFailure:function(F){if(l(F,"requireFailure",this))return this;var j=this.requireFail;return-1===ve(j,F=ji(F,this))&&(j.push(F),F.requireFailure(this)),this},dropRequireFailure:function(F){if(l(F,"dropRequireFailure",this))return this;F=ji(F,this);var j=ve(this.requireFail,F);return j>-1&&this.requireFail.splice(j,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(F){return!!this.simultaneous[F.id]},emit:function(F){var j=this,te=this.state;function fe(Pe){j.manager.emit(Pe,F)}te<8&&fe(j.options.event+Cs(te)),fe(j.options.event),F.additionalEvent&&fe(F.additionalEvent),te>=8&&fe(j.options.event+Cs(te))},tryEmit:function(F){if(this.canEmit())return this.emit(F);this.state=32},canEmit:function(){for(var F=0;F<this.requireFail.length;){if(!(this.requireFail[F].state&(32|xt)))return!1;F++}return!0},recognize:function(F){var j=d({},F);if(!C(this.options.enable,[this,j]))return this.reset(),void(this.state=32);56&this.state&&(this.state=xt),this.state=this.process(j),30&this.state&&this.tryEmit(j)},process:function(F){},getTouchAction:function(){},reset:function(){}},A(Gt,ui,{defaults:{pointers:1},attrTest:function(F){var j=this.options.pointers;return 0===j||F.pointers.length===j},process:function(F){var j=this.state,te=F.eventType,fe=6&j,Pe=this.attrTest(F);return fe&&(te&Ue||!Pe)?16|j:fe||Pe?te&Ze?8|j:2&j?4|j:2:32}}),A(fi,Gt,{defaults:{event:"pan",threshold:10,pointers:1,direction:dt},getTouchAction:function(){var F=this.options.direction,j=[];return F&_t&&j.push(ot),F&Wt&&j.push(Xe),j},directionTest:function(F){var j=this.options,te=!0,fe=F.distance,Pe=F.direction,Ve=F.deltaX,ht=F.deltaY;return Pe&j.direction||(j.direction&_t?(Pe=0===Ve?nt:Ve<0?Te:Ae,te=Ve!=this.pX,fe=Math.abs(F.deltaX)):(Pe=0===ht?nt:ht<0?Je:tt,te=ht!=this.pY,fe=Math.abs(F.deltaY))),F.direction=Pe,te&&fe>j.threshold&&Pe&j.direction},attrTest:function(F){return Gt.prototype.attrTest.call(this,F)&&(2&this.state||!(2&this.state)&&this.directionTest(F))},emit:function(F){this.pX=F.deltaX,this.pY=F.deltaY;var j=hs(F.direction);j&&(F.additionalEvent=this.options.event+j),this._super.emit.call(this,F)}}),A(Ri,Gt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Me]},attrTest:function(F){return this._super.attrTest.call(this,F)&&(Math.abs(F.scale-1)>this.options.threshold||2&this.state)},emit:function(F){1!==F.scale&&(F.additionalEvent=this.options.event+(F.scale<1?"in":"out")),this._super.emit.call(this,F)}}),A(vi,ui,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(F){var j=this.options,te=F.pointers.length===j.pointers,fe=F.distance<j.threshold,Pe=F.deltaTime>j.time;if(this._input=F,!fe||!te||F.eventType&(Ze|Ue)&&!Pe)this.reset();else if(F.eventType&$e)this.reset(),this._timer=M(function(){this.state=8,this.tryEmit()},j.time,this);else if(F.eventType&Ze)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(F){8===this.state&&(F&&F.eventType&Ze?this.manager.emit(this.options.event+"up",F):(this._input.timeStamp=L(),this.manager.emit(this.options.event,this._input)))}}),A(Vi,Gt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Me]},attrTest:function(F){return this._super.attrTest.call(this,F)&&(Math.abs(F.rotation)>this.options.threshold||2&this.state)}}),A(Ii,Gt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:_t|Wt,pointers:1},getTouchAction:function(){return fi.prototype.getTouchAction.call(this)},attrTest:function(F){var te,j=this.options.direction;return j&(_t|Wt)?te=F.overallVelocity:j&_t?te=F.overallVelocityX:j&Wt&&(te=F.overallVelocityY),this._super.attrTest.call(this,F)&&j&F.offsetDirection&&F.distance>this.options.threshold&&F.maxPointers==this.options.pointers&&D(te)>this.options.velocity&&F.eventType&Ze},emit:function(F){var j=hs(F.offsetDirection);j&&this.manager.emit(this.options.event+j,F),this.manager.emit(this.options.event,F)}}),A(ii,ui,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ee]},process:function(F){var j=this.options,te=F.pointers.length===j.pointers,fe=F.distance<j.threshold,Pe=F.deltaTime<j.time;if(this.reset(),F.eventType&$e&&0===this.count)return this.failTimeout();if(fe&&Pe&&te){if(F.eventType!=Ze)return this.failTimeout();var Ve=!this.pTime||F.timeStamp-this.pTime<j.interval,ht=!this.pCenter||pi(this.pCenter,F.center)<j.posThreshold;if(this.pTime=F.timeStamp,this.pCenter=F.center,ht&&Ve?this.count+=1:this.count=1,this._input=F,0==this.count%j.taps)return this.hasRequireFailures()?(this._timer=M(function(){this.state=8,this.tryEmit()},j.interval,this),2):8}return 32},failTimeout:function(){return this._timer=M(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ti.VERSION="2.0.7",Ti.defaults={domEvents:!1,touchAction:de,enable:!0,inputTarget:null,inputClass:null,preset:[[Vi,{enable:!1}],[Ri,{enable:!1},["rotate"]],[Ii,{direction:_t}],[fi,{direction:_t},["swipe"]],[ii],[ii,{event:"doubletap",taps:2},["tap"]],[vi]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Bi.prototype={set:function(F){return d(this.options,F),F.touchAction&&this.touchAction.update(),F.inputTarget&&(this.input.destroy(),this.input.target=F.inputTarget,this.input.init()),this},stop:function(F){this.session.stopped=F?2:1},recognize:function(F){var j=this.session;if(!j.stopped){this.touchAction.preventDefaults(F);var te,fe=this.recognizers,Pe=j.curRecognizer;(!Pe||Pe&&8&Pe.state)&&(Pe=j.curRecognizer=null);for(var Ve=0;Ve<fe.length;)te=fe[Ve],2===j.stopped||Pe&&te!=Pe&&!te.canRecognizeWith(Pe)?te.reset():te.recognize(F),!Pe&&14&te.state&&(Pe=j.curRecognizer=te),Ve++}},get:function(F){if(F instanceof ui)return F;for(var j=this.recognizers,te=0;te<j.length;te++)if(j[te].options.event==F)return j[te];return null},add:function(F){if(l(F,"add",this))return this;var j=this.get(F.options.event);return j&&this.remove(j),this.recognizers.push(F),F.manager=this,this.touchAction.update(),F},remove:function(F){if(l(F,"remove",this))return this;if(F=this.get(F)){var j=this.recognizers,te=ve(j,F);-1!==te&&(j.splice(te,1),this.touchAction.update())}return this},on:function(F,j){if(F!==v&&j!==v){var te=this.handlers;return f(me(F),function(fe){te[fe]=te[fe]||[],te[fe].push(j)}),this}},off:function(F,j){if(F!==v){var te=this.handlers;return f(me(F),function(fe){j?te[fe]&&te[fe].splice(ve(te[fe],j),1):delete te[fe]}),this}},emit:function(F,j){this.options.domEvents&&function Ls(F,j){var te=he.createEvent("Event");te.initEvent(F,!0,!0),te.gesture=j,j.target.dispatchEvent(te)}(F,j);var te=this.handlers[F]&&this.handlers[F].slice();if(te&&te.length){j.type=F,j.preventDefault=function(){j.srcEvent.preventDefault()};for(var fe=0;fe<te.length;)te[fe](j),fe++}},destroy:function(){this.element&&is(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},d(Ti,{INPUT_START:$e,INPUT_MOVE:2,INPUT_END:Ze,INPUT_CANCEL:Ue,STATE_POSSIBLE:xt,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:nt,DIRECTION_LEFT:Te,DIRECTION_RIGHT:Ae,DIRECTION_UP:Je,DIRECTION_DOWN:tt,DIRECTION_HORIZONTAL:_t,DIRECTION_VERTICAL:Wt,DIRECTION_ALL:dt,Manager:Bi,Input:ct,TouchAction:st,TouchInput:Ot,MouseInput:ki,PointerEventInput:gi,TouchMouseInput:oi,SingleTouchInput:At,Recognizer:ui,AttrRecognizer:Gt,Tap:ii,Pan:fi,Swipe:Ii,Pinch:Ri,Rotate:Vi,Press:vi,on:K,off:ie,each:f,merge:E,extend:b,assign:d,inherit:A,bindFn:R,prefixed:N}),(typeof u<"u"?u:typeof self<"u"?self:{}).Hammer=Ti,(U=function(){return Ti}.call(qe,se,qe,Ct))!==v&&(Ct.exports=U)}(window,document)},6708:Ct=>{self,Ct.exports=(()=>{"use strict";var se,qe={};return se=qe,Object.defineProperty(se,"__esModule",{value:!0}),se.FitAddon=void 0,se.FitAddon=class{activate(U){this._terminal=U}dispose(){}fit(){const U=this.proposeDimensions();U&&this._terminal&&!isNaN(U.cols)&&!isNaN(U.rows)&&(this._terminal.rows===U.rows&&this._terminal.cols===U.cols||(this._terminal._core._renderService.clear(),this._terminal.resize(U.cols,U.rows)))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const U=this._terminal._core,u=U._renderService.dimensions;if(0===u.css.cell.width||0===u.css.cell.height)return;const he=0===this._terminal.options.scrollback?0:U.viewport.scrollBarWidth,g=window.getComputedStyle(this._terminal.element.parentElement),v=parseInt(g.getPropertyValue("height")),y=Math.max(0,parseInt(g.getPropertyValue("width"))),T=window.getComputedStyle(this._terminal.element),m=v-(parseInt(T.getPropertyValue("padding-top"))+parseInt(T.getPropertyValue("padding-bottom"))),w=y-(parseInt(T.getPropertyValue("padding-right"))+parseInt(T.getPropertyValue("padding-left")))-he;return{cols:Math.max(2,Math.floor(w/u.css.cell.width)),rows:Math.max(1,Math.floor(m/u.css.cell.height))}}},qe})()},6885:Ct=>{self,Ct.exports=(()=>{"use strict";var qe={4567:function(he,g,v){var y=this&&this.__decorate||function(d,b,E,A){var R,C=arguments.length,P=C<3?b:null===A?A=Object.getOwnPropertyDescriptor(b,E):A;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)P=Reflect.decorate(d,b,E,A);else for(var K=d.length-1;K>=0;K--)(R=d[K])&&(P=(C<3?R(P):C>3?R(b,E,P):R(b,E))||P);return C>3&&P&&Object.defineProperty(b,E,P),P},T=this&&this.__param||function(d,b){return function(E,A){b(E,A,d)}};Object.defineProperty(g,"__esModule",{value:!0}),g.AccessibilityManager=void 0;const m=v(9042),w=v(6114),D=v(9924),L=v(844),M=v(5596),l=v(4725),f=v(3656);let c=g.AccessibilityManager=class extends L.Disposable{constructor(d,b){super(),this._terminal=d,this._renderService=b,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let E=0;E<this._terminal.rows;E++)this._rowElements[E]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[E]);if(this._topBoundaryFocusListener=E=>this._handleBoundaryFocus(E,0),this._bottomBoundaryFocusListener=E=>this._handleBoundaryFocus(E,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new D.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(E=>this._handleResize(E.rows))),this.register(this._terminal.onRender(E=>this._refreshRows(E.start,E.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(E=>this._handleChar(E))),this.register(this._terminal.onLineFeed(()=>this._handleChar("\n"))),this.register(this._terminal.onA11yTab(E=>this._handleTab(E))),this.register(this._terminal.onKey(E=>this._handleKey(E.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new M.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,f.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,L.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(d){for(let b=0;b<d;b++)this._handleChar(" ")}_handleChar(d){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==d&&(this._charsToAnnounce+=d):this._charsToAnnounce+=d,"\n"===d&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=m.tooMuchOutput)),w.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,w.isMac&&this._liveRegion.remove()}_handleKey(d){this._clearLiveRegion(),/\p{Control}/u.test(d)||this._charsToConsume.push(d)}_refreshRows(d,b){this._liveRegionDebouncer.refresh(d,b,this._terminal.rows)}_renderRows(d,b){const E=this._terminal.buffer,A=E.lines.length.toString();for(let R=d;R<=b;R++){const C=E.translateBufferLineToString(E.ydisp+R,!0),P=(E.ydisp+R+1).toString(),K=this._rowElements[R];K&&(0===C.length?K.innerText="\xa0":K.textContent=C,K.setAttribute("aria-posinset",P),K.setAttribute("aria-setsize",A))}this._announceCharacters()}_announceCharacters(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(d,b){const E=d.target,A=this._rowElements[0===b?1:this._rowElements.length-2];if(E.getAttribute("aria-posinset")===(0===b?"1":`${this._terminal.buffer.lines.length}`)||d.relatedTarget!==A)return;let R,C;if(0===b?(R=E,C=this._rowElements.pop(),this._rowContainer.removeChild(C)):(R=this._rowElements.shift(),C=E,this._rowContainer.removeChild(R)),R.removeEventListener("focus",this._topBoundaryFocusListener),C.removeEventListener("focus",this._bottomBoundaryFocusListener),0===b){const P=this._createAccessibilityTreeNode();this._rowElements.unshift(P),this._rowContainer.insertAdjacentElement("afterbegin",P)}else{const P=this._createAccessibilityTreeNode();this._rowElements.push(P),this._rowContainer.appendChild(P)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===b?-1:1),this._rowElements[0===b?1:this._rowElements.length-2].focus(),d.preventDefault(),d.stopImmediatePropagation()}_handleResize(d){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let b=this._rowContainer.children.length;b<this._terminal.rows;b++)this._rowElements[b]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[b]);for(;this._rowElements.length>d;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const d=document.createElement("div");return d.setAttribute("role","listitem"),d.tabIndex=-1,this._refreshRowDimensions(d),d}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let d=0;d<this._terminal.rows;d++)this._refreshRowDimensions(this._rowElements[d])}}_refreshRowDimensions(d){d.style.height=`${this._renderService.dimensions.css.cell.height}px`}};g.AccessibilityManager=c=y([T(1,l.IRenderService)],c)},3614:(he,g)=>{function v(w){return w.replace(/\r?\n/g,"\r")}function y(w,D){return D?"\x1b[200~"+w+"\x1b[201~":w}function T(w,D,L,M){w=y(w=v(w),L.decPrivateModes.bracketedPasteMode&&!0!==M.rawOptions.ignoreBracketedPasteMode),L.triggerDataEvent(w,!0),D.value=""}function m(w,D,L){const M=L.getBoundingClientRect(),l=w.clientX-M.left-10,f=w.clientY-M.top-10;D.style.width="20px",D.style.height="20px",D.style.left=`${l}px`,D.style.top=`${f}px`,D.style.zIndex="1000",D.focus()}Object.defineProperty(g,"__esModule",{value:!0}),g.rightClickHandler=g.moveTextAreaUnderMouseCursor=g.paste=g.handlePasteEvent=g.copyHandler=g.bracketTextForPaste=g.prepareTextForTerminal=void 0,g.prepareTextForTerminal=v,g.bracketTextForPaste=y,g.copyHandler=function(w,D){w.clipboardData&&w.clipboardData.setData("text/plain",D.selectionText),w.preventDefault()},g.handlePasteEvent=function(w,D,L,M){w.stopPropagation(),w.clipboardData&&T(w.clipboardData.getData("text/plain"),D,L,M)},g.paste=T,g.moveTextAreaUnderMouseCursor=m,g.rightClickHandler=function(w,D,L,M,l){m(w,D,L),l&&M.rightClickSelect(w),D.value=M.selectionText,D.select()}},7239:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.ColorContrastCache=void 0;const y=v(1505);g.ColorContrastCache=class{constructor(){this._color=new y.TwoKeyMap,this._css=new y.TwoKeyMap}setCss(T,m,w){this._css.set(T,m,w)}getCss(T,m){return this._css.get(T,m)}setColor(T,m,w){this._color.set(T,m,w)}getColor(T,m){return this._color.get(T,m)}clear(){this._color.clear(),this._css.clear()}}},3656:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.addDisposableDomListener=void 0,g.addDisposableDomListener=function(v,y,T,m){v.addEventListener(y,T,m);let w=!1;return{dispose:()=>{w||(w=!0,v.removeEventListener(y,T,m))}}}},6465:function(he,g,v){var y=this&&this.__decorate||function(l,f,c,d){var b,E=arguments.length,A=E<3?f:null===d?d=Object.getOwnPropertyDescriptor(f,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(l,f,c,d);else for(var R=l.length-1;R>=0;R--)(b=l[R])&&(A=(E<3?b(A):E>3?b(f,c,A):b(f,c))||A);return E>3&&A&&Object.defineProperty(f,c,A),A},T=this&&this.__param||function(l,f){return function(c,d){f(c,d,l)}};Object.defineProperty(g,"__esModule",{value:!0}),g.Linkifier2=void 0;const m=v(3656),w=v(8460),D=v(844),L=v(2585);let M=g.Linkifier2=class extends D.Disposable{get currentLink(){return this._currentLink}constructor(l){super(),this._bufferService=l,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new w.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new w.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,D.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,D.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(l){return this._linkProviders.push(l),{dispose:()=>{const f=this._linkProviders.indexOf(l);-1!==f&&this._linkProviders.splice(f,1)}}}attachToDom(l,f,c){this._element=l,this._mouseService=f,this._renderService=c,this.register((0,m.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,m.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,m.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,m.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(l){if(this._lastMouseEvent=l,!this._element||!this._mouseService)return;const f=this._positionFromMouseEvent(l,this._element,this._mouseService);if(!f)return;this._isMouseOut=!1;const c=l.composedPath();for(let d=0;d<c.length;d++){const b=c[d];if(b.classList.contains("xterm"))break;if(b.classList.contains("xterm-hover"))return}this._lastBufferCell&&f.x===this._lastBufferCell.x&&f.y===this._lastBufferCell.y||(this._handleHover(f),this._lastBufferCell=f)}_handleHover(l){if(this._activeLine!==l.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(l,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,l)||(this._clearCurrentLink(),this._askForLink(l,!0))}_askForLink(l,f){var c,d;this._activeProviderReplies&&f||(null===(c=this._activeProviderReplies)||void 0===c||c.forEach(E=>{E?.forEach(A=>{A.link.dispose&&A.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=l.y);let b=!1;for(const[E,A]of this._linkProviders.entries())f?null!==(d=this._activeProviderReplies)&&void 0!==d&&d.get(E)&&(b=this._checkLinkProviderResult(E,l,b)):A.provideLinks(l.y,R=>{var C,P;if(this._isMouseOut)return;const K=R?.map(ie=>({link:ie}));null===(C=this._activeProviderReplies)||void 0===C||C.set(E,K),b=this._checkLinkProviderResult(E,l,b),(null===(P=this._activeProviderReplies)||void 0===P?void 0:P.size)===this._linkProviders.length&&this._removeIntersectingLinks(l.y,this._activeProviderReplies)})}_removeIntersectingLinks(l,f){const c=new Set;for(let d=0;d<f.size;d++){const b=f.get(d);if(b)for(let E=0;E<b.length;E++){const A=b[E],C=A.link.range.end.y>l?this._bufferService.cols:A.link.range.end.x;for(let P=A.link.range.start.y<l?0:A.link.range.start.x;P<=C;P++){if(c.has(P)){b.splice(E--,1);break}c.add(P)}}}}_checkLinkProviderResult(l,f,c){var d;if(!this._activeProviderReplies)return c;const b=this._activeProviderReplies.get(l);let E=!1;for(let A=0;A<l;A++)this._activeProviderReplies.has(A)&&!this._activeProviderReplies.get(A)||(E=!0);if(!E&&b){const A=b.find(R=>this._linkAtPosition(R.link,f));A&&(c=!0,this._handleNewLink(A))}if(this._activeProviderReplies.size===this._linkProviders.length&&!c)for(let A=0;A<this._activeProviderReplies.size;A++){const R=null===(d=this._activeProviderReplies.get(A))||void 0===d?void 0:d.find(C=>this._linkAtPosition(C.link,f));if(R){c=!0,this._handleNewLink(R);break}}return c}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(l){if(!this._element||!this._mouseService||!this._currentLink)return;const f=this._positionFromMouseEvent(l,this._element,this._mouseService);f&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,f)&&this._currentLink.link.activate(l,this._currentLink.link.text)}_clearCurrentLink(l,f){this._element&&this._currentLink&&this._lastMouseEvent&&(!l||!f||this._currentLink.link.range.start.y>=l&&this._currentLink.link.range.end.y<=f)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,D.disposeArray)(this._linkCacheDisposables))}_handleNewLink(l){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const f=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);f&&this._linkAtPosition(l.link,f)&&(this._currentLink=l,this._currentLink.state={decorations:{underline:void 0===l.link.decorations||l.link.decorations.underline,pointerCursor:void 0===l.link.decorations||l.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,l.link,this._lastMouseEvent),l.link.decorations={},Object.defineProperties(l.link.decorations,{pointerCursor:{get:()=>{var c,d;return null===(d=null===(c=this._currentLink)||void 0===c?void 0:c.state)||void 0===d?void 0:d.decorations.pointerCursor},set:c=>{var d,b;null!==(d=this._currentLink)&&void 0!==d&&d.state&&this._currentLink.state.decorations.pointerCursor!==c&&(this._currentLink.state.decorations.pointerCursor=c,this._currentLink.state.isHovered&&(null===(b=this._element)||void 0===b||b.classList.toggle("xterm-cursor-pointer",c)))}},underline:{get:()=>{var c,d;return null===(d=null===(c=this._currentLink)||void 0===c?void 0:c.state)||void 0===d?void 0:d.decorations.underline},set:c=>{var d,b,E;null!==(d=this._currentLink)&&void 0!==d&&d.state&&(null===(E=null===(b=this._currentLink)||void 0===b?void 0:b.state)||void 0===E?void 0:E.decorations.underline)!==c&&(this._currentLink.state.decorations.underline=c,this._currentLink.state.isHovered&&this._fireUnderlineEvent(l.link,c))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(c=>{if(!this._currentLink)return;const d=0===c.start?0:c.start+1+this._bufferService.buffer.ydisp,b=this._bufferService.buffer.ydisp+1+c.end;if(this._currentLink.link.range.start.y>=d&&this._currentLink.link.range.end.y<=b&&(this._clearCurrentLink(d,b),this._lastMouseEvent&&this._element)){const E=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);E&&this._askForLink(E,!1)}})))}_linkHover(l,f,c){var d;!(null===(d=this._currentLink)||void 0===d)&&d.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(f,!0),this._currentLink.state.decorations.pointerCursor&&l.classList.add("xterm-cursor-pointer")),f.hover&&f.hover(c,f.text)}_fireUnderlineEvent(l,f){const c=l.range,d=this._bufferService.buffer.ydisp,b=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-d-1,c.end.x,c.end.y-d-1,void 0);(f?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(b)}_linkLeave(l,f,c){var d;!(null===(d=this._currentLink)||void 0===d)&&d.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(f,!1),this._currentLink.state.decorations.pointerCursor&&l.classList.remove("xterm-cursor-pointer")),f.leave&&f.leave(c,f.text)}_linkAtPosition(l,f){const b=f.y*this._bufferService.cols+f.x;return l.range.start.y*this._bufferService.cols+l.range.start.x<=b&&b<=l.range.end.y*this._bufferService.cols+l.range.end.x}_positionFromMouseEvent(l,f,c){const d=c.getCoords(l,f,this._bufferService.cols,this._bufferService.rows);if(d)return{x:d[0],y:d[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(l,f,c,d,b){return{x1:l,y1:f,x2:c,y2:d,cols:this._bufferService.cols,fg:b}}};g.Linkifier2=M=y([T(0,L.IBufferService)],M)},9042:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.tooMuchOutput=g.promptLabel=void 0,g.promptLabel="Terminal input",g.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(he,g,v){var y=this&&this.__decorate||function(M,l,f,c){var d,b=arguments.length,E=b<3?l:null===c?c=Object.getOwnPropertyDescriptor(l,f):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(M,l,f,c);else for(var A=M.length-1;A>=0;A--)(d=M[A])&&(E=(b<3?d(E):b>3?d(l,f,E):d(l,f))||E);return b>3&&E&&Object.defineProperty(l,f,E),E},T=this&&this.__param||function(M,l){return function(f,c){l(f,c,M)}};Object.defineProperty(g,"__esModule",{value:!0}),g.OscLinkProvider=void 0;const m=v(511),w=v(2585);let D=g.OscLinkProvider=class{constructor(M,l,f){this._bufferService=M,this._optionsService=l,this._oscLinkService=f}provideLinks(M,l){var f;const c=this._bufferService.buffer.lines.get(M-1);if(!c)return void l(void 0);const d=[],b=this._optionsService.rawOptions.linkHandler,E=new m.CellData,A=c.getTrimmedLength();let R=-1,C=-1,P=!1;for(let K=0;K<A;K++)if(-1!==C||c.hasContent(K)){if(c.loadCell(K,E),E.hasExtendedAttrs()&&E.extended.urlId){if(-1===C){C=K,R=E.extended.urlId;continue}P=E.extended.urlId!==R}else-1!==C&&(P=!0);if(P||-1!==C&&K===A-1){const ie=null===(f=this._oscLinkService.getLinkData(R))||void 0===f?void 0:f.uri;if(ie){const X={start:{x:C+1,y:M},end:{x:K+(P||K!==A-1?0:1),y:M}};let J=!1;if(!b?.allowNonHttpProtocols)try{const me=new URL(ie);["http:","https:"].includes(me.protocol)||(J=!0)}catch{J=!0}J||d.push({text:ie,range:X,activate:(me,ve)=>b?b.activate(me,ve,X):L(0,ve),hover:(me,ve)=>{var De;return null===(De=b?.hover)||void 0===De?void 0:De.call(b,me,ve,X)},leave:(me,ve)=>{var De;return null===(De=b?.leave)||void 0===De?void 0:De.call(b,me,ve,X)}})}P=!1,E.hasExtendedAttrs()&&E.extended.urlId?(C=K,R=E.extended.urlId):(C=-1,R=-1)}}l(d)}};function L(M,l){if(confirm(`Do you want to navigate to ${l}?\n\nWARNING: This link could potentially be dangerous`)){const f=window.open();if(f){try{f.opener=null}catch{}f.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}}g.OscLinkProvider=D=y([T(0,w.IBufferService),T(1,w.IOptionsService),T(2,w.IOscLinkService)],D)},6193:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.RenderDebouncer=void 0,g.RenderDebouncer=class{constructor(v,y){this._parentWindow=v,this._renderCallback=y,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(v){return this._refreshCallbacks.push(v),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(v,y,T){this._rowCount=T,v=void 0!==v?v:0,y=void 0!==y?y:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,v):v,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,y):y,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return void this._runRefreshCallbacks();const v=Math.max(this._rowStart,0),y=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(v,y),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const v of this._refreshCallbacks)v(0);this._refreshCallbacks=[]}}},5596:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.ScreenDprMonitor=void 0;const y=v(844);g.ScreenDprMonitor=class T extends y.Disposable{constructor(w){super(),this._parentWindow=w,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,y.toDisposable)(()=>{this.clearListener()}))}setListener(w){this._listener&&this.clearListener(),this._listener=w,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var w;this._outerListener&&(null===(w=this._resolutionMediaMatchList)||void 0===w||w.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}},3236:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.Terminal=void 0;const y=v(3614),T=v(3656),m=v(6465),w=v(9042),D=v(3730),L=v(1680),M=v(3107),l=v(5744),f=v(2950),c=v(1296),d=v(428),b=v(4269),E=v(5114),A=v(8934),R=v(3230),C=v(9312),P=v(4725),K=v(6731),ie=v(8055),X=v(8969),J=v(8460),me=v(844),ve=v(6114),De=v(8437),Ce=v(2584),N=v(7399),G=v(5941),Q=v(9074),re=v(2585),ke=v(5435),He=v(4567),We=typeof window<"u"?window.document:null;g.Terminal=class Re extends X.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(I={}){super(I),this.browser=ve,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new me.MutableDisposable),this._onCursorMove=this.register(new J.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new J.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new J.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new J.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new J.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new J.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new J.EventEmitter),this._onBlur=this.register(new J.EventEmitter),this._onA11yCharEmitter=this.register(new J.EventEmitter),this._onA11yTabEmitter=this.register(new J.EventEmitter),this._onWillOpen=this.register(new J.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(m.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(D.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(Q.DecorationService),this._instantiationService.setService(re.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((le,Se)=>this.refresh(le,Se))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(le=>this._reportWindowsOptions(le))),this.register(this._inputHandler.onColor(le=>this._handleColorEvent(le))),this.register((0,J.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,J.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,J.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,J.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(le=>this._afterResize(le.cols,le.rows))),this.register((0,me.toDisposable)(()=>{var le,Se;this._customKeyEventHandler=void 0,null===(Se=null===(le=this.element)||void 0===le?void 0:le.parentNode)||void 0===Se||Se.removeChild(this.element)}))}_handleColorEvent(I){if(this._themeService)for(const le of I){let Se,ye="";switch(le.index){case 256:Se="foreground",ye="10";break;case 257:Se="background",ye="11";break;case 258:Se="cursor",ye="12";break;default:Se="ansi",ye="4;"+le.index}switch(le.type){case 0:const $e=ie.color.toColorRGB("ansi"===Se?this._themeService.colors.ansi[le.index]:this._themeService.colors[Se]);this.coreService.triggerDataEvent(`${Ce.C0.ESC}]${ye};${(0,G.toRgbString)($e)}${Ce.C1_ESCAPED.ST}`);break;case 1:if("ansi"===Se)this._themeService.modifyColors(ze=>ze.ansi[le.index]=ie.rgba.toColor(...le.color));else{const ze=Se;this._themeService.modifyColors(Ze=>Ze[ze]=ie.rgba.toColor(...le.color))}break;case 2:this._themeService.restoreColor(le.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(I){I?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(He.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(I){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Ce.C0.ESC+"[I"),this.updateCursorStyle(I),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var I;return null===(I=this.textarea)||void 0===I?void 0:I.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Ce.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const le=this.buffer.lines.get(this.buffer.ybase+this.buffer.y);if(!le)return;const Se=Math.min(this.buffer.x,this.cols-1),ye=this._renderService.dimensions.css.cell.height,$e=le.getWidth(Se),ze=this._renderService.dimensions.css.cell.width*$e,Ze=this.buffer.y*this._renderService.dimensions.css.cell.height;this.textarea.style.left=Se*this._renderService.dimensions.css.cell.width+"px",this.textarea.style.top=Ze+"px",this.textarea.style.width=ze+"px",this.textarea.style.height=ye+"px",this.textarea.style.lineHeight=ye+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,T.addDisposableDomListener)(this.element,"copy",le=>{this.hasSelection()&&(0,y.copyHandler)(le,this._selectionService)}));const I=le=>(0,y.handlePasteEvent)(le,this.textarea,this.coreService,this.optionsService);this.register((0,T.addDisposableDomListener)(this.textarea,"paste",I)),this.register((0,T.addDisposableDomListener)(this.element,"paste",I)),this.register(ve.isFirefox?(0,T.addDisposableDomListener)(this.element,"mousedown",le=>{2===le.button&&(0,y.rightClickHandler)(le,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}):(0,T.addDisposableDomListener)(this.element,"contextmenu",le=>{(0,y.rightClickHandler)(le,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),ve.isLinux&&this.register((0,T.addDisposableDomListener)(this.element,"auxclick",le=>{1===le.button&&(0,y.moveTextAreaUnderMouseCursor)(le,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,T.addDisposableDomListener)(this.textarea,"keyup",I=>this._keyUp(I),!0)),this.register((0,T.addDisposableDomListener)(this.textarea,"keydown",I=>this._keyDown(I),!0)),this.register((0,T.addDisposableDomListener)(this.textarea,"keypress",I=>this._keyPress(I),!0)),this.register((0,T.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,T.addDisposableDomListener)(this.textarea,"compositionupdate",I=>this._compositionHelper.compositionupdate(I))),this.register((0,T.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,T.addDisposableDomListener)(this.textarea,"input",I=>this._inputEvent(I),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(I){var le;if(!I)throw new Error("Terminal requires a parent element.");I.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=I.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),I.appendChild(this.element);const Se=We.createDocumentFragment();this._viewportElement=We.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),Se.appendChild(this._viewportElement),this._viewportScrollArea=We.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=We.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=We.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),Se.appendChild(this.screenElement),this.textarea=We.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",w.promptLabel),ve.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(E.CoreBrowserService,this.textarea,null!==(le=this._document.defaultView)&&void 0!==le?le:window),this._instantiationService.setService(P.ICoreBrowserService,this._coreBrowserService),this.register((0,T.addDisposableDomListener)(this.textarea,"focus",ye=>this._handleTextAreaFocus(ye))),this.register((0,T.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(d.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(P.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(K.ThemeService),this._instantiationService.setService(P.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(b.CharacterJoinerService),this._instantiationService.setService(P.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(R.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(P.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(ye=>this._onRender.fire(ye))),this.onResize(ye=>this._renderService.resize(ye.cols,ye.rows)),this._compositionView=We.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(f.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(Se);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(A.MouseService),this._instantiationService.setService(P.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(L.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(ye=>this.scrollLines(ye.amount,ye.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(C.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(P.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(ye=>this.scrollLines(ye.amount,ye.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(ye=>this._renderService.handleSelectionChanged(ye.start,ye.end,ye.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(ye=>{this.textarea.value=ye,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(ye=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,T.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(M.BufferDecorationRenderer,this.screenElement)),this.register((0,T.addDisposableDomListener)(this.element,"mousedown",ye=>this._selectionService.handleMouseDown(ye))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(He.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",ye=>this._handleScreenReaderModeOptionChange(ye))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",ye=>{!this._overviewRulerRenderer&&ye&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(c.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const I=this,le=this.element;function Se(ze){const Ze=I._mouseService.getMouseReportCoords(ze,I.screenElement);if(!Ze)return!1;let Ue,nt;switch(ze.overrideType||ze.type){case"mousemove":nt=32,void 0===ze.buttons?(Ue=3,void 0!==ze.button&&(Ue=ze.button<3?ze.button:3)):Ue=1&ze.buttons?0:4&ze.buttons?1:2&ze.buttons?2:3;break;case"mouseup":nt=0,Ue=ze.button<3?ze.button:3;break;case"mousedown":nt=1,Ue=ze.button<3?ze.button:3;break;case"wheel":if(0===I.viewport.getLinesScrolled(ze))return!1;nt=ze.deltaY<0?0:1,Ue=4;break;default:return!1}return!(void 0===nt||void 0===Ue||Ue>4)&&I.coreMouseService.triggerMouseEvent({col:Ze.col,row:Ze.row,x:Ze.x,y:Ze.y,button:Ue,action:nt,ctrl:ze.ctrlKey,alt:ze.altKey,shift:ze.shiftKey})}const ye={mouseup:null,wheel:null,mousedrag:null,mousemove:null},$e={mouseup:ze=>(Se(ze),ze.buttons||(this._document.removeEventListener("mouseup",ye.mouseup),ye.mousedrag&&this._document.removeEventListener("mousemove",ye.mousedrag)),this.cancel(ze)),wheel:ze=>(Se(ze),this.cancel(ze,!0)),mousedrag:ze=>{ze.buttons&&Se(ze)},mousemove:ze=>{ze.buttons||Se(ze)}};this.register(this.coreMouseService.onProtocolChange(ze=>{ze?("debug"===this.optionsService.rawOptions.logLevel&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ze)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ze?ye.mousemove||(le.addEventListener("mousemove",$e.mousemove),ye.mousemove=$e.mousemove):(le.removeEventListener("mousemove",ye.mousemove),ye.mousemove=null),16&ze?ye.wheel||(le.addEventListener("wheel",$e.wheel,{passive:!1}),ye.wheel=$e.wheel):(le.removeEventListener("wheel",ye.wheel),ye.wheel=null),2&ze?ye.mouseup||(le.addEventListener("mouseup",$e.mouseup),ye.mouseup=$e.mouseup):(this._document.removeEventListener("mouseup",ye.mouseup),le.removeEventListener("mouseup",ye.mouseup),ye.mouseup=null),4&ze?ye.mousedrag||(ye.mousedrag=$e.mousedrag):(this._document.removeEventListener("mousemove",ye.mousedrag),ye.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,T.addDisposableDomListener)(le,"mousedown",ze=>{if(ze.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ze))return Se(ze),ye.mouseup&&this._document.addEventListener("mouseup",ye.mouseup),ye.mousedrag&&this._document.addEventListener("mousemove",ye.mousedrag),this.cancel(ze)})),this.register((0,T.addDisposableDomListener)(le,"wheel",ze=>{if(!ye.wheel){if(!this.buffer.hasScrollback){const Ze=this.viewport.getLinesScrolled(ze);if(0===Ze)return;const Ue=Ce.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ze.deltaY<0?"A":"B");let nt="";for(let Te=0;Te<Math.abs(Ze);Te++)nt+=Ue;return this.coreService.triggerDataEvent(nt,!0),this.cancel(ze,!0)}return this.viewport.handleWheel(ze)?this.cancel(ze):void 0}},{passive:!1})),this.register((0,T.addDisposableDomListener)(le,"touchstart",ze=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ze),this.cancel(ze)},{passive:!0})),this.register((0,T.addDisposableDomListener)(le,"touchmove",ze=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ze)?void 0:this.cancel(ze)},{passive:!1}))}refresh(I,le){var Se;null===(Se=this._renderService)||void 0===Se||Se.refreshRows(I,le)}updateCursorStyle(I){var le;null!==(le=this._selectionService)&&void 0!==le&&le.shouldColumnSelect(I)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(I,le,Se=0){var ye;1===Se?(super.scrollLines(I,le,Se),this.refresh(0,this.rows-1)):null===(ye=this.viewport)||void 0===ye||ye.scrollLines(I)}paste(I){(0,y.paste)(I,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(I){this._customKeyEventHandler=I}registerLinkProvider(I){return this.linkifier2.registerLinkProvider(I)}registerCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const le=this._characterJoinerService.register(I);return this.refresh(0,this.rows-1),le}deregisterCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(I)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(I){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+I)}registerDecoration(I){return this._decorationService.registerDecoration(I)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(I,le,Se){this._selectionService.setSelection(I,le,Se)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var I;null===(I=this._selectionService)||void 0===I||I.clearSelection()}selectAll(){var I;null===(I=this._selectionService)||void 0===I||I.selectAll()}selectLines(I,le){var Se;null===(Se=this._selectionService)||void 0===Se||Se.selectLines(I,le)}_keyDown(I){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&!1===this._customKeyEventHandler(I))return!1;const le=this.browser.isMac&&this.options.macOptionIsMeta&&I.altKey;if(!le&&!this._compositionHelper.keydown(I))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;le||"Dead"!==I.key&&"AltGraph"!==I.key||(this._unprocessedDeadKey=!0);const Se=(0,N.evaluateKeyboardEvent)(I,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(I),3===Se.type||2===Se.type){const ye=this.rows-1;return this.scrollLines(2===Se.type?-ye:ye),this.cancel(I,!0)}return 1===Se.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,I)||(Se.cancel&&this.cancel(I,!0),!Se.key||!!(I.key&&!I.ctrlKey&&!I.altKey&&!I.metaKey&&1===I.key.length&&I.key.charCodeAt(0)>=65&&I.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(Se.key!==Ce.C0.ETX&&Se.key!==Ce.C0.CR||(this.textarea.value=""),this._onKey.fire({key:Se.key,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(Se.key,!0),!this.optionsService.rawOptions.screenReaderMode||I.altKey||I.ctrlKey?this.cancel(I,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(I,le){const Se=I.isMac&&!this.options.macOptionIsMeta&&le.altKey&&!le.ctrlKey&&!le.metaKey||I.isWindows&&le.altKey&&le.ctrlKey&&!le.metaKey||I.isWindows&&le.getModifierState("AltGraph");return"keypress"===le.type?Se:Se&&(!le.keyCode||le.keyCode>47)}_keyUp(I){var le;this._keyDownSeen=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(I)||(16===(le=I).keyCode||17===le.keyCode||18===le.keyCode||this.focus(),this.updateCursorStyle(I),this._keyPressHandled=!1)}_keyPress(I){let le;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&!1===this._customKeyEventHandler(I))return!1;if(this.cancel(I),I.charCode)le=I.charCode;else if(null==I.which)le=I.keyCode;else{if(0===I.which||0===I.charCode)return!1;le=I.which}return!(!le||(I.altKey||I.ctrlKey||I.metaKey)&&!this._isThirdLevelShift(this.browser,I)||(le=String.fromCharCode(le),this._onKey.fire({key:le,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(le,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(I){return!(!I.data||"insertText"!==I.inputType||I.composed&&this._keyDownSeen||this.optionsService.rawOptions.screenReaderMode||this._keyPressHandled||(this._unprocessedDeadKey=!1,this.coreService.triggerDataEvent(I.data,!0),this.cancel(I),0))}resize(I,le){I!==this.cols||le!==this.rows?super.resize(I,le):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(I,le){var Se,ye;null===(Se=this._charSizeService)||void 0===Se||Se.measure(),null===(ye=this.viewport)||void 0===ye||ye.syncScrollArea(!0)}clear(){var I;if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let le=1;le<this.rows;le++)this.buffer.lines.push(this.buffer.getBlankLine(De.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),null===(I=this.viewport)||void 0===I||I.reset(),this.refresh(0,this.rows-1)}}reset(){var I,le;this.options.rows=this.rows,this.options.cols=this.cols;const Se=this._customKeyEventHandler;this._setup(),super.reset(),null===(I=this._selectionService)||void 0===I||I.reset(),this._decorationService.reset(),null===(le=this.viewport)||void 0===le||le.reset(),this._customKeyEventHandler=Se,this.refresh(0,this.rows-1)}clearTextureAtlas(){var I;null===(I=this._renderService)||void 0===I||I.clearTextureAtlas()}_reportFocus(){var I;null!==(I=this.element)&&void 0!==I&&I.classList.contains("focus")?this.coreService.triggerDataEvent(Ce.C0.ESC+"[I"):this.coreService.triggerDataEvent(Ce.C0.ESC+"[O")}_reportWindowsOptions(I){if(this._renderService)switch(I){case ke.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const le=this._renderService.dimensions.css.canvas.width.toFixed(0),Se=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Ce.C0.ESC}[4;${Se};${le}t`);break;case ke.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const ye=this._renderService.dimensions.css.cell.width.toFixed(0),$e=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Ce.C0.ESC}[6;${$e};${ye}t`)}}cancel(I,le){if(this.options.cancelEvents||le)return I.preventDefault(),I.stopPropagation(),!1}}},9924:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TimeBasedDebouncer=void 0,g.TimeBasedDebouncer=class{constructor(v,y=1e3){this._renderCallback=v,this._debounceThresholdMS=y,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(v,y,T){this._rowCount=T,v=void 0!==v?v:0,y=void 0!==y?y:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,v):v,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,y):y;const m=Date.now();if(m-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=m,this._innerRefresh();else if(!this._additionalRefreshRequested){const D=this._debounceThresholdMS-(m-this._lastRefreshMs);this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},D)}}_innerRefresh(){if(void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return;const v=Math.max(this._rowStart,0),y=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(v,y)}}},1680:function(he,g,v){var y=this&&this.__decorate||function(f,c,d,b){var E,A=arguments.length,R=A<3?c:null===b?b=Object.getOwnPropertyDescriptor(c,d):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(f,c,d,b);else for(var C=f.length-1;C>=0;C--)(E=f[C])&&(R=(A<3?E(R):A>3?E(c,d,R):E(c,d))||R);return A>3&&R&&Object.defineProperty(c,d,R),R},T=this&&this.__param||function(f,c){return function(d,b){c(d,b,f)}};Object.defineProperty(g,"__esModule",{value:!0}),g.Viewport=void 0;const m=v(3656),w=v(4725),D=v(8460),L=v(844),M=v(2585);let l=g.Viewport=class extends L.Disposable{constructor(f,c,d,b,E,A,R,C){super(),this._viewportElement=f,this._scrollArea=c,this._bufferService=d,this._optionsService=b,this._charSizeService=E,this._renderService=A,this._coreBrowserService=R,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new D.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,m.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(P=>this._activeBuffer=P.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(P=>this._renderDimensions=P)),this._handleThemeChange(C.colors),this.register(C.onChangeColors(P=>this._handleThemeChange(P))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(f){this._viewportElement.style.backgroundColor=f.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(f){if(f)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const c=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==c&&(this._lastRecordedBufferHeight=c,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const f=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==f&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=f),this._refreshAnimationFrame=null}syncScrollArea(f=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(f);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(f)}_handleScroll(f){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const c=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:c,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||-1===this._smoothScrollState.origin||-1===this._smoothScrollState.target)return;const f=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(f*(this._smoothScrollState.target-this._smoothScrollState.origin)),f<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(f,c){return!(c<0&&0!==this._viewportElement.scrollTop||c>0&&this._viewportElement.scrollTop+this._lastRecordedViewportHeight<this._lastRecordedBufferHeight)||(f.cancelable&&f.preventDefault(),!1)}handleWheel(f){const c=this._getPixelsScrolled(f);return 0!==c&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,-1===this._smoothScrollState.target?this._smoothScrollState.target=this._viewportElement.scrollTop+c:this._smoothScrollState.target+=c,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=c,this._bubbleScroll(f,c))}scrollLines(f){if(0!==f)if(this._optionsService.rawOptions.smoothScrollDuration){const c=f*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+c,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:f,suppressScrollEvent:!1})}_getPixelsScrolled(f){if(0===f.deltaY||f.shiftKey)return 0;let c=this._applyScrollModifier(f.deltaY,f);return f.deltaMode===WheelEvent.DOM_DELTA_LINE?c*=this._currentRowHeight:f.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c*=this._currentRowHeight*this._bufferService.rows),c}getBufferElements(f,c){var d;let b,E="";const A=[],R=c??this._bufferService.buffer.lines.length,C=this._bufferService.buffer.lines;for(let P=f;P<R;P++){const K=C.get(P);if(!K)continue;const ie=null===(d=C.get(P+1))||void 0===d?void 0:d.isWrapped;if(E+=K.translateToString(!ie),!ie||P===C.length-1){const X=document.createElement("div");X.textContent=E,A.push(X),E.length>0&&(b=X),E=""}}return{bufferElements:A,cursorElement:b}}getLinesScrolled(f){if(0===f.deltaY||f.shiftKey)return 0;let c=this._applyScrollModifier(f.deltaY,f);return f.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(c/=this._currentRowHeight+0,this._wheelPartialScroll+=c,c=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):f.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c*=this._bufferService.rows),c}_applyScrollModifier(f,c){const d=this._optionsService.rawOptions.fastScrollModifier;return"alt"===d&&c.altKey||"ctrl"===d&&c.ctrlKey||"shift"===d&&c.shiftKey?f*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:f*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(f){this._lastTouchY=f.touches[0].pageY}handleTouchMove(f){const c=this._lastTouchY-f.touches[0].pageY;return this._lastTouchY=f.touches[0].pageY,0!==c&&(this._viewportElement.scrollTop+=c,this._bubbleScroll(f,c))}};g.Viewport=l=y([T(2,M.IBufferService),T(3,M.IOptionsService),T(4,w.ICharSizeService),T(5,w.IRenderService),T(6,w.ICoreBrowserService),T(7,w.IThemeService)],l)},3107:function(he,g,v){var y=this&&this.__decorate||function(l,f,c,d){var b,E=arguments.length,A=E<3?f:null===d?d=Object.getOwnPropertyDescriptor(f,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(l,f,c,d);else for(var R=l.length-1;R>=0;R--)(b=l[R])&&(A=(E<3?b(A):E>3?b(f,c,A):b(f,c))||A);return E>3&&A&&Object.defineProperty(f,c,A),A},T=this&&this.__param||function(l,f){return function(c,d){f(c,d,l)}};Object.defineProperty(g,"__esModule",{value:!0}),g.BufferDecorationRenderer=void 0;const m=v(3656),w=v(4725),D=v(844),L=v(2585);let M=g.BufferDecorationRenderer=class extends D.Disposable{constructor(l,f,c,d){super(),this._screenElement=l,this._bufferService=f,this._decorationService=c,this._renderService=d,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,m.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(b=>this._removeDecoration(b))),this.register((0,D.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){void 0===this._animationFrame&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const l of this._decorationService.decorations)this._renderDecoration(l);this._dimensionsChanged=!1}_renderDecoration(l){this._refreshStyle(l),this._dimensionsChanged&&this._refreshXPosition(l)}_createElement(l){var f,c;const d=document.createElement("div");d.classList.add("xterm-decoration"),d.classList.toggle("xterm-decoration-top-layer","top"===(null===(f=l?.options)||void 0===f?void 0:f.layer)),d.style.width=`${Math.round((l.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,d.style.height=(l.options.height||1)*this._renderService.dimensions.css.cell.height+"px",d.style.top=(l.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",d.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const b=null!==(c=l.options.x)&&void 0!==c?c:0;return b&&b>this._bufferService.cols&&(d.style.display="none"),this._refreshXPosition(l,d),d}_refreshStyle(l){const f=l.marker.line-this._bufferService.buffers.active.ydisp;if(f<0||f>=this._bufferService.rows)l.element&&(l.element.style.display="none",l.onRenderEmitter.fire(l.element));else{let c=this._decorationElements.get(l);c||(c=this._createElement(l),l.element=c,this._decorationElements.set(l,c),this._container.appendChild(c),l.onDispose(()=>{this._decorationElements.delete(l),c.remove()})),c.style.top=f*this._renderService.dimensions.css.cell.height+"px",c.style.display=this._altBufferIsActive?"none":"block",l.onRenderEmitter.fire(c)}}_refreshXPosition(l,f=l.element){var c;if(!f)return;const d=null!==(c=l.options.x)&&void 0!==c?c:0;"right"===(l.options.anchor||"left")?f.style.right=d?d*this._renderService.dimensions.css.cell.width+"px":"":f.style.left=d?d*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(l){var f;null===(f=this._decorationElements.get(l))||void 0===f||f.remove(),this._decorationElements.delete(l),l.dispose()}};g.BufferDecorationRenderer=M=y([T(1,L.IBufferService),T(2,L.IDecorationService),T(3,w.IRenderService)],M)},5871:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.ColorZoneStore=void 0,g.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(v){if(v.options.overviewRulerOptions){for(const y of this._zones)if(y.color===v.options.overviewRulerOptions.color&&y.position===v.options.overviewRulerOptions.position){if(this._lineIntersectsZone(y,v.marker.line))return;if(this._lineAdjacentToZone(y,v.marker.line,v.options.overviewRulerOptions.position))return void this._addLineToZone(y,v.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=v.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=v.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=v.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=v.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:v.options.overviewRulerOptions.color,position:v.options.overviewRulerOptions.position,startBufferLine:v.marker.line,endBufferLine:v.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(v){this._linePadding=v}_lineIntersectsZone(v,y){return y>=v.startBufferLine&&y<=v.endBufferLine}_lineAdjacentToZone(v,y,T){return y>=v.startBufferLine-this._linePadding[T||"full"]&&y<=v.endBufferLine+this._linePadding[T||"full"]}_addLineToZone(v,y){v.startBufferLine=Math.min(v.startBufferLine,y),v.endBufferLine=Math.max(v.endBufferLine,y)}}},5744:function(he,g,v){var y=this&&this.__decorate||function(b,E,A,R){var C,P=arguments.length,K=P<3?E:null===R?R=Object.getOwnPropertyDescriptor(E,A):R;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)K=Reflect.decorate(b,E,A,R);else for(var ie=b.length-1;ie>=0;ie--)(C=b[ie])&&(K=(P<3?C(K):P>3?C(E,A,K):C(E,A))||K);return P>3&&K&&Object.defineProperty(E,A,K),K},T=this&&this.__param||function(b,E){return function(A,R){E(A,R,b)}};Object.defineProperty(g,"__esModule",{value:!0}),g.OverviewRulerRenderer=void 0;const m=v(5871),w=v(3656),D=v(4725),L=v(844),M=v(2585),l={full:0,left:0,center:0,right:0},f={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0};let d=g.OverviewRulerRenderer=class extends L.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(b,E,A,R,C,P,K){var ie;super(),this._viewportElement=b,this._screenElement=E,this._bufferService=A,this._decorationService=R,this._renderService=C,this._optionsService=P,this._coreBrowseService=K,this._colorZoneStore=new m.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),null===(ie=this._viewportElement.parentElement)||void 0===ie||ie.insertBefore(this._canvas,this._viewportElement);const X=this._canvas.getContext("2d");if(!X)throw new Error("Ctx cannot be null");this._ctx=X,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,L.toDisposable)(()=>{var J;null===(J=this._canvas)||void 0===J||J.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,w.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const b=Math.floor(this._canvas.width/3),E=Math.ceil(this._canvas.width/3);f.full=this._canvas.width,f.left=b,f.center=E,f.right=b,this._refreshDrawHeightConstants(),c.full=0,c.left=0,c.center=f.left,c.right=f.left+f.center}_refreshDrawHeightConstants(){l.full=Math.round(2*this._coreBrowseService.dpr);const E=Math.round(Math.max(Math.min(this._canvas.height/this._bufferService.buffer.lines.length,12),6)*this._coreBrowseService.dpr);l.left=E,l.center=E,l.right=E}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const E of this._decorationService.decorations)this._colorZoneStore.addDecoration(E);this._ctx.lineWidth=1;const b=this._colorZoneStore.zones;for(const E of b)"full"!==E.position&&this._renderColorZone(E);for(const E of b)"full"===E.position&&this._renderColorZone(E);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(b){this._ctx.fillStyle=b.color,this._ctx.fillRect(c[b.position||"full"],Math.round(b.startBufferLine/this._bufferService.buffers.active.lines.length*(this._canvas.height-1)-l[b.position||"full"]/2),f[b.position||"full"],Math.round((b.endBufferLine-b.startBufferLine)/this._bufferService.buffers.active.lines.length*(this._canvas.height-1)+l[b.position||"full"]))}_queueRefresh(b,E){this._shouldUpdateDimensions=b||this._shouldUpdateDimensions,this._shouldUpdateAnchor=E||this._shouldUpdateAnchor,void 0===this._animationFrame&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};g.OverviewRulerRenderer=d=y([T(2,M.IBufferService),T(3,M.IDecorationService),T(4,D.IRenderService),T(5,M.IOptionsService),T(6,D.ICoreBrowserService)],d)},2950:function(he,g,v){var y=this&&this.__decorate||function(M,l,f,c){var d,b=arguments.length,E=b<3?l:null===c?c=Object.getOwnPropertyDescriptor(l,f):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(M,l,f,c);else for(var A=M.length-1;A>=0;A--)(d=M[A])&&(E=(b<3?d(E):b>3?d(l,f,E):d(l,f))||E);return b>3&&E&&Object.defineProperty(l,f,E),E},T=this&&this.__param||function(M,l){return function(f,c){l(f,c,M)}};Object.defineProperty(g,"__esModule",{value:!0}),g.CompositionHelper=void 0;const m=v(4725),w=v(2585),D=v(2584);let L=g.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(M,l,f,c,d,b){this._textarea=M,this._compositionView=l,this._bufferService=f,this._optionsService=c,this._coreService=d,this._renderService=b,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(M){this._compositionView.textContent=M.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(M){if(this._isComposing||this._isSendingComposition){if(229===M.keyCode||16===M.keyCode||17===M.keyCode||18===M.keyCode)return!1;this._finalizeComposition(!1)}return 229!==M.keyCode||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(M){if(this._compositionView.classList.remove("active"),this._isComposing=!1,M){const l={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let f;this._isSendingComposition=!1,l.start+=this._dataAlreadySent.length,f=this._isComposing?this._textarea.value.substring(l.start,l.end):this._textarea.value.substring(l.start),f.length>0&&this._coreService.triggerDataEvent(f,!0)}},0)}else{this._isSendingComposition=!1;const l=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(l,!0)}}_handleAnyTextareaChanges(){const M=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const l=this._textarea.value,f=l.replace(M,"");this._dataAlreadySent=f,l.length>M.length?this._coreService.triggerDataEvent(f,!0):l.length<M.length?this._coreService.triggerDataEvent(`${D.C0.DEL}`,!0):l.length===M.length&&l!==M&&this._coreService.triggerDataEvent(l,!0)}},0)}updateCompositionElements(M){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const l=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),f=this._renderService.dimensions.css.cell.height,c=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,d=l*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=d+"px",this._compositionView.style.top=c+"px",this._compositionView.style.height=f+"px",this._compositionView.style.lineHeight=f+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const b=this._compositionView.getBoundingClientRect();this._textarea.style.left=d+"px",this._textarea.style.top=c+"px",this._textarea.style.width=Math.max(b.width,1)+"px",this._textarea.style.height=Math.max(b.height,1)+"px",this._textarea.style.lineHeight=b.height+"px"}M||setTimeout(()=>this.updateCompositionElements(!0),0)}}};g.CompositionHelper=L=y([T(2,w.IBufferService),T(3,w.IOptionsService),T(4,w.ICoreService),T(5,m.IRenderService)],L)},9806:(he,g)=>{function v(y,T,m){const w=m.getBoundingClientRect(),D=y.getComputedStyle(m),L=parseInt(D.getPropertyValue("padding-left")),M=parseInt(D.getPropertyValue("padding-top"));return[T.clientX-w.left-L,T.clientY-w.top-M]}Object.defineProperty(g,"__esModule",{value:!0}),g.getCoords=g.getCoordsRelativeToElement=void 0,g.getCoordsRelativeToElement=v,g.getCoords=function(y,T,m,w,D,L,M,l,f){if(!L)return;const c=v(y,T,m);return c?(c[0]=Math.ceil((c[0]+(f?M/2:0))/M),c[1]=Math.ceil(c[1]/l),c[0]=Math.min(Math.max(c[0],1),w+(f?1:0)),c[1]=Math.min(Math.max(c[1],1),D),c):void 0}},9504:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.moveToCellSequence=void 0;const y=v(2584);function T(l,f,c,d){const b=l-m(l,c),E=f-m(f,c);return M(Math.abs(b-E)-function(R,C,P){let K=0;const ie=R-m(R,P),X=C-m(C,P);for(let J=0;J<Math.abs(ie-X);J++){const me="A"===w(R,C)?-1:1,ve=P.buffer.lines.get(ie+me*J);ve?.isWrapped&&K++}return K}(l,f,c),L(w(l,f),d))}function m(l,f){let c=0,d=f.buffer.lines.get(l),b=d?.isWrapped;for(;b&&l>=0&&l<f.rows;)c++,d=f.buffer.lines.get(--l),b=d?.isWrapped;return c}function w(l,f){return l>f?"A":"B"}function D(l,f,c,d,b,E){let A=l,R=f,C="";for(;A!==c||R!==d;)A+=b?1:-1,b&&A>E.cols-1?(C+=E.buffer.translateBufferLineToString(R,!1,l,A),A=0,l=0,R++):!b&&A<0&&(C+=E.buffer.translateBufferLineToString(R,!1,0,l+1),A=E.cols-1,l=A,R--);return C+E.buffer.translateBufferLineToString(R,!1,l,A)}function L(l,f){return y.C0.ESC+(f?"O":"[")+l}function M(l,f){l=Math.floor(l);let c="";for(let d=0;d<l;d++)c+=f;return c}g.moveToCellSequence=function(l,f,c,d){const b=c.buffer.x,E=c.buffer.y;if(!c.buffer.hasScrollback)return C=b,(0===T(P=E,f,X=c,J=d).length?"":M(D(C,P,C,P-m(P,X),!1,X).length,L("D",J)))+T(E,f,c,d)+function(C,P,K,ie,X,J){let me;me=T(P,ie,X,J).length>0?ie-m(ie,X):P;const ve=ie,De=function(Ce,N,G,Q,re,ke){let He;return He=T(G,Q,re,ke).length>0?Q-m(Q,re):N,Ce<G&&He<=Q||Ce>=G&&He<Q?"C":"D"}(C,P,K,ie,X,J);return M(D(C,me,K,ve,"C"===De,X).length,L(De,J))}(b,E,l,f,c,d);var C,P,X,J;let A;if(E===f)return A=b>l?"D":"C",M(Math.abs(b-l),L(A,d));A=E>f?"D":"C";const R=Math.abs(E-f);return M(function(C,P){return P.cols-C}(E>f?l:b,c)+(R-1)*c.cols+1+((E>f?b:l)-1),L(A,d))}},1296:function(he,g,v){var y=this&&this.__decorate||function(X,J,me,ve){var De,Ce=arguments.length,N=Ce<3?J:null===ve?ve=Object.getOwnPropertyDescriptor(J,me):ve;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)N=Reflect.decorate(X,J,me,ve);else for(var G=X.length-1;G>=0;G--)(De=X[G])&&(N=(Ce<3?De(N):Ce>3?De(J,me,N):De(J,me))||N);return Ce>3&&N&&Object.defineProperty(J,me,N),N},T=this&&this.__param||function(X,J){return function(me,ve){J(me,ve,X)}};Object.defineProperty(g,"__esModule",{value:!0}),g.DomRenderer=void 0;const m=v(3787),w=v(2550),D=v(2223),L=v(6171),M=v(4725),l=v(8055),f=v(8460),c=v(844),d=v(2585),b="xterm-dom-renderer-owner-",E="xterm-rows",A="xterm-fg-",R="xterm-bg-",C="xterm-focus",P="xterm-selection";let K=1,ie=g.DomRenderer=class extends c.Disposable{constructor(X,J,me,ve,De,Ce,N,G,Q,re){super(),this._element=X,this._screenElement=J,this._viewportElement=me,this._linkifier2=ve,this._charSizeService=Ce,this._optionsService=N,this._bufferService=G,this._coreBrowserService=Q,this._themeService=re,this._terminalClass=K++,this._rowElements=[],this.onRequestRedraw=this.register(new f.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(E),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(P),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,L.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(ke=>this._injectCss(ke))),this._injectCss(this._themeService.colors),this._rowFactory=De.createInstance(m.DomRendererRowFactory,document),this._element.classList.add(b+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(ke=>this._handleLinkHover(ke))),this.register(this._linkifier2.onHideLinkUnderline(ke=>this._handleLinkLeave(ke))),this.register((0,c.toDisposable)(()=>{this._element.classList.remove(b+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new w.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const X=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*X,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*X),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/X),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/X),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const me of this._rowElements)me.style.width=`${this.dimensions.css.canvas.width}px`,me.style.height=`${this.dimensions.css.cell.height}px`,me.style.lineHeight=`${this.dimensions.css.cell.height}px`,me.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement)),this._dimensionsStyleElement.textContent=`${this._terminalSelector} .${E} span { display: inline-block; height: 100%; vertical-align: top;}`,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(X){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let J=`${this._terminalSelector} .${E} { color: ${X.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;J+=`${this._terminalSelector} .${E} .xterm-dim { color: ${l.color.multiplyOpacity(X.foreground,.5).css};}`,J+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,J+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",J+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${X.cursor.css};  color: ${X.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${X.cursor.css}; }}`,J+=`${this._terminalSelector} .${E}.${C} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${E}.${C} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-block { background-color: ${X.cursor.css}; color: ${X.cursorAccent.css};}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${X.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${X.cursor.css} inset;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${X.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,J+=`${this._terminalSelector} .${P} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${P} div { position: absolute; background-color: ${X.selectionBackgroundOpaque.css};}${this._terminalSelector} .${P} div { position: absolute; background-color: ${X.selectionInactiveBackgroundOpaque.css};}`;for(const[me,ve]of X.ansi.entries())J+=`${this._terminalSelector} .${A}${me} { color: ${ve.css}; }${this._terminalSelector} .${A}${me}.xterm-dim { color: ${l.color.multiplyOpacity(ve,.5).css}; }${this._terminalSelector} .${R}${me} { background-color: ${ve.css}; }`;J+=`${this._terminalSelector} .${A}${D.INVERTED_DEFAULT_COLOR} { color: ${l.color.opaque(X.background).css}; }${this._terminalSelector} .${A}${D.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${l.color.multiplyOpacity(l.color.opaque(X.background),.5).css}; }${this._terminalSelector} .${R}${D.INVERTED_DEFAULT_COLOR} { background-color: ${X.foreground.css}; }`,this._themeStyleElement.textContent=J}_setDefaultSpacing(){const X=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${X}px`,this._rowFactory.defaultSpacing=X}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(X,J){for(let me=this._rowElements.length;me<=J;me++){const ve=document.createElement("div");this._rowContainer.appendChild(ve),this._rowElements.push(ve)}for(;this._rowElements.length>J;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(X,J){this._refreshRowElements(X,J),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(C)}handleFocus(){this._rowContainer.classList.add(C),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(X,J,me){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(X,J,me),this.renderRows(0,this._bufferService.rows-1),!X||!J)return;const ve=X[1]-this._bufferService.buffer.ydisp,De=J[1]-this._bufferService.buffer.ydisp,Ce=Math.max(ve,0),N=Math.min(De,this._bufferService.rows-1);if(Ce>=this._bufferService.rows||N<0)return;const G=document.createDocumentFragment();if(me){const Q=X[0]>J[0];G.appendChild(this._createSelectionElement(Ce,Q?J[0]:X[0],Q?X[0]:J[0],N-Ce+1))}else G.appendChild(this._createSelectionElement(Ce,ve===Ce?X[0]:0,Ce===De?J[0]:this._bufferService.cols)),G.appendChild(this._createSelectionElement(Ce+1,0,this._bufferService.cols,N-Ce-1)),Ce!==N&&G.appendChild(this._createSelectionElement(N,0,De===N?J[0]:this._bufferService.cols));this._selectionContainer.appendChild(G)}_createSelectionElement(X,J,me,ve=1){const De=document.createElement("div");return De.style.height=ve*this.dimensions.css.cell.height+"px",De.style.top=X*this.dimensions.css.cell.height+"px",De.style.left=J*this.dimensions.css.cell.width+"px",De.style.width=this.dimensions.css.cell.width*(me-J)+"px",De}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const X of this._rowElements)X.replaceChildren()}renderRows(X,J){const me=this._bufferService.buffer,ve=me.ybase+me.y,De=Math.min(me.x,this._bufferService.cols-1),Ce=this._optionsService.rawOptions.cursorBlink,N=this._optionsService.rawOptions.cursorStyle,G=this._optionsService.rawOptions.cursorInactiveStyle;for(let Q=X;Q<=J;Q++){const re=Q+me.ydisp,ke=this._rowElements[Q],He=me.lines.get(re);if(!ke||!He)break;ke.replaceChildren(...this._rowFactory.createRow(He,re,re===ve,N,G,De,Ce,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${b}${this._terminalClass}`}_handleLinkHover(X){this._setCellUnderline(X.x1,X.x2,X.y1,X.y2,X.cols,!0)}_handleLinkLeave(X){this._setCellUnderline(X.x1,X.x2,X.y1,X.y2,X.cols,!1)}_setCellUnderline(X,J,me,ve,De,Ce){me<0&&(X=0),ve<0&&(J=0);const N=this._bufferService.rows-1;me=Math.max(Math.min(me,N),0),ve=Math.max(Math.min(ve,N),0),De=Math.min(De,this._bufferService.cols);const G=this._bufferService.buffer,Q=G.ybase+G.y,re=Math.min(G.x,De-1),ke=this._optionsService.rawOptions.cursorBlink,He=this._optionsService.rawOptions.cursorStyle,We=this._optionsService.rawOptions.cursorInactiveStyle;for(let Re=me;Re<=ve;++Re){const Ke=Re+G.ydisp,I=this._rowElements[Re],le=G.lines.get(Ke);if(!I||!le)break;I.replaceChildren(...this._rowFactory.createRow(le,Ke,Ke===Q,He,We,re,ke,this.dimensions.css.cell.width,this._widthCache,Ce?Re===me?X:0:-1,Ce?(Re===ve?J:De)-1:-1))}}};g.DomRenderer=ie=y([T(4,d.IInstantiationService),T(5,M.ICharSizeService),T(6,d.IOptionsService),T(7,d.IBufferService),T(8,M.ICoreBrowserService),T(9,M.IThemeService)],ie)},3787:function(he,g,v){var y=this&&this.__decorate||function(A,R,C,P){var K,ie=arguments.length,X=ie<3?R:null===P?P=Object.getOwnPropertyDescriptor(R,C):P;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)X=Reflect.decorate(A,R,C,P);else for(var J=A.length-1;J>=0;J--)(K=A[J])&&(X=(ie<3?K(X):ie>3?K(R,C,X):K(R,C))||X);return ie>3&&X&&Object.defineProperty(R,C,X),X},T=this&&this.__param||function(A,R){return function(C,P){R(C,P,A)}};Object.defineProperty(g,"__esModule",{value:!0}),g.DomRendererRowFactory=void 0;const m=v(2223),w=v(643),D=v(511),L=v(2585),M=v(8055),l=v(4725),f=v(4269),c=v(6171),d=v(3734);let b=g.DomRendererRowFactory=class{constructor(A,R,C,P,K,ie,X){this._document=A,this._characterJoinerService=R,this._optionsService=C,this._coreBrowserService=P,this._coreService=K,this._decorationService=ie,this._themeService=X,this._workCell=new D.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(A,R,C){this._selectionStart=A,this._selectionEnd=R,this._columnSelectMode=C}createRow(A,R,C,P,K,ie,X,J,me,ve,De){const Ce=[],N=this._characterJoinerService.getJoinedCharacters(R),G=this._themeService.colors;let Q,re=A.getNoBgTrimmedLength();C&&re<ie+1&&(re=ie+1);let ke=0,He="",We=0,Re=0,Ke=0,I=!1,le=0,Se=!1,ye=0;const $e=[],ze=-1!==ve&&-1!==De;for(let Ze=0;Ze<re;Ze++){A.loadCell(Ze,this._workCell);let Ue=this._workCell.getWidth();if(0===Ue)continue;let nt=!1,Te=Ze,Ae=this._workCell;if(N.length>0&&Ze===N[0][0]){nt=!0;const pt=N.shift();Ae=new f.JoinedCellData(this._workCell,A.translateToString(!0,pt[0],pt[1]),pt[1]-pt[0]),Te=pt[1]-1,Ue=Ae.getWidth()}const Je=this._isCellInSelection(Ze,R),tt=C&&Ze===ie,_t=ze&&Ze>=ve&&Ze<=De;let Wt=!1;this._decorationService.forEachDecorationAtCell(Ze,R,void 0,pt=>{Wt=!0});let dt=Ae.getChars()||w.WHITESPACE_CELL_CHAR;if(" "===dt&&(Ae.isUnderline()||Ae.isOverline())&&(dt="\xa0"),ye=Ue*J-me.get(dt,Ae.isBold(),Ae.isItalic()),Q){if(ke&&(Je&&Se||!Je&&!Se&&Ae.bg===We)&&(Je&&Se&&G.selectionForeground||Ae.fg===Re)&&Ae.extended.ext===Ke&&_t===I&&ye===le&&!tt&&!nt&&!Wt){He+=dt,ke++;continue}ke&&(Q.textContent=He),Q=this._document.createElement("span"),ke=0,He=""}else Q=this._document.createElement("span");if(We=Ae.bg,Re=Ae.fg,Ke=Ae.extended.ext,I=_t,le=ye,Se=Je,nt&&ie>=Ze&&ie<=Te&&(ie=Ze),!this._coreService.isCursorHidden&&tt)if($e.push("xterm-cursor"),this._coreBrowserService.isFocused)X&&$e.push("xterm-cursor-blink"),$e.push("bar"===P?"xterm-cursor-bar":"underline"===P?"xterm-cursor-underline":"xterm-cursor-block");else if(K)switch(K){case"outline":$e.push("xterm-cursor-outline");break;case"block":$e.push("xterm-cursor-block");break;case"bar":$e.push("xterm-cursor-bar");break;case"underline":$e.push("xterm-cursor-underline")}if(Ae.isBold()&&$e.push("xterm-bold"),Ae.isItalic()&&$e.push("xterm-italic"),Ae.isDim()&&$e.push("xterm-dim"),He=Ae.isInvisible()?w.WHITESPACE_CELL_CHAR:Ae.getChars()||w.WHITESPACE_CELL_CHAR,Ae.isUnderline()&&($e.push(`xterm-underline-${Ae.extended.underlineStyle}`)," "===He&&(He="\xa0"),!Ae.isUnderlineColorDefault()))if(Ae.isUnderlineColorRGB())Q.style.textDecorationColor=`rgb(${d.AttributeData.toColorRGB(Ae.getUnderlineColor()).join(",")})`;else{let pt=Ae.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Ae.isBold()&&pt<8&&(pt+=8),Q.style.textDecorationColor=G.ansi[pt].css}Ae.isOverline()&&($e.push("xterm-overline")," "===He&&(He="\xa0")),Ae.isStrikethrough()&&$e.push("xterm-strikethrough"),_t&&(Q.style.textDecoration="underline");let bt=Ae.getFgColor(),zt=Ae.getFgColorMode(),ct=Ae.getBgColor(),Zt=Ae.getBgColorMode();const Qt=!!Ae.isInverse();if(Qt){const pt=bt;bt=ct,ct=pt;const xi=zt;zt=Zt,Zt=xi}let Ft,Jt,$t,Ut=!1;switch(this._decorationService.forEachDecorationAtCell(Ze,R,void 0,pt=>{"top"!==pt.options.layer&&Ut||(pt.backgroundColorRGB&&(Zt=50331648,ct=pt.backgroundColorRGB.rgba>>8&16777215,Ft=pt.backgroundColorRGB),pt.foregroundColorRGB&&(zt=50331648,bt=pt.foregroundColorRGB.rgba>>8&16777215,Jt=pt.foregroundColorRGB),Ut="top"===pt.options.layer)}),!Ut&&Je&&(Ft=this._coreBrowserService.isFocused?G.selectionBackgroundOpaque:G.selectionInactiveBackgroundOpaque,ct=Ft.rgba>>8&16777215,Zt=50331648,Ut=!0,G.selectionForeground&&(zt=50331648,bt=G.selectionForeground.rgba>>8&16777215,Jt=G.selectionForeground)),Ut&&$e.push("xterm-decoration-top"),Zt){case 16777216:case 33554432:$t=G.ansi[ct],$e.push(`xterm-bg-${ct}`);break;case 50331648:$t=M.rgba.toColor(ct>>16,ct>>8&255,255&ct),this._addStyle(Q,`background-color:#${E((ct>>>0).toString(16),"0",6)}`);break;default:Qt?($t=G.foreground,$e.push(`xterm-bg-${m.INVERTED_DEFAULT_COLOR}`)):$t=G.background}switch(Ft||Ae.isDim()&&(Ft=M.color.multiplyOpacity($t,.5)),zt){case 16777216:case 33554432:Ae.isBold()&&bt<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(bt+=8),this._applyMinimumContrast(Q,$t,G.ansi[bt],Ae,Ft,void 0)||$e.push(`xterm-fg-${bt}`);break;case 50331648:const pt=M.rgba.toColor(bt>>16&255,bt>>8&255,255&bt);this._applyMinimumContrast(Q,$t,pt,Ae,Ft,Jt)||this._addStyle(Q,`color:#${E(bt.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(Q,$t,G.foreground,Ae,Ft,void 0)||Qt&&$e.push(`xterm-fg-${m.INVERTED_DEFAULT_COLOR}`)}$e.length&&(Q.className=$e.join(" "),$e.length=0),tt||nt||Wt?Q.textContent=He:ke++,ye!==this.defaultSpacing&&(Q.style.letterSpacing=`${ye}px`),Ce.push(Q),Ze=Te}return Q&&ke&&(Q.textContent=He),Ce}_applyMinimumContrast(A,R,C,P,K,ie){if(1===this._optionsService.rawOptions.minimumContrastRatio||(0,c.excludeFromContrastRatioDemands)(P.getCode()))return!1;const X=this._getContrastCache(P);let J;if(K||ie||(J=X.getColor(R.rgba,C.rgba)),void 0===J){const me=this._optionsService.rawOptions.minimumContrastRatio/(P.isDim()?2:1);J=M.color.ensureContrastRatio(K||R,ie||C,me),X.setColor((K||R).rgba,(ie||C).rgba,J??null)}return!!J&&(this._addStyle(A,`color:${J.css}`),!0)}_getContrastCache(A){return A.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(A,R){A.setAttribute("style",`${A.getAttribute("style")||""}${R};`)}_isCellInSelection(A,R){const C=this._selectionStart,P=this._selectionEnd;return!(!C||!P)&&(this._columnSelectMode?C[0]<=P[0]?A>=C[0]&&R>=C[1]&&A<P[0]&&R<=P[1]:A<C[0]&&R>=C[1]&&A>=P[0]&&R<=P[1]:R>C[1]&&R<P[1]||C[1]===P[1]&&R===C[1]&&A>=C[0]&&A<P[0]||C[1]<P[1]&&R===P[1]&&A<P[0]||C[1]<P[1]&&R===C[1]&&A>=C[0])}};function E(A,R,C){for(;A.length<C;)A=R+A;return A}g.DomRendererRowFactory=b=y([T(1,l.ICharacterJoinerService),T(2,L.IOptionsService),T(3,l.ICoreBrowserService),T(4,L.ICoreService),T(5,L.IDecorationService),T(6,l.IThemeService)],b)},2550:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.WidthCache=void 0,g.WidthCache=class{constructor(v){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=v.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const y=v.createElement("span"),T=v.createElement("span");T.style.fontWeight="bold";const m=v.createElement("span");m.style.fontStyle="italic";const w=v.createElement("span");w.style.fontWeight="bold",w.style.fontStyle="italic",this._measureElements=[y,T,m,w],this._container.appendChild(y),this._container.appendChild(T),this._container.appendChild(m),this._container.appendChild(w),v.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(v,y,T,m){v===this._font&&y===this._fontSize&&T===this._weight&&m===this._weightBold||(this._font=v,this._fontSize=y,this._weight=T,this._weightBold=m,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${T}`,this._measureElements[1].style.fontWeight=`${m}`,this._measureElements[2].style.fontWeight=`${T}`,this._measureElements[3].style.fontWeight=`${m}`,this.clear())}get(v,y,T){let m=0;if(!y&&!T&&1===v.length&&(m=v.charCodeAt(0))<256)return-9999!==this._flat[m]?this._flat[m]:this._flat[m]=this._measure(v,0);let w=v;y&&(w+="B"),T&&(w+="I");let D=this._holey.get(w);if(void 0===D){let L=0;y&&(L|=1),T&&(L|=2),D=this._measure(v,L),this._holey.set(w,D)}return D}_measure(v,y){const T=this._measureElements[y];return T.textContent=v.repeat(32),T.offsetWidth/32}}},2223:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TEXT_BASELINE=g.DIM_OPACITY=g.INVERTED_DEFAULT_COLOR=void 0;const y=v(6114);g.INVERTED_DEFAULT_COLOR=257,g.DIM_OPACITY=.5,g.TEXT_BASELINE=y.isFirefox||y.isLegacyEdge?"bottom":"ideographic"},6171:(he,g)=>{function v(y){return 57508<=y&&y<=57558}Object.defineProperty(g,"__esModule",{value:!0}),g.createRenderDimensions=g.excludeFromContrastRatioDemands=g.isRestrictedPowerlineGlyph=g.isPowerlineGlyph=g.throwIfFalsy=void 0,g.throwIfFalsy=function(y){if(!y)throw new Error("value must not be falsy");return y},g.isPowerlineGlyph=v,g.isRestrictedPowerlineGlyph=function(y){return 57520<=y&&y<=57527},g.excludeFromContrastRatioDemands=function(y){return v(y)||9472<=(T=y)&&T<=9631;var T},g.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.SelectionModel=void 0,g.SelectionModel=class{constructor(v){this._bufferService=v,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const v=this.selectionStart[0]+this.selectionStartLength;return v>this._bufferService.cols?v%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(v/this._bufferService.cols)-1]:[v%this._bufferService.cols,this.selectionStart[1]+Math.floor(v/this._bufferService.cols)]:[v,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const v=this.selectionStart[0]+this.selectionStartLength;return v>this._bufferService.cols?[v%this._bufferService.cols,this.selectionStart[1]+Math.floor(v/this._bufferService.cols)]:[Math.max(v,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const v=this.selectionStart,y=this.selectionEnd;return!(!v||!y)&&(v[1]>y[1]||v[1]===y[1]&&v[0]>y[0])}handleTrim(v){return this.selectionStart&&(this.selectionStart[1]-=v),this.selectionEnd&&(this.selectionEnd[1]-=v),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(he,g,v){var y=this&&this.__decorate||function(l,f,c,d){var b,E=arguments.length,A=E<3?f:null===d?d=Object.getOwnPropertyDescriptor(f,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(l,f,c,d);else for(var R=l.length-1;R>=0;R--)(b=l[R])&&(A=(E<3?b(A):E>3?b(f,c,A):b(f,c))||A);return E>3&&A&&Object.defineProperty(f,c,A),A},T=this&&this.__param||function(l,f){return function(c,d){f(c,d,l)}};Object.defineProperty(g,"__esModule",{value:!0}),g.CharSizeService=void 0;const m=v(2585),w=v(8460),D=v(844);let L=g.CharSizeService=class extends D.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(l,f,c){super(),this._optionsService=c,this.width=0,this.height=0,this._onCharSizeChange=this.register(new w.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new M(l,f,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const l=this._measureStrategy.measure();l.width===this.width&&l.height===this.height||(this.width=l.width,this.height=l.height,this._onCharSizeChange.fire())}};g.CharSizeService=L=y([T(2,m.IOptionsService)],L);class M{constructor(f,c,d){this._document=f,this._parentElement=c,this._optionsService=d,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const f={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return 0!==f.width&&0!==f.height&&(this._result.width=f.width/32,this._result.height=Math.ceil(f.height)),this._result}}},4269:function(he,g,v){var y=this&&this.__decorate||function(f,c,d,b){var E,A=arguments.length,R=A<3?c:null===b?b=Object.getOwnPropertyDescriptor(c,d):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(f,c,d,b);else for(var C=f.length-1;C>=0;C--)(E=f[C])&&(R=(A<3?E(R):A>3?E(c,d,R):E(c,d))||R);return A>3&&R&&Object.defineProperty(c,d,R),R},T=this&&this.__param||function(f,c){return function(d,b){c(d,b,f)}};Object.defineProperty(g,"__esModule",{value:!0}),g.CharacterJoinerService=g.JoinedCellData=void 0;const m=v(3734),w=v(643),D=v(511),L=v(2585);g.JoinedCellData=class M extends m.AttributeData{constructor(c,d,b){super(),this.content=0,this.combinedData="",this.fg=c.fg,this.bg=c.bg,this.combinedData=d,this._width=b}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(c){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}};let l=g.CharacterJoinerService=class eo{constructor(c){this._bufferService=c,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new D.CellData}register(c){const d={id:this._nextCharacterJoinerId++,handler:c};return this._characterJoiners.push(d),d.id}deregister(c){for(let d=0;d<this._characterJoiners.length;d++)if(this._characterJoiners[d].id===c)return this._characterJoiners.splice(d,1),!0;return!1}getJoinedCharacters(c){if(0===this._characterJoiners.length)return[];const d=this._bufferService.buffer.lines.get(c);if(!d||0===d.length)return[];const b=[],E=d.translateToString(!0);let A=0,R=0,C=0,P=d.getFg(0),K=d.getBg(0);for(let ie=0;ie<d.getTrimmedLength();ie++)if(d.loadCell(ie,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==P||this._workCell.bg!==K){if(ie-A>1){const X=this._getJoinedRanges(E,C,R,d,A);for(let J=0;J<X.length;J++)b.push(X[J])}A=ie,C=R,P=this._workCell.fg,K=this._workCell.bg}R+=this._workCell.getChars().length||w.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-A>1){const ie=this._getJoinedRanges(E,C,R,d,A);for(let X=0;X<ie.length;X++)b.push(ie[X])}return b}_getJoinedRanges(c,d,b,E,A){const R=c.substring(d,b);let C=[];try{C=this._characterJoiners[0].handler(R)}catch(P){console.error(P)}for(let P=1;P<this._characterJoiners.length;P++)try{const K=this._characterJoiners[P].handler(R);for(let ie=0;ie<K.length;ie++)eo._mergeRanges(C,K[ie])}catch(K){console.error(K)}return this._stringRangesToCellRanges(C,E,A),C}_stringRangesToCellRanges(c,d,b){let E=0,A=!1,R=0,C=c[E];if(C){for(let P=b;P<this._bufferService.cols;P++){const K=d.getWidth(P),ie=d.getString(P).length||w.WHITESPACE_CELL_CHAR.length;if(0!==K){if(!A&&C[0]<=R&&(C[0]=P,A=!0),C[1]<=R){if(C[1]=P,C=c[++E],!C)break;C[0]<=R?(C[0]=P,A=!0):A=!1}R+=ie}}C&&(C[1]=this._bufferService.cols)}}static _mergeRanges(c,d){let b=!1;for(let E=0;E<c.length;E++){const A=c[E];if(b){if(d[1]<=A[0])return c[E-1][1]=d[1],c;if(d[1]<=A[1])return c[E-1][1]=Math.max(d[1],A[1]),c.splice(E,1),c;c.splice(E,1),E--}else{if(d[1]<=A[0])return c.splice(E,0,d),c;if(d[1]<=A[1])return A[0]=Math.min(d[0],A[0]),c;d[0]<A[1]&&(A[0]=Math.min(d[0],A[0]),b=!0)}}return b?c[c.length-1][1]=d[1]:c.push(d),c}};g.CharacterJoinerService=l=y([T(0,L.IBufferService)],l)},5114:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.CoreBrowserService=void 0,g.CoreBrowserService=class{constructor(v,y){this._textarea=v,this.window=y,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return void 0===this._cachedIsFocused&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(he,g,v){var y=this&&this.__decorate||function(L,M,l,f){var c,d=arguments.length,b=d<3?M:null===f?f=Object.getOwnPropertyDescriptor(M,l):f;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(L,M,l,f);else for(var E=L.length-1;E>=0;E--)(c=L[E])&&(b=(d<3?c(b):d>3?c(M,l,b):c(M,l))||b);return d>3&&b&&Object.defineProperty(M,l,b),b},T=this&&this.__param||function(L,M){return function(l,f){M(l,f,L)}};Object.defineProperty(g,"__esModule",{value:!0}),g.MouseService=void 0;const m=v(4725),w=v(9806);let D=g.MouseService=class{constructor(L,M){this._renderService=L,this._charSizeService=M}getCoords(L,M,l,f,c){return(0,w.getCoords)(window,L,M,l,f,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,c)}getMouseReportCoords(L,M){const l=(0,w.getCoordsRelativeToElement)(window,L,M);if(this._charSizeService.hasValidSize)return l[0]=Math.min(Math.max(l[0],0),this._renderService.dimensions.css.canvas.width-1),l[1]=Math.min(Math.max(l[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(l[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(l[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(l[0]),y:Math.floor(l[1])}}};g.MouseService=D=y([T(0,m.IRenderService),T(1,m.ICharSizeService)],D)},3230:function(he,g,v){var y=this&&this.__decorate||function(b,E,A,R){var C,P=arguments.length,K=P<3?E:null===R?R=Object.getOwnPropertyDescriptor(E,A):R;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)K=Reflect.decorate(b,E,A,R);else for(var ie=b.length-1;ie>=0;ie--)(C=b[ie])&&(K=(P<3?C(K):P>3?C(E,A,K):C(E,A))||K);return P>3&&K&&Object.defineProperty(E,A,K),K},T=this&&this.__param||function(b,E){return function(A,R){E(A,R,b)}};Object.defineProperty(g,"__esModule",{value:!0}),g.RenderService=void 0;const m=v(3656),w=v(6193),D=v(5596),L=v(4725),M=v(8460),l=v(844),f=v(7226),c=v(2585);let d=g.RenderService=class extends l.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(b,E,A,R,C,P,K,ie){if(super(),this._rowCount=b,this._charSizeService=R,this._renderer=this.register(new l.MutableDisposable),this._pausedResizeTask=new f.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new M.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new M.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new M.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new w.RenderDebouncer(K.window,(X,J)=>this._renderRows(X,J)),this.register(this._renderDebouncer),this._screenDprMonitor=new D.ScreenDprMonitor(K.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(P.onResize(()=>this._fullRefresh())),this.register(P.buffers.onBufferActivate(()=>{var X;return null===(X=this._renderer.value)||void 0===X?void 0:X.clear()})),this.register(A.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(C.onDecorationRegistered(()=>this._fullRefresh())),this.register(C.onDecorationRemoved(()=>this._fullRefresh())),this.register(A.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(P.cols,P.rows),this._fullRefresh()})),this.register(A.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(P.buffer.y,P.buffer.y,!0))),this.register((0,m.addDisposableDomListener)(K.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(ie.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in K.window){const X=new K.window.IntersectionObserver(J=>this._handleIntersectionChange(J[J.length-1]),{threshold:0});X.observe(E),this.register({dispose:()=>X.disconnect()})}}_handleIntersectionChange(b){this._isPaused=void 0===b.isIntersecting?0===b.intersectionRatio:!b.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(b,E,A=!1){this._isPaused?this._needsFullRefresh=!0:(A||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(b,E,this._rowCount))}_renderRows(b,E){this._renderer.value&&(b=Math.min(b,this._rowCount-1),E=Math.min(E,this._rowCount-1),this._renderer.value.renderRows(b,E),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:b,end:E}),this._onRender.fire({start:b,end:E}),this._isNextRenderRedrawOnly=!0)}resize(b,E){this._rowCount=E,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(b){this._renderer.value=b,this._renderer.value.onRequestRedraw(E=>this.refreshRows(E.start,E.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(b){return this._renderDebouncer.addRefreshCallback(b)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var b,E;this._renderer.value&&(null===(E=(b=this._renderer.value).clearTextureAtlas)||void 0===E||E.call(b),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(b,E){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(b,E)):this._renderer.value.handleResize(b,E),this._fullRefresh())}handleCharSizeChanged(){var b;null===(b=this._renderer.value)||void 0===b||b.handleCharSizeChanged()}handleBlur(){var b;null===(b=this._renderer.value)||void 0===b||b.handleBlur()}handleFocus(){var b;null===(b=this._renderer.value)||void 0===b||b.handleFocus()}handleSelectionChanged(b,E,A){var R;this._selectionState.start=b,this._selectionState.end=E,this._selectionState.columnSelectMode=A,null===(R=this._renderer.value)||void 0===R||R.handleSelectionChanged(b,E,A)}handleCursorMove(){var b;null===(b=this._renderer.value)||void 0===b||b.handleCursorMove()}clear(){var b;null===(b=this._renderer.value)||void 0===b||b.clear()}};g.RenderService=d=y([T(2,c.IOptionsService),T(3,L.ICharSizeService),T(4,c.IDecorationService),T(5,c.IBufferService),T(6,L.ICoreBrowserService),T(7,L.IThemeService)],d)},9312:function(he,g,v){var y=this&&this.__decorate||function(C,P,K,ie){var X,J=arguments.length,me=J<3?P:null===ie?ie=Object.getOwnPropertyDescriptor(P,K):ie;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)me=Reflect.decorate(C,P,K,ie);else for(var ve=C.length-1;ve>=0;ve--)(X=C[ve])&&(me=(J<3?X(me):J>3?X(P,K,me):X(P,K))||me);return J>3&&me&&Object.defineProperty(P,K,me),me},T=this&&this.__param||function(C,P){return function(K,ie){P(K,ie,C)}};Object.defineProperty(g,"__esModule",{value:!0}),g.SelectionService=void 0;const m=v(9806),w=v(9504),D=v(456),L=v(4725),M=v(8460),l=v(844),f=v(6114),c=v(4841),d=v(511),b=v(2585),E=String.fromCharCode(160),A=new RegExp(E,"g");let R=g.SelectionService=class extends l.Disposable{constructor(C,P,K,ie,X,J,me,ve,De){super(),this._element=C,this._screenElement=P,this._linkifier=K,this._bufferService=ie,this._coreService=X,this._mouseService=J,this._optionsService=me,this._renderService=ve,this._coreBrowserService=De,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new d.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new M.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new M.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new M.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Ce=>this._handleMouseMove(Ce),this._mouseUpListener=Ce=>this._handleMouseUp(Ce),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Ce=>this._handleTrim(Ce)),this.register(this._bufferService.buffers.onBufferActivate(Ce=>this._handleBufferActivate(Ce))),this.enable(),this._model=new D.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,l.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const C=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;return!(!C||!P||C[0]===P[0]&&C[1]===P[1])}get selectionText(){const C=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;if(!C||!P)return"";const K=this._bufferService.buffer,ie=[];if(3===this._activeSelectionMode){if(C[0]===P[0])return"";const X=C[0]<P[0]?C[0]:P[0],J=C[0]<P[0]?P[0]:C[0];for(let me=C[1];me<=P[1];me++){const ve=K.translateBufferLineToString(me,!0,X,J);ie.push(ve)}}else{ie.push(K.translateBufferLineToString(C[1],!0,C[0],C[1]===P[1]?P[0]:void 0));for(let J=C[1]+1;J<=P[1]-1;J++){const me=K.lines.get(J),ve=K.translateBufferLineToString(J,!0);me?.isWrapped?ie[ie.length-1]+=ve:ie.push(ve)}if(C[1]!==P[1]){const J=K.lines.get(P[1]),me=K.translateBufferLineToString(P[1],!0,0,P[0]);J&&J.isWrapped?ie[ie.length-1]+=me:ie.push(me)}}return ie.map(X=>X.replace(A," ")).join(f.isWindows?"\r\n":"\n")}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(C){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),f.isLinux&&C&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})}_isClickInSelection(C){const P=this._getMouseBufferCoords(C),K=this._model.finalSelectionStart,ie=this._model.finalSelectionEnd;return!!(K&&ie&&P)&&this._areCoordsInSelection(P,K,ie)}isCellInSelection(C,P){const K=this._model.finalSelectionStart,ie=this._model.finalSelectionEnd;return!(!K||!ie)&&this._areCoordsInSelection([C,P],K,ie)}_areCoordsInSelection(C,P,K){return C[1]>P[1]&&C[1]<K[1]||P[1]===K[1]&&C[1]===P[1]&&C[0]>=P[0]&&C[0]<K[0]||P[1]<K[1]&&C[1]===K[1]&&C[0]<K[0]||P[1]<K[1]&&C[1]===P[1]&&C[0]>=P[0]}_selectWordAtCursor(C,P){var K,ie;const X=null===(ie=null===(K=this._linkifier.currentLink)||void 0===K?void 0:K.link)||void 0===ie?void 0:ie.range;if(X)return this._model.selectionStart=[X.start.x-1,X.start.y-1],this._model.selectionStartLength=(0,c.getRangeLength)(X,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const J=this._getMouseBufferCoords(C);return!!J&&(this._selectWordAt(J,P),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(C,P){this._model.clearSelection(),C=Math.max(C,0),P=Math.min(P,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,C],this._model.selectionEnd=[this._bufferService.cols,P],this.refresh(),this._onSelectionChange.fire()}_handleTrim(C){this._model.handleTrim(C)&&this.refresh()}_getMouseBufferCoords(C){const P=this._mouseService.getCoords(C,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(P)return P[0]--,P[1]--,P[1]+=this._bufferService.buffer.ydisp,P}_getMouseEventScrollAmount(C){let P=(0,m.getCoordsRelativeToElement)(this._coreBrowserService.window,C,this._screenElement)[1];const K=this._renderService.dimensions.css.canvas.height;return P>=0&&P<=K?0:(P>K&&(P-=K),P=Math.min(Math.max(P,-50),50),P/=50,P/Math.abs(P)+Math.round(14*P))}shouldForceSelection(C){return f.isMac?C.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:C.shiftKey}handleMouseDown(C){if(this._mouseDownTimeStamp=C.timeStamp,(2!==C.button||!this.hasSelection)&&0===C.button){if(!this._enabled){if(!this.shouldForceSelection(C))return;C.stopPropagation()}C.preventDefault(),this._dragScrollAmount=0,this._enabled&&C.shiftKey?this._handleIncrementalClick(C):1===C.detail?this._handleSingleClick(C):2===C.detail?this._handleDoubleClick(C):3===C.detail&&this._handleTripleClick(C),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(C){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(C))}_handleSingleClick(C){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(C)?3:0,this._model.selectionStart=this._getMouseBufferCoords(C),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const P=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);P&&P.length!==this._model.selectionStart[0]&&0===P.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}_handleDoubleClick(C){this._selectWordAtCursor(C,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(C){const P=this._getMouseBufferCoords(C);P&&(this._activeSelectionMode=2,this._selectLineAt(P[1]))}shouldColumnSelect(C){return C.altKey&&!(f.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(C){if(C.stopImmediatePropagation(),!this._model.selectionStart)return;const P=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(C),!this._model.selectionEnd)return void this.refresh(!0);2===this._activeSelectionMode?this._model.selectionEnd[0]=this._model.selectionEnd[1]<this._model.selectionStart[1]?0:this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(C),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const K=this._bufferService.buffer;if(this._model.selectionEnd[1]<K.lines.length){const ie=K.lines.get(this._model.selectionEnd[1]);ie&&0===ie.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}P&&P[0]===this._model.selectionEnd[0]&&P[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const C=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(C.ydisp+this._bufferService.rows,C.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=C.ydisp),this.refresh()}}_handleMouseUp(C){const P=C.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&P<500&&C.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const K=this._mouseService.getCoords(C,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(K&&void 0!==K[0]&&void 0!==K[1]){const ie=(0,w.moveToCellSequence)(K[0]-1,K[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(ie,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const C=this._model.finalSelectionStart,P=this._model.finalSelectionEnd,K=!(!C||!P||C[0]===P[0]&&C[1]===P[1]);K?C&&P&&(this._oldSelectionStart&&this._oldSelectionEnd&&C[0]===this._oldSelectionStart[0]&&C[1]===this._oldSelectionStart[1]&&P[0]===this._oldSelectionEnd[0]&&P[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(C,P,K)):this._oldHasSelection&&this._fireOnSelectionChange(C,P,K)}_fireOnSelectionChange(C,P,K){this._oldSelectionStart=C,this._oldSelectionEnd=P,this._oldHasSelection=K,this._onSelectionChange.fire()}_handleBufferActivate(C){this.clearSelection(),this._trimListener.dispose(),this._trimListener=C.activeBuffer.lines.onTrim(P=>this._handleTrim(P))}_convertViewportColToCharacterIndex(C,P){let K=P;for(let ie=0;P>=ie;ie++){const X=C.loadCell(ie,this._workCell).getChars().length;0===this._workCell.getWidth()?K--:X>1&&P!==ie&&(K+=X-1)}return K}setSelection(C,P,K){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[C,P],this._model.selectionStartLength=K,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(C){this._isClickInSelection(C)||(this._selectWordAtCursor(C,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(C,P,K=!0,ie=!0){if(C[0]>=this._bufferService.cols)return;const X=this._bufferService.buffer,J=X.lines.get(C[1]);if(!J)return;const me=X.translateBufferLineToString(C[1],!1);let ve=this._convertViewportColToCharacterIndex(J,C[0]),De=ve;const Ce=C[0]-ve;let N=0,G=0,Q=0,re=0;if(" "===me.charAt(ve)){for(;ve>0&&" "===me.charAt(ve-1);)ve--;for(;De<me.length&&" "===me.charAt(De+1);)De++}else{let We=C[0],Re=C[0];0===J.getWidth(We)&&(N++,We--),2===J.getWidth(Re)&&(G++,Re++);const Ke=J.getString(Re).length;for(Ke>1&&(re+=Ke-1,De+=Ke-1);We>0&&ve>0&&!this._isCharWordSeparator(J.loadCell(We-1,this._workCell));){J.loadCell(We-1,this._workCell);const I=this._workCell.getChars().length;0===this._workCell.getWidth()?(N++,We--):I>1&&(Q+=I-1,ve-=I-1),ve--,We--}for(;Re<J.length&&De+1<me.length&&!this._isCharWordSeparator(J.loadCell(Re+1,this._workCell));){J.loadCell(Re+1,this._workCell);const I=this._workCell.getChars().length;2===this._workCell.getWidth()?(G++,Re++):I>1&&(re+=I-1,De+=I-1),De++,Re++}}De++;let ke=ve+Ce-N+Q,He=Math.min(this._bufferService.cols,De-ve+N+G-Q-re);if(P||""!==me.slice(ve,De).trim()){if(K&&0===ke&&32!==J.getCodePoint(0)){const We=X.lines.get(C[1]-1);if(We&&J.isWrapped&&32!==We.getCodePoint(this._bufferService.cols-1)){const Re=this._getWordAt([this._bufferService.cols-1,C[1]-1],!1,!0,!1);if(Re){const Ke=this._bufferService.cols-Re.start;ke-=Ke,He+=Ke}}}if(ie&&ke+He===this._bufferService.cols&&32!==J.getCodePoint(this._bufferService.cols-1)){const We=X.lines.get(C[1]+1);if(We?.isWrapped&&32!==We.getCodePoint(0)){const Re=this._getWordAt([0,C[1]+1],!1,!1,!0);Re&&(He+=Re.length)}}return{start:ke,length:He}}}_selectWordAt(C,P){const K=this._getWordAt(C,P);if(K){for(;K.start<0;)K.start+=this._bufferService.cols,C[1]--;this._model.selectionStart=[K.start,C[1]],this._model.selectionStartLength=K.length}}_selectToWordAt(C){const P=this._getWordAt(C,!0);if(P){let K=C[1];for(;P.start<0;)P.start+=this._bufferService.cols,K--;if(!this._model.areSelectionValuesReversed())for(;P.start+P.length>this._bufferService.cols;)P.length-=this._bufferService.cols,K++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?P.start:P.start+P.length,K]}}_isCharWordSeparator(C){return 0!==C.getWidth()&&this._optionsService.rawOptions.wordSeparator.indexOf(C.getChars())>=0}_selectLineAt(C){const P=this._bufferService.buffer.getWrappedRangeForLine(C),K={start:{x:0,y:P.first},end:{x:this._bufferService.cols-1,y:P.last}};this._model.selectionStart=[0,P.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,c.getRangeLength)(K,this._bufferService.cols)}};g.SelectionService=R=y([T(3,b.IBufferService),T(4,b.ICoreService),T(5,L.IMouseService),T(6,b.IOptionsService),T(7,L.IRenderService),T(8,L.ICoreBrowserService)],R)},4725:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.IThemeService=g.ICharacterJoinerService=g.ISelectionService=g.IRenderService=g.IMouseService=g.ICoreBrowserService=g.ICharSizeService=void 0;const y=v(8343);g.ICharSizeService=(0,y.createDecorator)("CharSizeService"),g.ICoreBrowserService=(0,y.createDecorator)("CoreBrowserService"),g.IMouseService=(0,y.createDecorator)("MouseService"),g.IRenderService=(0,y.createDecorator)("RenderService"),g.ISelectionService=(0,y.createDecorator)("SelectionService"),g.ICharacterJoinerService=(0,y.createDecorator)("CharacterJoinerService"),g.IThemeService=(0,y.createDecorator)("ThemeService")},6731:function(he,g,v){var y=this&&this.__decorate||function(R,C,P,K){var ie,X=arguments.length,J=X<3?C:null===K?K=Object.getOwnPropertyDescriptor(C,P):K;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)J=Reflect.decorate(R,C,P,K);else for(var me=R.length-1;me>=0;me--)(ie=R[me])&&(J=(X<3?ie(J):X>3?ie(C,P,J):ie(C,P))||J);return X>3&&J&&Object.defineProperty(C,P,J),J},T=this&&this.__param||function(R,C){return function(P,K){C(P,K,R)}};Object.defineProperty(g,"__esModule",{value:!0}),g.ThemeService=g.DEFAULT_ANSI_COLORS=void 0;const m=v(7239),w=v(8055),D=v(8460),L=v(844),M=v(2585),l=w.css.toColor("#ffffff"),f=w.css.toColor("#000000"),c=w.css.toColor("#ffffff"),d=w.css.toColor("#000000"),b={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};g.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const R=[w.css.toColor("#2e3436"),w.css.toColor("#cc0000"),w.css.toColor("#4e9a06"),w.css.toColor("#c4a000"),w.css.toColor("#3465a4"),w.css.toColor("#75507b"),w.css.toColor("#06989a"),w.css.toColor("#d3d7cf"),w.css.toColor("#555753"),w.css.toColor("#ef2929"),w.css.toColor("#8ae234"),w.css.toColor("#fce94f"),w.css.toColor("#729fcf"),w.css.toColor("#ad7fa8"),w.css.toColor("#34e2e2"),w.css.toColor("#eeeeec")],C=[0,95,135,175,215,255];for(let P=0;P<216;P++){const K=C[P/36%6|0],ie=C[P/6%6|0],X=C[P%6];R.push({css:w.channels.toCss(K,ie,X),rgba:w.channels.toRgba(K,ie,X)})}for(let P=0;P<24;P++){const K=8+10*P;R.push({css:w.channels.toCss(K,K,K),rgba:w.channels.toRgba(K,K,K)})}return R})());let E=g.ThemeService=class extends L.Disposable{get colors(){return this._colors}constructor(R){super(),this._optionsService=R,this._contrastCache=new m.ColorContrastCache,this._halfContrastCache=new m.ColorContrastCache,this._onChangeColors=this.register(new D.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:l,background:f,cursor:c,cursorAccent:d,selectionForeground:void 0,selectionBackgroundTransparent:b,selectionBackgroundOpaque:w.color.blend(f,b),selectionInactiveBackgroundTransparent:b,selectionInactiveBackgroundOpaque:w.color.blend(f,b),ansi:g.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(R={}){const C=this._colors;if(C.foreground=A(R.foreground,l),C.background=A(R.background,f),C.cursor=A(R.cursor,c),C.cursorAccent=A(R.cursorAccent,d),C.selectionBackgroundTransparent=A(R.selectionBackground,b),C.selectionBackgroundOpaque=w.color.blend(C.background,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundTransparent=A(R.selectionInactiveBackground,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundOpaque=w.color.blend(C.background,C.selectionInactiveBackgroundTransparent),C.selectionForeground=R.selectionForeground?A(R.selectionForeground,w.NULL_COLOR):void 0,C.selectionForeground===w.NULL_COLOR&&(C.selectionForeground=void 0),w.color.isOpaque(C.selectionBackgroundTransparent)&&(C.selectionBackgroundTransparent=w.color.opacity(C.selectionBackgroundTransparent,.3)),w.color.isOpaque(C.selectionInactiveBackgroundTransparent)&&(C.selectionInactiveBackgroundTransparent=w.color.opacity(C.selectionInactiveBackgroundTransparent,.3)),C.ansi=g.DEFAULT_ANSI_COLORS.slice(),C.ansi[0]=A(R.black,g.DEFAULT_ANSI_COLORS[0]),C.ansi[1]=A(R.red,g.DEFAULT_ANSI_COLORS[1]),C.ansi[2]=A(R.green,g.DEFAULT_ANSI_COLORS[2]),C.ansi[3]=A(R.yellow,g.DEFAULT_ANSI_COLORS[3]),C.ansi[4]=A(R.blue,g.DEFAULT_ANSI_COLORS[4]),C.ansi[5]=A(R.magenta,g.DEFAULT_ANSI_COLORS[5]),C.ansi[6]=A(R.cyan,g.DEFAULT_ANSI_COLORS[6]),C.ansi[7]=A(R.white,g.DEFAULT_ANSI_COLORS[7]),C.ansi[8]=A(R.brightBlack,g.DEFAULT_ANSI_COLORS[8]),C.ansi[9]=A(R.brightRed,g.DEFAULT_ANSI_COLORS[9]),C.ansi[10]=A(R.brightGreen,g.DEFAULT_ANSI_COLORS[10]),C.ansi[11]=A(R.brightYellow,g.DEFAULT_ANSI_COLORS[11]),C.ansi[12]=A(R.brightBlue,g.DEFAULT_ANSI_COLORS[12]),C.ansi[13]=A(R.brightMagenta,g.DEFAULT_ANSI_COLORS[13]),C.ansi[14]=A(R.brightCyan,g.DEFAULT_ANSI_COLORS[14]),C.ansi[15]=A(R.brightWhite,g.DEFAULT_ANSI_COLORS[15]),R.extendedAnsi){const P=Math.min(C.ansi.length-16,R.extendedAnsi.length);for(let K=0;K<P;K++)C.ansi[K+16]=A(R.extendedAnsi[K],g.DEFAULT_ANSI_COLORS[K+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(R){this._restoreColor(R),this._onChangeColors.fire(this.colors)}_restoreColor(R){if(void 0!==R)switch(R){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[R]=this._restoreColors.ansi[R]}else for(let C=0;C<this._restoreColors.ansi.length;++C)this._colors.ansi[C]=this._restoreColors.ansi[C]}modifyColors(R){R(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function A(R,C){if(void 0!==R)try{return w.css.toColor(R)}catch{}return C}g.ThemeService=E=y([T(0,M.IOptionsService)],E)},6349:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.CircularList=void 0;const y=v(8460),T=v(844);g.CircularList=class m extends T.Disposable{constructor(D){super(),this._maxLength=D,this.onDeleteEmitter=this.register(new y.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new y.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new y.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(D){if(this._maxLength===D)return;const L=new Array(D);for(let M=0;M<Math.min(D,this.length);M++)L[M]=this._array[this._getCyclicIndex(M)];this._array=L,this._maxLength=D,this._startIndex=0}get length(){return this._length}set length(D){if(D>this._length)for(let L=this._length;L<D;L++)this._array[L]=void 0;this._length=D}get(D){return this._array[this._getCyclicIndex(D)]}set(D,L){this._array[this._getCyclicIndex(D)]=L}push(D){this._array[this._getCyclicIndex(this._length)]=D,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(D,L,...M){if(L){for(let l=D;l<this._length-L;l++)this._array[this._getCyclicIndex(l)]=this._array[this._getCyclicIndex(l+L)];this._length-=L,this.onDeleteEmitter.fire({index:D,amount:L})}for(let l=this._length-1;l>=D;l--)this._array[this._getCyclicIndex(l+M.length)]=this._array[this._getCyclicIndex(l)];for(let l=0;l<M.length;l++)this._array[this._getCyclicIndex(D+l)]=M[l];if(M.length&&this.onInsertEmitter.fire({index:D,amount:M.length}),this._length+M.length>this._maxLength){const l=this._length+M.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=M.length}trimStart(D){D>this._length&&(D=this._length),this._startIndex+=D,this._length-=D,this.onTrimEmitter.fire(D)}shiftElements(D,L,M){if(!(L<=0)){if(D<0||D>=this._length)throw new Error("start argument out of range");if(D+M<0)throw new Error("Cannot shift elements in list beyond index 0");if(M>0){for(let f=L-1;f>=0;f--)this.set(D+f+M,this.get(D+f));const l=D+L+M-this._length;if(l>0)for(this._length+=l;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let l=0;l<L;l++)this.set(D+l+M,this.get(D+l))}}_getCyclicIndex(D){return(this._startIndex+D)%this._maxLength}}},1439:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.clone=void 0,g.clone=function v(y,T=5){if("object"!=typeof y)return y;const m=Array.isArray(y)?[]:{};for(const w in y)m[w]=T<=1?y[w]:y[w]&&v(y[w],T-1);return m}},8055:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.contrastRatio=g.toPaddedHex=g.rgba=g.rgb=g.css=g.color=g.channels=g.NULL_COLOR=void 0;const y=v(6114);let T=0,m=0,w=0,D=0;var L,M,l,f,c,E;function d(E){const A=E.toString(16);return A.length<2?"0"+A:A}function b(E,A){return E<A?(A+.05)/(E+.05):(E+.05)/(A+.05)}g.NULL_COLOR={css:"#00000000",rgba:0},(E=L||(g.channels=L={})).toCss=function(A,R,C,P){return void 0!==P?`#${d(A)}${d(R)}${d(C)}${d(P)}`:`#${d(A)}${d(R)}${d(C)}`},E.toRgba=function(A,R,C,P=255){return(A<<24|R<<16|C<<8|P)>>>0},function(E){function A(R,C){return D=Math.round(255*C),[T,m,w]=c.toChannels(R.rgba),{css:L.toCss(T,m,w,D),rgba:L.toRgba(T,m,w,D)}}E.blend=function(R,C){if(D=(255&C.rgba)/255,1===D)return{css:C.css,rgba:C.rgba};const K=C.rgba>>16&255,ie=C.rgba>>8&255,X=R.rgba>>24&255,J=R.rgba>>16&255,me=R.rgba>>8&255;return T=X+Math.round(((C.rgba>>24&255)-X)*D),m=J+Math.round((K-J)*D),w=me+Math.round((ie-me)*D),{css:L.toCss(T,m,w),rgba:L.toRgba(T,m,w)}},E.isOpaque=function(R){return 255==(255&R.rgba)},E.ensureContrastRatio=function(R,C,P){const K=c.ensureContrastRatio(R.rgba,C.rgba,P);if(K)return c.toColor(K>>24&255,K>>16&255,K>>8&255)},E.opaque=function(R){const C=(255|R.rgba)>>>0;return[T,m,w]=c.toChannels(C),{css:L.toCss(T,m,w),rgba:C}},E.opacity=A,E.multiplyOpacity=function(R,C){return D=255&R.rgba,A(R,D*C/255)},E.toColorRGB=function(R){return[R.rgba>>24&255,R.rgba>>16&255,R.rgba>>8&255]}}(M||(g.color=M={})),function(E){let A,R;if(!y.isNode){const C=document.createElement("canvas");C.width=1,C.height=1;const P=C.getContext("2d",{willReadFrequently:!0});P&&(A=P,A.globalCompositeOperation="copy",R=A.createLinearGradient(0,0,1,1))}E.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return T=parseInt(C.slice(1,2).repeat(2),16),m=parseInt(C.slice(2,3).repeat(2),16),w=parseInt(C.slice(3,4).repeat(2),16),c.toColor(T,m,w);case 5:return T=parseInt(C.slice(1,2).repeat(2),16),m=parseInt(C.slice(2,3).repeat(2),16),w=parseInt(C.slice(3,4).repeat(2),16),D=parseInt(C.slice(4,5).repeat(2),16),c.toColor(T,m,w,D);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}const P=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(P)return T=parseInt(P[1]),m=parseInt(P[2]),w=parseInt(P[3]),D=Math.round(255*(void 0===P[5]?1:parseFloat(P[5]))),c.toColor(T,m,w,D);if(!A||!R)throw new Error("css.toColor: Unsupported css format");if(A.fillStyle=R,A.fillStyle=C,"string"!=typeof A.fillStyle)throw new Error("css.toColor: Unsupported css format");if(A.fillRect(0,0,1,1),[T,m,w,D]=A.getImageData(0,0,1,1).data,255!==D)throw new Error("css.toColor: Unsupported css format");return{rgba:L.toRgba(T,m,w,D),css:C}}}(l||(g.css=l={})),function(E){function A(R,C,P){const K=R/255,ie=C/255,X=P/255;return.2126*(K<=.03928?K/12.92:Math.pow((K+.055)/1.055,2.4))+.7152*(ie<=.03928?ie/12.92:Math.pow((ie+.055)/1.055,2.4))+.0722*(X<=.03928?X/12.92:Math.pow((X+.055)/1.055,2.4))}E.relativeLuminance=function(R){return A(R>>16&255,R>>8&255,255&R)},E.relativeLuminance2=A}(f||(g.rgb=f={})),function(E){function A(C,P,K){const ie=C>>24&255,X=C>>16&255,J=C>>8&255;let me=P>>24&255,ve=P>>16&255,De=P>>8&255,Ce=b(f.relativeLuminance2(me,ve,De),f.relativeLuminance2(ie,X,J));for(;Ce<K&&(me>0||ve>0||De>0);)me-=Math.max(0,Math.ceil(.1*me)),ve-=Math.max(0,Math.ceil(.1*ve)),De-=Math.max(0,Math.ceil(.1*De)),Ce=b(f.relativeLuminance2(me,ve,De),f.relativeLuminance2(ie,X,J));return(me<<24|ve<<16|De<<8|255)>>>0}function R(C,P,K){const ie=C>>24&255,X=C>>16&255,J=C>>8&255;let me=P>>24&255,ve=P>>16&255,De=P>>8&255,Ce=b(f.relativeLuminance2(me,ve,De),f.relativeLuminance2(ie,X,J));for(;Ce<K&&(me<255||ve<255||De<255);)me=Math.min(255,me+Math.ceil(.1*(255-me))),ve=Math.min(255,ve+Math.ceil(.1*(255-ve))),De=Math.min(255,De+Math.ceil(.1*(255-De))),Ce=b(f.relativeLuminance2(me,ve,De),f.relativeLuminance2(ie,X,J));return(me<<24|ve<<16|De<<8|255)>>>0}E.ensureContrastRatio=function(C,P,K){const ie=f.relativeLuminance(C>>8),X=f.relativeLuminance(P>>8);if(b(ie,X)<K){if(X<ie){const ve=A(C,P,K),De=b(ie,f.relativeLuminance(ve>>8));if(De<K){const Ce=R(C,P,K);return De>b(ie,f.relativeLuminance(Ce>>8))?ve:Ce}return ve}const J=R(C,P,K),me=b(ie,f.relativeLuminance(J>>8));if(me<K){const ve=A(C,P,K);return me>b(ie,f.relativeLuminance(ve>>8))?J:ve}return J}},E.reduceLuminance=A,E.increaseLuminance=R,E.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]},E.toColor=function(C,P,K,ie){return{css:L.toCss(C,P,K,ie),rgba:L.toRgba(C,P,K,ie)}}}(c||(g.rgba=c={})),g.toPaddedHex=d,g.contrastRatio=b},8969:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.CoreTerminal=void 0;const y=v(844),T=v(2585),m=v(4348),w=v(7866),D=v(744),L=v(7302),M=v(6975),l=v(8460),f=v(1753),c=v(1480),d=v(7994),b=v(9282),E=v(5435),A=v(5981),R=v(2660);let C=!1;g.CoreTerminal=class P extends y.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new l.EventEmitter),this._onScroll.event(ie=>{var X;null===(X=this._onScrollApi)||void 0===X||X.fire(ie.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(ie){for(const X in ie)this.optionsService.options[X]=ie[X]}constructor(ie){super(),this._windowsWrappingHeuristics=this.register(new y.MutableDisposable),this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new l.EventEmitter),this._instantiationService=new m.InstantiationService,this.optionsService=this.register(new L.OptionsService(ie)),this._instantiationService.setService(T.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(D.BufferService)),this._instantiationService.setService(T.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(w.LogService)),this._instantiationService.setService(T.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(M.CoreService)),this._instantiationService.setService(T.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(f.CoreMouseService)),this._instantiationService.setService(T.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(c.UnicodeService)),this._instantiationService.setService(T.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(d.CharsetService),this._instantiationService.setService(T.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(R.OscLinkService),this._instantiationService.setService(T.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new E.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,l.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,l.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,l.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,l.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(X=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(X=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new A.WriteBuffer((X,J)=>this._inputHandler.parse(X,J))),this.register((0,l.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(ie,X){this._writeBuffer.write(ie,X)}writeSync(ie,X){this._logService.logLevel<=T.LogLevelEnum.WARN&&!C&&(this._logService.warn("writeSync is unreliable and will be removed soon."),C=!0),this._writeBuffer.writeSync(ie,X)}resize(ie,X){isNaN(ie)||isNaN(X)||(ie=Math.max(ie,D.MINIMUM_COLS),X=Math.max(X,D.MINIMUM_ROWS),this._bufferService.resize(ie,X))}scroll(ie,X=!1){this._bufferService.scroll(ie,X)}scrollLines(ie,X,J){this._bufferService.scrollLines(ie,X,J)}scrollPages(ie){this.scrollLines(ie*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(ie){const X=ie-this._bufferService.buffer.ydisp;0!==X&&this.scrollLines(X)}registerEscHandler(ie,X){return this._inputHandler.registerEscHandler(ie,X)}registerDcsHandler(ie,X){return this._inputHandler.registerDcsHandler(ie,X)}registerCsiHandler(ie,X){return this._inputHandler.registerCsiHandler(ie,X)}registerOscHandler(ie,X){return this._inputHandler.registerOscHandler(ie,X)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let ie=!1;const X=this.optionsService.rawOptions.windowsPty;X&&void 0!==X.buildNumber&&void 0!==X.buildNumber?ie="conpty"===X.backend&&X.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(ie=!0),ie?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const ie=[];ie.push(this.onLineFeed(b.updateWindowsModeWrappedState.bind(null,this._bufferService))),ie.push(this.registerCsiHandler({final:"H"},()=>((0,b.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,y.toDisposable)(()=>{for(const X of ie)X.dispose()})}}}},8460:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.forwardEvent=g.EventEmitter=void 0,g.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=v=>(this._listeners.push(v),{dispose:()=>{if(!this._disposed)for(let y=0;y<this._listeners.length;y++)if(this._listeners[y]===v)return void this._listeners.splice(y,1)}})),this._event}fire(v,y){const T=[];for(let m=0;m<this._listeners.length;m++)T.push(this._listeners[m]);for(let m=0;m<T.length;m++)T[m].call(void 0,v,y)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},g.forwardEvent=function(v,y){return v(T=>y.fire(T))}},5435:function(he,g,v){var y=this&&this.__decorate||function(Ce,N,G,Q){var re,ke=arguments.length,He=ke<3?N:null===Q?Q=Object.getOwnPropertyDescriptor(N,G):Q;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)He=Reflect.decorate(Ce,N,G,Q);else for(var We=Ce.length-1;We>=0;We--)(re=Ce[We])&&(He=(ke<3?re(He):ke>3?re(N,G,He):re(N,G))||He);return ke>3&&He&&Object.defineProperty(N,G,He),He},T=this&&this.__param||function(Ce,N){return function(G,Q){N(G,Q,Ce)}};Object.defineProperty(g,"__esModule",{value:!0}),g.InputHandler=g.WindowsOptionsReportType=void 0;const m=v(2584),w=v(7116),D=v(2015),L=v(844),M=v(482),l=v(8437),f=v(8460),c=v(643),d=v(511),b=v(3734),E=v(2585),A=v(6242),R=v(6351),C=v(5941),P={"(":0,")":1,"*":2,"+":3,"-":1,".":2},K=131072;function ie(Ce,N){if(Ce>24)return N.setWinLines||!1;switch(Ce){case 1:return!!N.restoreWin;case 2:return!!N.minimizeWin;case 3:return!!N.setWinPosition;case 4:return!!N.setWinSizePixels;case 5:return!!N.raiseWin;case 6:return!!N.lowerWin;case 7:return!!N.refreshWin;case 8:return!!N.setWinSizeChars;case 9:return!!N.maximizeWin;case 10:return!!N.fullscreenWin;case 11:return!!N.getWinState;case 13:return!!N.getWinPosition;case 14:return!!N.getWinSizePixels;case 15:return!!N.getScreenSizePixels;case 16:return!!N.getCellSizePixels;case 18:return!!N.getWinSizeChars;case 19:return!!N.getScreenSizeChars;case 20:return!!N.getIconTitle;case 21:return!!N.getWinTitle;case 22:return!!N.pushTitle;case 23:return!!N.popTitle;case 24:return!!N.setWinLines}return!1}var X,Ce;(Ce=X||(g.WindowsOptionsReportType=X={}))[Ce.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",Ce[Ce.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS";let J=0;g.InputHandler=class me extends L.Disposable{getAttrData(){return this._curAttrData}constructor(N,G,Q,re,ke,He,We,Re,Ke=new D.EscapeSequenceParser){super(),this._bufferService=N,this._charsetService=G,this._coreService=Q,this._logService=re,this._optionsService=ke,this._oscLinkService=He,this._coreMouseService=We,this._unicodeService=Re,this._parser=Ke,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new M.StringToUtf32,this._utf8Decoder=new M.Utf8ToUtf32,this._workCell=new d.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new f.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new f.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new f.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new f.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new f.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new f.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new f.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new f.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new f.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new f.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new f.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new f.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new ve(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(I=>this._activeBuffer=I.activeBuffer)),this._parser.setCsiHandlerFallback((I,le)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(I),params:le.toArray()})}),this._parser.setEscHandlerFallback(I=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(I)})}),this._parser.setExecuteHandlerFallback(I=>{this._logService.debug("Unknown EXECUTE code: ",{code:I})}),this._parser.setOscHandlerFallback((I,le,Se)=>{this._logService.debug("Unknown OSC code: ",{identifier:I,action:le,data:Se})}),this._parser.setDcsHandlerFallback((I,le,Se)=>{"HOOK"===le&&(Se=Se.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(I),action:le,payload:Se})}),this._parser.setPrintHandler((I,le,Se)=>this.print(I,le,Se)),this._parser.registerCsiHandler({final:"@"},I=>this.insertChars(I)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},I=>this.scrollLeft(I)),this._parser.registerCsiHandler({final:"A"},I=>this.cursorUp(I)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},I=>this.scrollRight(I)),this._parser.registerCsiHandler({final:"B"},I=>this.cursorDown(I)),this._parser.registerCsiHandler({final:"C"},I=>this.cursorForward(I)),this._parser.registerCsiHandler({final:"D"},I=>this.cursorBackward(I)),this._parser.registerCsiHandler({final:"E"},I=>this.cursorNextLine(I)),this._parser.registerCsiHandler({final:"F"},I=>this.cursorPrecedingLine(I)),this._parser.registerCsiHandler({final:"G"},I=>this.cursorCharAbsolute(I)),this._parser.registerCsiHandler({final:"H"},I=>this.cursorPosition(I)),this._parser.registerCsiHandler({final:"I"},I=>this.cursorForwardTab(I)),this._parser.registerCsiHandler({final:"J"},I=>this.eraseInDisplay(I,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},I=>this.eraseInDisplay(I,!0)),this._parser.registerCsiHandler({final:"K"},I=>this.eraseInLine(I,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},I=>this.eraseInLine(I,!0)),this._parser.registerCsiHandler({final:"L"},I=>this.insertLines(I)),this._parser.registerCsiHandler({final:"M"},I=>this.deleteLines(I)),this._parser.registerCsiHandler({final:"P"},I=>this.deleteChars(I)),this._parser.registerCsiHandler({final:"S"},I=>this.scrollUp(I)),this._parser.registerCsiHandler({final:"T"},I=>this.scrollDown(I)),this._parser.registerCsiHandler({final:"X"},I=>this.eraseChars(I)),this._parser.registerCsiHandler({final:"Z"},I=>this.cursorBackwardTab(I)),this._parser.registerCsiHandler({final:"`"},I=>this.charPosAbsolute(I)),this._parser.registerCsiHandler({final:"a"},I=>this.hPositionRelative(I)),this._parser.registerCsiHandler({final:"b"},I=>this.repeatPrecedingCharacter(I)),this._parser.registerCsiHandler({final:"c"},I=>this.sendDeviceAttributesPrimary(I)),this._parser.registerCsiHandler({prefix:">",final:"c"},I=>this.sendDeviceAttributesSecondary(I)),this._parser.registerCsiHandler({final:"d"},I=>this.linePosAbsolute(I)),this._parser.registerCsiHandler({final:"e"},I=>this.vPositionRelative(I)),this._parser.registerCsiHandler({final:"f"},I=>this.hVPosition(I)),this._parser.registerCsiHandler({final:"g"},I=>this.tabClear(I)),this._parser.registerCsiHandler({final:"h"},I=>this.setMode(I)),this._parser.registerCsiHandler({prefix:"?",final:"h"},I=>this.setModePrivate(I)),this._parser.registerCsiHandler({final:"l"},I=>this.resetMode(I)),this._parser.registerCsiHandler({prefix:"?",final:"l"},I=>this.resetModePrivate(I)),this._parser.registerCsiHandler({final:"m"},I=>this.charAttributes(I)),this._parser.registerCsiHandler({final:"n"},I=>this.deviceStatus(I)),this._parser.registerCsiHandler({prefix:"?",final:"n"},I=>this.deviceStatusPrivate(I)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},I=>this.softReset(I)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},I=>this.setCursorStyle(I)),this._parser.registerCsiHandler({final:"r"},I=>this.setScrollRegion(I)),this._parser.registerCsiHandler({final:"s"},I=>this.saveCursor(I)),this._parser.registerCsiHandler({final:"t"},I=>this.windowOptions(I)),this._parser.registerCsiHandler({final:"u"},I=>this.restoreCursor(I)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},I=>this.insertColumns(I)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},I=>this.deleteColumns(I)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},I=>this.selectProtected(I)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},I=>this.requestMode(I,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},I=>this.requestMode(I,!1)),this._parser.setExecuteHandler(m.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(m.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(m.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(m.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(m.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(m.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(m.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(m.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(m.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(m.C1.IND,()=>this.index()),this._parser.setExecuteHandler(m.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(m.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new A.OscHandler(I=>(this.setTitle(I),this.setIconName(I),!0))),this._parser.registerOscHandler(1,new A.OscHandler(I=>this.setIconName(I))),this._parser.registerOscHandler(2,new A.OscHandler(I=>this.setTitle(I))),this._parser.registerOscHandler(4,new A.OscHandler(I=>this.setOrReportIndexedColor(I))),this._parser.registerOscHandler(8,new A.OscHandler(I=>this.setHyperlink(I))),this._parser.registerOscHandler(10,new A.OscHandler(I=>this.setOrReportFgColor(I))),this._parser.registerOscHandler(11,new A.OscHandler(I=>this.setOrReportBgColor(I))),this._parser.registerOscHandler(12,new A.OscHandler(I=>this.setOrReportCursorColor(I))),this._parser.registerOscHandler(104,new A.OscHandler(I=>this.restoreIndexedColor(I))),this._parser.registerOscHandler(110,new A.OscHandler(I=>this.restoreFgColor(I))),this._parser.registerOscHandler(111,new A.OscHandler(I=>this.restoreBgColor(I))),this._parser.registerOscHandler(112,new A.OscHandler(I=>this.restoreCursorColor(I))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const I in w.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:I},()=>this.selectCharset("("+I)),this._parser.registerEscHandler({intermediates:")",final:I},()=>this.selectCharset(")"+I)),this._parser.registerEscHandler({intermediates:"*",final:I},()=>this.selectCharset("*"+I)),this._parser.registerEscHandler({intermediates:"+",final:I},()=>this.selectCharset("+"+I)),this._parser.registerEscHandler({intermediates:"-",final:I},()=>this.selectCharset("-"+I)),this._parser.registerEscHandler({intermediates:".",final:I},()=>this.selectCharset("."+I)),this._parser.registerEscHandler({intermediates:"/",final:I},()=>this.selectCharset("/"+I));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(I=>(this._logService.error("Parsing error: ",I),I)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new R.DcsHandler((I,le)=>this.requestStatusString(I,le)))}_preserveStack(N,G,Q,re){this._parseStack.paused=!0,this._parseStack.cursorStartX=N,this._parseStack.cursorStartY=G,this._parseStack.decodedLength=Q,this._parseStack.position=re}_logSlowResolvingAsync(N){this._logService.logLevel<=E.LogLevelEnum.WARN&&Promise.race([N,new Promise((G,Q)=>setTimeout(()=>Q("#SLOW_TIMEOUT"),5e3))]).catch(G=>{if("#SLOW_TIMEOUT"!==G)throw G;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(N,G){let Q,re=this._activeBuffer.x,ke=this._activeBuffer.y,He=0;const We=this._parseStack.paused;if(We){if(Q=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,G))return this._logSlowResolvingAsync(Q),Q;re=this._parseStack.cursorStartX,ke=this._parseStack.cursorStartY,this._parseStack.paused=!1,N.length>K&&(He=this._parseStack.position+K)}if(this._logService.logLevel<=E.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+("string"==typeof N?` "${N}"`:` "${Array.prototype.map.call(N,Re=>String.fromCharCode(Re)).join("")}"`),"string"==typeof N?N.split("").map(Re=>Re.charCodeAt(0)):N),this._parseBuffer.length<N.length&&this._parseBuffer.length<K&&(this._parseBuffer=new Uint32Array(Math.min(N.length,K))),We||this._dirtyRowTracker.clearRange(),N.length>K)for(let Re=He;Re<N.length;Re+=K){const Ke=Re+K<N.length?Re+K:N.length,I="string"==typeof N?this._stringDecoder.decode(N.substring(Re,Ke),this._parseBuffer):this._utf8Decoder.decode(N.subarray(Re,Ke),this._parseBuffer);if(Q=this._parser.parse(this._parseBuffer,I))return this._preserveStack(re,ke,I,Re),this._logSlowResolvingAsync(Q),Q}else if(!We){const Re="string"==typeof N?this._stringDecoder.decode(N,this._parseBuffer):this._utf8Decoder.decode(N,this._parseBuffer);if(Q=this._parser.parse(this._parseBuffer,Re))return this._preserveStack(re,ke,Re,0),this._logSlowResolvingAsync(Q),Q}this._activeBuffer.x===re&&this._activeBuffer.y===ke||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(N,G,Q){let re,ke;const He=this._charsetService.charset,We=this._optionsService.rawOptions.screenReaderMode,Re=this._bufferService.cols,Ke=this._coreService.decPrivateModes.wraparound,I=this._coreService.modes.insertMode,le=this._curAttrData;let Se=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&Q-G>0&&2===Se.getWidth(this._activeBuffer.x-1)&&Se.setCellFromCodePoint(this._activeBuffer.x-1,0,1,le.fg,le.bg,le.extended);for(let ye=G;ye<Q;++ye){if(re=N[ye],ke=this._unicodeService.wcwidth(re),re<127&&He){const $e=He[String.fromCharCode(re)];$e&&(re=$e.charCodeAt(0))}if(We&&this._onA11yChar.fire((0,M.stringFromCodePoint)(re)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),ke||!this._activeBuffer.x){if(this._activeBuffer.x+ke-1>=Re)if(Ke){for(;this._activeBuffer.x<Re;)Se.setCellFromCodePoint(this._activeBuffer.x++,0,1,le.fg,le.bg,le.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),Se=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=Re-1,2===ke)continue;if(I&&(Se.insertCells(this._activeBuffer.x,ke,this._activeBuffer.getNullCell(le),le),2===Se.getWidth(Re-1)&&Se.setCellFromCodePoint(Re-1,c.NULL_CELL_CODE,c.NULL_CELL_WIDTH,le.fg,le.bg,le.extended)),Se.setCellFromCodePoint(this._activeBuffer.x++,re,ke,le.fg,le.bg,le.extended),ke>0)for(;--ke;)Se.setCellFromCodePoint(this._activeBuffer.x++,0,0,le.fg,le.bg,le.extended)}else Se.getWidth(this._activeBuffer.x-1)?Se.addCodepointToCell(this._activeBuffer.x-1,re):Se.addCodepointToCell(this._activeBuffer.x-2,re)}Q-G>0&&(Se.loadCell(this._activeBuffer.x-1,this._workCell),this._parser.precedingCodepoint=2===this._workCell.getWidth()||this._workCell.getCode()>65535?0:this._workCell.isCombined()?this._workCell.getChars().charCodeAt(0):this._workCell.content),this._activeBuffer.x<Re&&Q-G>0&&0===Se.getWidth(this._activeBuffer.x)&&!Se.hasContent(this._activeBuffer.x)&&Se.setCellFromCodePoint(this._activeBuffer.x,0,1,le.fg,le.bg,le.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(N,G){return this._parser.registerCsiHandler(N,"t"!==N.final||N.prefix||N.intermediates?G:Q=>!ie(Q.params[0],this._optionsService.rawOptions.windowOptions)||G(Q))}registerDcsHandler(N,G){return this._parser.registerDcsHandler(N,new R.DcsHandler(G))}registerEscHandler(N,G){return this._parser.registerEscHandler(N,G)}registerOscHandler(N,G){return this._parser.registerOscHandler(N,new A.OscHandler(G))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var N;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&null!==(N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))&&void 0!==N&&N.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);G.hasWidth(this._activeBuffer.x)&&!G.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const N=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-N),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(N=this._bufferService.cols-1){this._activeBuffer.x=Math.min(N,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(N,G){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=N,this._activeBuffer.y=this._activeBuffer.scrollTop+G):(this._activeBuffer.x=N,this._activeBuffer.y=G),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(N,G){this._restrictCursor(),this._setCursor(this._activeBuffer.x+N,this._activeBuffer.y+G)}cursorUp(N){const G=this._activeBuffer.y-this._activeBuffer.scrollTop;return this._moveCursor(0,G>=0?-Math.min(G,N.params[0]||1):-(N.params[0]||1)),!0}cursorDown(N){const G=this._activeBuffer.scrollBottom-this._activeBuffer.y;return this._moveCursor(0,G>=0?Math.min(G,N.params[0]||1):N.params[0]||1),!0}cursorForward(N){return this._moveCursor(N.params[0]||1,0),!0}cursorBackward(N){return this._moveCursor(-(N.params[0]||1),0),!0}cursorNextLine(N){return this.cursorDown(N),this._activeBuffer.x=0,!0}cursorPrecedingLine(N){return this.cursorUp(N),this._activeBuffer.x=0,!0}cursorCharAbsolute(N){return this._setCursor((N.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(N){return this._setCursor(N.length>=2?(N.params[1]||1)-1:0,(N.params[0]||1)-1),!0}charPosAbsolute(N){return this._setCursor((N.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(N){return this._moveCursor(N.params[0]||1,0),!0}linePosAbsolute(N){return this._setCursor(this._activeBuffer.x,(N.params[0]||1)-1),!0}vPositionRelative(N){return this._moveCursor(0,N.params[0]||1),!0}hVPosition(N){return this.cursorPosition(N),!0}tabClear(N){const G=N.params[0];return 0===G?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===G&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(N){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let G=N.params[0]||1;for(;G--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(N){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let G=N.params[0]||1;for(;G--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(N){const G=N.params[0];return 1===G&&(this._curAttrData.bg|=536870912),2!==G&&0!==G||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(N,G,Q,re=!1,ke=!1){const He=this._activeBuffer.lines.get(this._activeBuffer.ybase+N);He.replaceCells(G,Q,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),ke),re&&(He.isWrapped=!1)}_resetBufferLine(N,G=!1){const Q=this._activeBuffer.lines.get(this._activeBuffer.ybase+N);Q&&(Q.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),G),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+N),Q.isWrapped=!1)}eraseInDisplay(N,G=!1){let Q;switch(this._restrictCursor(this._bufferService.cols),N.params[0]){case 0:for(Q=this._activeBuffer.y,this._dirtyRowTracker.markDirty(Q),this._eraseInBufferLine(Q++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,G);Q<this._bufferService.rows;Q++)this._resetBufferLine(Q,G);this._dirtyRowTracker.markDirty(Q);break;case 1:for(Q=this._activeBuffer.y,this._dirtyRowTracker.markDirty(Q),this._eraseInBufferLine(Q,0,this._activeBuffer.x+1,!0,G),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(Q+1).isWrapped=!1);Q--;)this._resetBufferLine(Q,G);this._dirtyRowTracker.markDirty(0);break;case 2:for(Q=this._bufferService.rows,this._dirtyRowTracker.markDirty(Q-1);Q--;)this._resetBufferLine(Q,G);this._dirtyRowTracker.markDirty(0);break;case 3:const re=this._activeBuffer.lines.length-this._bufferService.rows;re>0&&(this._activeBuffer.lines.trimStart(re),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-re,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-re,0),this._onScroll.fire(0))}return!0}eraseInLine(N,G=!1){switch(this._restrictCursor(this._bufferService.cols),N.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,G);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,G);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,G)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(N){this._restrictCursor();let G=N.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const Q=this._activeBuffer.ybase+this._activeBuffer.y,ke=this._bufferService.rows-1+this._activeBuffer.ybase-(this._bufferService.rows-1-this._activeBuffer.scrollBottom)+1;for(;G--;)this._activeBuffer.lines.splice(ke-1,1),this._activeBuffer.lines.splice(Q,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(N){this._restrictCursor();let G=N.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const Q=this._activeBuffer.ybase+this._activeBuffer.y;let re;for(re=this._bufferService.rows-1-this._activeBuffer.scrollBottom,re=this._bufferService.rows-1+this._activeBuffer.ybase-re;G--;)this._activeBuffer.lines.splice(Q,1),this._activeBuffer.lines.splice(re,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(N){this._restrictCursor();const G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return G&&(G.insertCells(this._activeBuffer.x,N.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(N){this._restrictCursor();const G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return G&&(G.deleteCells(this._activeBuffer.x,N.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(N){let G=N.params[0]||1;for(;G--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(N){let G=N.params[0]||1;for(;G--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const G=N.params[0]||1;for(let Q=this._activeBuffer.scrollTop;Q<=this._activeBuffer.scrollBottom;++Q){const re=this._activeBuffer.lines.get(this._activeBuffer.ybase+Q);re.deleteCells(0,G,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),re.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const G=N.params[0]||1;for(let Q=this._activeBuffer.scrollTop;Q<=this._activeBuffer.scrollBottom;++Q){const re=this._activeBuffer.lines.get(this._activeBuffer.ybase+Q);re.insertCells(0,G,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),re.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const G=N.params[0]||1;for(let Q=this._activeBuffer.scrollTop;Q<=this._activeBuffer.scrollBottom;++Q){const re=this._activeBuffer.lines.get(this._activeBuffer.ybase+Q);re.insertCells(this._activeBuffer.x,G,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),re.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const G=N.params[0]||1;for(let Q=this._activeBuffer.scrollTop;Q<=this._activeBuffer.scrollBottom;++Q){const re=this._activeBuffer.lines.get(this._activeBuffer.ybase+Q);re.deleteCells(this._activeBuffer.x,G,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),re.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(N){this._restrictCursor();const G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return G&&(G.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(N.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(N){if(!this._parser.precedingCodepoint)return!0;const G=N.params[0]||1,Q=new Uint32Array(G);for(let re=0;re<G;++re)Q[re]=this._parser.precedingCodepoint;return this.print(Q,0,Q.length),!0}sendDeviceAttributesPrimary(N){return N.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(m.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(m.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(N){return N.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(m.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(m.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(N.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(m.C0.ESC+"[>83;40003;0c")),!0}_is(N){return 0===(this._optionsService.rawOptions.termName+"").indexOf(N)}setMode(N){for(let G=0;G<N.length;G++)switch(N.params[G]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(N){for(let G=0;G<N.length;G++)switch(N.params[G]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,w.DEFAULT_CHARSET),this._charsetService.setgCharset(1,w.DEFAULT_CHARSET),this._charsetService.setgCharset(2,w.DEFAULT_CHARSET),this._charsetService.setgCharset(3,w.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(N){for(let G=0;G<N.length;G++)switch(N.params[G]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(N){for(let G=0;G<N.length;G++)switch(N.params[G]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===N.params[G]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(N,G){const Q=this._coreService.decPrivateModes,{activeProtocol:re,activeEncoding:ke}=this._coreMouseService,He=this._coreService,{buffers:We,cols:Re}=this._bufferService,{active:Ke,alt:I}=We,le=this._optionsService.rawOptions,Se=Ze=>Ze?1:2,ye=N.params[0];return $e=ye,ze=G?2===ye?4:4===ye?Se(He.modes.insertMode):12===ye?3:20===ye?Se(le.convertEol):0:1===ye?Se(Q.applicationCursorKeys):3===ye?le.windowOptions.setWinLines?80===Re?2:132===Re?1:0:0:6===ye?Se(Q.origin):7===ye?Se(Q.wraparound):8===ye?3:9===ye?Se("X10"===re):12===ye?Se(le.cursorBlink):25===ye?Se(!He.isCursorHidden):45===ye?Se(Q.reverseWraparound):66===ye?Se(Q.applicationKeypad):67===ye?4:1e3===ye?Se("VT200"===re):1002===ye?Se("DRAG"===re):1003===ye?Se("ANY"===re):1004===ye?Se(Q.sendFocus):1005===ye?4:1006===ye?Se("SGR"===ke):1015===ye?4:1016===ye?Se("SGR_PIXELS"===ke):1048===ye?1:47===ye||1047===ye||1049===ye?Se(Ke===I):2004===ye?Se(Q.bracketedPasteMode):0,He.triggerDataEvent(`${m.C0.ESC}[${G?"":"?"}${$e};${ze}$y`),!0;var $e,ze}_updateAttrColor(N,G,Q,re,ke){return 2===G?(N|=50331648,N&=-16777216,N|=b.AttributeData.fromColorRGB([Q,re,ke])):5===G&&(N&=-50331904,N|=33554432|255&Q),N}_extractColor(N,G,Q){const re=[0,0,-1,0,0,0];let ke=0,He=0;do{if(re[He+ke]=N.params[G+He],N.hasSubParams(G+He)){const We=N.getSubParams(G+He);let Re=0;do{5===re[1]&&(ke=1),re[He+Re+1+ke]=We[Re]}while(++Re<We.length&&Re+He+1+ke<re.length);break}if(5===re[1]&&He+ke>=2||2===re[1]&&He+ke>=5)break;re[1]&&(ke=1)}while(++He+G<N.length&&He+ke<re.length);for(let We=2;We<re.length;++We)-1===re[We]&&(re[We]=0);switch(re[0]){case 38:Q.fg=this._updateAttrColor(Q.fg,re[1],re[3],re[4],re[5]);break;case 48:Q.bg=this._updateAttrColor(Q.bg,re[1],re[3],re[4],re[5]);break;case 58:Q.extended=Q.extended.clone(),Q.extended.underlineColor=this._updateAttrColor(Q.extended.underlineColor,re[1],re[3],re[4],re[5])}return He}_processUnderline(N,G){G.extended=G.extended.clone(),(!~N||N>5)&&(N=1),G.extended.underlineStyle=N,G.fg|=268435456,0===N&&(G.fg&=-268435457),G.updateExtended()}_processSGR0(N){N.fg=l.DEFAULT_ATTR_DATA.fg,N.bg=l.DEFAULT_ATTR_DATA.bg,N.extended=N.extended.clone(),N.extended.underlineStyle=0,N.extended.underlineColor&=-67108864,N.updateExtended()}charAttributes(N){if(1===N.length&&0===N.params[0])return this._processSGR0(this._curAttrData),!0;const G=N.length;let Q;const re=this._curAttrData;for(let ke=0;ke<G;ke++)Q=N.params[ke],Q>=30&&Q<=37?(re.fg&=-50331904,re.fg|=16777216|Q-30):Q>=40&&Q<=47?(re.bg&=-50331904,re.bg|=16777216|Q-40):Q>=90&&Q<=97?(re.fg&=-50331904,re.fg|=16777224|Q-90):Q>=100&&Q<=107?(re.bg&=-50331904,re.bg|=16777224|Q-100):0===Q?this._processSGR0(re):1===Q?re.fg|=134217728:3===Q?re.bg|=67108864:4===Q?(re.fg|=268435456,this._processUnderline(N.hasSubParams(ke)?N.getSubParams(ke)[0]:1,re)):5===Q?re.fg|=536870912:7===Q?re.fg|=67108864:8===Q?re.fg|=1073741824:9===Q?re.fg|=2147483648:2===Q?re.bg|=134217728:21===Q?this._processUnderline(2,re):22===Q?(re.fg&=-134217729,re.bg&=-134217729):23===Q?re.bg&=-67108865:24===Q?(re.fg&=-268435457,this._processUnderline(0,re)):25===Q?re.fg&=-536870913:27===Q?re.fg&=-67108865:28===Q?re.fg&=-1073741825:29===Q?re.fg&=2147483647:39===Q?(re.fg&=-67108864,re.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):49===Q?(re.bg&=-67108864,re.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):38===Q||48===Q||58===Q?ke+=this._extractColor(N,ke,re):53===Q?re.bg|=1073741824:55===Q?re.bg&=-1073741825:59===Q?(re.extended=re.extended.clone(),re.extended.underlineColor=-1,re.updateExtended()):100===Q?(re.fg&=-67108864,re.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,re.bg&=-67108864,re.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",Q);return!0}deviceStatus(N){switch(N.params[0]){case 5:this._coreService.triggerDataEvent(`${m.C0.ESC}[0n`);break;case 6:this._coreService.triggerDataEvent(`${m.C0.ESC}[${this._activeBuffer.y+1};${this._activeBuffer.x+1}R`)}return!0}deviceStatusPrivate(N){return 6===N.params[0]&&this._coreService.triggerDataEvent(`${m.C0.ESC}[?${this._activeBuffer.y+1};${this._activeBuffer.x+1}R`),!0}softReset(N){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(N){const G=N.params[0]||1;switch(G){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}return this._optionsService.options.cursorBlink=G%2==1,!0}setScrollRegion(N){const G=N.params[0]||1;let Q;return(N.length<2||(Q=N.params[1])>this._bufferService.rows||0===Q)&&(Q=this._bufferService.rows),Q>G&&(this._activeBuffer.scrollTop=G-1,this._activeBuffer.scrollBottom=Q-1,this._setCursor(0,0)),!0}windowOptions(N){if(!ie(N.params[0],this._optionsService.rawOptions.windowOptions))return!0;const G=N.length>1?N.params[1]:0;switch(N.params[0]){case 14:2!==G&&this._onRequestWindowsOptionsReport.fire(X.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(X.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${m.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:0!==G&&2!==G||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==G&&1!==G||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==G&&2!==G||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==G&&1!==G||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(N){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(N){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(N){return this._windowTitle=N,this._onTitleChange.fire(N),!0}setIconName(N){return this._iconName=N,!0}setOrReportIndexedColor(N){const G=[],Q=N.split(";");for(;Q.length>1;){const re=Q.shift(),ke=Q.shift();if(/^\d+$/.exec(re)){const He=parseInt(re);if(De(He))if("?"===ke)G.push({type:0,index:He});else{const We=(0,C.parseColor)(ke);We&&G.push({type:1,index:He,color:We})}}}return G.length&&this._onColor.fire(G),!0}setHyperlink(N){const G=N.split(";");return!(G.length<2)&&(G[1]?this._createHyperlink(G[0],G[1]):!G[0]&&this._finishHyperlink())}_createHyperlink(N,G){this._getCurrentLinkId()&&this._finishHyperlink();const Q=N.split(":");let re;const ke=Q.findIndex(He=>He.startsWith("id="));return-1!==ke&&(re=Q[ke].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:re,uri:G}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(N,G){const Q=N.split(";");for(let re=0;re<Q.length&&!(G>=this._specialColors.length);++re,++G)if("?"===Q[re])this._onColor.fire([{type:0,index:this._specialColors[G]}]);else{const ke=(0,C.parseColor)(Q[re]);ke&&this._onColor.fire([{type:1,index:this._specialColors[G],color:ke}])}return!0}setOrReportFgColor(N){return this._setOrReportSpecialColor(N,0)}setOrReportBgColor(N){return this._setOrReportSpecialColor(N,1)}setOrReportCursorColor(N){return this._setOrReportSpecialColor(N,2)}restoreIndexedColor(N){if(!N)return this._onColor.fire([{type:2}]),!0;const G=[],Q=N.split(";");for(let re=0;re<Q.length;++re)if(/^\d+$/.exec(Q[re])){const ke=parseInt(Q[re]);De(ke)&&G.push({type:2,index:ke})}return G.length&&this._onColor.fire(G),!0}restoreFgColor(N){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(N){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(N){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,w.DEFAULT_CHARSET),!0}selectCharset(N){return 2!==N.length?(this.selectDefaultCharset(),!0):("/"===N[0]||this._charsetService.setgCharset(P[N[0]],w.CHARSETS[N[1]]||w.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){return this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop?(this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)):(this._activeBuffer.y--,this._restrictCursor()),!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(N){return this._charsetService.setgLevel(N),!0}screenAlignmentPattern(){const N=new d.CellData;N.content=4194304|"E".charCodeAt(0),N.fg=this._curAttrData.fg,N.bg=this._curAttrData.bg,this._setCursor(0,0);for(let G=0;G<this._bufferService.rows;++G){const re=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y+G);re&&(re.fill(N),re.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(N,G){const Q=this._bufferService.buffer,re=this._optionsService.rawOptions;return(ke=>(this._coreService.triggerDataEvent(`${m.C0.ESC}${ke}${m.C0.ESC}\\`),!0))('"q'===N?`P1$r${this._curAttrData.isProtected()?1:0}"q`:'"p'===N?'P1$r61;1"p':"r"===N?`P1$r${Q.scrollTop+1};${Q.scrollBottom+1}r`:"m"===N?"P1$r0m":" q"===N?`P1$r${{block:2,underline:4,bar:6}[re.cursorStyle]-(re.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(N,G){this._dirtyRowTracker.markRangeDirty(N,G)}};let ve=class{constructor(Ce){this._bufferService=Ce,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(Ce){Ce<this.start?this.start=Ce:Ce>this.end&&(this.end=Ce)}markRangeDirty(Ce,N){Ce>N&&(J=Ce,Ce=N,N=J),Ce<this.start&&(this.start=Ce),N>this.end&&(this.end=N)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function De(Ce){return 0<=Ce&&Ce<256}ve=y([T(0,E.IBufferService)],ve)},844:(he,g)=>{function v(y){for(const T of y)T.dispose();y.length=0}Object.defineProperty(g,"__esModule",{value:!0}),g.getDisposeArrayDisposable=g.disposeArray=g.toDisposable=g.MutableDisposable=g.Disposable=void 0,g.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const y of this._disposables)y.dispose();this._disposables.length=0}register(y){return this._disposables.push(y),y}unregister(y){const T=this._disposables.indexOf(y);-1!==T&&this._disposables.splice(T,1)}},g.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(y){var T;this._isDisposed||y===this._value||(null===(T=this._value)||void 0===T||T.dispose(),this._value=y)}clear(){this.value=void 0}dispose(){var y;this._isDisposed=!0,null===(y=this._value)||void 0===y||y.dispose(),this._value=void 0}},g.toDisposable=function(y){return{dispose:y}},g.disposeArray=v,g.getDisposeArrayDisposable=function(y){return{dispose:()=>v(y)}}},1505:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.FourKeyMap=g.TwoKeyMap=void 0;class v{constructor(){this._data={}}set(T,m,w){this._data[T]||(this._data[T]={}),this._data[T][m]=w}get(T,m){return this._data[T]?this._data[T][m]:void 0}clear(){this._data={}}}g.TwoKeyMap=v,g.FourKeyMap=class{constructor(){this._data=new v}set(y,T,m,w,D){this._data.get(y,T)||this._data.set(y,T,new v),this._data.get(y,T).set(m,w,D)}get(y,T,m,w){var D;return null===(D=this._data.get(y,T))||void 0===D?void 0:D.get(m,w)}clear(){this._data.clear()}}},6114:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.isChromeOS=g.isLinux=g.isWindows=g.isIphone=g.isIpad=g.isMac=g.getSafariVersion=g.isSafari=g.isLegacyEdge=g.isFirefox=g.isNode=void 0,g.isNode=typeof navigator>"u";const v=g.isNode?"node":navigator.userAgent,y=g.isNode?"node":navigator.platform;g.isFirefox=v.includes("Firefox"),g.isLegacyEdge=v.includes("Edge"),g.isSafari=/^((?!chrome|android).)*safari/i.test(v),g.getSafariVersion=function(){if(!g.isSafari)return 0;const T=v.match(/Version\/(\d+)/);return null===T||T.length<2?0:parseInt(T[1])},g.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(y),g.isIpad="iPad"===y,g.isIphone="iPhone"===y,g.isWindows=["Windows","Win16","Win32","WinCE"].includes(y),g.isLinux=y.indexOf("Linux")>=0,g.isChromeOS=/\bCrOS\b/.test(v)},6106:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.SortedList=void 0;let v=0;g.SortedList=class{constructor(y){this._getKey=y,this._array=[]}clear(){this._array.length=0}insert(y){0!==this._array.length?(v=this._search(this._getKey(y)),this._array.splice(v,0,y)):this._array.push(y)}delete(y){if(0===this._array.length)return!1;const T=this._getKey(y);if(void 0===T||(v=this._search(T),-1===v)||this._getKey(this._array[v])!==T)return!1;do{if(this._array[v]===y)return this._array.splice(v,1),!0}while(++v<this._array.length&&this._getKey(this._array[v])===T);return!1}*getKeyIterator(y){if(0!==this._array.length&&(v=this._search(y),!(v<0||v>=this._array.length)&&this._getKey(this._array[v])===y))do{yield this._array[v]}while(++v<this._array.length&&this._getKey(this._array[v])===y)}forEachByKey(y,T){if(0!==this._array.length&&(v=this._search(y),!(v<0||v>=this._array.length)&&this._getKey(this._array[v])===y))do{T(this._array[v])}while(++v<this._array.length&&this._getKey(this._array[v])===y)}values(){return[...this._array].values()}_search(y){let T=0,m=this._array.length-1;for(;m>=T;){let w=T+m>>1;const D=this._getKey(this._array[w]);if(D>y)m=w-1;else{if(!(D<y)){for(;w>0&&this._getKey(this._array[w-1])===y;)w--;return w}T=w+1}}return T}}},7226:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DebouncedIdleTask=g.IdleTaskQueue=g.PriorityTaskQueue=void 0;const y=v(6114);class T{constructor(){this._tasks=[],this._i=0}enqueue(D){this._tasks.push(D),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(D){this._idleCallback=void 0;let L=0,M=0,l=D.timeRemaining(),f=0;for(;this._i<this._tasks.length;){if(L=Date.now(),this._tasks[this._i]()||this._i++,L=Math.max(1,Date.now()-L),M=Math.max(L,M),f=D.timeRemaining(),1.5*M>f)return l-L<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(l-L))}ms`),void this._start();l=f}this.clear()}}class m extends T{_requestCallback(D){return setTimeout(()=>D(this._createDeadline(16)))}_cancelCallback(D){clearTimeout(D)}_createDeadline(D){const L=Date.now()+D;return{timeRemaining:()=>Math.max(0,L-Date.now())}}}g.PriorityTaskQueue=m,g.IdleTaskQueue=!y.isNode&&"requestIdleCallback"in window?class extends T{_requestCallback(w){return requestIdleCallback(w)}_cancelCallback(w){cancelIdleCallback(w)}}:m,g.DebouncedIdleTask=class{constructor(){this._queue=new g.IdleTaskQueue}set(w){this._queue.clear(),this._queue.enqueue(w)}flush(){this._queue.flush()}}},9282:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.updateWindowsModeWrappedState=void 0;const y=v(643);g.updateWindowsModeWrappedState=function(T){const m=T.buffer.lines.get(T.buffer.ybase+T.buffer.y-1),w=m?.get(T.cols-1),D=T.buffer.lines.get(T.buffer.ybase+T.buffer.y);D&&w&&(D.isWrapped=w[y.CHAR_DATA_CODE_INDEX]!==y.NULL_CELL_CODE&&w[y.CHAR_DATA_CODE_INDEX]!==y.WHITESPACE_CELL_CODE)}},3734:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.ExtendedAttrs=g.AttributeData=void 0;class v{constructor(){this.fg=0,this.bg=0,this.extended=new y}static toColorRGB(m){return[m>>>16&255,m>>>8&255,255&m]}static fromColorRGB(m){return(255&m[0])<<16|(255&m[1])<<8|255&m[2]}clone(){const m=new v;return m.fg=this.fg,m.bg=this.bg,m.extended=this.extended.clone(),m}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&0!==this.extended.underlineStyle?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return 50331648==(50331648&this.fg)}isBgRGB(){return 50331648==(50331648&this.bg)}isFgPalette(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)}isBgPalette(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)}isFgDefault(){return 0==(50331648&this.fg)}isBgDefault(){return 0==(50331648&this.bg)}isAttributeDefault(){return 0===this.fg&&0===this.bg}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}g.AttributeData=v;class y{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(m){this._ext=m}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(m){this._ext&=-469762049,this._ext|=m<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(m){this._ext&=-67108864,this._ext|=67108863&m}get urlId(){return this._urlId}set urlId(m){this._urlId=m}constructor(m=0,w=0){this._ext=0,this._urlId=0,this._ext=m,this._urlId=w}clone(){return new y(this._ext,this._urlId)}isEmpty(){return 0===this.underlineStyle&&0===this._urlId}}g.ExtendedAttrs=y},9092:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.Buffer=g.MAX_BUFFER_SIZE=void 0;const y=v(6349),T=v(7226),m=v(3734),w=v(8437),D=v(4634),L=v(511),M=v(643),l=v(4863),f=v(7116);g.MAX_BUFFER_SIZE=4294967295,g.Buffer=class{constructor(c,d,b){this._hasScrollback=c,this._optionsService=d,this._bufferService=b,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=w.DEFAULT_ATTR_DATA.clone(),this.savedCharset=f.DEFAULT_CHARSET,this.markers=[],this._nullCell=L.CellData.fromCharData([0,M.NULL_CELL_CHAR,M.NULL_CELL_WIDTH,M.NULL_CELL_CODE]),this._whitespaceCell=L.CellData.fromCharData([0,M.WHITESPACE_CELL_CHAR,M.WHITESPACE_CELL_WIDTH,M.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new T.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new y.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(c){return c?(this._nullCell.fg=c.fg,this._nullCell.bg=c.bg,this._nullCell.extended=c.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new m.ExtendedAttrs),this._nullCell}getWhitespaceCell(c){return c?(this._whitespaceCell.fg=c.fg,this._whitespaceCell.bg=c.bg,this._whitespaceCell.extended=c.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new m.ExtendedAttrs),this._whitespaceCell}getBlankLine(c,d){return new w.BufferLine(this._bufferService.cols,this.getNullCell(c),d)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const c=this.ybase+this.y-this.ydisp;return c>=0&&c<this._rows}_getCorrectBufferLength(c){if(!this._hasScrollback)return c;const d=c+this._optionsService.rawOptions.scrollback;return d>g.MAX_BUFFER_SIZE?g.MAX_BUFFER_SIZE:d}fillViewportRows(c){if(0===this.lines.length){void 0===c&&(c=w.DEFAULT_ATTR_DATA);let d=this._rows;for(;d--;)this.lines.push(this.getBlankLine(c))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new y.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(c,d){const b=this.getNullCell(w.DEFAULT_ATTR_DATA);let E=0;const A=this._getCorrectBufferLength(d);if(A>this.lines.maxLength&&(this.lines.maxLength=A),this.lines.length>0){if(this._cols<c)for(let C=0;C<this.lines.length;C++)E+=+this.lines.get(C).resize(c,b);let R=0;if(this._rows<d)for(let C=this._rows;C<d;C++)this.lines.length<d+this.ybase&&(this._optionsService.rawOptions.windowsMode||void 0!==this._optionsService.rawOptions.windowsPty.backend||void 0!==this._optionsService.rawOptions.windowsPty.buildNumber?this.lines.push(new w.BufferLine(c,b)):this.ybase>0&&this.lines.length<=this.ybase+this.y+R+1?(this.ybase--,R++,this.ydisp>0&&this.ydisp--):this.lines.push(new w.BufferLine(c,b)));else for(let C=this._rows;C>d;C--)this.lines.length>d+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(A<this.lines.maxLength){const C=this.lines.length-A;C>0&&(this.lines.trimStart(C),this.ybase=Math.max(this.ybase-C,0),this.ydisp=Math.max(this.ydisp-C,0),this.savedY=Math.max(this.savedY-C,0)),this.lines.maxLength=A}this.x=Math.min(this.x,c-1),this.y=Math.min(this.y,d-1),R&&(this.y+=R),this.savedX=Math.min(this.savedX,c-1),this.scrollTop=0}if(this.scrollBottom=d-1,this._isReflowEnabled&&(this._reflow(c,d),this._cols>c))for(let R=0;R<this.lines.length;R++)E+=+this.lines.get(R).resize(c,b);this._cols=c,this._rows=d,this._memoryCleanupQueue.clear(),E>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let c=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,c=!1);let d=0;for(;this._memoryCleanupPosition<this.lines.length;)if(d+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),d>100)return!0;return c}get _isReflowEnabled(){const c=this._optionsService.rawOptions.windowsPty;return c&&c.buildNumber?this._hasScrollback&&"conpty"===c.backend&&c.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(c,d){this._cols!==c&&(c>this._cols?this._reflowLarger(c,d):this._reflowSmaller(c,d))}_reflowLarger(c,d){const b=(0,D.reflowLargerGetLinesToRemove)(this.lines,this._cols,c,this.ybase+this.y,this.getNullCell(w.DEFAULT_ATTR_DATA));if(b.length>0){const E=(0,D.reflowLargerCreateNewLayout)(this.lines,b);(0,D.reflowLargerApplyNewLayout)(this.lines,E.layout),this._reflowLargerAdjustViewport(c,d,E.countRemoved)}}_reflowLargerAdjustViewport(c,d,b){const E=this.getNullCell(w.DEFAULT_ATTR_DATA);let A=b;for(;A-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<d&&this.lines.push(new w.BufferLine(c,E))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-b,0)}_reflowSmaller(c,d){const b=this.getNullCell(w.DEFAULT_ATTR_DATA),E=[];let A=0;for(let R=this.lines.length-1;R>=0;R--){let C=this.lines.get(R);if(!C||!C.isWrapped&&C.getTrimmedLength()<=c)continue;const P=[C];for(;C.isWrapped&&R>0;)C=this.lines.get(--R),P.unshift(C);const K=this.ybase+this.y;if(K>=R&&K<R+P.length)continue;const ie=P[P.length-1].getTrimmedLength(),X=(0,D.reflowSmallerGetNewLineLengths)(P,this._cols,c),J=X.length-P.length;let me;me=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+J):Math.max(0,this.lines.length-this.lines.maxLength+J);const ve=[];for(let re=0;re<J;re++){const ke=this.getBlankLine(w.DEFAULT_ATTR_DATA,!0);ve.push(ke)}ve.length>0&&(E.push({start:R+P.length+A,newLines:ve}),A+=ve.length),P.push(...ve);let De=X.length-1,Ce=X[De];0===Ce&&(De--,Ce=X[De]);let N=P.length-J-1,G=ie;for(;N>=0;){const re=Math.min(G,Ce);if(void 0===P[De])break;if(P[De].copyCellsFrom(P[N],G-re,Ce-re,re,!0),Ce-=re,0===Ce&&(De--,Ce=X[De]),G-=re,0===G){N--;const ke=Math.max(N,0);G=(0,D.getWrappedLineTrimmedLength)(P,ke,this._cols)}}for(let re=0;re<P.length;re++)X[re]<c&&P[re].setCell(X[re],b);let Q=J-me;for(;Q-- >0;)0===this.ybase?this.y<d-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+A)-d&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+J,this.ybase+d-1)}if(E.length>0){const R=[],C=[];for(let De=0;De<this.lines.length;De++)C.push(this.lines.get(De));const P=this.lines.length;let K=P-1,ie=0,X=E[ie];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+A);let J=0;for(let De=Math.min(this.lines.maxLength-1,P+A-1);De>=0;De--)if(X&&X.start>K+J){for(let Ce=X.newLines.length-1;Ce>=0;Ce--)this.lines.set(De--,X.newLines[Ce]);De++,R.push({index:K+1,amount:X.newLines.length}),J+=X.newLines.length,X=E[++ie]}else this.lines.set(De,C[K--]);let me=0;for(let De=R.length-1;De>=0;De--)R[De].index+=me,this.lines.onInsertEmitter.fire(R[De]),me+=R[De].amount;const ve=Math.max(0,P+A-this.lines.maxLength);ve>0&&this.lines.onTrimEmitter.fire(ve)}}translateBufferLineToString(c,d,b=0,E){const A=this.lines.get(c);return A?A.translateToString(d,b,E):""}getWrappedRangeForLine(c){let d=c,b=c;for(;d>0&&this.lines.get(d).isWrapped;)d--;for(;b+1<this.lines.length&&this.lines.get(b+1).isWrapped;)b++;return{first:d,last:b}}setupTabStops(c){for(null!=c?this.tabs[c]||(c=this.prevStop(c)):(this.tabs={},c=0);c<this._cols;c+=this._optionsService.rawOptions.tabStopWidth)this.tabs[c]=!0}prevStop(c){for(null==c&&(c=this.x);!this.tabs[--c]&&c>0;);return c>=this._cols?this._cols-1:c<0?0:c}nextStop(c){for(null==c&&(c=this.x);!this.tabs[++c]&&c<this._cols;);return c>=this._cols?this._cols-1:c<0?0:c}clearMarkers(c){this._isClearing=!0;for(let d=0;d<this.markers.length;d++)this.markers[d].line===c&&(this.markers[d].dispose(),this.markers.splice(d--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].dispose(),this.markers.splice(c--,1);this._isClearing=!1}addMarker(c){const d=new l.Marker(c);return this.markers.push(d),d.register(this.lines.onTrim(b=>{d.line-=b,d.line<0&&d.dispose()})),d.register(this.lines.onInsert(b=>{d.line>=b.index&&(d.line+=b.amount)})),d.register(this.lines.onDelete(b=>{d.line>=b.index&&d.line<b.index+b.amount&&d.dispose(),d.line>b.index&&(d.line-=b.amount)})),d.register(d.onDispose(()=>this._removeMarker(d))),d}_removeMarker(c){this._isClearing||this.markers.splice(this.markers.indexOf(c),1)}}},8437:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.BufferLine=g.DEFAULT_ATTR_DATA=void 0;const y=v(3734),T=v(511),m=v(643),w=v(482);g.DEFAULT_ATTR_DATA=Object.freeze(new y.AttributeData);let D=0;class L{constructor(l,f,c=!1){this.isWrapped=c,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*l);const d=f||T.CellData.fromCharData([0,m.NULL_CELL_CHAR,m.NULL_CELL_WIDTH,m.NULL_CELL_CODE]);for(let b=0;b<l;++b)this.setCell(b,d);this.length=l}get(l){const f=this._data[3*l+0],c=2097151&f;return[this._data[3*l+1],2097152&f?this._combined[l]:c?(0,w.stringFromCodePoint)(c):"",f>>22,2097152&f?this._combined[l].charCodeAt(this._combined[l].length-1):c]}set(l,f){this._data[3*l+1]=f[m.CHAR_DATA_ATTR_INDEX],f[m.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[l]=f[1],this._data[3*l+0]=2097152|l|f[m.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*l+0]=f[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[m.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(l){return this._data[3*l+0]>>22}hasWidth(l){return 12582912&this._data[3*l+0]}getFg(l){return this._data[3*l+1]}getBg(l){return this._data[3*l+2]}hasContent(l){return 4194303&this._data[3*l+0]}getCodePoint(l){const f=this._data[3*l+0];return 2097152&f?this._combined[l].charCodeAt(this._combined[l].length-1):2097151&f}isCombined(l){return 2097152&this._data[3*l+0]}getString(l){const f=this._data[3*l+0];return 2097152&f?this._combined[l]:2097151&f?(0,w.stringFromCodePoint)(2097151&f):""}isProtected(l){return 536870912&this._data[3*l+2]}loadCell(l,f){return D=3*l,f.content=this._data[D+0],f.fg=this._data[D+1],f.bg=this._data[D+2],2097152&f.content&&(f.combinedData=this._combined[l]),268435456&f.bg&&(f.extended=this._extendedAttrs[l]),f}setCell(l,f){2097152&f.content&&(this._combined[l]=f.combinedData),268435456&f.bg&&(this._extendedAttrs[l]=f.extended),this._data[3*l+0]=f.content,this._data[3*l+1]=f.fg,this._data[3*l+2]=f.bg}setCellFromCodePoint(l,f,c,d,b,E){268435456&b&&(this._extendedAttrs[l]=E),this._data[3*l+0]=f|c<<22,this._data[3*l+1]=d,this._data[3*l+2]=b}addCodepointToCell(l,f){let c=this._data[3*l+0];2097152&c?this._combined[l]+=(0,w.stringFromCodePoint)(f):(2097151&c?(this._combined[l]=(0,w.stringFromCodePoint)(2097151&c)+(0,w.stringFromCodePoint)(f),c&=-2097152,c|=2097152):c=4194304|f,this._data[3*l+0]=c)}insertCells(l,f,c,d){if((l%=this.length)&&2===this.getWidth(l-1)&&this.setCellFromCodePoint(l-1,0,1,d?.fg||0,d?.bg||0,d?.extended||new y.ExtendedAttrs),f<this.length-l){const b=new T.CellData;for(let E=this.length-l-f-1;E>=0;--E)this.setCell(l+f+E,this.loadCell(l+E,b));for(let E=0;E<f;++E)this.setCell(l+E,c)}else for(let b=l;b<this.length;++b)this.setCell(b,c);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,d?.fg||0,d?.bg||0,d?.extended||new y.ExtendedAttrs)}deleteCells(l,f,c,d){if(f<this.length-(l%=this.length)){const b=new T.CellData;for(let E=0;E<this.length-l-f;++E)this.setCell(l+E,this.loadCell(l+f+E,b));for(let E=this.length-f;E<this.length;++E)this.setCell(E,c)}else for(let b=l;b<this.length;++b)this.setCell(b,c);l&&2===this.getWidth(l-1)&&this.setCellFromCodePoint(l-1,0,1,d?.fg||0,d?.bg||0,d?.extended||new y.ExtendedAttrs),0!==this.getWidth(l)||this.hasContent(l)||this.setCellFromCodePoint(l,0,1,d?.fg||0,d?.bg||0,d?.extended||new y.ExtendedAttrs)}replaceCells(l,f,c,d,b=!1){if(b)for(l&&2===this.getWidth(l-1)&&!this.isProtected(l-1)&&this.setCellFromCodePoint(l-1,0,1,d?.fg||0,d?.bg||0,d?.extended||new y.ExtendedAttrs),f<this.length&&2===this.getWidth(f-1)&&!this.isProtected(f)&&this.setCellFromCodePoint(f,0,1,d?.fg||0,d?.bg||0,d?.extended||new y.ExtendedAttrs);l<f&&l<this.length;)this.isProtected(l)||this.setCell(l,c),l++;else for(l&&2===this.getWidth(l-1)&&this.setCellFromCodePoint(l-1,0,1,d?.fg||0,d?.bg||0,d?.extended||new y.ExtendedAttrs),f<this.length&&2===this.getWidth(f-1)&&this.setCellFromCodePoint(f,0,1,d?.fg||0,d?.bg||0,d?.extended||new y.ExtendedAttrs);l<f&&l<this.length;)this.setCell(l++,c)}resize(l,f){if(l===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const c=3*l;if(l>this.length){if(this._data.buffer.byteLength>=4*c)this._data=new Uint32Array(this._data.buffer,0,c);else{const d=new Uint32Array(c);d.set(this._data),this._data=d}for(let d=this.length;d<l;++d)this.setCell(d,f)}else{this._data=this._data.subarray(0,c);const d=Object.keys(this._combined);for(let E=0;E<d.length;E++){const A=parseInt(d[E],10);A>=l&&delete this._combined[A]}const b=Object.keys(this._extendedAttrs);for(let E=0;E<b.length;E++){const A=parseInt(b[E],10);A>=l&&delete this._extendedAttrs[A]}}return this.length=l,4*c*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const l=new Uint32Array(this._data.length);return l.set(this._data),this._data=l,1}return 0}fill(l,f=!1){if(f)for(let c=0;c<this.length;++c)this.isProtected(c)||this.setCell(c,l);else{this._combined={},this._extendedAttrs={};for(let c=0;c<this.length;++c)this.setCell(c,l)}}copyFrom(l){this.length!==l.length?this._data=new Uint32Array(l._data):this._data.set(l._data),this.length=l.length,this._combined={};for(const f in l._combined)this._combined[f]=l._combined[f];this._extendedAttrs={};for(const f in l._extendedAttrs)this._extendedAttrs[f]=l._extendedAttrs[f];this.isWrapped=l.isWrapped}clone(){const l=new L(0);l._data=new Uint32Array(this._data),l.length=this.length;for(const f in this._combined)l._combined[f]=this._combined[f];for(const f in this._extendedAttrs)l._extendedAttrs[f]=this._extendedAttrs[f];return l.isWrapped=this.isWrapped,l}getTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0])return l+(this._data[3*l+0]>>22);return 0}getNoBgTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0]||50331648&this._data[3*l+2])return l+(this._data[3*l+0]>>22);return 0}copyCellsFrom(l,f,c,d,b){const E=l._data;if(b)for(let R=d-1;R>=0;R--){for(let C=0;C<3;C++)this._data[3*(c+R)+C]=E[3*(f+R)+C];268435456&E[3*(f+R)+2]&&(this._extendedAttrs[c+R]=l._extendedAttrs[f+R])}else for(let R=0;R<d;R++){for(let C=0;C<3;C++)this._data[3*(c+R)+C]=E[3*(f+R)+C];268435456&E[3*(f+R)+2]&&(this._extendedAttrs[c+R]=l._extendedAttrs[f+R])}const A=Object.keys(l._combined);for(let R=0;R<A.length;R++){const C=parseInt(A[R],10);C>=f&&(this._combined[C-f+c]=l._combined[C])}}translateToString(l=!1,f=0,c=this.length){l&&(c=Math.min(c,this.getTrimmedLength()));let d="";for(;f<c;){const b=this._data[3*f+0],E=2097151&b;d+=2097152&b?this._combined[f]:E?(0,w.stringFromCodePoint)(E):m.WHITESPACE_CELL_CHAR,f+=b>>22||1}return d}}g.BufferLine=L},4841:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.getRangeLength=void 0,g.getRangeLength=function(v,y){if(v.start.y>v.end.y)throw new Error(`Buffer range end (${v.end.x}, ${v.end.y}) cannot be before start (${v.start.x}, ${v.start.y})`);return y*(v.end.y-v.start.y)+(v.end.x-v.start.x+1)}},4634:(he,g)=>{function v(y,T,m){if(T===y.length-1)return y[T].getTrimmedLength();const w=!y[T].hasContent(m-1)&&1===y[T].getWidth(m-1),D=2===y[T+1].getWidth(0);return w&&D?m-1:m}Object.defineProperty(g,"__esModule",{value:!0}),g.getWrappedLineTrimmedLength=g.reflowSmallerGetNewLineLengths=g.reflowLargerApplyNewLayout=g.reflowLargerCreateNewLayout=g.reflowLargerGetLinesToRemove=void 0,g.reflowLargerGetLinesToRemove=function(y,T,m,w,D){const L=[];for(let M=0;M<y.length-1;M++){let l=M,f=y.get(++l);if(!f.isWrapped)continue;const c=[y.get(M)];for(;l<y.length&&f.isWrapped;)c.push(f),f=y.get(++l);if(w>=M&&w<l){M+=c.length-1;continue}let d=0,b=v(c,d,T),E=1,A=0;for(;E<c.length;){const C=v(c,E,T),ie=Math.min(C-A,m-b);c[d].copyCellsFrom(c[E],A,b,ie,!1),b+=ie,b===m&&(d++,b=0),A+=ie,A===C&&(E++,A=0),0===b&&0!==d&&2===c[d-1].getWidth(m-1)&&(c[d].copyCellsFrom(c[d-1],m-1,b++,1,!1),c[d-1].setCell(m-1,D))}c[d].replaceCells(b,m,D);let R=0;for(let C=c.length-1;C>0&&(C>d||0===c[C].getTrimmedLength());C--)R++;R>0&&(L.push(M+c.length-R),L.push(R)),M+=c.length-1}return L},g.reflowLargerCreateNewLayout=function(y,T){const m=[];let w=0,D=T[w],L=0;for(let M=0;M<y.length;M++)if(D===M){const l=T[++w];y.onDeleteEmitter.fire({index:M-L,amount:l}),M+=l-1,L+=l,D=T[++w]}else m.push(M);return{layout:m,countRemoved:L}},g.reflowLargerApplyNewLayout=function(y,T){const m=[];for(let w=0;w<T.length;w++)m.push(y.get(T[w]));for(let w=0;w<m.length;w++)y.set(w,m[w]);y.length=T.length},g.reflowSmallerGetNewLineLengths=function(y,T,m){const w=[],D=y.map((f,c)=>v(y,c,T)).reduce((f,c)=>f+c);let L=0,M=0,l=0;for(;l<D;){if(D-l<m){w.push(D-l);break}L+=m;const f=v(y,M,T);L>f&&(L-=f,M++);const c=2===y[M].getWidth(L-1);c&&L--;const d=c?m-1:m;w.push(d),l+=d}return w},g.getWrappedLineTrimmedLength=v},5295:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.BufferSet=void 0;const y=v(8460),T=v(844),m=v(9092);g.BufferSet=class w extends T.Disposable{constructor(L,M){super(),this._optionsService=L,this._bufferService=M,this._onBufferActivate=this.register(new y.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new m.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new m.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(L){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(L),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(L,M){this._normal.resize(L,M),this._alt.resize(L,M),this.setupTabStops(L)}setupTabStops(L){this._normal.setupTabStops(L),this._alt.setupTabStops(L)}}},511:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.CellData=void 0;const y=v(482),T=v(643),m=v(3734);class w extends m.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new m.ExtendedAttrs,this.combinedData=""}static fromCharData(L){const M=new w;return M.setFromCharData(L),M}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,y.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(L){this.fg=L[T.CHAR_DATA_ATTR_INDEX],this.bg=0;let M=!1;if(L[T.CHAR_DATA_CHAR_INDEX].length>2)M=!0;else if(2===L[T.CHAR_DATA_CHAR_INDEX].length){const l=L[T.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=l&&l<=56319){const f=L[T.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=f&&f<=57343?this.content=1024*(l-55296)+f-56320+65536|L[T.CHAR_DATA_WIDTH_INDEX]<<22:M=!0}else M=!0}else this.content=L[T.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|L[T.CHAR_DATA_WIDTH_INDEX]<<22;M&&(this.combinedData=L[T.CHAR_DATA_CHAR_INDEX],this.content=2097152|L[T.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}g.CellData=w},643:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.WHITESPACE_CELL_CODE=g.WHITESPACE_CELL_WIDTH=g.WHITESPACE_CELL_CHAR=g.NULL_CELL_CODE=g.NULL_CELL_WIDTH=g.NULL_CELL_CHAR=g.CHAR_DATA_CODE_INDEX=g.CHAR_DATA_WIDTH_INDEX=g.CHAR_DATA_CHAR_INDEX=g.CHAR_DATA_ATTR_INDEX=g.DEFAULT_EXT=g.DEFAULT_ATTR=g.DEFAULT_COLOR=void 0,g.DEFAULT_COLOR=0,g.DEFAULT_ATTR=256|g.DEFAULT_COLOR<<9,g.DEFAULT_EXT=0,g.CHAR_DATA_ATTR_INDEX=0,g.CHAR_DATA_CHAR_INDEX=1,g.CHAR_DATA_WIDTH_INDEX=2,g.CHAR_DATA_CODE_INDEX=3,g.NULL_CELL_CHAR="",g.NULL_CELL_WIDTH=1,g.NULL_CELL_CODE=0,g.WHITESPACE_CELL_CHAR=" ",g.WHITESPACE_CELL_WIDTH=1,g.WHITESPACE_CELL_CODE=32},4863:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.Marker=void 0;const y=v(8460),T=v(844);class m{get id(){return this._id}constructor(D){this.line=D,this.isDisposed=!1,this._disposables=[],this._id=m._nextId++,this._onDispose=this.register(new y.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,T.disposeArray)(this._disposables),this._disposables.length=0)}register(D){return this._disposables.push(D),D}}g.Marker=m,m._nextId=1},7116:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DEFAULT_CHARSET=g.CHARSETS=void 0,g.CHARSETS={},g.DEFAULT_CHARSET=g.CHARSETS.B,g.CHARSETS[0]={"`":"\u25c6",a:"\u2592",b:"\u2409",c:"\u240c",d:"\u240d",e:"\u240a",f:"\xb0",g:"\xb1",h:"\u2424",i:"\u240b",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\xa3","~":"\xb7"},g.CHARSETS.A={"#":"\xa3"},g.CHARSETS.B=void 0,g.CHARSETS[4]={"#":"\xa3","@":"\xbe","[":"ij","\\":"\xbd","]":"|","{":"\xa8","|":"f","}":"\xbc","~":"\xb4"},g.CHARSETS.C=g.CHARSETS[5]={"[":"\xc4","\\":"\xd6","]":"\xc5","^":"\xdc","`":"\xe9","{":"\xe4","|":"\xf6","}":"\xe5","~":"\xfc"},g.CHARSETS.R={"#":"\xa3","@":"\xe0","[":"\xb0","\\":"\xe7","]":"\xa7","{":"\xe9","|":"\xf9","}":"\xe8","~":"\xa8"},g.CHARSETS.Q={"@":"\xe0","[":"\xe2","\\":"\xe7","]":"\xea","^":"\xee","`":"\xf4","{":"\xe9","|":"\xf9","}":"\xe8","~":"\xfb"},g.CHARSETS.K={"@":"\xa7","[":"\xc4","\\":"\xd6","]":"\xdc","{":"\xe4","|":"\xf6","}":"\xfc","~":"\xdf"},g.CHARSETS.Y={"#":"\xa3","@":"\xa7","[":"\xb0","\\":"\xe7","]":"\xe9","`":"\xf9","{":"\xe0","|":"\xf2","}":"\xe8","~":"\xec"},g.CHARSETS.E=g.CHARSETS[6]={"@":"\xc4","[":"\xc6","\\":"\xd8","]":"\xc5","^":"\xdc","`":"\xe4","{":"\xe6","|":"\xf8","}":"\xe5","~":"\xfc"},g.CHARSETS.Z={"#":"\xa3","@":"\xa7","[":"\xa1","\\":"\xd1","]":"\xbf","{":"\xb0","|":"\xf1","}":"\xe7"},g.CHARSETS.H=g.CHARSETS[7]={"@":"\xc9","[":"\xc4","\\":"\xd6","]":"\xc5","^":"\xdc","`":"\xe9","{":"\xe4","|":"\xf6","}":"\xe5","~":"\xfc"},g.CHARSETS["="]={"#":"\xf9","@":"\xe0","[":"\xe9","\\":"\xe7","]":"\xea","^":"\xee",_:"\xe8","`":"\xf4","{":"\xe4","|":"\xf6","}":"\xfc","~":"\xfb"}},2584:(he,g)=>{var v,y,T,m;Object.defineProperty(g,"__esModule",{value:!0}),g.C1_ESCAPED=g.C1=g.C0=void 0,(m=v||(g.C0=v={})).NUL="\0",m.SOH="\x01",m.STX="\x02",m.ETX="\x03",m.EOT="\x04",m.ENQ="\x05",m.ACK="\x06",m.BEL="\x07",m.BS="\b",m.HT="\t",m.LF="\n",m.VT="\v",m.FF="\f",m.CR="\r",m.SO="\x0e",m.SI="\x0f",m.DLE="\x10",m.DC1="\x11",m.DC2="\x12",m.DC3="\x13",m.DC4="\x14",m.NAK="\x15",m.SYN="\x16",m.ETB="\x17",m.CAN="\x18",m.EM="\x19",m.SUB="\x1a",m.ESC="\x1b",m.FS="\x1c",m.GS="\x1d",m.RS="\x1e",m.US="\x1f",m.SP=" ",m.DEL="\x7f",function(m){m.PAD="\x80",m.HOP="\x81",m.BPH="\x82",m.NBH="\x83",m.IND="\x84",m.NEL="\x85",m.SSA="\x86",m.ESA="\x87",m.HTS="\x88",m.HTJ="\x89",m.VTS="\x8a",m.PLD="\x8b",m.PLU="\x8c",m.RI="\x8d",m.SS2="\x8e",m.SS3="\x8f",m.DCS="\x90",m.PU1="\x91",m.PU2="\x92",m.STS="\x93",m.CCH="\x94",m.MW="\x95",m.SPA="\x96",m.EPA="\x97",m.SOS="\x98",m.SGCI="\x99",m.SCI="\x9a",m.CSI="\x9b",m.ST="\x9c",m.OSC="\x9d",m.PM="\x9e",m.APC="\x9f"}(y||(g.C1=y={})),function(m){m.ST=`${v.ESC}\\`}(T||(g.C1_ESCAPED=T={}))},7399:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.evaluateKeyboardEvent=void 0;const y=v(2584),T={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};g.evaluateKeyboardEvent=function(m,w,D,L){const M={type:0,cancel:!1,key:void 0},l=(m.shiftKey?1:0)|(m.altKey?2:0)|(m.ctrlKey?4:0)|(m.metaKey?8:0);switch(m.keyCode){case 0:"UIKeyInputUpArrow"===m.key?M.key=w?y.C0.ESC+"OA":y.C0.ESC+"[A":"UIKeyInputLeftArrow"===m.key?M.key=w?y.C0.ESC+"OD":y.C0.ESC+"[D":"UIKeyInputRightArrow"===m.key?M.key=w?y.C0.ESC+"OC":y.C0.ESC+"[C":"UIKeyInputDownArrow"===m.key&&(M.key=w?y.C0.ESC+"OB":y.C0.ESC+"[B");break;case 8:if(m.altKey){M.key=y.C0.ESC+y.C0.DEL;break}M.key=y.C0.DEL;break;case 9:if(m.shiftKey){M.key=y.C0.ESC+"[Z";break}M.key=y.C0.HT,M.cancel=!0;break;case 13:M.key=m.altKey?y.C0.ESC+y.C0.CR:y.C0.CR,M.cancel=!0;break;case 27:M.key=y.C0.ESC,m.altKey&&(M.key=y.C0.ESC+y.C0.ESC),M.cancel=!0;break;case 37:if(m.metaKey)break;l?(M.key=y.C0.ESC+"[1;"+(l+1)+"D",M.key===y.C0.ESC+"[1;3D"&&(M.key=y.C0.ESC+(D?"b":"[1;5D"))):M.key=w?y.C0.ESC+"OD":y.C0.ESC+"[D";break;case 39:if(m.metaKey)break;l?(M.key=y.C0.ESC+"[1;"+(l+1)+"C",M.key===y.C0.ESC+"[1;3C"&&(M.key=y.C0.ESC+(D?"f":"[1;5C"))):M.key=w?y.C0.ESC+"OC":y.C0.ESC+"[C";break;case 38:if(m.metaKey)break;l?(M.key=y.C0.ESC+"[1;"+(l+1)+"A",D||M.key!==y.C0.ESC+"[1;3A"||(M.key=y.C0.ESC+"[1;5A")):M.key=w?y.C0.ESC+"OA":y.C0.ESC+"[A";break;case 40:if(m.metaKey)break;l?(M.key=y.C0.ESC+"[1;"+(l+1)+"B",D||M.key!==y.C0.ESC+"[1;3B"||(M.key=y.C0.ESC+"[1;5B")):M.key=w?y.C0.ESC+"OB":y.C0.ESC+"[B";break;case 45:m.shiftKey||m.ctrlKey||(M.key=y.C0.ESC+"[2~");break;case 46:M.key=l?y.C0.ESC+"[3;"+(l+1)+"~":y.C0.ESC+"[3~";break;case 36:M.key=l?y.C0.ESC+"[1;"+(l+1)+"H":w?y.C0.ESC+"OH":y.C0.ESC+"[H";break;case 35:M.key=l?y.C0.ESC+"[1;"+(l+1)+"F":w?y.C0.ESC+"OF":y.C0.ESC+"[F";break;case 33:m.shiftKey?M.type=2:M.key=m.ctrlKey?y.C0.ESC+"[5;"+(l+1)+"~":y.C0.ESC+"[5~";break;case 34:m.shiftKey?M.type=3:M.key=m.ctrlKey?y.C0.ESC+"[6;"+(l+1)+"~":y.C0.ESC+"[6~";break;case 112:M.key=l?y.C0.ESC+"[1;"+(l+1)+"P":y.C0.ESC+"OP";break;case 113:M.key=l?y.C0.ESC+"[1;"+(l+1)+"Q":y.C0.ESC+"OQ";break;case 114:M.key=l?y.C0.ESC+"[1;"+(l+1)+"R":y.C0.ESC+"OR";break;case 115:M.key=l?y.C0.ESC+"[1;"+(l+1)+"S":y.C0.ESC+"OS";break;case 116:M.key=l?y.C0.ESC+"[15;"+(l+1)+"~":y.C0.ESC+"[15~";break;case 117:M.key=l?y.C0.ESC+"[17;"+(l+1)+"~":y.C0.ESC+"[17~";break;case 118:M.key=l?y.C0.ESC+"[18;"+(l+1)+"~":y.C0.ESC+"[18~";break;case 119:M.key=l?y.C0.ESC+"[19;"+(l+1)+"~":y.C0.ESC+"[19~";break;case 120:M.key=l?y.C0.ESC+"[20;"+(l+1)+"~":y.C0.ESC+"[20~";break;case 121:M.key=l?y.C0.ESC+"[21;"+(l+1)+"~":y.C0.ESC+"[21~";break;case 122:M.key=l?y.C0.ESC+"[23;"+(l+1)+"~":y.C0.ESC+"[23~";break;case 123:M.key=l?y.C0.ESC+"[24;"+(l+1)+"~":y.C0.ESC+"[24~";break;default:if(!m.ctrlKey||m.shiftKey||m.altKey||m.metaKey)if(D&&!L||!m.altKey||m.metaKey)!D||m.altKey||m.ctrlKey||m.shiftKey||!m.metaKey?m.key&&!m.ctrlKey&&!m.altKey&&!m.metaKey&&m.keyCode>=48&&1===m.key.length?M.key=m.key:m.key&&m.ctrlKey&&("_"===m.key&&(M.key=y.C0.US),"@"===m.key&&(M.key=y.C0.NUL)):65===m.keyCode&&(M.type=1);else{const f=T[m.keyCode],c=f?.[m.shiftKey?1:0];if(c)M.key=y.C0.ESC+c;else if(m.keyCode>=65&&m.keyCode<=90){let b=String.fromCharCode(m.ctrlKey?m.keyCode-64:m.keyCode+32);m.shiftKey&&(b=b.toUpperCase()),M.key=y.C0.ESC+b}else if(32===m.keyCode)M.key=y.C0.ESC+(m.ctrlKey?y.C0.NUL:" ");else if("Dead"===m.key&&m.code.startsWith("Key")){let d=m.code.slice(3,4);m.shiftKey||(d=d.toLowerCase()),M.key=y.C0.ESC+d,M.cancel=!0}}else m.keyCode>=65&&m.keyCode<=90?M.key=String.fromCharCode(m.keyCode-64):32===m.keyCode?M.key=y.C0.NUL:m.keyCode>=51&&m.keyCode<=55?M.key=String.fromCharCode(m.keyCode-51+27):56===m.keyCode?M.key=y.C0.DEL:219===m.keyCode?M.key=y.C0.ESC:220===m.keyCode?M.key=y.C0.FS:221===m.keyCode&&(M.key=y.C0.GS)}return M}},482:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.Utf8ToUtf32=g.StringToUtf32=g.utf32ToString=g.stringFromCodePoint=void 0,g.stringFromCodePoint=function(v){return v>65535?(v-=65536,String.fromCharCode(55296+(v>>10))+String.fromCharCode(v%1024+56320)):String.fromCharCode(v)},g.utf32ToString=function(v,y=0,T=v.length){let m="";for(let w=y;w<T;++w){let D=v[w];D>65535?(D-=65536,m+=String.fromCharCode(55296+(D>>10))+String.fromCharCode(D%1024+56320)):m+=String.fromCharCode(D)}return m},g.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(v,y){const T=v.length;if(!T)return 0;let m=0,w=0;if(this._interim){const D=v.charCodeAt(w++);56320<=D&&D<=57343?y[m++]=1024*(this._interim-55296)+D-56320+65536:(y[m++]=this._interim,y[m++]=D),this._interim=0}for(let D=w;D<T;++D){const L=v.charCodeAt(D);if(55296<=L&&L<=56319){if(++D>=T)return this._interim=L,m;const M=v.charCodeAt(D);56320<=M&&M<=57343?y[m++]=1024*(L-55296)+M-56320+65536:(y[m++]=L,y[m++]=M)}else 65279!==L&&(y[m++]=L)}return m}},g.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(v,y){const T=v.length;if(!T)return 0;let m,w,D,L,M=0,l=0,f=0;if(this.interim[0]){let b=!1,E=this.interim[0];E&=192==(224&E)?31:224==(240&E)?15:7;let A,R=0;for(;(A=63&this.interim[++R])&&R<4;)E<<=6,E|=A;const C=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,P=C-R;for(;f<P;){if(f>=T)return 0;if(A=v[f++],128!=(192&A)){f--,b=!0;break}this.interim[R++]=A,E<<=6,E|=63&A}b||(2===C?E<128?f--:y[M++]=E:3===C?E<2048||E>=55296&&E<=57343||65279===E||(y[M++]=E):E<65536||E>1114111||(y[M++]=E)),this.interim.fill(0)}const c=T-4;let d=f;for(;d<T;){for(;!(!(d<c)||128&(m=v[d])||128&(w=v[d+1])||128&(D=v[d+2])||128&(L=v[d+3]));)y[M++]=m,y[M++]=w,y[M++]=D,y[M++]=L,d+=4;if(m=v[d++],m<128)y[M++]=m;else if(192==(224&m)){if(d>=T)return this.interim[0]=m,M;if(w=v[d++],128!=(192&w)){d--;continue}if(l=(31&m)<<6|63&w,l<128){d--;continue}y[M++]=l}else if(224==(240&m)){if(d>=T)return this.interim[0]=m,M;if(w=v[d++],128!=(192&w)){d--;continue}if(d>=T)return this.interim[0]=m,this.interim[1]=w,M;if(D=v[d++],128!=(192&D)){d--;continue}if(l=(15&m)<<12|(63&w)<<6|63&D,l<2048||l>=55296&&l<=57343||65279===l)continue;y[M++]=l}else if(240==(248&m)){if(d>=T)return this.interim[0]=m,M;if(w=v[d++],128!=(192&w)){d--;continue}if(d>=T)return this.interim[0]=m,this.interim[1]=w,M;if(D=v[d++],128!=(192&D)){d--;continue}if(d>=T)return this.interim[0]=m,this.interim[1]=w,this.interim[2]=D,M;if(L=v[d++],128!=(192&L)){d--;continue}if(l=(7&m)<<18|(63&w)<<12|(63&D)<<6|63&L,l<65536||l>1114111)continue;y[M++]=l}}return M}}},225:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.UnicodeV6=void 0;const v=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],y=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let T;g.UnicodeV6=class{constructor(){if(this.version="6",!T){T=new Uint8Array(65536),T.fill(1),T[0]=0,T.fill(0,1,32),T.fill(0,127,160),T.fill(2,4352,4448),T[9001]=2,T[9002]=2,T.fill(2,11904,42192),T[12351]=1,T.fill(2,44032,55204),T.fill(2,63744,64256),T.fill(2,65040,65050),T.fill(2,65072,65136),T.fill(2,65280,65377),T.fill(2,65504,65511);for(let m=0;m<v.length;++m)T.fill(0,v[m][0],v[m][1]+1)}}wcwidth(m){return m<32?0:m<127?1:m<65536?T[m]:function(w,D){let L,M=0,l=D.length-1;if(w<D[0][0]||w>D[l][1])return!1;for(;l>=M;)if(L=M+l>>1,w>D[L][1])M=L+1;else{if(!(w<D[L][0]))return!0;l=L-1}return!1}(m,y)?0:m>=131072&&m<=196605||m>=196608&&m<=262141?2:1}}},5981:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.WriteBuffer=void 0;const y=v(8460),T=v(844);g.WriteBuffer=class m extends T.Disposable{constructor(D){super(),this._action=D,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new y.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(D,L){if(void 0!==L&&this._syncCalls>L)return void(this._syncCalls=0);if(this._pendingData+=D.length,this._writeBuffer.push(D),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let M;for(this._isSyncWriting=!0;M=this._writeBuffer.shift();){this._action(M);const l=this._callbacks.shift();l&&l()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(D,L){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=D.length,this._writeBuffer.push(D),this._callbacks.push(L),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=D.length,this._writeBuffer.push(D),this._callbacks.push(L)}_innerWrite(D=0,L=!0){const M=D||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const l=this._writeBuffer[this._bufferOffset],f=this._action(l,L);if(f){const d=b=>Date.now()-M>=12?setTimeout(()=>this._innerWrite(0,b)):this._innerWrite(M,b);return void f.catch(b=>(queueMicrotask(()=>{throw b}),Promise.resolve(!1))).then(d)}const c=this._callbacks[this._bufferOffset];if(c&&c(),this._bufferOffset++,this._pendingData-=l.length,Date.now()-M>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}},5941:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.toRgbString=g.parseColor=void 0;const v=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,y=/^[\da-f]+$/;function T(m,w){const D=m.toString(16),L=D.length<2?"0"+D:D;switch(w){case 4:return D[0];case 8:return L;case 12:return(L+L).slice(0,3);default:return L+L}}g.parseColor=function(m){if(!m)return;let w=m.toLowerCase();if(0===w.indexOf("rgb:")){w=w.slice(4);const D=v.exec(w);if(D){const L=D[1]?15:D[4]?255:D[7]?4095:65535;return[Math.round(parseInt(D[1]||D[4]||D[7]||D[10],16)/L*255),Math.round(parseInt(D[2]||D[5]||D[8]||D[11],16)/L*255),Math.round(parseInt(D[3]||D[6]||D[9]||D[12],16)/L*255)]}}else if(0===w.indexOf("#")&&(w=w.slice(1),y.exec(w)&&[3,6,9,12].includes(w.length))){const D=w.length/3,L=[0,0,0];for(let M=0;M<3;++M){const l=parseInt(w.slice(D*M,D*M+D),16);L[M]=1===D?l<<4:2===D?l:3===D?l>>4:l>>8}return L}},g.toRgbString=function(m,w=16){const[D,L,M]=m;return`rgb:${T(D,w)}/${T(L,w)}/${T(M,w)}`}},5770:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PAYLOAD_LIMIT=void 0,g.PAYLOAD_LIMIT=1e7},6351:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DcsHandler=g.DcsParser=void 0;const y=v(482),T=v(8742),m=v(5770),w=[];g.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=w,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=w}registerHandler(L,M){void 0===this._handlers[L]&&(this._handlers[L]=[]);const l=this._handlers[L];return l.push(M),{dispose:()=>{const f=l.indexOf(M);-1!==f&&l.splice(f,1)}}}clearHandler(L){this._handlers[L]&&delete this._handlers[L]}setHandlerFallback(L){this._handlerFb=L}reset(){if(this._active.length)for(let L=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;L>=0;--L)this._active[L].unhook(!1);this._stack.paused=!1,this._active=w,this._ident=0}hook(L,M){if(this.reset(),this._ident=L,this._active=this._handlers[L]||w,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].hook(M);else this._handlerFb(this._ident,"HOOK",M)}put(L,M,l){if(this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].put(L,M,l);else this._handlerFb(this._ident,"PUT",(0,y.utf32ToString)(L,M,l))}unhook(L,M=!0){if(this._active.length){let l=!1,f=this._active.length-1,c=!1;if(this._stack.paused&&(f=this._stack.loopPosition-1,l=M,c=this._stack.fallThrough,this._stack.paused=!1),!c&&!1===l){for(;f>=0&&(l=this._active[f].unhook(L),!0!==l);f--)if(l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!1,l;f--}for(;f>=0;f--)if(l=this._active[f].unhook(!1),l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!0,l}else this._handlerFb(this._ident,"UNHOOK",L);this._active=w,this._ident=0}};const D=new T.Params;D.addParam(0),g.DcsHandler=class{constructor(L){this._handler=L,this._data="",this._params=D,this._hitLimit=!1}hook(L){this._params=L.length>1||L.params[0]?L.clone():D,this._data="",this._hitLimit=!1}put(L,M,l){this._hitLimit||(this._data+=(0,y.utf32ToString)(L,M,l),this._data.length>m.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(L){let M=!1;if(this._hitLimit)M=!1;else if(L&&(M=this._handler(this._data,this._params),M instanceof Promise))return M.then(l=>(this._params=D,this._data="",this._hitLimit=!1,l));return this._params=D,this._data="",this._hitLimit=!1,M}}},2015:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.EscapeSequenceParser=g.VT500_TRANSITION_TABLE=g.TransitionTable=void 0;const y=v(844),T=v(8742),m=v(6242),w=v(6351);class D{constructor(f){this.table=new Uint8Array(f)}setDefault(f,c){this.table.fill(f<<4|c)}add(f,c,d,b){this.table[c<<8|f]=d<<4|b}addMany(f,c,d,b){for(let E=0;E<f.length;E++)this.table[c<<8|f[E]]=d<<4|b}}g.TransitionTable=D;const L=160;g.VT500_TRANSITION_TABLE=function(){const l=new D(4095),f=Array.apply(null,Array(256)).map((R,C)=>C),c=(R,C)=>f.slice(R,C),d=c(32,127),b=c(0,24);b.push(25),b.push.apply(b,c(28,32));const E=c(0,14);let A;for(A in l.setDefault(1,0),l.addMany(d,0,2,0),E)l.addMany([24,26,153,154],A,3,0),l.addMany(c(128,144),A,3,0),l.addMany(c(144,152),A,3,0),l.add(156,A,0,0),l.add(27,A,11,1),l.add(157,A,4,8),l.addMany([152,158,159],A,0,7),l.add(155,A,11,3),l.add(144,A,11,9);return l.addMany(b,0,3,0),l.addMany(b,1,3,1),l.add(127,1,0,1),l.addMany(b,8,0,8),l.addMany(b,3,3,3),l.add(127,3,0,3),l.addMany(b,4,3,4),l.add(127,4,0,4),l.addMany(b,6,3,6),l.addMany(b,5,3,5),l.add(127,5,0,5),l.addMany(b,2,3,2),l.add(127,2,0,2),l.add(93,1,4,8),l.addMany(d,8,5,8),l.add(127,8,5,8),l.addMany([156,27,24,26,7],8,6,0),l.addMany(c(28,32),8,0,8),l.addMany([88,94,95],1,0,7),l.addMany(d,7,0,7),l.addMany(b,7,0,7),l.add(156,7,0,0),l.add(127,7,0,7),l.add(91,1,11,3),l.addMany(c(64,127),3,7,0),l.addMany(c(48,60),3,8,4),l.addMany([60,61,62,63],3,9,4),l.addMany(c(48,60),4,8,4),l.addMany(c(64,127),4,7,0),l.addMany([60,61,62,63],4,0,6),l.addMany(c(32,64),6,0,6),l.add(127,6,0,6),l.addMany(c(64,127),6,0,0),l.addMany(c(32,48),3,9,5),l.addMany(c(32,48),5,9,5),l.addMany(c(48,64),5,0,6),l.addMany(c(64,127),5,7,0),l.addMany(c(32,48),4,9,5),l.addMany(c(32,48),1,9,2),l.addMany(c(32,48),2,9,2),l.addMany(c(48,127),2,10,0),l.addMany(c(48,80),1,10,0),l.addMany(c(81,88),1,10,0),l.addMany([89,90,92],1,10,0),l.addMany(c(96,127),1,10,0),l.add(80,1,11,9),l.addMany(b,9,0,9),l.add(127,9,0,9),l.addMany(c(28,32),9,0,9),l.addMany(c(32,48),9,9,12),l.addMany(c(48,60),9,8,10),l.addMany([60,61,62,63],9,9,10),l.addMany(b,11,0,11),l.addMany(c(32,128),11,0,11),l.addMany(c(28,32),11,0,11),l.addMany(b,10,0,10),l.add(127,10,0,10),l.addMany(c(28,32),10,0,10),l.addMany(c(48,60),10,8,10),l.addMany([60,61,62,63],10,0,11),l.addMany(c(32,48),10,9,12),l.addMany(b,12,0,12),l.add(127,12,0,12),l.addMany(c(28,32),12,0,12),l.addMany(c(32,48),12,9,12),l.addMany(c(48,64),12,0,11),l.addMany(c(64,127),12,12,13),l.addMany(c(64,127),10,12,13),l.addMany(c(64,127),9,12,13),l.addMany(b,13,13,13),l.addMany(d,13,13,13),l.add(127,13,0,13),l.addMany([27,156,24,26],13,14,0),l.add(L,0,2,0),l.add(L,8,5,8),l.add(L,6,0,6),l.add(L,11,0,11),l.add(L,13,13,13),l}(),g.EscapeSequenceParser=class M extends y.Disposable{constructor(f=g.VT500_TRANSITION_TABLE){super(),this._transitions=f,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new T.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(c,d,b)=>{},this._executeHandlerFb=c=>{},this._csiHandlerFb=(c,d)=>{},this._escHandlerFb=c=>{},this._errorHandlerFb=c=>c,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,y.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new m.OscParser),this._dcsParser=this.register(new w.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(f,c=[64,126]){let d=0;if(f.prefix){if(f.prefix.length>1)throw new Error("only one byte as prefix supported");if(d=f.prefix.charCodeAt(0),d&&60>d||d>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(f.intermediates){if(f.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let E=0;E<f.intermediates.length;++E){const A=f.intermediates.charCodeAt(E);if(32>A||A>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");d<<=8,d|=A}}if(1!==f.final.length)throw new Error("final must be a single byte");const b=f.final.charCodeAt(0);if(c[0]>b||b>c[1])throw new Error(`final must be in range ${c[0]} .. ${c[1]}`);return d<<=8,d|=b,d}identToString(f){const c=[];for(;f;)c.push(String.fromCharCode(255&f)),f>>=8;return c.reverse().join("")}setPrintHandler(f){this._printHandler=f}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(f,c){const d=this._identifier(f,[48,126]);void 0===this._escHandlers[d]&&(this._escHandlers[d]=[]);const b=this._escHandlers[d];return b.push(c),{dispose:()=>{const E=b.indexOf(c);-1!==E&&b.splice(E,1)}}}clearEscHandler(f){this._escHandlers[this._identifier(f,[48,126])]&&delete this._escHandlers[this._identifier(f,[48,126])]}setEscHandlerFallback(f){this._escHandlerFb=f}setExecuteHandler(f,c){this._executeHandlers[f.charCodeAt(0)]=c}clearExecuteHandler(f){this._executeHandlers[f.charCodeAt(0)]&&delete this._executeHandlers[f.charCodeAt(0)]}setExecuteHandlerFallback(f){this._executeHandlerFb=f}registerCsiHandler(f,c){const d=this._identifier(f);void 0===this._csiHandlers[d]&&(this._csiHandlers[d]=[]);const b=this._csiHandlers[d];return b.push(c),{dispose:()=>{const E=b.indexOf(c);-1!==E&&b.splice(E,1)}}}clearCsiHandler(f){this._csiHandlers[this._identifier(f)]&&delete this._csiHandlers[this._identifier(f)]}setCsiHandlerFallback(f){this._csiHandlerFb=f}registerDcsHandler(f,c){return this._dcsParser.registerHandler(this._identifier(f),c)}clearDcsHandler(f){this._dcsParser.clearHandler(this._identifier(f))}setDcsHandlerFallback(f){this._dcsParser.setHandlerFallback(f)}registerOscHandler(f,c){return this._oscParser.registerHandler(f,c)}clearOscHandler(f){this._oscParser.clearHandler(f)}setOscHandlerFallback(f){this._oscParser.setHandlerFallback(f)}setErrorHandler(f){this._errorHandler=f}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(f,c,d,b,E){this._parseStack.state=f,this._parseStack.handlers=c,this._parseStack.handlerPos=d,this._parseStack.transition=b,this._parseStack.chunkPos=E}parse(f,c,d){let b,E=0,A=0,R=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,R=this._parseStack.chunkPos+1;else{if(void 0===d||1===this._parseStack.state)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const C=this._parseStack.handlers;let P=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===d&&P>-1)for(;P>=0&&(b=C[P](this._params),!0!==b);P--)if(b instanceof Promise)return this._parseStack.handlerPos=P,b;this._parseStack.handlers=[];break;case 4:if(!1===d&&P>-1)for(;P>=0&&(b=C[P](),!0!==b);P--)if(b instanceof Promise)return this._parseStack.handlerPos=P,b;this._parseStack.handlers=[];break;case 6:if(E=f[this._parseStack.chunkPos],b=this._dcsParser.unhook(24!==E&&26!==E,d),b)return b;27===E&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(E=f[this._parseStack.chunkPos],b=this._oscParser.end(24!==E&&26!==E,d),b)return b;27===E&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,R=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let C=R;C<c;++C){switch(E=f[C],A=this._transitions.table[this.currentState<<8|(E<160?E:L)],A>>4){case 2:for(let J=C+1;;++J){if(J>=c||(E=f[J])<32||E>126&&E<L){this._printHandler(f,C,J),C=J-1;break}if(++J>=c||(E=f[J])<32||E>126&&E<L){this._printHandler(f,C,J),C=J-1;break}if(++J>=c||(E=f[J])<32||E>126&&E<L){this._printHandler(f,C,J),C=J-1;break}if(++J>=c||(E=f[J])<32||E>126&&E<L){this._printHandler(f,C,J),C=J-1;break}}break;case 3:this._executeHandlers[E]?this._executeHandlers[E]():this._executeHandlerFb(E),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:C,code:E,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const P=this._csiHandlers[this._collect<<8|E];let K=P?P.length-1:-1;for(;K>=0&&(b=P[K](this._params),!0!==b);K--)if(b instanceof Promise)return this._preserveStack(3,P,K,A,C),b;K<0&&this._csiHandlerFb(this._collect<<8|E,this._params),this.precedingCodepoint=0;break;case 8:do{switch(E){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(E-48)}}while(++C<c&&(E=f[C])>47&&E<60);C--;break;case 9:this._collect<<=8,this._collect|=E;break;case 10:const ie=this._escHandlers[this._collect<<8|E];let X=ie?ie.length-1:-1;for(;X>=0&&(b=ie[X](),!0!==b);X--)if(b instanceof Promise)return this._preserveStack(4,ie,X,A,C),b;X<0&&this._escHandlerFb(this._collect<<8|E),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|E,this._params);break;case 13:for(let J=C+1;;++J)if(J>=c||24===(E=f[J])||26===E||27===E||E>127&&E<L){this._dcsParser.put(f,C,J),C=J-1;break}break;case 14:if(b=this._dcsParser.unhook(24!==E&&26!==E),b)return this._preserveStack(6,[],0,A,C),b;27===E&&(A|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let J=C+1;;J++)if(J>=c||(E=f[J])<32||E>127&&E<L){this._oscParser.put(f,C,J),C=J-1;break}break;case 6:if(b=this._oscParser.end(24!==E&&26!==E),b)return this._preserveStack(5,[],0,A,C),b;27===E&&(A|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&A}}}},6242:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.OscHandler=g.OscParser=void 0;const y=v(5770),T=v(482),m=[];g.OscParser=class{constructor(){this._state=0,this._active=m,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(w,D){void 0===this._handlers[w]&&(this._handlers[w]=[]);const L=this._handlers[w];return L.push(D),{dispose:()=>{const M=L.indexOf(D);-1!==M&&L.splice(M,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=m}reset(){if(2===this._state)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].end(!1);this._stack.paused=!1,this._active=m,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||m,this._active.length)for(let w=this._active.length-1;w>=0;w--)this._active[w].start();else this._handlerFb(this._id,"START")}_put(w,D,L){if(this._active.length)for(let M=this._active.length-1;M>=0;M--)this._active[M].put(w,D,L);else this._handlerFb(this._id,"PUT",(0,T.utf32ToString)(w,D,L))}start(){this.reset(),this._state=1}put(w,D,L){if(3!==this._state){if(1===this._state)for(;D<L;){const M=w[D++];if(59===M){this._state=2,this._start();break}if(M<48||57<M)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+M-48}2===this._state&&L-D>0&&this._put(w,D,L)}}end(w,D=!0){if(0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){let L=!1,M=this._active.length-1,l=!1;if(this._stack.paused&&(M=this._stack.loopPosition-1,L=D,l=this._stack.fallThrough,this._stack.paused=!1),!l&&!1===L){for(;M>=0&&(L=this._active[M].end(w),!0!==L);M--)if(L instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=M,this._stack.fallThrough=!1,L;M--}for(;M>=0;M--)if(L=this._active[M].end(!1),L instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=M,this._stack.fallThrough=!0,L}else this._handlerFb(this._id,"END",w);this._active=m,this._id=-1,this._state=0}}},g.OscHandler=class{constructor(w){this._handler=w,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(w,D,L){this._hitLimit||(this._data+=(0,T.utf32ToString)(w,D,L),this._data.length>y.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(w){let D=!1;if(this._hitLimit)D=!1;else if(w&&(D=this._handler(this._data),D instanceof Promise))return D.then(L=>(this._data="",this._hitLimit=!1,L));return this._data="",this._hitLimit=!1,D}}},8742:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.Params=void 0;const v=2147483647;class y{static fromArray(m){const w=new y;if(!m.length)return w;for(let D=Array.isArray(m[0])?1:0;D<m.length;++D){const L=m[D];if(Array.isArray(L))for(let M=0;M<L.length;++M)w.addSubParam(L[M]);else w.addParam(L)}return w}constructor(m=32,w=32){if(this.maxLength=m,this.maxSubParamsLength=w,w>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(m),this.length=0,this._subParams=new Int32Array(w),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(m),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const m=new y(this.maxLength,this.maxSubParamsLength);return m.params.set(this.params),m.length=this.length,m._subParams.set(this._subParams),m._subParamsLength=this._subParamsLength,m._subParamsIdx.set(this._subParamsIdx),m._rejectDigits=this._rejectDigits,m._rejectSubDigits=this._rejectSubDigits,m._digitIsSub=this._digitIsSub,m}toArray(){const m=[];for(let w=0;w<this.length;++w){m.push(this.params[w]);const D=this._subParamsIdx[w]>>8,L=255&this._subParamsIdx[w];L-D>0&&m.push(Array.prototype.slice.call(this._subParams,D,L))}return m}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(m){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(m<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=m>v?v:m}}addSubParam(m){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(m<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=m>v?v:m,this._subParamsIdx[this.length-1]++}}hasSubParams(m){return(255&this._subParamsIdx[m])-(this._subParamsIdx[m]>>8)>0}getSubParams(m){const w=this._subParamsIdx[m]>>8,D=255&this._subParamsIdx[m];return D-w>0?this._subParams.subarray(w,D):null}getSubParamsAll(){const m={};for(let w=0;w<this.length;++w){const D=this._subParamsIdx[w]>>8,L=255&this._subParamsIdx[w];L-D>0&&(m[w]=this._subParams.slice(D,L))}return m}addDigit(m){let w;if(this._rejectDigits||!(w=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const D=this._digitIsSub?this._subParams:this.params,L=D[w-1];D[w-1]=~L?Math.min(10*L+m,v):m}}g.Params=y},5741:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.AddonManager=void 0,g.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let v=this._addons.length-1;v>=0;v--)this._addons[v].instance.dispose()}loadAddon(v,y){const T={instance:y,dispose:y.dispose,isDisposed:!1};this._addons.push(T),y.dispose=()=>this._wrappedAddonDispose(T),y.activate(v)}_wrappedAddonDispose(v){if(v.isDisposed)return;let y=-1;for(let T=0;T<this._addons.length;T++)if(this._addons[T]===v){y=T;break}if(-1===y)throw new Error("Could not dispose an addon that has not been loaded");v.isDisposed=!0,v.dispose.apply(v.instance),this._addons.splice(y,1)}}},8771:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.BufferApiView=void 0;const y=v(3785),T=v(511);g.BufferApiView=class{constructor(m,w){this._buffer=m,this.type=w}init(m){return this._buffer=m,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(m){const w=this._buffer.lines.get(m);if(w)return new y.BufferLineApiView(w)}getNullCell(){return new T.CellData}}},3785:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.BufferLineApiView=void 0;const y=v(511);g.BufferLineApiView=class{constructor(T){this._line=T}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(T,m){if(!(T<0||T>=this._line.length))return m?(this._line.loadCell(T,m),m):this._line.loadCell(T,new y.CellData)}translateToString(T,m,w){return this._line.translateToString(T,m,w)}}},8285:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.BufferNamespaceApi=void 0;const y=v(8771),T=v(8460),m=v(844);g.BufferNamespaceApi=class w extends m.Disposable{constructor(L){super(),this._core=L,this._onBufferChange=this.register(new T.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new y.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new y.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}},7975:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.ParserApi=void 0,g.ParserApi=class{constructor(v){this._core=v}registerCsiHandler(v,y){return this._core.registerCsiHandler(v,T=>y(T.toArray()))}addCsiHandler(v,y){return this.registerCsiHandler(v,y)}registerDcsHandler(v,y){return this._core.registerDcsHandler(v,(T,m)=>y(T,m.toArray()))}addDcsHandler(v,y){return this.registerDcsHandler(v,y)}registerEscHandler(v,y){return this._core.registerEscHandler(v,y)}addEscHandler(v,y){return this.registerEscHandler(v,y)}registerOscHandler(v,y){return this._core.registerOscHandler(v,y)}addOscHandler(v,y){return this.registerOscHandler(v,y)}}},7090:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.UnicodeApi=void 0,g.UnicodeApi=class{constructor(v){this._core=v}register(v){this._core.unicodeService.register(v)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(v){this._core.unicodeService.activeVersion=v}}},744:function(he,g,v){var y=this&&this.__decorate||function(l,f,c,d){var b,E=arguments.length,A=E<3?f:null===d?d=Object.getOwnPropertyDescriptor(f,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(l,f,c,d);else for(var R=l.length-1;R>=0;R--)(b=l[R])&&(A=(E<3?b(A):E>3?b(f,c,A):b(f,c))||A);return E>3&&A&&Object.defineProperty(f,c,A),A},T=this&&this.__param||function(l,f){return function(c,d){f(c,d,l)}};Object.defineProperty(g,"__esModule",{value:!0}),g.BufferService=g.MINIMUM_ROWS=g.MINIMUM_COLS=void 0;const m=v(8460),w=v(844),D=v(5295),L=v(2585);g.MINIMUM_COLS=2,g.MINIMUM_ROWS=1;let M=g.BufferService=class extends w.Disposable{get buffer(){return this.buffers.active}constructor(l){super(),this.isUserScrolling=!1,this._onResize=this.register(new m.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new m.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(l.rawOptions.cols||0,g.MINIMUM_COLS),this.rows=Math.max(l.rawOptions.rows||0,g.MINIMUM_ROWS),this.buffers=this.register(new D.BufferSet(l,this))}resize(l,f){this.cols=l,this.rows=f,this.buffers.resize(l,f),this._onResize.fire({cols:l,rows:f})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(l,f=!1){const c=this.buffer;let d;d=this._cachedBlankLine,d&&d.length===this.cols&&d.getFg(0)===l.fg&&d.getBg(0)===l.bg||(d=c.getBlankLine(l,f),this._cachedBlankLine=d),d.isWrapped=f;const b=c.ybase+c.scrollTop,E=c.ybase+c.scrollBottom;if(0===c.scrollTop){const A=c.lines.isFull;E===c.lines.length-1?A?c.lines.recycle().copyFrom(d):c.lines.push(d.clone()):c.lines.splice(E+1,0,d.clone()),A?this.isUserScrolling&&(c.ydisp=Math.max(c.ydisp-1,0)):(c.ybase++,this.isUserScrolling||c.ydisp++)}else c.lines.shiftElements(b+1,E-b+1-1,-1),c.lines.set(E,d.clone());this.isUserScrolling||(c.ydisp=c.ybase),this._onScroll.fire(c.ydisp)}scrollLines(l,f,c){const d=this.buffer;if(l<0){if(0===d.ydisp)return;this.isUserScrolling=!0}else l+d.ydisp>=d.ybase&&(this.isUserScrolling=!1);const b=d.ydisp;d.ydisp=Math.max(Math.min(d.ydisp+l,d.ybase),0),b!==d.ydisp&&(f||this._onScroll.fire(d.ydisp))}};g.BufferService=M=y([T(0,L.IOptionsService)],M)},7994:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.CharsetService=void 0,g.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(v){this.glevel=v,this.charset=this._charsets[v]}setgCharset(v,y){this._charsets[v]=y,this.glevel===v&&(this.charset=y)}}},1753:function(he,g,v){var y=this&&this.__decorate||function(d,b,E,A){var R,C=arguments.length,P=C<3?b:null===A?A=Object.getOwnPropertyDescriptor(b,E):A;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)P=Reflect.decorate(d,b,E,A);else for(var K=d.length-1;K>=0;K--)(R=d[K])&&(P=(C<3?R(P):C>3?R(b,E,P):R(b,E))||P);return C>3&&P&&Object.defineProperty(b,E,P),P},T=this&&this.__param||function(d,b){return function(E,A){b(E,A,d)}};Object.defineProperty(g,"__esModule",{value:!0}),g.CoreMouseService=void 0;const m=v(2585),w=v(8460),D=v(844),L={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:d=>4!==d.button&&1===d.action&&(d.ctrl=!1,d.alt=!1,d.shift=!1,!0)},VT200:{events:19,restrict:d=>32!==d.action},DRAG:{events:23,restrict:d=>32!==d.action||3!==d.button},ANY:{events:31,restrict:d=>!0}};function M(d,b){let E=(d.ctrl?16:0)|(d.shift?4:0)|(d.alt?8:0);return 4===d.button?(E|=64,E|=d.action):(E|=3&d.button,4&d.button&&(E|=64),8&d.button&&(E|=128),32===d.action?E|=32:0!==d.action||b||(E|=3)),E}const l=String.fromCharCode,f={DEFAULT:d=>{const b=[M(d,!1)+32,d.col+32,d.row+32];return b[0]>255||b[1]>255||b[2]>255?"":`\x1b[M${l(b[0])}${l(b[1])}${l(b[2])}`},SGR:d=>{const b=0===d.action&&4!==d.button?"m":"M";return`\x1b[<${M(d,!0)};${d.col};${d.row}${b}`},SGR_PIXELS:d=>{const b=0===d.action&&4!==d.button?"m":"M";return`\x1b[<${M(d,!0)};${d.x};${d.y}${b}`}};let c=g.CoreMouseService=class extends D.Disposable{constructor(d,b){super(),this._bufferService=d,this._coreService=b,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new w.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const E of Object.keys(L))this.addProtocol(E,L[E]);for(const E of Object.keys(f))this.addEncoding(E,f[E]);this.reset()}addProtocol(d,b){this._protocols[d]=b}addEncoding(d,b){this._encodings[d]=b}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return 0!==this._protocols[this._activeProtocol].events}set activeProtocol(d){if(!this._protocols[d])throw new Error(`unknown protocol "${d}"`);this._activeProtocol=d,this._onProtocolChange.fire(this._protocols[d].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(d){if(!this._encodings[d])throw new Error(`unknown encoding "${d}"`);this._activeEncoding=d}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(d){if(d.col<0||d.col>=this._bufferService.cols||d.row<0||d.row>=this._bufferService.rows||4===d.button&&32===d.action||3===d.button&&32!==d.action||4!==d.button&&(2===d.action||3===d.action)||(d.col++,d.row++,32===d.action&&this._lastEvent&&this._equalEvents(this._lastEvent,d,"SGR_PIXELS"===this._activeEncoding))||!this._protocols[this._activeProtocol].restrict(d))return!1;const b=this._encodings[this._activeEncoding](d);return b&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(b):this._coreService.triggerDataEvent(b,!0)),this._lastEvent=d,!0}explainEvents(d){return{down:!!(1&d),up:!!(2&d),drag:!!(4&d),move:!!(8&d),wheel:!!(16&d)}}_equalEvents(d,b,E){if(E){if(d.x!==b.x||d.y!==b.y)return!1}else if(d.col!==b.col||d.row!==b.row)return!1;return d.button===b.button&&d.action===b.action&&d.ctrl===b.ctrl&&d.alt===b.alt&&d.shift===b.shift}};g.CoreMouseService=c=y([T(0,m.IBufferService),T(1,m.ICoreService)],c)},6975:function(he,g,v){var y=this&&this.__decorate||function(c,d,b,E){var A,R=arguments.length,C=R<3?d:null===E?E=Object.getOwnPropertyDescriptor(d,b):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(c,d,b,E);else for(var P=c.length-1;P>=0;P--)(A=c[P])&&(C=(R<3?A(C):R>3?A(d,b,C):A(d,b))||C);return R>3&&C&&Object.defineProperty(d,b,C),C},T=this&&this.__param||function(c,d){return function(b,E){d(b,E,c)}};Object.defineProperty(g,"__esModule",{value:!0}),g.CoreService=void 0;const m=v(1439),w=v(8460),D=v(844),L=v(2585),M=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let f=g.CoreService=class extends D.Disposable{constructor(c,d,b){super(),this._bufferService=c,this._logService=d,this._optionsService=b,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new w.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new w.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new w.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new w.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,m.clone)(M),this.decPrivateModes=(0,m.clone)(l)}reset(){this.modes=(0,m.clone)(M),this.decPrivateModes=(0,m.clone)(l)}triggerDataEvent(c,d=!1){if(this._optionsService.rawOptions.disableStdin)return;const b=this._bufferService.buffer;d&&this._optionsService.rawOptions.scrollOnUserInput&&b.ybase!==b.ydisp&&this._onRequestScrollToBottom.fire(),d&&this._onUserInput.fire(),this._logService.debug(`sending data "${c}"`,()=>c.split("").map(E=>E.charCodeAt(0))),this._onData.fire(c)}triggerBinaryEvent(c){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${c}"`,()=>c.split("").map(d=>d.charCodeAt(0))),this._onBinary.fire(c))}};g.CoreService=f=y([T(0,L.IBufferService),T(1,L.ILogService),T(2,L.IOptionsService)],f)},9074:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DecorationService=void 0;const y=v(8055),T=v(8460),m=v(844),w=v(6106);let D=0,L=0;g.DecorationService=class M extends m.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new w.SortedList(c=>c?.marker.line),this._onDecorationRegistered=this.register(new T.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new T.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,m.toDisposable)(()=>this.reset()))}registerDecoration(c){if(c.marker.isDisposed)return;const d=new l(c);if(d){const b=d.marker.onDispose(()=>d.dispose());d.onDispose(()=>{d&&(this._decorations.delete(d)&&this._onDecorationRemoved.fire(d),b.dispose())}),this._decorations.insert(d),this._onDecorationRegistered.fire(d)}return d}reset(){for(const c of this._decorations.values())c.dispose();this._decorations.clear()}*getDecorationsAtCell(c,d,b){var E,A,R;let C=0,P=0;for(const K of this._decorations.getKeyIterator(d))C=null!==(E=K.options.x)&&void 0!==E?E:0,P=C+(null!==(A=K.options.width)&&void 0!==A?A:1),c>=C&&c<P&&(!b||(null!==(R=K.options.layer)&&void 0!==R?R:"bottom")===b)&&(yield K)}forEachDecorationAtCell(c,d,b,E){this._decorations.forEachByKey(d,A=>{var R,C,P;D=null!==(R=A.options.x)&&void 0!==R?R:0,L=D+(null!==(C=A.options.width)&&void 0!==C?C:1),c>=D&&c<L&&(!b||(null!==(P=A.options.layer)&&void 0!==P?P:"bottom")===b)&&E(A)})}};class l extends m.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return null===this._cachedBg&&(this._cachedBg=this.options.backgroundColor?y.css.toColor(this.options.backgroundColor):void 0),this._cachedBg}get foregroundColorRGB(){return null===this._cachedFg&&(this._cachedFg=this.options.foregroundColor?y.css.toColor(this.options.foregroundColor):void 0),this._cachedFg}constructor(c){super(),this.options=c,this.onRenderEmitter=this.register(new T.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new T.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=c.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.InstantiationService=g.ServiceCollection=void 0;const y=v(2585),T=v(8343);class m{constructor(...D){this._entries=new Map;for(const[L,M]of D)this.set(L,M)}set(D,L){const M=this._entries.get(D);return this._entries.set(D,L),M}forEach(D){for(const[L,M]of this._entries.entries())D(L,M)}has(D){return this._entries.has(D)}get(D){return this._entries.get(D)}}g.ServiceCollection=m,g.InstantiationService=class{constructor(){this._services=new m,this._services.set(y.IInstantiationService,this)}setService(w,D){this._services.set(w,D)}getService(w){return this._services.get(w)}createInstance(w,...D){const L=(0,T.getServiceDependencies)(w).sort((f,c)=>f.index-c.index),M=[];for(const f of L){const c=this._services.get(f.id);if(!c)throw new Error(`[createInstance] ${w.name} depends on UNKNOWN service ${f.id}.`);M.push(c)}const l=L.length>0?L[0].index:D.length;if(D.length!==l)throw new Error(`[createInstance] First service dependency of ${w.name} at position ${l+1} conflicts with ${D.length} static arguments`);return new w(...D,...M)}}},7866:function(he,g,v){var y=this&&this.__decorate||function(l,f,c,d){var b,E=arguments.length,A=E<3?f:null===d?d=Object.getOwnPropertyDescriptor(f,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(l,f,c,d);else for(var R=l.length-1;R>=0;R--)(b=l[R])&&(A=(E<3?b(A):E>3?b(f,c,A):b(f,c))||A);return E>3&&A&&Object.defineProperty(f,c,A),A},T=this&&this.__param||function(l,f){return function(c,d){f(c,d,l)}};Object.defineProperty(g,"__esModule",{value:!0}),g.traceCall=g.setTraceLogger=g.LogService=void 0;const m=v(844),w=v(2585),D={trace:w.LogLevelEnum.TRACE,debug:w.LogLevelEnum.DEBUG,info:w.LogLevelEnum.INFO,warn:w.LogLevelEnum.WARN,error:w.LogLevelEnum.ERROR,off:w.LogLevelEnum.OFF};let L,M=g.LogService=class extends m.Disposable{get logLevel(){return this._logLevel}constructor(l){super(),this._optionsService=l,this._logLevel=w.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),L=this}_updateLogLevel(){this._logLevel=D[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(l){for(let f=0;f<l.length;f++)"function"==typeof l[f]&&(l[f]=l[f]())}_log(l,f,c){this._evalLazyOptionalParams(c),l.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+f,...c)}trace(l,...f){var c,d;this._logLevel<=w.LogLevelEnum.TRACE&&this._log(null!==(d=null===(c=this._optionsService.options.logger)||void 0===c?void 0:c.trace.bind(this._optionsService.options.logger))&&void 0!==d?d:console.log,l,f)}debug(l,...f){var c,d;this._logLevel<=w.LogLevelEnum.DEBUG&&this._log(null!==(d=null===(c=this._optionsService.options.logger)||void 0===c?void 0:c.debug.bind(this._optionsService.options.logger))&&void 0!==d?d:console.log,l,f)}info(l,...f){var c,d;this._logLevel<=w.LogLevelEnum.INFO&&this._log(null!==(d=null===(c=this._optionsService.options.logger)||void 0===c?void 0:c.info.bind(this._optionsService.options.logger))&&void 0!==d?d:console.info,l,f)}warn(l,...f){var c,d;this._logLevel<=w.LogLevelEnum.WARN&&this._log(null!==(d=null===(c=this._optionsService.options.logger)||void 0===c?void 0:c.warn.bind(this._optionsService.options.logger))&&void 0!==d?d:console.warn,l,f)}error(l,...f){var c,d;this._logLevel<=w.LogLevelEnum.ERROR&&this._log(null!==(d=null===(c=this._optionsService.options.logger)||void 0===c?void 0:c.error.bind(this._optionsService.options.logger))&&void 0!==d?d:console.error,l,f)}};g.LogService=M=y([T(0,w.IOptionsService)],M),g.setTraceLogger=function(l){L=l},g.traceCall=function(l,f,c){if("function"!=typeof c.value)throw new Error("not supported");const d=c.value;c.value=function(...b){if(L.logLevel!==w.LogLevelEnum.TRACE)return d.apply(this,b);L.trace(`GlyphRenderer#${d.name}(${b.map(A=>JSON.stringify(A)).join(", ")})`);const E=d.apply(this,b);return L.trace(`GlyphRenderer#${d.name} return`,E),E}}},7302:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.OptionsService=g.DEFAULT_OPTIONS=void 0;const y=v(8460),T=v(844),m=v(6114);g.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:m.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const w=["normal","bold","100","200","300","400","500","600","700","800","900"];g.OptionsService=class D extends T.Disposable{constructor(M){super(),this._onOptionChange=this.register(new y.EventEmitter),this.onOptionChange=this._onOptionChange.event;const l=Object.assign({},g.DEFAULT_OPTIONS);for(const f in M)if(f in l)try{l[f]=this._sanitizeAndValidateOption(f,M[f])}catch(c){console.error(c)}this.rawOptions=l,this.options=Object.assign({},l),this._setupOptions()}onSpecificOptionChange(M,l){return this.onOptionChange(f=>{f===M&&l(this.rawOptions[M])})}onMultipleOptionChange(M,l){return this.onOptionChange(f=>{-1!==M.indexOf(f)&&l()})}_setupOptions(){const M=f=>{if(!(f in g.DEFAULT_OPTIONS))throw new Error(`No option with key "${f}"`);return this.rawOptions[f]},l=(f,c)=>{if(!(f in g.DEFAULT_OPTIONS))throw new Error(`No option with key "${f}"`);c=this._sanitizeAndValidateOption(f,c),this.rawOptions[f]!==c&&(this.rawOptions[f]=c,this._onOptionChange.fire(f))};for(const f in this.rawOptions){const c={get:M.bind(this,f),set:l.bind(this,f)};Object.defineProperty(this.options,f,c)}}_sanitizeAndValidateOption(M,l){switch(M){case"cursorStyle":if(l||(l=g.DEFAULT_OPTIONS[M]),"block"!==(f=l)&&"underline"!==f&&"bar"!==f)throw new Error(`"${l}" is not a valid value for ${M}`);break;case"wordSeparator":l||(l=g.DEFAULT_OPTIONS[M]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof l&&1<=l&&l<=1e3)break;l=w.includes(l)?l:g.DEFAULT_OPTIONS[M];break;case"cursorWidth":l=Math.floor(l);case"lineHeight":case"tabStopWidth":if(l<1)throw new Error(`${M} cannot be less than 1, value: ${l}`);break;case"minimumContrastRatio":l=Math.max(1,Math.min(21,Math.round(10*l)/10));break;case"scrollback":if((l=Math.min(l,4294967295))<0)throw new Error(`${M} cannot be less than 0, value: ${l}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(l<=0)throw new Error(`${M} cannot be less than or equal to 0, value: ${l}`);break;case"rows":case"cols":if(!l&&0!==l)throw new Error(`${M} must be numeric, value: ${l}`);break;case"windowsPty":l=l??{}}var f;return l}}},2660:function(he,g,v){var y=this&&this.__decorate||function(D,L,M,l){var f,c=arguments.length,d=c<3?L:null===l?l=Object.getOwnPropertyDescriptor(L,M):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(D,L,M,l);else for(var b=D.length-1;b>=0;b--)(f=D[b])&&(d=(c<3?f(d):c>3?f(L,M,d):f(L,M))||d);return c>3&&d&&Object.defineProperty(L,M,d),d},T=this&&this.__param||function(D,L){return function(M,l){L(M,l,D)}};Object.defineProperty(g,"__esModule",{value:!0}),g.OscLinkService=void 0;const m=v(2585);let w=g.OscLinkService=class{constructor(D){this._bufferService=D,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(D){const L=this._bufferService.buffer;if(void 0===D.id){const b=L.addMarker(L.ybase+L.y),E={data:D,id:this._nextId++,lines:[b]};return b.onDispose(()=>this._removeMarkerFromLink(E,b)),this._dataByLinkId.set(E.id,E),E.id}const M=D,l=this._getEntryIdKey(M),f=this._entriesWithId.get(l);if(f)return this.addLineToLink(f.id,L.ybase+L.y),f.id;const c=L.addMarker(L.ybase+L.y),d={id:this._nextId++,key:this._getEntryIdKey(M),data:M,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(d,c)),this._entriesWithId.set(d.key,d),this._dataByLinkId.set(d.id,d),d.id}addLineToLink(D,L){const M=this._dataByLinkId.get(D);if(M&&M.lines.every(l=>l.line!==L)){const l=this._bufferService.buffer.addMarker(L);M.lines.push(l),l.onDispose(()=>this._removeMarkerFromLink(M,l))}}getLinkData(D){var L;return null===(L=this._dataByLinkId.get(D))||void 0===L?void 0:L.data}_getEntryIdKey(D){return`${D.id};;${D.uri}`}_removeMarkerFromLink(D,L){const M=D.lines.indexOf(L);-1!==M&&(D.lines.splice(M,1),0===D.lines.length&&(void 0!==D.data.id&&this._entriesWithId.delete(D.key),this._dataByLinkId.delete(D.id)))}};g.OscLinkService=w=y([T(0,m.IBufferService)],w)},8343:(he,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.createDecorator=g.getServiceDependencies=g.serviceRegistry=void 0;const v="di$target",y="di$dependencies";g.serviceRegistry=new Map,g.getServiceDependencies=function(T){return T[y]||[]},g.createDecorator=function(T){if(g.serviceRegistry.has(T))return g.serviceRegistry.get(T);const m=function(w,D,L){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");var M,l,f;M=m,f=L,(l=w)[v]===l?l[y].push({id:M,index:f}):(l[y]=[{id:M,index:f}],l[v]=l)};return m.toString=()=>T,g.serviceRegistry.set(T,m),m}},2585:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.IDecorationService=g.IUnicodeService=g.IOscLinkService=g.IOptionsService=g.ILogService=g.LogLevelEnum=g.IInstantiationService=g.ICharsetService=g.ICoreService=g.ICoreMouseService=g.IBufferService=void 0;const y=v(8343);var T,m;g.IBufferService=(0,y.createDecorator)("BufferService"),g.ICoreMouseService=(0,y.createDecorator)("CoreMouseService"),g.ICoreService=(0,y.createDecorator)("CoreService"),g.ICharsetService=(0,y.createDecorator)("CharsetService"),g.IInstantiationService=(0,y.createDecorator)("InstantiationService"),(m=T||(g.LogLevelEnum=T={}))[m.TRACE=0]="TRACE",m[m.DEBUG=1]="DEBUG",m[m.INFO=2]="INFO",m[m.WARN=3]="WARN",m[m.ERROR=4]="ERROR",m[m.OFF=5]="OFF",g.ILogService=(0,y.createDecorator)("LogService"),g.IOptionsService=(0,y.createDecorator)("OptionsService"),g.IOscLinkService=(0,y.createDecorator)("OscLinkService"),g.IUnicodeService=(0,y.createDecorator)("UnicodeService"),g.IDecorationService=(0,y.createDecorator)("DecorationService")},1480:(he,g,v)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.UnicodeService=void 0;const y=v(8460),T=v(225);g.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new y.EventEmitter,this.onChange=this._onChange.event;const m=new T.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(m){if(!this._providers[m])throw new Error(`unknown Unicode version "${m}"`);this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)}register(m){this._providers[m.version]=m}wcwidth(m){return this._activeProvider.wcwidth(m)}getStringCellWidth(m){let w=0;const D=m.length;for(let L=0;L<D;++L){let M=m.charCodeAt(L);if(55296<=M&&M<=56319){if(++L>=D)return w+this.wcwidth(M);const l=m.charCodeAt(L);56320<=l&&l<=57343?M=1024*(M-55296)+l-56320+65536:w+=this.wcwidth(l)}w+=this.wcwidth(M)}return w}}}},se={};function U(he){var g=se[he];if(void 0!==g)return g.exports;var v=se[he]={exports:{}};return qe[he].call(v.exports,v,v.exports,U),v.exports}var u={};return(()=>{var he=u;Object.defineProperty(he,"__esModule",{value:!0}),he.Terminal=void 0;const g=U(9042),v=U(3236),y=U(844),T=U(5741),m=U(8285),w=U(7975),D=U(7090),L=["cols","rows"];he.Terminal=class M extends y.Disposable{constructor(f){super(),this._core=this.register(new v.Terminal(f)),this._addonManager=this.register(new T.AddonManager),this._publicOptions=Object.assign({},this._core.options);const c=b=>this._core.options[b],d=(b,E)=>{this._checkReadonlyOptions(b),this._core.options[b]=E};for(const b in this._core.options){const E={get:c.bind(this,b),set:d.bind(this,b)};Object.defineProperty(this._publicOptions,b,E)}}_checkReadonlyOptions(f){if(L.includes(f))throw new Error(`Option "${f}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new w.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new D.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new m.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const f=this._core.coreService.decPrivateModes;let c="none";switch(this._core.coreMouseService.activeProtocol){case"X10":c="x10";break;case"VT200":c="vt200";break;case"DRAG":c="drag";break;case"ANY":c="any"}return{applicationCursorKeysMode:f.applicationCursorKeys,applicationKeypadMode:f.applicationKeypad,bracketedPasteMode:f.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:c,originMode:f.origin,reverseWraparoundMode:f.reverseWraparound,sendFocusMode:f.sendFocus,wraparoundMode:f.wraparound}}get options(){return this._publicOptions}set options(f){for(const c in f)this._publicOptions[c]=f[c]}blur(){this._core.blur()}focus(){this._core.focus()}resize(f,c){this._verifyIntegers(f,c),this._core.resize(f,c)}open(f){this._core.open(f)}attachCustomKeyEventHandler(f){this._core.attachCustomKeyEventHandler(f)}registerLinkProvider(f){return this._core.registerLinkProvider(f)}registerCharacterJoiner(f){return this._checkProposedApi(),this._core.registerCharacterJoiner(f)}deregisterCharacterJoiner(f){this._checkProposedApi(),this._core.deregisterCharacterJoiner(f)}registerMarker(f=0){return this._verifyIntegers(f),this._core.registerMarker(f)}registerDecoration(f){var c,d,b;return this._checkProposedApi(),this._verifyPositiveIntegers(null!==(c=f.x)&&void 0!==c?c:0,null!==(d=f.width)&&void 0!==d?d:0,null!==(b=f.height)&&void 0!==b?b:0),this._core.registerDecoration(f)}hasSelection(){return this._core.hasSelection()}select(f,c,d){this._verifyIntegers(f,c,d),this._core.select(f,c,d)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(f,c){this._verifyIntegers(f,c),this._core.selectLines(f,c)}dispose(){super.dispose()}scrollLines(f){this._verifyIntegers(f),this._core.scrollLines(f)}scrollPages(f){this._verifyIntegers(f),this._core.scrollPages(f)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(f){this._verifyIntegers(f),this._core.scrollToLine(f)}clear(){this._core.clear()}write(f,c){this._core.write(f,c)}writeln(f,c){this._core.write(f),this._core.write("\r\n",c)}paste(f){this._core.paste(f)}refresh(f,c){this._verifyIntegers(f,c),this._core.refresh(f,c)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(f){this._addonManager.loadAddon(this,f)}static get strings(){return g}_verifyIntegers(...f){for(const c of f)if(c===1/0||isNaN(c)||c%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...f){for(const c of f)if(c&&(c===1/0||isNaN(c)||c%1!=0||c<0))throw new Error("This API only accepts positive integers")}}})(),u})()},7816:(Ct,qe,se)=>{"use strict";se.d(qe,{kL:()=>gs,zX:()=>ao});var U=se(1180),u=se(8137);class he{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(i,e,t,s){const o=e.duration;e.listeners[s].forEach(h=>h({chart:i,initial:e.initial,numSteps:o,currentStep:Math.min(t-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=u.r.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(i=Date.now()){let e=0;this._charts.forEach((t,s)=>{if(!t.running||!t.items.length)return;const n=t.items;let _,o=n.length-1,h=!1;for(;o>=0;--o)_=n[o],_._active?(_._total>t.duration&&(t.duration=_._total),_.tick(i),h=!0):(n[o]=n[n.length-1],n.pop());h&&(s.draw(),this._notify(s,t,i,"progress")),n.length||(t.running=!1,this._notify(s,t,i,"complete"),t.initial=!1),e+=n.length}),this._lastDate=i,0===e&&(this._running=!1)}_getAnims(i){const e=this._charts;let t=e.get(i);return t||(t={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(i,t)),t}listen(i,e,t){this._getAnims(i).listeners[e].push(t)}add(i,e){!e||!e.length||this._getAnims(i).items.push(...e)}has(i){return this._getAnims(i).items.length>0}start(i){const e=this._charts.get(i);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,s)=>Math.max(t,s._duration),0),this._refresh())}running(i){if(!this._running)return!1;const e=this._charts.get(i);return!(!e||!e.running||!e.items.length)}stop(i){const e=this._charts.get(i);if(!e||!e.items.length)return;const t=e.items;let s=t.length-1;for(;s>=0;--s)t[s].cancel();e.items=[],this._notify(i,e,Date.now(),"complete")}remove(i){return this._charts.delete(i)}}var g=new he;const v="transparent",y={boolean:(r,i,e)=>e>.5?i:r,color(r,i,e){const t=(0,u.c)(r||v),s=t.valid&&(0,u.c)(i||v);return s&&s.valid?s.mix(t,e).hexString():i},number:(r,i,e)=>r+(i-r)*e};class T{constructor(i,e,t,s){const n=e[t];s=(0,u.a)([i.to,s,n,i.from]);const o=(0,u.a)([i.from,n,s]);this._active=!0,this._fn=i.fn||y[i.type||typeof o],this._easing=u.e[i.easing]||u.e.linear,this._start=Math.floor(Date.now()+(i.delay||0)),this._duration=this._total=Math.floor(i.duration),this._loop=!!i.loop,this._target=e,this._prop=t,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(i,e,t){if(this._active){this._notify(!1);const s=this._target[this._prop],n=t-this._start,o=this._duration-n;this._start=t,this._duration=Math.floor(Math.max(o,i.duration)),this._total+=n,this._loop=!!i.loop,this._to=(0,u.a)([i.to,e,s,i.from]),this._from=(0,u.a)([i.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(i){const e=i-this._start,t=this._duration,s=this._prop,n=this._from,o=this._loop,h=this._to;let _;if(this._active=n!==h&&(o||e<t),!this._active)return this._target[s]=h,void this._notify(!0);e<0?this._target[s]=n:(_=e/t%2,_=o&&_>1?2-_:_,_=this._easing(Math.min(1,Math.max(0,_))),this._target[s]=this._fn(n,h,_))}wait(){const i=this._promises||(this._promises=[]);return new Promise((e,t)=>{i.push({res:e,rej:t})})}_notify(i){const e=i?"res":"rej",t=this._promises||[];for(let s=0;s<t.length;s++)t[s][e]()}}class m{constructor(i,e){this._chart=i,this._properties=new Map,this.configure(e)}configure(i){if(!(0,u.i)(i))return;const e=Object.keys(u.d.animation),t=this._properties;Object.getOwnPropertyNames(i).forEach(s=>{const n=i[s];if(!(0,u.i)(n))return;const o={};for(const h of e)o[h]=n[h];((0,u.b)(n.properties)&&n.properties||[s]).forEach(h=>{(h===s||!t.has(h))&&t.set(h,o)})})}_animateOptions(i,e){const t=e.options,s=function D(r,i){if(!i)return;let e=r.options;if(e)return e.$shared&&(r.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e;r.options=i}(i,t);if(!s)return[];const n=this._createAnimations(s,t);return t.$shared&&function w(r,i){const e=[],t=Object.keys(i);for(let s=0;s<t.length;s++){const n=r[t[s]];n&&n.active()&&e.push(n.wait())}return Promise.all(e)}(i.options.$animations,t).then(()=>{i.options=t},()=>{}),n}_createAnimations(i,e){const t=this._properties,s=[],n=i.$animations||(i.$animations={}),o=Object.keys(e),h=Date.now();let _;for(_=o.length-1;_>=0;--_){const S=o[_];if("$"===S.charAt(0))continue;if("options"===S){s.push(...this._animateOptions(i,e));continue}const O=e[S];let B=n[S];const V=t.get(S);if(B){if(V&&B.active()){B.update(V,O,h);continue}B.cancel()}V&&V.duration?(n[S]=B=new T(V,i,S,O),s.push(B)):i[S]=O}return s}update(i,e){if(0===this._properties.size)return void Object.assign(i,e);const t=this._createAnimations(i,e);return t.length?(g.add(this._chart,t),!0):void 0}}function L(r,i){const e=r&&r.options||{},t=e.reverse,s=void 0===e.min?i:0,n=void 0===e.max?i:0;return{start:t?n:s,end:t?s:n}}function f(r,i){const e=[],t=r._getSortedDatasetMetas(i);let s,n;for(s=0,n=t.length;s<n;++s)e.push(t[s].index);return e}function c(r,i,e,t={}){const s=r.keys,n="single"===t.mode;let o,h,_,S;if(null!==i){for(o=0,h=s.length;o<h;++o){if(_=+s[o],_===e){if(t.all)continue;break}S=r.values[_],(0,u.g)(S)&&(n||0===i||(0,u.s)(i)===(0,u.s)(S))&&(i+=S)}return i}}function b(r,i){const e=r&&r.options.stacked;return e||void 0===e&&void 0!==i.stack}function R(r,i,e){const t=r[i]||(r[i]={});return t[e]||(t[e]={})}function C(r,i,e,t){for(const s of i.getMatchingVisibleMetas(t).reverse()){const n=r[s.index];if(e&&n>0||!e&&n<0)return s.index}return null}function P(r,i){const{chart:e,_cachedMeta:t}=r,s=e._stacks||(e._stacks={}),{iScale:n,vScale:o,index:h}=t,_=n.axis,S=o.axis,O=function E(r,i,e){return`${r.id}.${i.id}.${e.stack||e.type}`}(n,o,t),B=i.length;let V;for(let Z=0;Z<B;++Z){const oe=i[Z],{[_]:ce,[S]:_e}=oe;V=(oe._stacks||(oe._stacks={}))[S]=R(s,O,ce),V[h]=_e,V._top=C(V,o,!0,t.type),V._bottom=C(V,o,!1,t.type),(V._visualValues||(V._visualValues={}))[h]=_e}}function K(r,i){const e=r.scales;return Object.keys(e).filter(t=>e[t].axis===i).shift()}function J(r,i){const e=r.controller.index,t=r.vScale&&r.vScale.axis;if(t){i=i||r._parsed;for(const s of i){const n=s._stacks;if(!n||void 0===n[t]||void 0===n[t][e])return;delete n[t][e],void 0!==n[t]._visualValues&&void 0!==n[t]._visualValues[e]&&delete n[t]._visualValues[e]}}}const me=r=>"reset"===r||"none"===r,ve=(r,i)=>i?r:Object.assign({},r);let Ce=(()=>{class r{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=b(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&J(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),n=(V,Z,oe,ce)=>"x"===V?Z:"r"===V?ce:oe,o=t.xAxisID=(0,u.v)(s.xAxisID,K(e,"x")),h=t.yAxisID=(0,u.v)(s.yAxisID,K(e,"y")),_=t.rAxisID=(0,u.v)(s.rAxisID,K(e,"r")),S=t.indexAxis,O=t.iAxisID=n(S,o,h,_),B=t.vAxisID=n(S,h,o,_);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(h),t.rScale=this.getScaleForId(_),t.iScale=this.getScaleForId(O),t.vScale=this.getScaleForId(B)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&(0,u.u)(this._data,this),e._stacked&&J(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if((0,u.i)(t))this._data=function d(r){const i=Object.keys(r),e=new Array(i.length);let t,s,n;for(t=0,s=i.length;t<s;++t)n=i[t],e[t]={x:n,y:r[n]};return e}(t);else if(s!==t){if(s){(0,u.u)(s,this);const n=this._cachedMeta;J(n),n._parsed=[]}t&&Object.isExtensible(t)&&(0,u.l)(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const o=t._stacked;t._stacked=b(t.vScale,t),t.stack!==s.stack&&(n=!0,J(t),t.stack=s.stack),this._resyncElements(e),(n||o!==t._stacked)&&P(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:n}=this,{iScale:o,_stacked:h}=s,_=o.axis;let B,V,Z,S=0===e&&t===n.length||s._sorted,O=e>0&&s._parsed[e-1];if(!1===this._parsing)s._parsed=n,s._sorted=!0,Z=n;else{Z=(0,u.b)(n[e])?this.parseArrayData(s,n,e,t):(0,u.i)(n[e])?this.parseObjectData(s,n,e,t):this.parsePrimitiveData(s,n,e,t);const oe=()=>null===V[_]||O&&V[_]<O[_];for(B=0;B<t;++B)s._parsed[B+e]=V=Z[B],S&&(oe()&&(S=!1),O=V);s._sorted=S}h&&P(this,Z)}parsePrimitiveData(e,t,s,n){const{iScale:o,vScale:h}=e,_=o.axis,S=h.axis,O=o.getLabels(),B=o===h,V=new Array(n);let Z,oe,ce;for(Z=0,oe=n;Z<oe;++Z)ce=Z+s,V[Z]={[_]:B||o.parse(O[ce],ce),[S]:h.parse(t[ce],ce)};return V}parseArrayData(e,t,s,n){const{xScale:o,yScale:h}=e,_=new Array(n);let S,O,B,V;for(S=0,O=n;S<O;++S)B=S+s,V=t[B],_[S]={x:o.parse(V[0],B),y:h.parse(V[1],B)};return _}parseObjectData(e,t,s,n){const{xScale:o,yScale:h}=e,{xAxisKey:_="x",yAxisKey:S="y"}=this._parsing,O=new Array(n);let B,V,Z,oe;for(B=0,V=n;B<V;++B)Z=B+s,oe=t[Z],O[B]={x:o.parse((0,u.f)(oe,_),Z),y:h.parse((0,u.f)(oe,S),Z)};return O}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const o=this._cachedMeta,h=t[e.axis];return c({keys:f(this.chart,!0),values:t._stacks[e.axis]._visualValues},h,o.index,{mode:s})}updateRangeFromParsed(e,t,s,n){const o=s[t.axis];let h=null===o?NaN:o;const _=n&&s._stacks[t.axis];n&&_&&(n.values=_,h=c(n,o,this._cachedMeta.index)),e.min=Math.min(e.min,h),e.max=Math.max(e.max,h)}getMinMax(e,t){const s=this._cachedMeta,n=s._parsed,o=s._sorted&&e===s.iScale,h=n.length,_=this._getOtherScale(e),S=((r,i,e)=>r&&!i.hidden&&i._stacked&&{keys:f(this.chart,!0),values:null})(t,s),O={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:B,max:V}=function A(r){const{min:i,max:e,minDefined:t,maxDefined:s}=r.getUserBounds();return{min:t?i:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}(_);let Z,oe;function ce(){oe=n[Z];const _e=oe[_.axis];return!(0,u.g)(oe[e.axis])||B>_e||V<_e}for(Z=0;Z<h&&(ce()||(this.updateRangeFromParsed(O,e,oe,S),!o));++Z);if(o)for(Z=h-1;Z>=0;--Z)if(!ce()){this.updateRangeFromParsed(O,e,oe,S);break}return O}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let n,o,h;for(n=0,o=t.length;n<o;++n)h=t[n][e.axis],(0,u.g)(h)&&s.push(h);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,n=t.vScale,o=this.getParsed(e);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function l(r){let i,e,t,s;return(0,u.i)(r)?(i=r.top,e=r.right,t=r.bottom,s=r.left):i=e=t=s=r,{top:i,right:e,bottom:t,left:s,disabled:!1===r}}((0,u.v)(this.options.clip,function M(r,i,e){if(!1===e)return!1;const t=L(r,e),s=L(i,e);return{top:s.end,right:t.end,bottom:s.start,left:t.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this._cachedMeta,n=s.data||[],o=this.chart.chartArea,h=[],_=this._drawStart||0,S=this._drawCount||n.length-_,O=this.options.drawActiveElementsOnTop;let B;for(s.dataset&&s.dataset.draw(e,o,_,S),B=_;B<_+S;++B){const V=n[B];V.hidden||(V.active&&O?h.push(V):V.draw(e,o))}for(B=0;B<h.length;++B)h[B].draw(e,o)}getStyle(e,t){const s=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const n=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const h=this._cachedMeta.data[e];o=h.$context||(h.$context=function X(r,i,e){return(0,u.j)(r,{active:!1,dataIndex:i,parsed:void 0,raw:void 0,element:e,index:i,mode:"default",type:"data"})}(this.getContext(),e,h)),o.parsed=this.getParsed(e),o.raw=n.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=function ie(r,i){return(0,u.j)(r,{active:!1,dataset:void 0,datasetIndex:i,index:i,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=s,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",s){const n="active"===t,o=this._cachedDataOpts,h=e+"-"+t,_=o[h],S=this.enableOptionSharing&&(0,u.h)(s);if(_)return ve(_,S);const O=this.chart.config,B=O.datasetElementScopeKeys(this._type,e),V=n?[`${e}Hover`,"hover",e,""]:[e,""],Z=O.getOptionScopes(this.getDataset(),B),oe=Object.keys(u.d.elements[e]),_e=O.resolveNamedOptions(Z,oe,()=>this.getContext(s,n,t),V);return _e.$shared&&(_e.$shared=S,o[h]=Object.freeze(ve(_e,S))),_e}_resolveAnimations(e,t,s){const n=this.chart,o=this._cachedDataOpts,h=`animation-${t}`,_=o[h];if(_)return _;let S;if(!1!==n.options.animation){const B=this.chart.config,V=B.datasetAnimationScopeKeys(this._type,t),Z=B.getOptionScopes(this.getDataset(),V);S=B.createResolver(Z,this.getContext(e,s,t))}const O=new m(n,S&&S.animations);return S&&S._cacheable&&(o[h]=Object.freeze(O)),O}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||me(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),n=this._sharedOptions,o=this.getSharedOptions(s),h=this.includeOptions(t,o)||o!==n;return this.updateSharedOptions(o,t,s),{sharedOptions:o,includeOptions:h}}updateElement(e,t,s,n){me(n)?Object.assign(e,s):this._resolveAnimations(t,n).update(e,s)}updateSharedOptions(e,t,s){e&&!me(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,n){e.active=n;const o=this.getStyle(t,n);this._resolveAnimations(t,s,n).update(e,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[_,S,O]of this._syncList)this[_](S,O);this._syncList=[];const n=s.length,o=t.length,h=Math.min(o,n);h&&this.parse(0,h),o>n?this._insertElements(n,o-n,e):o<n&&this._removeElements(o,n-o)}_insertElements(e,t,s=!0){const n=this._cachedMeta,o=n.data,h=e+t;let _;const S=O=>{for(O.length+=t,_=O.length-1;_>=h;_--)O[_]=O[_-t]};for(S(o),_=e;_<h;++_)o[_]=new this.dataElementType;this._parsing&&S(n._parsed),this.parse(e,t),s&&this.updateElements(o,e,t,"reset")}updateElements(e,t,s,n){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(e,t);s._stacked&&J(s,n)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,n]=e;this[t](s,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return(0,U.Z)(r,"defaults",{}),(0,U.Z)(r,"datasetElementType",null),(0,U.Z)(r,"dataElementType",null),r})();function G(r){const i=r.iScale,e=function N(r,i){if(!r._cache.$bar){const e=r.getMatchingVisibleMetas(i);let t=[];for(let s=0,n=e.length;s<n;s++)t=t.concat(e[s].controller.getAllParsedValues(r));r._cache.$bar=(0,u._)(t.sort((s,n)=>s-n))}return r._cache.$bar}(i,r.type);let s,n,o,h,t=i._length;const _=()=>{32767===o||-32768===o||((0,u.h)(h)&&(t=Math.min(t,Math.abs(o-h)||t)),h=o)};for(s=0,n=e.length;s<n;++s)o=i.getPixelForValue(e[s]),_();for(h=void 0,s=0,n=i.ticks.length;s<n;++s)o=i.getPixelForTick(s),_();return t}function He(r,i,e,t){return(0,u.b)(r)?function ke(r,i,e,t){const s=e.parse(r[0],t),n=e.parse(r[1],t),o=Math.min(s,n),h=Math.max(s,n);let _=o,S=h;Math.abs(o)>Math.abs(h)&&(_=h,S=o),i[e.axis]=S,i._custom={barStart:_,barEnd:S,start:s,end:n,min:o,max:h}}(r,i,e,t):i[e.axis]=e.parse(r,t),i}function We(r,i,e,t){const s=r.iScale,n=r.vScale,o=s.getLabels(),h=s===n,_=[];let S,O,B,V;for(S=e,O=e+t;S<O;++S)V=i[S],B={},B[s.axis]=h||s.parse(o[S],S),_.push(He(V,B,n,S));return _}function Re(r){return r&&void 0!==r.barStart&&void 0!==r.barEnd}function le(r,i,e,t){let s=i.borderSkipped;const n={};if(!s)return void(r.borderSkipped=n);if(!0===s)return void(r.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:h,reverse:_,top:S,bottom:O}=function I(r){let i,e,t,s,n;return r.horizontal?(i=r.base>r.x,e="left",t="right"):(i=r.base<r.y,e="bottom",t="top"),i?(s="end",n="start"):(s="start",n="end"),{start:e,end:t,reverse:i,top:s,bottom:n}}(r);"middle"===s&&e&&(r.enableBorderRadius=!0,(e._top||0)===t?s=S:(e._bottom||0)===t?s=O:(n[Se(O,o,h,_)]=!0,s=S)),n[Se(s,o,h,_)]=!0,r.borderSkipped=n}function Se(r,i,e,t){return t?(r=function ye(r,i,e){return r===i?e:r===e?i:r}(r,i,e),r=$e(r,e,i)):r=$e(r,i,e),r}function $e(r,i,e){return"start"===r?i:"end"===r?e:r}function ze(r,{inflateAmount:i},e){r.inflateAmount="auto"===i?1===e?.33:0:i}let Ze=(()=>{class r extends Ce{parsePrimitiveData(e,t,s,n){return We(e,t,s,n)}parseArrayData(e,t,s,n){return We(e,t,s,n)}parseObjectData(e,t,s,n){const{iScale:o,vScale:h}=e,{xAxisKey:_="x",yAxisKey:S="y"}=this._parsing,O="x"===o.axis?_:S,B="x"===h.axis?_:S,V=[];let Z,oe,ce,_e;for(Z=s,oe=s+n;Z<oe;++Z)_e=t[Z],ce={},ce[o.axis]=o.parse((0,u.f)(_e,O),Z),V.push(He((0,u.f)(_e,B),ce,h,Z));return V}updateRangeFromParsed(e,t,s,n){super.updateRangeFromParsed(e,t,s,n);const o=s._custom;o&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:s,vScale:n}=t,o=this.getParsed(e),h=o._custom,_=Re(h)?"["+h.start+", "+h.end+"]":""+n.getLabelForValue(o[n.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:_}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,s,n){const o="reset"===n,{index:h,_cachedMeta:{vScale:_}}=this,S=_.getBasePixel(),O=_.isHorizontal(),B=this._getRuler(),{sharedOptions:V,includeOptions:Z}=this._getSharedOptions(t,n);for(let oe=t;oe<t+s;oe++){const ce=this.getParsed(oe),_e=o||(0,u.k)(ce[_.axis])?{base:S,head:S}:this._calculateBarValuePixels(oe),we=this._calculateBarIndexPixels(oe,B),be=(ce._stacks||{})[_.axis],Be={horizontal:O,base:_e.base,enableBorderRadius:!be||Re(ce._custom)||h===be._top||h===be._bottom,x:O?_e.head:we.center,y:O?we.center:_e.head,height:O?we.size:Math.abs(_e.size),width:O?Math.abs(_e.size):we.size};Z&&(Be.options=V||this.resolveDataElementOptions(oe,e[oe].active?"active":n));const Ne=Be.options||e[oe].options;le(Be,Ne,be,h),ze(Be,Ne,B.ratio),this.updateElement(e[oe],oe,Be,n)}}_getStacks(e,t){const{iScale:s}=this._cachedMeta,n=s.getMatchingVisibleMetas(this._type).filter(S=>S.controller.options.grouped),o=s.options.stacked,h=[],_=S=>{const O=S.controller.getParsed(t),B=O&&O[S.vScale.axis];if((0,u.k)(B)||isNaN(B))return!0};for(const S of n)if((void 0===t||!_(S))&&((!1===o||-1===h.indexOf(S.stack)||void 0===o&&void 0===S.stack)&&h.push(S.stack),S.index===e))break;return h.length||h.push(void 0),h}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,s){const n=this._getStacks(e,s),o=void 0!==t?n.indexOf(t):-1;return-1===o?n.length-1:o}_getRuler(){const e=this.options,t=this._cachedMeta,s=t.iScale,n=[];let o,h;for(o=0,h=t.data.length;o<h;++o)n.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));const _=e.barThickness;return{min:_||G(t),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:_?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:s,index:n},options:{base:o,minBarLength:h}}=this,_=o||0,S=this.getParsed(e),O=S._custom,B=Re(O);let ce,_e,V=S[t.axis],Z=0,oe=s?this.applyStack(t,S,s):V;oe!==V&&(Z=oe-V,oe=V),B&&(V=O.barStart,oe=O.barEnd-O.barStart,0!==V&&(0,u.s)(V)!==(0,u.s)(O.barEnd)&&(Z=0),Z+=V);const we=(0,u.k)(o)||B?Z:o;let be=t.getPixelForValue(we);if(ce=this.chart.getDataVisibility(e)?t.getPixelForValue(Z+oe):be,_e=ce-be,Math.abs(_e)<h){_e=function Ke(r,i,e){return 0!==r?(0,u.s)(r):(i.isHorizontal()?1:-1)*(i.min>=e?1:-1)}(_e,t,_)*h,V===_&&(be-=_e/2);const Be=t.getPixelForDecimal(0),Ne=t.getPixelForDecimal(1),Oe=Math.min(Be,Ne),Fe=Math.max(Be,Ne);be=Math.max(Math.min(be,Fe),Oe),ce=be+_e,s&&!B&&(S._stacks[t.axis]._visualValues[n]=t.getValueForPixel(ce)-t.getValueForPixel(be))}if(be===t.getPixelForValue(_)){const Be=(0,u.s)(_e)*t.getLineWidthForValue(_)/2;be+=Be,_e-=Be}return{size:_e,base:be,head:ce,center:ce+_e/2}}_calculateBarIndexPixels(e,t){const s=t.scale,n=this.options,o=n.skipNull,h=(0,u.v)(n.maxBarThickness,1/0);let _,S;if(t.grouped){const O=o?this._getStackCount(e):t.stackCount,B="flex"===n.barThickness?function re(r,i,e,t){const s=i.pixels,n=s[r];let o=r>0?s[r-1]:null,h=r<s.length-1?s[r+1]:null;const _=e.categoryPercentage;null===o&&(o=n-(null===h?i.end-i.start:h-n)),null===h&&(h=n+n-o);const S=n-(n-Math.min(o,h))/2*_;return{chunk:Math.abs(h-o)/2*_/t,ratio:e.barPercentage,start:S}}(e,t,n,O):function Q(r,i,e,t){const s=e.barThickness;let n,o;return(0,u.k)(s)?(n=i.min*e.categoryPercentage,o=e.barPercentage):(n=s*t,o=1),{chunk:n/t,ratio:o,start:i.pixels[r]-n/2}}(e,t,n,O),V=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);_=B.start+B.chunk*V+B.chunk/2,S=Math.min(h,B.chunk*B.ratio)}else _=s.getPixelForValue(this.getParsed(e)[s.axis],e),S=Math.min(h,t.min*t.ratio);return{base:_-S/2,head:_+S/2,center:_,size:S}}draw(){const e=this._cachedMeta,t=e.vScale,s=e.data,n=s.length;let o=0;for(;o<n;++o)null!==this.getParsed(o)[t.axis]&&s[o].draw(this._ctx)}}return(0,U.Z)(r,"id","bar"),(0,U.Z)(r,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,U.Z)(r,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}}),r})(),Ue=(()=>{class r extends Ce{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,s,n){const o=super.parsePrimitiveData(e,t,s,n);for(let h=0;h<o.length;h++)o[h]._custom=this.resolveDataElementOptions(h+s).radius;return o}parseArrayData(e,t,s,n){const o=super.parseArrayData(e,t,s,n);for(let h=0;h<o.length;h++)o[h]._custom=(0,u.v)(t[s+h][2],this.resolveDataElementOptions(h+s).radius);return o}parseObjectData(e,t,s,n){const o=super.parseObjectData(e,t,s,n);for(let h=0;h<o.length;h++){const _=t[s+h];o[h]._custom=(0,u.v)(_&&_.r&&+_.r,this.resolveDataElementOptions(h+s).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let s=e.length-1;s>=0;--s)t=Math.max(t,e[s].size(this.resolveDataElementOptions(s))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:o}=t,h=this.getParsed(e),_=n.getLabelForValue(h.x),S=o.getLabelForValue(h.y),O=h._custom;return{label:s[e]||"",value:"("+_+", "+S+(O?", "+O:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,s,n){const o="reset"===n,{iScale:h,vScale:_}=this._cachedMeta,{sharedOptions:S,includeOptions:O}=this._getSharedOptions(t,n),B=h.axis,V=_.axis;for(let Z=t;Z<t+s;Z++){const oe=e[Z],ce=!o&&this.getParsed(Z),_e={},we=_e[B]=o?h.getPixelForDecimal(.5):h.getPixelForValue(ce[B]),be=_e[V]=o?_.getBasePixel():_.getPixelForValue(ce[V]);_e.skip=isNaN(we)||isNaN(be),O&&(_e.options=S||this.resolveDataElementOptions(Z,oe.active?"active":n),o&&(_e.options.radius=0)),this.updateElement(oe,Z,_e,n)}}resolveDataElementOptions(e,t){const s=this.getParsed(e);let n=super.resolveDataElementOptions(e,t);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const o=n.radius;return"active"!==t&&(n.radius=0),n.radius+=(0,u.v)(s&&s._custom,o),n}}return(0,U.Z)(r,"id","bubble"),(0,U.Z)(r,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,U.Z)(r,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}}),r})(),Te=(()=>{class r extends Ce{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const s=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=s;else{let h,_,o=S=>+s[S];if((0,u.i)(s[e])){const{key:S="value"}=this._parsing;o=O=>+(0,u.f)(s[O],S)}for(h=e,_=e+t;h<_;++h)n._parsed[h]=o(h)}}_getRotation(){return(0,u.t)(this.options.rotation-90)}_getCircumference(){return(0,u.t)(this.options.circumference)}_getRotationExtents(){let e=u.T,t=-u.T;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const n=this.chart.getDatasetMeta(s).controller,o=n._getRotation(),h=n._getCircumference();e=Math.min(e,o),t=Math.max(t,o+h)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:s}=t,n=this._cachedMeta,o=n.data,h=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,_=Math.max((Math.min(s.width,s.height)-h)/2,0),S=Math.min((0,u.m)(this.options.cutout,_),1),O=this._getRingWeight(this.index),{circumference:B,rotation:V}=this._getRotationExtents(),{ratioX:Z,ratioY:oe,offsetX:ce,offsetY:_e}=function nt(r,i,e){let t=1,s=1,n=0,o=0;if(i<u.T){const h=r,_=h+i,S=Math.cos(h),O=Math.sin(h),B=Math.cos(_),V=Math.sin(_),Z=(Be,Ne,Oe)=>(0,u.p)(Be,h,_,!0)?1:Math.max(Ne,Ne*e,Oe,Oe*e),oe=(Be,Ne,Oe)=>(0,u.p)(Be,h,_,!0)?-1:Math.min(Ne,Ne*e,Oe,Oe*e),ce=Z(0,S,B),_e=Z(u.H,O,V),we=oe(u.P,S,B),be=oe(u.P+u.H,O,V);t=(ce-we)/2,s=(_e-be)/2,n=-(ce+we)/2,o=-(_e+be)/2}return{ratioX:t,ratioY:s,offsetX:n,offsetY:o}}(V,B,S),Be=Math.max(Math.min((s.width-h)/Z,(s.height-h)/oe)/2,0),Ne=(0,u.n)(this.options.radius,Be),Fe=(Ne-Math.max(Ne*S,0))/this._getVisibleDatasetWeightTotal();this.offsetX=ce*Ne,this.offsetY=_e*Ne,n.total=this.calculateTotal(),this.outerRadius=Ne-Fe*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Fe*O,0),this.updateElements(o,0,o.length,e)}_circumference(e,t){const s=this.options,n=this._cachedMeta,o=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||null===n._parsed[e]||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*o/u.T)}updateElements(e,t,s,n){const o="reset"===n,h=this.chart,_=h.chartArea,B=(_.left+_.right)/2,V=(_.top+_.bottom)/2,Z=o&&h.options.animation.animateScale,oe=Z?0:this.innerRadius,ce=Z?0:this.outerRadius,{sharedOptions:_e,includeOptions:we}=this._getSharedOptions(t,n);let Be,be=this._getRotation();for(Be=0;Be<t;++Be)be+=this._circumference(Be,o);for(Be=t;Be<t+s;++Be){const Ne=this._circumference(Be,o),Oe=e[Be],Fe={x:B+this.offsetX,y:V+this.offsetY,startAngle:be,endAngle:be+Ne,circumference:Ne,outerRadius:ce,innerRadius:oe};we&&(Fe.options=_e||this.resolveDataElementOptions(Be,Oe.active?"active":n)),be+=Ne,this.updateElement(Oe,Be,Fe,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,s=0;for(n=0;n<t.length;n++){const o=e._parsed[n];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(n)&&!t[n].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?u.T*(Math.abs(e)/t):0}getLabelAndValue(e){const s=this.chart,n=s.data.labels||[],o=(0,u.o)(this._cachedMeta._parsed[e],s.options.locale);return{label:n[e]||"",value:o}}getMaxBorderWidth(e){let t=0;const s=this.chart;let n,o,h,_,S;if(!e)for(n=0,o=s.data.datasets.length;n<o;++n)if(s.isDatasetVisible(n)){h=s.getDatasetMeta(n),e=h.data,_=h.controller;break}if(!e)return 0;for(n=0,o=e.length;n<o;++n)S=_.resolveDataElementOptions(n),"inner"!==S.borderAlign&&(t=Math.max(t,S.borderWidth||0,S.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let s=0,n=e.length;s<n;++s){const o=this.resolveDataElementOptions(s);t=Math.max(t,o.offset||0,o.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(e){return Math.max((0,u.v)(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return(0,U.Z)(r,"id","doughnut"),(0,U.Z)(r,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,U.Z)(r,"descriptors",{_scriptable:i=>"spacing"!==i,_indexable:i=>"spacing"!==i&&!i.startsWith("borderDash")&&!i.startsWith("hoverBorderDash")}),(0,U.Z)(r,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){const e=i.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t,color:s}}=i.legend.options;return e.labels.map((n,o)=>{const _=i.getDatasetMeta(0).controller.getStyle(o);return{text:n,fillStyle:_.backgroundColor,strokeStyle:_.borderColor,fontColor:s,lineWidth:_.borderWidth,pointStyle:t,hidden:!i.getDataVisibility(o),index:o}})}return[]}},onClick(i,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}}}}),r})(),Ae=(()=>{class r extends Ce{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:s,data:n=[],_dataset:o}=t,h=this.chart._animationsDisabled;let{start:_,count:S}=(0,u.q)(t,n,h);this._drawStart=_,this._drawCount=S,(0,u.w)(t)&&(_=0,S=n.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=n;const O=this.resolveDatasetElementOptions(e);this.options.showLine||(O.borderWidth=0),O.segment=this.options.segment,this.updateElement(s,void 0,{animated:!h,options:O},e),this.updateElements(n,_,S,e)}updateElements(e,t,s,n){const o="reset"===n,{iScale:h,vScale:_,_stacked:S,_dataset:O}=this._cachedMeta,{sharedOptions:B,includeOptions:V}=this._getSharedOptions(t,n),Z=h.axis,oe=_.axis,{spanGaps:ce,segment:_e}=this.options,we=(0,u.x)(ce)?ce:Number.POSITIVE_INFINITY,be=this.chart._animationsDisabled||o||"none"===n,Be=t+s,Ne=e.length;let Oe=t>0&&this.getParsed(t-1);for(let Fe=0;Fe<Ne;++Fe){const Ye=e[Fe],je=be?Ye:{};if(Fe<t||Fe>=Be){je.skip=!0;continue}const et=this.getParsed(Fe),ft=(0,u.k)(et[oe]),ut=je[Z]=h.getPixelForValue(et[Z],Fe),vt=je[oe]=o||ft?_.getBasePixel():_.getPixelForValue(S?this.applyStack(_,et,S):et[oe],Fe);je.skip=isNaN(ut)||isNaN(vt)||ft,je.stop=Fe>0&&Math.abs(et[Z]-Oe[Z])>we,_e&&(je.parsed=et,je.raw=O.data[Fe]),V&&(je.options=B||this.resolveDataElementOptions(Fe,Ye.active?"active":n)),be||this.updateElement(Ye,Fe,je,n),Oe=et}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,s=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return s;const o=n[0].size(this.resolveDataElementOptions(0)),h=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,o,h)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return(0,U.Z)(r,"id","line"),(0,U.Z)(r,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,U.Z)(r,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}}),r})(),Je=(()=>{class r extends Ce{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const s=this.chart,n=s.data.labels||[],o=(0,u.o)(this._cachedMeta._parsed[e].r,s.options.locale);return{label:n[e]||"",value:o}}parseObjectData(e,t,s,n){return u.y.bind(this)(e,t,s,n)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((s,n)=>{const o=this.getParsed(n).r;!isNaN(o)&&this.chart.getDataVisibility(n)&&(o<t.min&&(t.min=o),o>t.max&&(t.max=o))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,s=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),o=Math.max(n/2,0),_=(o-Math.max(s.cutoutPercentage?o/100*s.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=o-_*this.index,this.innerRadius=this.outerRadius-_}updateElements(e,t,s,n){const o="reset"===n,h=this.chart,S=h.options.animation,O=this._cachedMeta.rScale,B=O.xCenter,V=O.yCenter,Z=O.getIndexAngle(0)-.5*u.P;let ce,oe=Z;const _e=360/this.countVisibleElements();for(ce=0;ce<t;++ce)oe+=this._computeAngle(ce,n,_e);for(ce=t;ce<t+s;ce++){const we=e[ce];let be=oe,Be=oe+this._computeAngle(ce,n,_e),Ne=h.getDataVisibility(ce)?O.getDistanceFromCenterForValue(this.getParsed(ce).r):0;oe=Be,o&&(S.animateScale&&(Ne=0),S.animateRotate&&(be=Be=Z));const Oe={x:B,y:V,innerRadius:0,outerRadius:Ne,startAngle:be,endAngle:Be,options:this.resolveDataElementOptions(ce,we.active?"active":n)};this.updateElement(we,ce,Oe,n)}}countVisibleElements(){let t=0;return this._cachedMeta.data.forEach((s,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,s){return this.chart.getDataVisibility(e)?(0,u.t)(this.resolveDataElementOptions(e,t).angle||s):0}}return(0,U.Z)(r,"id","polarArea"),(0,U.Z)(r,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,U.Z)(r,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){const e=i.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t,color:s}}=i.legend.options;return e.labels.map((n,o)=>{const _=i.getDatasetMeta(0).controller.getStyle(o);return{text:n,fillStyle:_.backgroundColor,strokeStyle:_.borderColor,fontColor:s,lineWidth:_.borderWidth,pointStyle:t,hidden:!i.getDataVisibility(o),index:o}})}return[]}},onClick(i,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}}),r})();var dt=Object.freeze({__proto__:null,BarController:Ze,BubbleController:Ue,DoughnutController:Te,LineController:Ae,PieController:(()=>{class r extends Te{}return(0,U.Z)(r,"id","pie"),(0,U.Z)(r,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"}),r})(),PolarAreaController:Je,RadarController:(()=>{class r extends Ce{getLabelAndValue(e){const t=this._cachedMeta.vScale,s=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(s[t.axis])}}parseObjectData(e,t,s,n){return u.y.bind(this)(e,t,s,n)}update(e){const t=this._cachedMeta,s=t.dataset,n=t.data||[],o=t.iScale.getLabels();if(s.points=n,"resize"!==e){const h=this.resolveDatasetElementOptions(e);this.options.showLine||(h.borderWidth=0),this.updateElement(s,void 0,{_loop:!0,_fullLoop:o.length===n.length,options:h},e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,s,n){const o=this._cachedMeta.rScale,h="reset"===n;for(let _=t;_<t+s;_++){const S=e[_],O=this.resolveDataElementOptions(_,S.active?"active":n),B=o.getPointPositionForValue(_,this.getParsed(_).r),V=h?o.xCenter:B.x,Z=h?o.yCenter:B.y,oe={x:V,y:Z,angle:B.angle,skip:isNaN(V)||isNaN(Z),options:O};this.updateElement(S,_,oe,n)}}}return(0,U.Z)(r,"id","radar"),(0,U.Z)(r,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,U.Z)(r,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}}),r})(),ScatterController:(()=>{class r extends Ce{getLabelAndValue(e){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:o}=t,h=this.getParsed(e),_=n.getLabelForValue(h.x),S=o.getLabelForValue(h.y);return{label:s[e]||"",value:"("+_+", "+S+")"}}update(e){const t=this._cachedMeta,{data:s=[]}=t,n=this.chart._animationsDisabled;let{start:o,count:h}=(0,u.q)(t,s,n);if(this._drawStart=o,this._drawCount=h,(0,u.w)(t)&&(o=0,h=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:_,_dataset:S}=t;_._chart=this.chart,_._datasetIndex=this.index,_._decimated=!!S._decimated,_.points=s;const O=this.resolveDatasetElementOptions(e);O.segment=this.options.segment,this.updateElement(_,void 0,{animated:!n,options:O},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(s,o,h,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,s,n){const o="reset"===n,{iScale:h,vScale:_,_stacked:S,_dataset:O}=this._cachedMeta,B=this.resolveDataElementOptions(t,n),V=this.getSharedOptions(B),Z=this.includeOptions(n,V),oe=h.axis,ce=_.axis,{spanGaps:_e,segment:we}=this.options,be=(0,u.x)(_e)?_e:Number.POSITIVE_INFINITY,Be=this.chart._animationsDisabled||o||"none"===n;let Ne=t>0&&this.getParsed(t-1);for(let Oe=t;Oe<t+s;++Oe){const Fe=e[Oe],Ye=this.getParsed(Oe),je=Be?Fe:{},et=(0,u.k)(Ye[ce]),ft=je[oe]=h.getPixelForValue(Ye[oe],Oe),ut=je[ce]=o||et?_.getBasePixel():_.getPixelForValue(S?this.applyStack(_,Ye,S):Ye[ce],Oe);je.skip=isNaN(ft)||isNaN(ut)||et,je.stop=Oe>0&&Math.abs(Ye[oe]-Ne[oe])>be,we&&(je.parsed=Ye,je.raw=O.data[Oe]),Z&&(je.options=V||this.resolveDataElementOptions(Oe,Fe.active?"active":n)),Be||this.updateElement(Fe,Oe,je,n),Ne=Ye}this.updateSharedOptions(V,n,B)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let _=0;for(let S=t.length-1;S>=0;--S)_=Math.max(_,t[S].size(this.resolveDataElementOptions(S))/2);return _>0&&_}const s=e.dataset,n=s.options&&s.options.borderWidth||0;if(!t.length)return n;const o=t[0].size(this.resolveDataElementOptions(0)),h=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,o,h)/2}}return(0,U.Z)(r,"id","scatter"),(0,U.Z)(r,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,U.Z)(r,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}}),r})()});function bt(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class zt{static override(i){Object.assign(zt.prototype,i)}constructor(i){(0,U.Z)(this,"options",void 0),this.options=i||{}}init(){}formats(){return bt()}parse(){return bt()}format(){return bt()}add(){return bt()}diff(){return bt()}startOf(){return bt()}endOf(){return bt()}}var ct__date=zt;function Zt(r,i,e,t){const{controller:s,data:n,_sorted:o}=r,h=s._cachedMeta.iScale;if(h&&i===h.axis&&"r"!==i&&o&&n.length){const _=h._reversePixels?u.A:u.B;if(!t)return _(n,i,e);if(s._sharedOptions){const S=n[0],O="function"==typeof S.getRange&&S.getRange(i);if(O){const B=_(n,i,e-O),V=_(n,i,e+O);return{lo:B.lo,hi:V.hi}}}}return{lo:0,hi:n.length-1}}function Qt(r,i,e,t,s){const n=r.getSortedVisibleDatasetMetas(),o=e[i];for(let h=0,_=n.length;h<_;++h){const{index:S,data:O}=n[h],{lo:B,hi:V}=Zt(n[h],i,o,s);for(let Z=B;Z<=V;++Z){const oe=O[Z];oe.skip||t(oe,S,Z)}}}function Jt(r,i,e,t,s){const n=[];return!s&&!r.isPointInArea(i)||Qt(r,e,i,function(h,_,S){!s&&!(0,u.C)(h,r.chartArea,0)||h.inRange(i.x,i.y,t)&&n.push({element:h,datasetIndex:_,index:S})},!0),n}function pt(r,i,e,t,s,n){return n||r.isPointInArea(i)?"r"!==e||t?function Ut(r,i,e,t,s,n){let o=[];const h=function Ft(r){const i=-1!==r.indexOf("x"),e=-1!==r.indexOf("y");return function(t,s){const n=i?Math.abs(t.x-s.x):0,o=e?Math.abs(t.y-s.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}}(e);let _=Number.POSITIVE_INFINITY;return Qt(r,e,i,function S(O,B,V){const Z=O.inRange(i.x,i.y,s);if(t&&!Z)return;const oe=O.getCenterPoint(s);if(!n&&!r.isPointInArea(oe)&&!Z)return;const _e=h(i,oe);_e<_?(o=[{element:O,datasetIndex:B,index:V}],_=_e):_e===_&&o.push({element:O,datasetIndex:B,index:V})}),o}(r,i,e,t,s,n):function $t(r,i,e,t){let s=[];return Qt(r,e,i,function n(o,h,_){const{startAngle:S,endAngle:O}=o.getProps(["startAngle","endAngle"],t),{angle:B}=(0,u.D)(o,{x:i.x,y:i.y});(0,u.p)(B,S,O)&&s.push({element:o,datasetIndex:h,index:_})}),s}(r,i,e,s):[]}function xi(r,i,e,t,s){const n=[],o="x"===e?"inXRange":"inYRange";let h=!1;return Qt(r,e,i,(_,S,O)=>{_[o](i[e],s)&&(n.push({element:_,datasetIndex:S,index:O}),h=h||_.inRange(i.x,i.y,s))}),t&&!h?[]:n}var as={evaluateInteractionItems:Qt,modes:{index(r,i,e,t){const s=(0,u.z)(i,r),n=e.axis||"x",o=e.includeInvisible||!1,h=e.intersect?Jt(r,s,n,t,o):pt(r,s,n,!1,t,o),_=[];return h.length?(r.getSortedVisibleDatasetMetas().forEach(S=>{const O=h[0].index,B=S.data[O];B&&!B.skip&&_.push({element:B,datasetIndex:S.index,index:O})}),_):[]},dataset(r,i,e,t){const s=(0,u.z)(i,r),n=e.axis||"xy",o=e.includeInvisible||!1;let h=e.intersect?Jt(r,s,n,t,o):pt(r,s,n,!1,t,o);if(h.length>0){const _=h[0].datasetIndex,S=r.getDatasetMeta(_).data;h=[];for(let O=0;O<S.length;++O)h.push({element:S[O],datasetIndex:_,index:O})}return h},point:(r,i,e,t)=>Jt(r,(0,u.z)(i,r),e.axis||"xy",t,e.includeInvisible||!1),nearest:(r,i,e,t)=>pt(r,(0,u.z)(i,r),e.axis||"xy",e.intersect,t,e.includeInvisible||!1),x:(r,i,e,t)=>xi(r,(0,u.z)(i,r),"x",e.intersect,t),y:(r,i,e,t)=>xi(r,(0,u.z)(i,r),"y",e.intersect,t)}};const pi=["left","top","right","bottom"];function hi(r,i){return r.filter(e=>e.pos===i)}function Ji(r,i){return r.filter(e=>-1===pi.indexOf(e.pos)&&e.box.axis===i)}function di(r,i){return r.sort((e,t)=>{const s=i?t:e,n=i?e:t;return s.weight===n.weight?s.index-n.index:s.weight-n.weight})}function Wi(r,i,e,t){return Math.max(r[e],i[e])+Math.max(r[t],i[t])}function kt(r,i){r.top=Math.max(r.top,i.top),r.left=Math.max(r.left,i.left),r.bottom=Math.max(r.bottom,i.bottom),r.right=Math.max(r.right,i.right)}function Yt(r,i,e,t){const{pos:s,box:n}=e,o=r.maxPadding;if(!(0,u.i)(s)){e.size&&(r[s]-=e.size);const B=t[e.stack]||{size:0,count:1};B.size=Math.max(B.size,e.horizontal?n.height:n.width),e.size=B.size/B.count,r[s]+=e.size}n.getPadding&&kt(o,n.getPadding());const h=Math.max(0,i.outerWidth-Wi(o,r,"left","right")),_=Math.max(0,i.outerHeight-Wi(o,r,"top","bottom")),S=h!==r.w,O=_!==r.h;return r.w=h,r.h=_,e.horizontal?{same:S,other:O}:{same:O,other:S}}function gi(r,i){const e=i.maxPadding;return function t(s){const n={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{n[o]=Math.max(i[o],e[o])}),n}(r?["left","right"]:["top","bottom"])}function wi(r,i,e,t){const s=[];let n,o,h,_,S,O;for(n=0,o=r.length,S=0;n<o;++n){h=r[n],_=h.box,_.update(h.width||i.w,h.height||i.h,gi(h.horizontal,i));const{same:B,other:V}=Yt(i,e,h,t);S|=B&&s.length,O=O||V,_.fullSize||s.push(h)}return S&&wi(s,i,e,t)||O}function jt(r,i,e,t,s){r.top=e,r.left=i,r.right=i+t,r.bottom=e+s,r.width=t,r.height=s}function Vt(r,i,e,t){const s=e.padding;let{x:n,y:o}=i;for(const h of r){const _=h.box,S=t[h.stack]||{count:1,placed:0,weight:1},O=h.stackWeight/S.weight||1;if(h.horizontal){const B=i.w*O,V=S.size||_.height;(0,u.h)(S.start)&&(o=S.start),_.fullSize?jt(_,s.left,o,e.outerWidth-s.right-s.left,V):jt(_,i.left+S.placed,o,B,V),S.start=o,S.placed+=B,o=_.bottom}else{const B=i.h*O,V=S.size||_.width;(0,u.h)(S.start)&&(n=S.start),_.fullSize?jt(_,n,s.top,V,e.outerHeight-s.bottom-s.top):jt(_,n,i.top+S.placed,V,B),S.start=n,S.placed+=B,n=_.right}}i.x=n,i.y=o}var At={addBox(r,i){r.boxes||(r.boxes=[]),i.fullSize=i.fullSize||!1,i.position=i.position||"top",i.weight=i.weight||0,i._layers=i._layers||function(){return[{z:0,draw(e){i.draw(e)}}]},r.boxes.push(i)},removeBox(r,i){const e=r.boxes?r.boxes.indexOf(i):-1;-1!==e&&r.boxes.splice(e,1)},configure(r,i,e){i.fullSize=e.fullSize,i.position=e.position,i.weight=e.weight},update(r,i,e,t){if(!r)return;const s=(0,u.E)(r.options.layout.padding),n=Math.max(i-s.width,0),o=Math.max(e-s.height,0),h=function ki(r){const i=function Ni(r){const i=[];let e,t,s,n,o,h;for(e=0,t=(r||[]).length;e<t;++e)s=r[e],({position:n,options:{stack:o,stackWeight:h=1}}=s),i.push({index:e,box:s,pos:n,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&n+o,stackWeight:h});return i}(r),e=di(i.filter(S=>S.box.fullSize),!0),t=di(hi(i,"left"),!0),s=di(hi(i,"right")),n=di(hi(i,"top"),!0),o=di(hi(i,"bottom")),h=Ji(i,"x"),_=Ji(i,"y");return{fullSize:e,leftAndTop:t.concat(n),rightAndBottom:s.concat(_).concat(o).concat(h),chartArea:hi(i,"chartArea"),vertical:t.concat(s).concat(_),horizontal:n.concat(o).concat(h)}}(r.boxes),_=h.vertical,S=h.horizontal;(0,u.F)(r.boxes,ce=>{"function"==typeof ce.beforeLayout&&ce.beforeLayout()});const O=_.reduce((ce,_e)=>_e.box.options&&!1===_e.box.options.display?ce:ce+1,0)||1,B=Object.freeze({outerWidth:i,outerHeight:e,padding:s,availableWidth:n,availableHeight:o,vBoxMaxWidth:n/2/O,hBoxMaxHeight:o/2}),V=Object.assign({},s);kt(V,(0,u.E)(t));const Z=Object.assign({maxPadding:V,w:n,h:o,x:s.left,y:s.top},s),oe=function Ei(r,i){const e=function es(r){const i={};for(const e of r){const{stack:t,pos:s,stackWeight:n}=e;if(!t||!pi.includes(s))continue;const o=i[t]||(i[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=n}return i}(r),{vBoxMaxWidth:t,hBoxMaxHeight:s}=i;let n,o,h;for(n=0,o=r.length;n<o;++n){h=r[n];const{fullSize:_}=h.box,S=e[h.stack],O=S&&h.stackWeight/S.weight;h.horizontal?(h.width=O?O*t:_&&i.availableWidth,h.height=s):(h.width=t,h.height=O?O*s:_&&i.availableHeight)}return e}(_.concat(S),B);wi(h.fullSize,Z,B,oe),wi(_,Z,B,oe),wi(S,Z,B,oe)&&wi(_,Z,B,oe),function Ai(r){const i=r.maxPadding;function e(t){const s=Math.max(i[t]-r[t],0);return r[t]+=s,s}r.y+=e("top"),r.x+=e("left"),e("right"),e("bottom")}(Z),Vt(h.leftAndTop,Z,B,oe),Z.x+=Z.w,Z.y+=Z.h,Vt(h.rightAndBottom,Z,B,oe),r.chartArea={left:Z.left,top:Z.top,right:Z.left+Z.w,bottom:Z.top+Z.h,height:Z.h,width:Z.w},(0,u.F)(h.chartArea,ce=>{const _e=ce.box;Object.assign(_e,r.chartArea),_e.update(Z.w,Z.h,{left:0,top:0,right:0,bottom:0})})}};class ei{acquireContext(i,e){}releaseContext(i){return!1}addEventListener(i,e,t){}removeEventListener(i,e,t){}getDevicePixelRatio(){return 1}getMaximumSize(i,e,t,s){return e=Math.max(0,e||i.width),t=t||i.height,{width:e,height:Math.max(0,s?Math.floor(e/s):t)}}isAttached(i){return!0}updateConfig(i){}}class Ui extends ei{acquireContext(i){return i&&i.getContext&&i.getContext("2d")||null}updateConfig(i){i.options.animation=!1}}const Ht="$chartjs",Ot={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ts=r=>null===r||""===r,zi=!!u.K&&{passive:!0};function cs(r,i,e){r.canvas.removeEventListener(i,e,zi)}function W(r,i){for(const e of r)if(e===i||e.contains(i))return!0}function $(r,i,e){const t=r.canvas,s=new MutationObserver(n=>{let o=!1;for(const h of n)o=o||W(h.addedNodes,t),o=o&&!W(h.removedNodes,t);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function q(r,i,e){const t=r.canvas,s=new MutationObserver(n=>{let o=!1;for(const h of n)o=o||W(h.removedNodes,t),o=o&&!W(h.addedNodes,t);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const de=new Map;let pe=0;function Ee(){const r=window.devicePixelRatio;r!==pe&&(pe=r,de.forEach((i,e)=>{e.currentDevicePixelRatio!==r&&i()}))}function ot(r,i,e){const t=r.canvas,s=t&&(0,u.I)(t);if(!s)return;const n=(0,u.L)((h,_)=>{const S=s.clientWidth;e(h,_),S<s.clientWidth&&e()},window),o=new ResizeObserver(h=>{const _=h[0],S=_.contentRect.width,O=_.contentRect.height;0===S&&0===O||n(S,O)});return o.observe(s),function Me(r,i){de.size||window.addEventListener("resize",Ee),de.set(r,i)}(r,n),o}function it(r,i,e){e&&e.disconnect(),"resize"===i&&function Xe(r){de.delete(r),de.size||window.removeEventListener("resize",Ee)}(r)}function st(r,i,e){const t=r.canvas,s=(0,u.L)(n=>{null!==r.ctx&&e(function Pi(r,i){const e=Ot[r.type]||r.type,{x:t,y:s}=(0,u.z)(r,i);return{type:e,chart:i,native:r,x:void 0!==t?t:null,y:void 0!==s?s:null}}(n,r))},r);return function oi(r,i,e){r.addEventListener(i,e,zi)}(t,i,s),s}class Pt extends ei{acquireContext(i,e){const t=i&&i.getContext&&i.getContext("2d");return t&&t.canvas===i?(function ls(r,i){const e=r.style,t=r.getAttribute("height"),s=r.getAttribute("width");if(r[Ht]={initial:{height:t,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",ts(s)){const n=(0,u.J)(r,"width");void 0!==n&&(r.width=n)}if(ts(t))if(""===r.style.height)r.height=r.width/(i||2);else{const n=(0,u.J)(r,"height");void 0!==n&&(r.height=n)}}(i,e),t):null}releaseContext(i){const e=i.canvas;if(!e[Ht])return!1;const t=e[Ht].initial;["height","width"].forEach(n=>{const o=t[n];(0,u.k)(o)?e.removeAttribute(n):e.setAttribute(n,o)});const s=t.style||{};return Object.keys(s).forEach(n=>{e.style[n]=s[n]}),e.width=e.width,delete e[Ht],!0}addEventListener(i,e,t){this.removeEventListener(i,e),(i.$proxies||(i.$proxies={}))[e]=({attach:$,detach:q,resize:ot}[e]||st)(i,e,t)}removeEventListener(i,e){const t=i.$proxies||(i.$proxies={}),s=t[e];s&&(({attach:it,detach:it,resize:it}[e]||cs)(i,e,s),t[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(i,e,t,s){return(0,u.G)(i,e,t,s)}isAttached(i){const e=(0,u.I)(i);return!(!e||!e.isConnected)}}class xt{constructor(){(0,U.Z)(this,"x",void 0),(0,U.Z)(this,"y",void 0),(0,U.Z)(this,"active",!1),(0,U.Z)(this,"options",void 0),(0,U.Z)(this,"$animations",void 0)}tooltipPosition(i){const{x:e,y:t}=this.getProps(["x","y"],i);return{x:e,y:t}}hasValue(){return(0,u.x)(this.x)&&(0,u.x)(this.y)}getProps(i,e){const t=this.$animations;if(!e||!t)return this;const s={};return i.forEach(n=>{s[n]=t[n]&&t[n].active()?t[n]._to:this[n]}),s}}function Xt(r,i,e,t,s){const n=(0,u.v)(t,0),o=Math.min((0,u.v)(s,r.length),r.length);let _,S,O,h=0;for(e=Math.ceil(e),s&&(_=s-t,e=_/Math.floor(_/e)),O=n;O<0;)h++,O=Math.round(n+h*e);for(S=Math.max(n,0);S<o;S++)S===O&&(i.push(r[S]),h++,O=Math.round(n+h*e))}(0,U.Z)(xt,"defaults",{}),(0,U.Z)(xt,"defaultRoutes",void 0);const hs=(r,i,e)=>"top"===i||"left"===i?r[i]+e:r[i]-e,ji=(r,i)=>Math.min(i||r,r);function Gt(r,i){const e=[],t=r.length/i,s=r.length;let n=0;for(;n<s;n+=t)e.push(r[Math.floor(n)]);return e}function fi(r,i,e){const t=r.ticks.length,s=Math.min(i,t-1),n=r._startPixel,o=r._endPixel,h=1e-6;let S,_=r.getPixelForTick(s);if(!(e&&(S=1===t?Math.max(_-n,o-_):0===i?(r.getPixelForTick(1)-_)/2:(_-r.getPixelForTick(s-1))/2,_+=s<i?S:-S,_<n-h||_>o+h)))return _}function vi(r){return r.drawTicks?r.tickLength:0}function Vi(r,i){if(!r.display)return 0;const e=(0,u.a0)(r.font,i),t=(0,u.E)(r.padding);return((0,u.b)(r.text)?r.text.length:1)*e.lineHeight+t.height}function Ti(r,i,e){let t=(0,u.a1)(r);return(e&&"right"!==i||!e&&"right"===i)&&(t=(r=>"left"===r?"right":"right"===r?"left":r)(t)),t}class si extends xt{constructor(i){super(),this.id=i.id,this.type=i.type,this.options=void 0,this.ctx=i.ctx,this.chart=i.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(i){this.options=i.setContext(this.getContext()),this.axis=i.axis,this._userMin=this.parse(i.min),this._userMax=this.parse(i.max),this._suggestedMin=this.parse(i.suggestedMin),this._suggestedMax=this.parse(i.suggestedMax)}parse(i,e){return i}getUserBounds(){let{_userMin:i,_userMax:e,_suggestedMin:t,_suggestedMax:s}=this;return i=(0,u.O)(i,Number.POSITIVE_INFINITY),e=(0,u.O)(e,Number.NEGATIVE_INFINITY),t=(0,u.O)(t,Number.POSITIVE_INFINITY),s=(0,u.O)(s,Number.NEGATIVE_INFINITY),{min:(0,u.O)(i,t),max:(0,u.O)(e,s),minDefined:(0,u.g)(i),maxDefined:(0,u.g)(e)}}getMinMax(i){let o,{min:e,max:t,minDefined:s,maxDefined:n}=this.getUserBounds();if(s&&n)return{min:e,max:t};const h=this.getMatchingVisibleMetas();for(let _=0,S=h.length;_<S;++_)o=h[_].controller.getMinMax(this,i),s||(e=Math.min(e,o.min)),n||(t=Math.max(t,o.max));return e=n&&e>t?t:e,t=s&&e>t?e:t,{min:(0,u.O)(e,(0,u.O)(t,e)),max:(0,u.O)(t,(0,u.O)(e,t))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const i=this.chart.data;return this.options.labels||(this.isHorizontal()?i.xLabels:i.yLabels)||i.labels||[]}getLabelItems(i=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(i))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){(0,u.Q)(this.options.beforeUpdate,[this])}update(i,e,t){const{beginAtZero:s,grace:n,ticks:o}=this.options,h=o.sampleSize;this.beforeUpdate(),this.maxWidth=i,this.maxHeight=e,this._margins=t=Object.assign({left:0,right:0,top:0,bottom:0},t),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+t.left+t.right:this.height+t.top+t.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=(0,u.R)(this,n,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const _=h<this.ticks.length;this._convertTicksToLabels(_?Gt(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function It(r,i){const e=r.options.ticks,t=function ai(r){const i=r.options.offset,e=r._tickSize();return Math.floor(Math.min(r._length/e+(i?0:1),r._maxLength/e))}(r),s=Math.min(e.maxTicksLimit||t,t),n=e.major.enabled?function mi(r){const i=[];let e,t;for(e=0,t=r.length;e<t;e++)r[e].major&&i.push(e);return i}(i):[],o=n.length,h=n[0],_=n[o-1],S=[];if(o>s)return function Li(r,i,e,t){let o,s=0,n=e[0];for(t=Math.ceil(t),o=0;o<r.length;o++)o===n&&(i.push(r[o]),s++,n=e[s*t])}(i,S,n,o/s),S;const O=function ti(r,i,e){const t=function ui(r){const i=r.length;let e,t;if(i<2)return!1;for(t=r[0],e=1;e<i;++e)if(r[e]-r[e-1]!==t)return!1;return t}(r),s=i.length/e;if(!t)return Math.max(s,1);const n=(0,u.N)(t);for(let o=0,h=n.length-1;o<h;o++){const _=n[o];if(_>s)return _}return Math.max(s,1)}(n,i,s);if(o>0){let B,V;const Z=o>1?Math.round((_-h)/(o-1)):null;for(Xt(i,S,O,(0,u.k)(Z)?0:h-Z,h),B=0,V=o-1;B<V;B++)Xt(i,S,O,n[B],n[B+1]);return Xt(i,S,O,_,(0,u.k)(Z)?i.length:_+Z),S}return Xt(i,S,O),S}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),_&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,i=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,i=!i),this._startPixel=e,this._endPixel=t,this._reversePixels=i,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){(0,u.Q)(this.options.afterUpdate,[this])}beforeSetDimensions(){(0,u.Q)(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){(0,u.Q)(this.options.afterSetDimensions,[this])}_callHooks(i){this.chart.notifyPlugins(i,this.getContext()),(0,u.Q)(this.options[i],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){(0,u.Q)(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(i){const e=this.options.ticks;let t,s,n;for(t=0,s=i.length;t<s;t++)n=i[t],n.label=(0,u.Q)(e.callback,[n.value,t,i],this)}afterTickToLabelConversion(){(0,u.Q)(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){(0,u.Q)(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const i=this.options,e=i.ticks,t=ji(this.ticks.length,i.ticks.maxTicksLimit),s=e.minRotation||0,n=e.maxRotation;let h,_,S,o=s;if(!this._isVisible()||!e.display||s>=n||t<=1||!this.isHorizontal())return void(this.labelRotation=s);const O=this._getLabelSizes(),B=O.widest.width,V=O.highest.height,Z=(0,u.S)(this.chart.width-B,0,this.maxWidth);h=i.offset?this.maxWidth/t:Z/(t-1),B+6>h&&(h=Z/(t-(i.offset?.5:1)),_=this.maxHeight-vi(i.grid)-e.padding-Vi(i.title,this.chart.options.font),S=Math.sqrt(B*B+V*V),o=(0,u.U)(Math.min(Math.asin((0,u.S)((O.highest.height+6)/h,-1,1)),Math.asin((0,u.S)(_/S,-1,1))-Math.asin((0,u.S)(V/S,-1,1)))),o=Math.max(s,Math.min(n,o))),this.labelRotation=o}afterCalculateLabelRotation(){(0,u.Q)(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){(0,u.Q)(this.options.beforeFit,[this])}fit(){const i={width:0,height:0},{chart:e,options:{ticks:t,title:s,grid:n}}=this,o=this._isVisible(),h=this.isHorizontal();if(o){const _=Vi(s,e.options.font);if(h?(i.width=this.maxWidth,i.height=vi(n)+_):(i.height=this.maxHeight,i.width=vi(n)+_),t.display&&this.ticks.length){const{first:S,last:O,widest:B,highest:V}=this._getLabelSizes(),Z=2*t.padding,oe=(0,u.t)(this.labelRotation),ce=Math.cos(oe),_e=Math.sin(oe);h?i.height=Math.min(this.maxHeight,i.height+(t.mirror?0:_e*B.width+ce*V.height)+Z):i.width=Math.min(this.maxWidth,i.width+(t.mirror?0:ce*B.width+_e*V.height)+Z),this._calculatePadding(S,O,_e,ce)}}this._handleMargins(),h?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=i.height):(this.width=i.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(i,e,t,s){const{ticks:{align:n,padding:o},position:h}=this.options,_=0!==this.labelRotation,S="top"!==h&&"x"===this.axis;if(this.isHorizontal()){const O=this.getPixelForTick(0)-this.left,B=this.right-this.getPixelForTick(this.ticks.length-1);let V=0,Z=0;_?S?(V=s*i.width,Z=t*e.height):(V=t*i.height,Z=s*e.width):"start"===n?Z=e.width:"end"===n?V=i.width:"inner"!==n&&(V=i.width/2,Z=e.width/2),this.paddingLeft=Math.max((V-O+o)*this.width/(this.width-O),0),this.paddingRight=Math.max((Z-B+o)*this.width/(this.width-B),0)}else{let O=e.height/2,B=i.height/2;"start"===n?(O=0,B=i.height):"end"===n&&(O=e.height,B=0),this.paddingTop=O+o,this.paddingBottom=B+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){(0,u.Q)(this.options.afterFit,[this])}isHorizontal(){const{axis:i,position:e}=this.options;return"top"===e||"bottom"===e||"x"===i}isFullSize(){return this.options.fullSize}_convertTicksToLabels(i){let e,t;for(this.beforeTickToLabelConversion(),this.generateTickLabels(i),e=0,t=i.length;e<t;e++)(0,u.k)(i[e].label)&&(i.splice(e,1),t--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let i=this._labelSizes;if(!i){const e=this.options.ticks.sampleSize;let t=this.ticks;e<t.length&&(t=Gt(t,e)),this._labelSizes=i=this._computeLabelSizes(t,t.length,this.options.ticks.maxTicksLimit)}return i}_computeLabelSizes(i,e,t){const{ctx:s,_longestTextCache:n}=this,o=[],h=[],_=Math.floor(e/ji(e,t));let B,V,Z,oe,ce,_e,we,be,Be,Ne,Oe,S=0,O=0;for(B=0;B<e;B+=_){if(oe=i[B].label,ce=this._resolveTickFontOptions(B),s.font=_e=ce.string,we=n[_e]=n[_e]||{data:{},gc:[]},be=ce.lineHeight,Be=Ne=0,(0,u.k)(oe)||(0,u.b)(oe)){if((0,u.b)(oe))for(V=0,Z=oe.length;V<Z;++V)Oe=oe[V],!(0,u.k)(Oe)&&!(0,u.b)(Oe)&&(Be=(0,u.V)(s,we.data,we.gc,Be,Oe),Ne+=be)}else Be=(0,u.V)(s,we.data,we.gc,Be,oe),Ne=be;o.push(Be),h.push(Ne),S=Math.max(Be,S),O=Math.max(Ne,O)}!function Ri(r,i){(0,u.F)(r,e=>{const t=e.gc,s=t.length/2;let n;if(s>i){for(n=0;n<s;++n)delete e.data[t[n]];t.splice(0,s)}})}(n,e);const Fe=o.indexOf(S),Ye=h.indexOf(O),je=et=>({width:o[et]||0,height:h[et]||0});return{first:je(0),last:je(e-1),widest:je(Fe),highest:je(Ye),widths:o,heights:h}}getLabelForValue(i){return i}getPixelForValue(i,e){return NaN}getValueForPixel(i){}getPixelForTick(i){const e=this.ticks;return i<0||i>e.length-1?null:this.getPixelForValue(e[i].value)}getPixelForDecimal(i){this._reversePixels&&(i=1-i);const e=this._startPixel+i*this._length;return(0,u.W)(this._alignToPixels?(0,u.X)(this.chart,e,0):e)}getDecimalForPixel(i){const e=(i-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:i,max:e}=this;return i<0&&e<0?e:i>0&&e>0?i:0}getContext(i){const e=this.ticks||[];if(i>=0&&i<e.length){const t=e[i];return t.$context||(t.$context=function ii(r,i,e){return(0,u.j)(r,{tick:e,index:i,type:"tick"})}(this.getContext(),i,t))}return this.$context||(this.$context=function Ii(r,i){return(0,u.j)(r,{scale:i,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const i=this.options.ticks,e=(0,u.t)(this.labelRotation),t=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),n=this._getLabelSizes(),o=i.autoSkipPadding||0,h=n?n.widest.width+o:0,_=n?n.highest.height+o:0;return this.isHorizontal()?_*t>h*s?h/t:_/s:_*s<h*t?_/t:h/s}_isVisible(){const i=this.options.display;return"auto"!==i?!!i:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(i){const e=this.axis,t=this.chart,s=this.options,{grid:n,position:o,border:h}=s,_=n.offset,S=this.isHorizontal(),B=this.ticks.length+(_?1:0),V=vi(n),Z=[],oe=h.setContext(this.getContext()),ce=oe.display?oe.width:0,_e=ce/2,we=function(Bt){return(0,u.X)(t,Bt,ce)};let be,Be,Ne,Oe,Fe,Ye,je,et,ft,ut,vt,ni;if("top"===o)be=we(this.bottom),Ye=this.bottom-V,et=be-_e,ut=we(i.top)+_e,ni=i.bottom;else if("bottom"===o)be=we(this.top),ut=i.top,ni=we(i.bottom)-_e,Ye=be+_e,et=this.top+V;else if("left"===o)be=we(this.right),Fe=this.right-V,je=be-_e,ft=we(i.left)+_e,vt=i.right;else if("right"===o)be=we(this.left),ft=i.left,vt=we(i.right)-_e,Fe=be+_e,je=this.left+V;else if("x"===e){if("center"===o)be=we((i.top+i.bottom)/2+.5);else if((0,u.i)(o)){const Bt=Object.keys(o)[0];be=we(this.chart.scales[Bt].getPixelForValue(o[Bt]))}ut=i.top,ni=i.bottom,Ye=be+_e,et=Ye+V}else if("y"===e){if("center"===o)be=we((i.left+i.right)/2);else if((0,u.i)(o)){const Bt=Object.keys(o)[0];be=we(this.chart.scales[Bt].getPixelForValue(o[Bt]))}Fe=be-_e,je=Fe-V,ft=i.left,vt=i.right}const Oi=(0,u.v)(s.ticks.maxTicksLimit,B),Dt=Math.max(1,Math.ceil(B/Oi));for(Be=0;Be<B;Be+=Dt){const Bt=this.getContext(Be),Kt=n.setContext(Bt),Qi=h.setContext(Bt),ci=Kt.lineWidth,Ar=Kt.color,Dn=Qi.dash||[],Pr=Qi.dashOffset,fn=Kt.tickWidth,Zs=Kt.tickColor,_n=Kt.tickBorderDash||[],Xs=Kt.tickBorderDashOffset;Ne=fi(this,Be,_),void 0!==Ne&&(Oe=(0,u.X)(t,Ne,ci),S?Fe=je=ft=vt=Oe:Ye=et=ut=ni=Oe,Z.push({tx1:Fe,ty1:Ye,tx2:je,ty2:et,x1:ft,y1:ut,x2:vt,y2:ni,width:ci,color:Ar,borderDash:Dn,borderDashOffset:Pr,tickWidth:fn,tickColor:Zs,tickBorderDash:_n,tickBorderDashOffset:Xs}))}return this._ticksLength=B,this._borderValue=be,Z}_computeLabelItems(i){const e=this.axis,t=this.options,{position:s,ticks:n}=t,o=this.isHorizontal(),h=this.ticks,{align:_,crossAlign:S,padding:O,mirror:B}=n,V=vi(t.grid),Z=V+O,oe=B?-O:Z,ce=-(0,u.t)(this.labelRotation),_e=[];let we,be,Be,Ne,Oe,Fe,Ye,je,et,ft,ut,vt,ni="middle";if("top"===s)Fe=this.bottom-oe,Ye=this._getXAxisLabelAlignment();else if("bottom"===s)Fe=this.top+oe,Ye=this._getXAxisLabelAlignment();else if("left"===s){const Dt=this._getYAxisLabelAlignment(V);Ye=Dt.textAlign,Oe=Dt.x}else if("right"===s){const Dt=this._getYAxisLabelAlignment(V);Ye=Dt.textAlign,Oe=Dt.x}else if("x"===e){if("center"===s)Fe=(i.top+i.bottom)/2+Z;else if((0,u.i)(s)){const Dt=Object.keys(s)[0];Fe=this.chart.scales[Dt].getPixelForValue(s[Dt])+Z}Ye=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===s)Oe=(i.left+i.right)/2-Z;else if((0,u.i)(s)){const Dt=Object.keys(s)[0];Oe=this.chart.scales[Dt].getPixelForValue(s[Dt])}Ye=this._getYAxisLabelAlignment(V).textAlign}"y"===e&&("start"===_?ni="top":"end"===_&&(ni="bottom"));const Oi=this._getLabelSizes();for(we=0,be=h.length;we<be;++we){Be=h[we],Ne=Be.label;const Dt=n.setContext(this.getContext(we));je=this.getPixelForTick(we)+n.labelOffset,et=this._resolveTickFontOptions(we),ft=et.lineHeight,ut=(0,u.b)(Ne)?Ne.length:1;const Bt=ut/2,Kt=Dt.color,Qi=Dt.textStrokeColor,ci=Dt.textStrokeWidth;let Dn,Ar=Ye;if(o?(Oe=je,"inner"===Ye&&(Ar=we===be-1?this.options.reverse?"left":"right":0===we?this.options.reverse?"right":"left":"center"),vt="top"===s?"near"===S||0!==ce?-ut*ft+ft/2:"center"===S?-Oi.highest.height/2-Bt*ft+ft:ft/2-Oi.highest.height:"near"===S||0!==ce?ft/2:"center"===S?Oi.highest.height/2-Bt*ft:Oi.highest.height-ut*ft,B&&(vt*=-1),0!==ce&&!Dt.showLabelBackdrop&&(Oe+=ft/2*Math.sin(ce))):(Fe=je,vt=(1-ut)*ft/2),Dt.showLabelBackdrop){const Pr=(0,u.E)(Dt.backdropPadding),fn=Oi.heights[we],Zs=Oi.widths[we];let _n=vt-Pr.top,Xs=0-Pr.left;switch(ni){case"middle":_n-=fn/2;break;case"bottom":_n-=fn}switch(Ye){case"center":Xs-=Zs/2;break;case"right":Xs-=Zs;break;case"inner":we===be-1?Xs-=Zs:we>0&&(Xs-=Zs/2)}Dn={left:Xs,top:_n,width:Zs+Pr.width,height:fn+Pr.height,color:Dt.backdropColor}}_e.push({label:Ne,font:et,textOffset:vt,options:{rotation:ce,color:Kt,strokeColor:Qi,strokeWidth:ci,textAlign:Ar,textBaseline:ni,translation:[Oe,Fe],backdrop:Dn}})}return _e}_getXAxisLabelAlignment(){const{position:i,ticks:e}=this.options;if(-(0,u.t)(this.labelRotation))return"top"===i?"left":"right";let s="center";return"start"===e.align?s="left":"end"===e.align?s="right":"inner"===e.align&&(s="inner"),s}_getYAxisLabelAlignment(i){const{position:e,ticks:{crossAlign:t,mirror:s,padding:n}}=this.options,h=i+n,_=this._getLabelSizes().widest.width;let S,O;return"left"===e?s?(O=this.right+n,"near"===t?S="left":"center"===t?(S="center",O+=_/2):(S="right",O+=_)):(O=this.right-h,"near"===t?S="right":"center"===t?(S="center",O-=_/2):(S="left",O=this.left)):"right"===e?s?(O=this.left+n,"near"===t?S="right":"center"===t?(S="center",O-=_/2):(S="left",O-=_)):(O=this.left+h,"near"===t?S="left":"center"===t?(S="center",O+=_/2):(S="right",O=this.right)):S="right",{textAlign:S,x:O}}_computeLabelArea(){if(this.options.ticks.mirror)return;const i=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:i.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:i.width}:void 0}drawBackground(){const{ctx:i,options:{backgroundColor:e},left:t,top:s,width:n,height:o}=this;e&&(i.save(),i.fillStyle=e,i.fillRect(t,s,n,o),i.restore())}getLineWidthForValue(i){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(n=>n.value===i);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(i){const e=this.options.grid,t=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(i));let n,o;const h=(_,S,O)=>{!O.width||!O.color||(t.save(),t.lineWidth=O.width,t.strokeStyle=O.color,t.setLineDash(O.borderDash||[]),t.lineDashOffset=O.borderDashOffset,t.beginPath(),t.moveTo(_.x,_.y),t.lineTo(S.x,S.y),t.stroke(),t.restore())};if(e.display)for(n=0,o=s.length;n<o;++n){const _=s[n];e.drawOnChartArea&&h({x:_.x1,y:_.y1},{x:_.x2,y:_.y2},_),e.drawTicks&&h({x:_.tx1,y:_.ty1},{x:_.tx2,y:_.ty2},{color:_.tickColor,width:_.tickWidth,borderDash:_.tickBorderDash,borderDashOffset:_.tickBorderDashOffset})}}drawBorder(){const{chart:i,ctx:e,options:{border:t,grid:s}}=this,n=t.setContext(this.getContext()),o=t.display?n.width:0;if(!o)return;const h=s.setContext(this.getContext(0)).lineWidth,_=this._borderValue;let S,O,B,V;this.isHorizontal()?(S=(0,u.X)(i,this.left,o)-o/2,O=(0,u.X)(i,this.right,h)+h/2,B=V=_):(B=(0,u.X)(i,this.top,o)-o/2,V=(0,u.X)(i,this.bottom,h)+h/2,S=O=_),e.save(),e.lineWidth=n.width,e.strokeStyle=n.color,e.beginPath(),e.moveTo(S,B),e.lineTo(O,V),e.stroke(),e.restore()}drawLabels(i){if(!this.options.ticks.display)return;const t=this.ctx,s=this._computeLabelArea();s&&(0,u.Y)(t,s);const n=this.getLabelItems(i);for(const o of n)(0,u.Z)(t,o.label,0,o.textOffset,o.font,o.options);s&&(0,u.$)(t)}drawTitle(){const{ctx:i,options:{position:e,title:t,reverse:s}}=this;if(!t.display)return;const n=(0,u.a0)(t.font),o=(0,u.E)(t.padding),h=t.align;let _=n.lineHeight/2;"bottom"===e||"center"===e||(0,u.i)(e)?(_+=o.bottom,(0,u.b)(t.text)&&(_+=n.lineHeight*(t.text.length-1))):_+=o.top;const{titleX:S,titleY:O,maxWidth:B,rotation:V}=function ds(r,i,e,t){const{top:s,left:n,bottom:o,right:h,chart:_}=r,{chartArea:S,scales:O}=_;let V,Z,oe,B=0;const ce=o-s,_e=h-n;if(r.isHorizontal()){if(Z=(0,u.a2)(t,n,h),(0,u.i)(e)){const we=Object.keys(e)[0];oe=O[we].getPixelForValue(e[we])+ce-i}else oe="center"===e?(S.bottom+S.top)/2+ce-i:hs(r,e,i);V=h-n}else{if((0,u.i)(e)){const we=Object.keys(e)[0];Z=O[we].getPixelForValue(e[we])-_e+i}else Z="center"===e?(S.left+S.right)/2-_e+i:hs(r,e,i);oe=(0,u.a2)(t,o,s),B="left"===e?-u.H:u.H}return{titleX:Z,titleY:oe,maxWidth:V,rotation:B}}(this,_,e,h);(0,u.Z)(i,t.text,0,0,n,{color:t.color,maxWidth:B,rotation:V,textAlign:Ti(h,e,s),textBaseline:"middle",translation:[S,O]})}draw(i){this._isVisible()&&(this.drawBackground(),this.drawGrid(i),this.drawBorder(),this.drawTitle(),this.drawLabels(i))}_layers(){const i=this.options,e=i.ticks&&i.ticks.z||0,t=(0,u.v)(i.grid&&i.grid.z,-1),s=(0,u.v)(i.border&&i.border.z,0);return this._isVisible()&&this.draw===si.prototype.draw?[{z:t,draw:n=>{this.drawBackground(),this.drawGrid(n),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:n=>{this.drawLabels(n)}}]:[{z:e,draw:n=>{this.draw(n)}}]}getMatchingVisibleMetas(i){const e=this.chart.getSortedVisibleDatasetMetas(),t=this.axis+"AxisID",s=[];let n,o;for(n=0,o=e.length;n<o;++n){const h=e[n];h[t]===this.id&&(!i||h.type===i)&&s.push(h)}return s}_resolveTickFontOptions(i){const e=this.options.ticks.setContext(this.getContext(i));return(0,u.a0)(e.font)}_maxDigits(){const i=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/i}}class Bi{constructor(i,e,t){this.type=i,this.scope=e,this.override=t,this.items=Object.create(null)}isForType(i){return Object.prototype.isPrototypeOf.call(this.type.prototype,i.prototype)}register(i){const e=Object.getPrototypeOf(i);let t;(function ss(r){return"id"in r&&"defaults"in r})(e)&&(t=this.register(e));const s=this.items,n=i.id,o=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+i);return n in s||(s[n]=i,function is(r,i,e){const t=(0,u.a4)(Object.create(null),[e?u.d.get(e):{},u.d.get(i),r.defaults]);u.d.set(i,t),r.defaultRoutes&&function Ls(r,i){Object.keys(i).forEach(e=>{const t=e.split("."),s=t.pop(),n=[r].concat(t).join("."),o=i[e].split("."),h=o.pop(),_=o.join(".");u.d.route(n,s,_,h)})}(i,r.defaultRoutes),r.descriptors&&u.d.describe(i,r.descriptors)}(i,o,t),this.override&&u.d.override(i.id,i.overrides)),o}get(i){return this.items[i]}unregister(i){const e=this.items,t=i.id,s=this.scope;t in e&&delete e[t],s&&t in u.d[s]&&(delete u.d[s][t],this.override&&delete u.a3[t])}}class F{constructor(){this.controllers=new Bi(Ce,"datasets",!0),this.elements=new Bi(xt,"elements"),this.plugins=new Bi(Object,"plugins"),this.scales=new Bi(si,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...i){this._each("register",i)}remove(...i){this._each("unregister",i)}addControllers(...i){this._each("register",i,this.controllers)}addElements(...i){this._each("register",i,this.elements)}addPlugins(...i){this._each("register",i,this.plugins)}addScales(...i){this._each("register",i,this.scales)}getController(i){return this._get(i,this.controllers,"controller")}getElement(i){return this._get(i,this.elements,"element")}getPlugin(i){return this._get(i,this.plugins,"plugin")}getScale(i){return this._get(i,this.scales,"scale")}removeControllers(...i){this._each("unregister",i,this.controllers)}removeElements(...i){this._each("unregister",i,this.elements)}removePlugins(...i){this._each("unregister",i,this.plugins)}removeScales(...i){this._each("unregister",i,this.scales)}_each(i,e,t){[...e].forEach(s=>{const n=t||this._getRegistryForType(s);t||n.isForType(s)||n===this.plugins&&s.id?this._exec(i,n,s):(0,u.F)(s,o=>{const h=t||this._getRegistryForType(o);this._exec(i,h,o)})})}_exec(i,e,t){const s=(0,u.a5)(i);(0,u.Q)(t["before"+s],[],t),e[i](t),(0,u.Q)(t["after"+s],[],t)}_getRegistryForType(i){for(let e=0;e<this._typedRegistries.length;e++){const t=this._typedRegistries[e];if(t.isForType(i))return t}return this.plugins}_get(i,e,t){const s=e.get(i);if(void 0===s)throw new Error('"'+i+'" is not a registered '+t+".");return s}}var j=new F;class te{constructor(){this._init=[]}notify(i,e,t,s){"beforeInit"===e&&(this._init=this._createDescriptors(i,!0),this._notify(this._init,i,"install"));const n=s?this._descriptors(i).filter(s):this._descriptors(i),o=this._notify(n,i,e,t);return"afterDestroy"===e&&(this._notify(n,i,"stop"),this._notify(this._init,i,"uninstall")),o}_notify(i,e,t,s){s=s||{};for(const n of i){const o=n.plugin;if(!1===(0,u.Q)(o[t],[e,s,n.options],o)&&s.cancelable)return!1}return!0}invalidate(){(0,u.k)(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(i){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(i);return this._notifyStateChanges(i),e}_createDescriptors(i,e){const t=i&&i.config,s=(0,u.v)(t.options&&t.options.plugins,{}),n=function fe(r){const i={},e=[],t=Object.keys(j.plugins.items);for(let n=0;n<t.length;n++)e.push(j.getPlugin(t[n]));const s=r.plugins||[];for(let n=0;n<s.length;n++){const o=s[n];-1===e.indexOf(o)&&(e.push(o),i[o.id]=!0)}return{plugins:e,localIds:i}}(t);return!1!==s||e?function Ve(r,{plugins:i,localIds:e},t,s){const n=[],o=r.getContext();for(const h of i){const _=h.id,S=Pe(t[_],s);null!==S&&n.push({plugin:h,options:ht(r.config,{plugin:h,local:e[_]},S,o)})}return n}(i,n,s,e):[]}_notifyStateChanges(i){const e=this._oldCache||[],t=this._cache,s=(n,o)=>n.filter(h=>!o.some(_=>h.plugin.id===_.plugin.id));this._notify(s(e,t),i,"stop"),this._notify(s(t,e),i,"start")}}function Pe(r,i){return i||!1!==r?!0===r?{}:r:null}function ht(r,{plugin:i,local:e},t,s){const n=r.pluginScopeKeys(i),o=r.getOptionScopes(t,n);return e&&i.defaults&&o.push(i.defaults),r.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Tt(r,i){return((i.datasets||{})[r]||{}).indexAxis||i.indexAxis||(u.d.datasets[r]||{}).indexAxis||"x"}function ri(r){if("x"===r||"y"===r||"r"===r)return r}function Gs(r){return"top"===r||"bottom"===r?"x":"left"===r||"right"===r?"y":void 0}function xs(r,...i){if(ri(r))return r;for(const e of i){const t=e.axis||Gs(e.position)||r.length>1&&ri(r[0].toLowerCase());if(t)return t}throw new Error(`Cannot determine type of '${r}' axis. Please provide 'axis' or 'position' option.`)}function Es(r,i,e){if(e[i+"AxisID"]===r)return{axis:i}}function qs(r){const i=r.options||(r.options={});i.plugins=(0,u.v)(i.plugins,{}),i.scales=function Rr(r,i){const e=u.a3[r.type]||{scales:{}},t=i.scales||{},s=Tt(r.type,i),n=Object.create(null);return Object.keys(t).forEach(o=>{const h=t[o];if(!(0,u.i)(h))return console.error(`Invalid scale configuration for scale: ${o}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const _=xs(o,h,function Lr(r,i){if(i.data&&i.data.datasets){const e=i.data.datasets.filter(t=>t.xAxisID===r||t.yAxisID===r);if(e.length)return Es(r,"x",e[0])||Es(r,"y",e[0])}return{}}(o,r),u.d.scales[h.type]),S=function Nt(r,i){return r===i?"_index_":"_value_"}(_,s),O=e.scales||{};n[o]=(0,u.ab)(Object.create(null),[{axis:_},h,O[_],O[S]])}),r.data.datasets.forEach(o=>{const h=o.type||r.type,_=o.indexAxis||Tt(h,i),O=(u.a3[h]||{}).scales||{};Object.keys(O).forEach(B=>{const V=function Mt(r,i){let e=r;return"_index_"===r?e=i:"_value_"===r&&(e="x"===i?"y":"x"),e}(B,_),Z=o[V+"AxisID"]||V;n[Z]=n[Z]||Object.create(null),(0,u.ab)(n[Z],[{axis:V},t[Z],O[B]])})}),Object.keys(n).forEach(o=>{const h=n[o];(0,u.ab)(h,[u.d.scales[h.type],u.d.scale])}),n}(r,i)}function Qs(r){return(r=r||{}).datasets=r.datasets||[],r.labels=r.labels||[],r}const us=new Map,er=new Set;function ws(r,i){let e=us.get(r);return e||(e=i(),us.set(r,e),er.add(e)),e}const fs=(r,i,e)=>{const t=(0,u.f)(i,e);void 0!==t&&r.add(t)};class pn{constructor(i){this._config=function Js(r){return(r=r||{}).data=Qs(r.data),qs(r),r}(i),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(i){this._config.type=i}get data(){return this._config.data}set data(i){this._config.data=Qs(i)}get options(){return this._config.options}set options(i){this._config.options=i}get plugins(){return this._config.plugins}update(){const i=this._config;this.clearCache(),qs(i)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(i){return ws(i,()=>[[`datasets.${i}`,""]])}datasetAnimationScopeKeys(i,e){return ws(`${i}.transition.${e}`,()=>[[`datasets.${i}.transitions.${e}`,`transitions.${e}`],[`datasets.${i}`,""]])}datasetElementScopeKeys(i,e){return ws(`${i}-${e}`,()=>[[`datasets.${i}.elements.${e}`,`datasets.${i}`,`elements.${e}`,""]])}pluginScopeKeys(i){const e=i.id;return ws(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...i.additionalOptionScopes||[]]])}_cachedScopes(i,e){const t=this._scopeCache;let s=t.get(i);return(!s||e)&&(s=new Map,t.set(i,s)),s}getOptionScopes(i,e,t){const{options:s,type:n}=this,o=this._cachedScopes(i,t),h=o.get(e);if(h)return h;const _=new Set;e.forEach(O=>{i&&(_.add(i),O.forEach(B=>fs(_,i,B))),O.forEach(B=>fs(_,s,B)),O.forEach(B=>fs(_,u.a3[n]||{},B)),O.forEach(B=>fs(_,u.d,B)),O.forEach(B=>fs(_,u.a6,B))});const S=Array.from(_);return 0===S.length&&S.push(Object.create(null)),er.has(e)&&o.set(e,S),S}chartOptionScopes(){const{options:i,type:e}=this;return[i,u.a3[e]||{},u.d.datasets[e]||{},{type:e},u.d,u.a6]}resolveNamedOptions(i,e,t,s=[""]){const n={$shared:!0},{resolver:o,subPrefixes:h}=tr(this._resolverCache,i,s);let _=o;if(function Ir(r,i){const{isScriptable:e,isIndexable:t}=(0,u.aa)(r);for(const s of i){const n=e(s),o=t(s),h=(o||n)&&r[s];if(n&&((0,u.a7)(h)||ir(h))||o&&(0,u.b)(h))return!0}return!1}(o,e)){n.$shared=!1,t=(0,u.a7)(t)?t():t;const S=this.createResolver(i,t,h);_=(0,u.a8)(o,t,S)}for(const S of e)n[S]=_[S];return n}createResolver(i,e,t=[""],s){const{resolver:n}=tr(this._resolverCache,i,t);return(0,u.i)(e)?(0,u.a8)(n,e,void 0,s):n}}function tr(r,i,e){let t=r.get(i);t||(t=new Map,r.set(i,t));const s=e.join();let n=t.get(s);return n||(n={resolver:(0,u.a9)(i,e),subPrefixes:e.filter(h=>!h.toLowerCase().includes("hover"))},t.set(s,n)),n}const ir=r=>(0,u.i)(r)&&Object.getOwnPropertyNames(r).some(i=>(0,u.a7)(r[i])),sr=["top","bottom","left","right","chartArea"];function rr(r,i){return"top"===r||"bottom"===r||-1===sr.indexOf(r)&&"x"===i}function nr(r,i){return function(e,t){return e[r]===t[r]?e[i]-t[i]:e[r]-t[r]}}function or(r){const i=r.chart,e=i.options.animation;i.notifyPlugins("afterRender"),(0,u.Q)(e&&e.onComplete,[r],i)}function _s(r){const i=r.chart,e=i.options.animation;(0,u.Q)(e&&e.onProgress,[r],i)}function Ts(r){return(0,u.M)()&&"string"==typeof r?r=document.getElementById(r):r&&r.length&&(r=r[0]),r&&r.canvas&&(r=r.canvas),r}const ps={},Rs=r=>{const i=Ts(r);return Object.values(ps).filter(e=>e.canvas===i).pop()};function ar(r,i,e){const t=Object.keys(r);for(const s of t){const n=+s;if(n>=i){const o=r[s];delete r[s],(e>0||n>i)&&(r[n+e]=o)}}}function Ms(r,i,e){return r.options.clip?r[e]:i[e]}let gs=(()=>{class r{static register(...e){j.add(...e),Ds()}static unregister(...e){j.remove(...e),Ds()}constructor(e,t){const s=this.config=new pn(t),n=Ts(e),o=Rs(n);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const h=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||function Et(r){return!(0,u.M)()||typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas?Ui:Pt}(n)),this.platform.updateConfig(s);const _=this.platform.acquireContext(n,h.aspectRatio),S=_&&_.canvas,O=S&&S.height,B=S&&S.width;this.id=(0,u.ac)(),this.ctx=_,this.canvas=S,this.width=B,this.height=O,this._options=h,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new te,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=(0,u.ad)(V=>this.update(V),h.resizeDelay||0),this._dataChanges=[],ps[this.id]=this,_&&S?(g.listen(this,"complete",or),g.listen(this,"progress",_s),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:n,_aspectRatio:o}=this;return(0,u.k)(e)?t&&o?o:n?s/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return j}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():(0,u.ae)(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return(0,u.af)(this.canvas,this.ctx),this}stop(){return g.stop(this),this}resize(e,t){g.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,h=this.platform.getMaximumSize(this.canvas,e,t,s.maintainAspectRatio&&this.aspectRatio),_=s.devicePixelRatio||this.platform.getDevicePixelRatio(),S=this.width?"resize":"attach";this.width=h.width,this.height=h.height,this._aspectRatio=this.aspectRatio,(0,u.ae)(this,_,!0)&&(this.notifyPlugins("resize",{size:h}),(0,u.Q)(s.onResize,[this,h],this),this.attached&&this._doResize(S)&&this.render())}ensureScalesHaveIDs(){(0,u.F)(this.options.scales||{},(s,n)=>{s.id=n})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,n=Object.keys(s).reduce((h,_)=>(h[_]=!1,h),{});let o=[];t&&(o=o.concat(Object.keys(t).map(h=>{const _=t[h],S=xs(h,_),O="r"===S,B="x"===S;return{options:_,dposition:O?"chartArea":B?"bottom":"left",dtype:O?"radialLinear":B?"category":"linear"}}))),(0,u.F)(o,h=>{const _=h.options,S=_.id,O=xs(S,_),B=(0,u.v)(_.type,h.dtype);(void 0===_.position||rr(_.position,O)!==rr(h.dposition))&&(_.position=h.dposition),n[S]=!0;let V=null;S in s&&s[S].type===B?V=s[S]:(V=new(j.getScale(B))({id:S,type:B,ctx:this.ctx,chart:this}),s[V.id]=V),V.init(_,e)}),(0,u.F)(n,(h,_)=>{h||delete s[_]}),(0,u.F)(s,h=>{At.configure(this,h,h.options),At.addBox(this,h)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((n,o)=>n.index-o.index),s>t){for(let n=t;n<s;++n)this._destroyDatasetMeta(n);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(nr("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((s,n)=>{0===t.filter(o=>o===s._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=t.length;s<n;s++){const o=t[s];let h=this.getDatasetMeta(s);const _=o.type||this.config.type;if(h.type&&h.type!==_&&(this._destroyDatasetMeta(s),h=this.getDatasetMeta(s)),h.type=_,h.indexAxis=o.indexAxis||Tt(_,this.options),h.order=o.order||0,h.index=s,h.label=""+o.label,h.visible=this.isDatasetVisible(s),h.controller)h.controller.updateIndex(s),h.controller.linkScales();else{const S=j.getController(_),{datasetElementType:O,dataElementType:B}=u.d.datasets[_];Object.assign(S,{dataElementType:j.getElement(B),datasetElementType:O&&j.getElement(O)}),h.controller=new S(this,s),e.push(h.controller)}}return this._updateMetasets(),e}_resetElements(){(0,u.F)(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let h=0;for(let O=0,B=this.data.datasets.length;O<B;O++){const{controller:V}=this.getDatasetMeta(O),Z=!n&&-1===o.indexOf(V);V.buildOrUpdateElements(Z),h=Math.max(+V.getMaxOverflow(),h)}h=this._minPadding=s.layout.autoPadding?h:0,this._updateLayout(h),n||(0,u.F)(o,O=>{O.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(nr("z","_idx"));const{_active:_,_lastEvent:S}=this;S?this._eventHandler(S,!0):_.length&&this._updateHoverStyles(_,_,!0),this.render()}_updateScales(){(0,u.F)(this.scales,e=>{At.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!(0,u.ag)(t,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:o}of t)ar(e,n,"_removeElements"===s?-o:o)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=o=>new Set(e.filter(h=>h[0]===o).map((h,_)=>_+","+h.splice(1).join(","))),n=s(0);for(let o=1;o<t;o++)if(!(0,u.ag)(n,s(o)))return;return Array.from(n).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;At.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],(0,u.F)(this.boxes,n=>{s&&"chartArea"===n.position||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,o)=>{n._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let t=0,s=this.data.datasets.length;t<s;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,(0,u.a7)(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),n={meta:s,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(s.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(g.has(this)?this.attached&&!g.running(this)&&g.start(this):(this.draw(),or({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:n}=this._resizeBeforeDraw;this._resize(s,n),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let n,o;for(n=0,o=t.length;n<o;++n){const h=t[n];(!e||h.visible)&&s.push(h)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s=e._clip,n=!s.disabled,o=function Hr(r,i){const{xScale:e,yScale:t}=r;return e&&t?{left:Ms(e,i,"left"),right:Ms(e,i,"right"),top:Ms(t,i,"top"),bottom:Ms(t,i,"bottom")}:i}(e,this.chartArea),h={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",h)&&(n&&(0,u.Y)(t,{left:!1===s.left?0:o.left-s.left,right:!1===s.right?this.width:o.right+s.right,top:!1===s.top?0:o.top-s.top,bottom:!1===s.bottom?this.height:o.bottom+s.bottom}),e.controller.draw(),n&&(0,u.$)(t),h.cancelable=!1,this.notifyPlugins("afterDatasetDraw",h))}isPointInArea(e){return(0,u.C)(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,n){const o=as.modes[t];return"function"==typeof o?o(this,e,s,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let n=s.filter(o=>o&&o._dataset===t).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=(0,u.j)(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return"boolean"==typeof s.hidden?!s.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const n=s?"show":"hide",o=this.getDatasetMeta(e),h=o.controller._resolveAnimations(void 0,n);(0,u.h)(t)?(o.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),h.update(o,{visible:s}),this.update(_=>_.datasetIndex===e?n:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),g.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),(0,u.af)(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete ps[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(o,h)=>{t.addEventListener(this,o,h),e[o]=h},n=(o,h,_)=>{o.offsetX=h,o.offsetY=_,this._eventHandler(o)};(0,u.F)(this.options.events,o=>s(o,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(S,O)=>{t.addEventListener(this,S,O),e[S]=O},n=(S,O)=>{e[S]&&(t.removeEventListener(this,S,O),delete e[S])},o=(S,O)=>{this.canvas&&this.resize(S,O)};let h;const _=()=>{n("attach",_),this.attached=!0,this.resize(),s("resize",o),s("detach",h)};h=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),s("attach",_)},t.isAttached(this.canvas)?_():h()}unbindEvents(){(0,u.F)(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},(0,u.F)(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const n=s?"set":"remove";let o,h,_,S;for("dataset"===t&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),_=0,S=e.length;_<S;++_){h=e[_];const O=h&&this.getDatasetMeta(h.datasetIndex).controller;O&&O[n+"HoverStyle"](h.element,h.datasetIndex,h.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(({datasetIndex:o,index:h})=>{const _=this.getDatasetMeta(o);if(!_)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:_.data[h],index:h}});!(0,u.ah)(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,s){const n=this.options.hover,o=(S,O)=>S.filter(B=>!O.some(V=>B.datasetIndex===V.datasetIndex&&B.index===V.index)),h=o(t,e),_=s?e:o(e,t);h.length&&this.updateHoverStyle(h,n.mode,!1),_.length&&n.mode&&this.updateHoverStyle(_,n.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=h=>(h.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",s,n))return;const o=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(o||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:n=[],options:o}=this,_=this._getActiveElements(e,n,s,t),S=(0,u.ai)(e),O=function Fr(r,i,e,t){return e&&"mouseout"!==r.type?t?i:r:null}(e,this._lastEvent,s,S);s&&(this._lastEvent=null,(0,u.Q)(o.onHover,[e,_,this],this),S&&(0,u.Q)(o.onClick,[e,_,this],this));const B=!(0,u.ah)(_,n);return(B||t)&&(this._active=_,this._updateHoverStyles(_,n,t)),this._lastEvent=O,B}_getActiveElements(e,t,s,n){if("mouseout"===e.type)return[];if(!s)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,n)}}return(0,U.Z)(r,"defaults",u.d),(0,U.Z)(r,"instances",ps),(0,U.Z)(r,"overrides",u.a3),(0,U.Z)(r,"registry",j),(0,U.Z)(r,"version","4.4.1"),(0,U.Z)(r,"getChart",Rs),r})();function Ds(){return(0,u.F)(gs.instances,r=>r._plugins.invalidate())}function Mi(r,i,e,t){return{x:e+r*Math.cos(i),y:t+r*Math.sin(i)}}function ms(r,i,e,t,s,n){const{x:o,y:h,startAngle:_,pixelMargin:S,innerRadius:O}=i,B=Math.max(i.outerRadius+t+e-S,0),V=O>0?O+t+e+S:0;let Z=0;const oe=s-_;if(t){const Kt=((O>0?O-t:0)+(B>0?B-t:0))/2;Z=(oe-(0!==Kt?oe*Kt/(Kt+t):oe))/2}const _e=(oe-Math.max(.001,oe*B-e/u.P)/B)/2,we=_+_e+Z,be=s-_e-Z,{outerStart:Be,outerEnd:Ne,innerStart:Oe,innerEnd:Fe}=function Nr(r,i,e,t){const s=function lr(r){return(0,u.ak)(r,["outerStart","outerEnd","innerStart","innerEnd"])}(r.options.borderRadius),n=(e-i)/2,o=Math.min(n,t*i/2),h=_=>{const S=(e-Math.min(n,_))*t/2;return(0,u.S)(_,0,Math.min(n,S))};return{outerStart:h(s.outerStart),outerEnd:h(s.outerEnd),innerStart:(0,u.S)(s.innerStart,0,o),innerEnd:(0,u.S)(s.innerEnd,0,o)}}(i,V,B,be-we),Ye=B-Be,je=B-Ne,et=we+Be/Ye,ft=be-Ne/je,ut=V+Oe,vt=V+Fe,ni=we+Oe/ut,Oi=be-Fe/vt;if(r.beginPath(),n){const Dt=(et+ft)/2;if(r.arc(o,h,B,et,Dt),r.arc(o,h,B,Dt,ft),Ne>0){const ci=Mi(je,ft,o,h);r.arc(ci.x,ci.y,Ne,ft,be+u.H)}const Bt=Mi(vt,be,o,h);if(r.lineTo(Bt.x,Bt.y),Fe>0){const ci=Mi(vt,Oi,o,h);r.arc(ci.x,ci.y,Fe,be+u.H,Oi+Math.PI)}const Kt=(be-Fe/V+(we+Oe/V))/2;if(r.arc(o,h,V,be-Fe/V,Kt,!0),r.arc(o,h,V,Kt,we+Oe/V,!0),Oe>0){const ci=Mi(ut,ni,o,h);r.arc(ci.x,ci.y,Oe,ni+Math.PI,we-u.H)}const Qi=Mi(Ye,we,o,h);if(r.lineTo(Qi.x,Qi.y),Be>0){const ci=Mi(Ye,et,o,h);r.arc(ci.x,ci.y,Be,we-u.H,et)}}else{r.moveTo(o,h);const Dt=Math.cos(et)*B+o,Bt=Math.sin(et)*B+h;r.lineTo(Dt,Bt);const Kt=Math.cos(ft)*B+o,Qi=Math.sin(ft)*B+h;r.lineTo(Kt,Qi)}r.closePath()}class vs extends xt{constructor(i){super(),(0,U.Z)(this,"circumference",void 0),(0,U.Z)(this,"endAngle",void 0),(0,U.Z)(this,"fullCircles",void 0),(0,U.Z)(this,"innerRadius",void 0),(0,U.Z)(this,"outerRadius",void 0),(0,U.Z)(this,"pixelMargin",void 0),(0,U.Z)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,i&&Object.assign(this,i)}inRange(i,e,t){const s=this.getProps(["x","y"],t),{angle:n,distance:o}=(0,u.D)(s,{x:i,y:e}),{startAngle:h,endAngle:_,innerRadius:S,outerRadius:O,circumference:B}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],t),V=(this.options.spacing+this.options.borderWidth)/2,oe=(0,u.v)(B,_-h)>=u.T||(0,u.p)(n,h,_),ce=(0,u.aj)(o,S+V,O+V);return oe&&ce}getCenterPoint(i){const{x:e,y:t,startAngle:s,endAngle:n,innerRadius:o,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],i),{offset:_,spacing:S}=this.options,O=(s+n)/2,B=(o+h+S+_)/2;return{x:e+Math.cos(O)*B,y:t+Math.sin(O)*B}}tooltipPosition(i){return this.getCenterPoint(i)}draw(i){const{options:e,circumference:t}=this,s=(e.offset||0)/4,n=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=t>u.T?Math.floor(t/u.T):0,0===t||this.innerRadius<0||this.outerRadius<0)return;i.save();const h=(this.startAngle+this.endAngle)/2;i.translate(Math.cos(h)*s,Math.sin(h)*s);const S=s*(1-Math.sin(Math.min(u.P,t||0)));i.fillStyle=e.backgroundColor,i.strokeStyle=e.borderColor,function Is(r,i,e,t,s){const{fullCircles:n,startAngle:o,circumference:h}=i;let _=i.endAngle;if(n){ms(r,i,e,t,_,s);for(let S=0;S<n;++S)r.fill();isNaN(h)||(_=o+(h%u.T||u.T))}ms(r,i,e,t,_,s),r.fill()}(i,this,S,n,o),function Wr(r,i,e,t,s){const{fullCircles:n,startAngle:o,circumference:h,options:_}=i,{borderWidth:S,borderJoinStyle:O,borderDash:B,borderDashOffset:V}=_,Z="inner"===_.borderAlign;if(!S)return;r.setLineDash(B||[]),r.lineDashOffset=V,Z?(r.lineWidth=2*S,r.lineJoin=O||"round"):(r.lineWidth=S,r.lineJoin=O||"bevel");let oe=i.endAngle;if(n){ms(r,i,e,t,oe,s);for(let ce=0;ce<n;++ce)r.stroke();isNaN(h)||(oe=o+(h%u.T||u.T))}Z&&function Ki(r,i,e){const{startAngle:t,pixelMargin:s,x:n,y:o,outerRadius:h,innerRadius:_}=i;let S=s/h;r.beginPath(),r.arc(n,o,h,t-S,e+S),_>s?(S=s/_,r.arc(n,o,_,e+S,t-S,!0)):r.arc(n,o,s,e+u.H,t-u.H),r.closePath(),r.clip()}(r,i,oe),n||(ms(r,i,e,t,oe,s),r.stroke())}(i,this,S,n,o),i.restore()}}function Bs(r,i,e=i){r.lineCap=(0,u.v)(e.borderCapStyle,i.borderCapStyle),r.setLineDash((0,u.v)(e.borderDash,i.borderDash)),r.lineDashOffset=(0,u.v)(e.borderDashOffset,i.borderDashOffset),r.lineJoin=(0,u.v)(e.borderJoinStyle,i.borderJoinStyle),r.lineWidth=(0,u.v)(e.borderWidth,i.borderWidth),r.strokeStyle=(0,u.v)(e.borderColor,i.borderColor)}function Ur(r,i,e){r.lineTo(e.x,e.y)}function bs(r,i,e={}){const t=r.length,{start:s=0,end:n=t-1}=e,{start:o,end:h}=i,_=Math.max(s,o),S=Math.min(n,h);return{count:t,start:_,loop:i.loop,ilen:S<_&&!(s<o&&n<o||s>h&&n>h)?t+S-_:S-_}}function hr(r,i,e,t){const{points:s,options:n}=i,{count:o,start:h,loop:_,ilen:S}=bs(s,e,t),O=function cr(r){return r.stepped?u.ar:r.tension||"monotone"===r.cubicInterpolationMode?u.as:Ur}(n);let Z,oe,ce,{move:B=!0,reverse:V}=t||{};for(Z=0;Z<=S;++Z)oe=s[(h+(V?S-Z:Z))%o],!oe.skip&&(B?(r.moveTo(oe.x,oe.y),B=!1):O(r,ce,oe,V,n.stepped),ce=oe);return _&&(oe=s[(h+(V?S:0))%o],O(r,ce,oe,V,n.stepped)),!!_}function dr(r,i,e,t){const s=i.points,{count:n,start:o,ilen:h}=bs(s,e,t),{move:_=!0,reverse:S}=t||{};let V,Z,oe,ce,_e,we,O=0,B=0;const be=Ne=>(o+(S?h-Ne:Ne))%n,Be=()=>{ce!==_e&&(r.lineTo(O,_e),r.lineTo(O,ce),r.lineTo(O,we))};for(_&&(Z=s[be(0)],r.moveTo(Z.x,Z.y)),V=0;V<=h;++V){if(Z=s[be(V)],Z.skip)continue;const Ne=Z.x,Oe=Z.y,Fe=0|Ne;Fe===oe?(Oe<ce?ce=Oe:Oe>_e&&(_e=Oe),O=(B*O+Ne)/++B):(Be(),r.lineTo(Ne,Oe),oe=Fe,B=0,ce=_e=Oe),we=Oe}Be()}function Fs(r){const i=r.options;return r._decimated||r._loop||i.tension||"monotone"===i.cubicInterpolationMode||i.stepped||i.borderDash&&i.borderDash.length?hr:dr}(0,U.Z)(vs,"id","arc"),(0,U.Z)(vs,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),(0,U.Z)(vs,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,U.Z)(vs,"descriptors",{_scriptable:!0,_indexable:r=>"borderDash"!==r});const jr="function"==typeof Path2D;let bi=(()=>{class r extends xt{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;!s.tension&&"monotone"!==s.cubicInterpolationMode||s.stepped||this._pointsUpdated||((0,u.al)(this._points,s,e,s.spanGaps?this._loop:this._fullLoop,t),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=(0,u.am)(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,s=e.length;return s&&this.points[e[s-1].end]}interpolate(e,t){const s=this.options,n=e[t],o=this.points,h=(0,u.an)(this,{property:t,start:n,end:n});if(!h.length)return;const _=[],S=function ur(r){return r.stepped?u.ao:r.tension||"monotone"===r.cubicInterpolationMode?u.ap:u.aq}(s);let O,B;for(O=0,B=h.length;O<B;++O){const{start:V,end:Z}=h[O],oe=o[V],ce=o[Z];if(oe===ce){_.push(oe);continue}const we=S(oe,ce,Math.abs((n-oe[t])/(ce[t]-oe[t])),s.stepped);we[t]=e[t],_.push(we)}return 1===_.length?_[0]:_}pathSegment(e,t,s){return Fs(this)(e,this,t,s)}path(e,t,s){const n=this.segments,o=Fs(this);let h=this._loop;t=t||0,s=s||this.points.length-t;for(const _ of n)h&=o(e,this,_,{start:t,end:t+s-1});return!!h}draw(e,t,s,n){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function Vr(r,i,e,t){jr&&!i.options.segment?function Hs(r,i,e,t){let s=i._path;s||(s=i._path=new Path2D,i.path(s,e,t)&&s.closePath()),Bs(r,i.options),r.stroke(s)}(r,i,e,t):function zr(r,i,e,t){const{segments:s,options:n}=i,o=Fs(i);for(const h of s)Bs(r,n,h.style),r.beginPath(),o(r,i,h,{start:e,end:e+t-1})&&r.closePath(),r.stroke()}(r,i,e,t)}(e,this,s,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return(0,U.Z)(r,"id","line"),(0,U.Z)(r,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,U.Z)(r,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,U.Z)(r,"descriptors",{_scriptable:!0,_indexable:i=>"borderDash"!==i&&"fill"!==i}),r})();function Ns(r,i,e,t){const s=r.options,{[e]:n}=r.getProps([e],t);return Math.abs(i-n)<s.radius+s.hitRadius}let Kr=(()=>{class r extends xt{constructor(e){super(),(0,U.Z)(this,"parsed",void 0),(0,U.Z)(this,"skip",void 0),(0,U.Z)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,s){const n=this.options,{x:o,y:h}=this.getProps(["x","y"],s);return Math.pow(e-o,2)+Math.pow(t-h,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return Ns(this,e,"x",t)}inYRange(e,t){return Ns(this,e,"y",t)}getCenterPoint(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}size(e){let t=(e=e||this.options||{}).radius||0;return t=Math.max(t,t&&e.hoverRadius||0),2*(t+(t&&e.borderWidth||0))}draw(e,t){const s=this.options;this.skip||s.radius<.1||!(0,u.C)(this,t,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,(0,u.at)(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}return(0,U.Z)(r,"id","point"),(0,U.Z)(r,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,U.Z)(r,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),r})();function fr(r,i){const{x:e,y:t,base:s,width:n,height:o}=r.getProps(["x","y","base","width","height"],i);let h,_,S,O,B;return r.horizontal?(B=o/2,h=Math.min(e,s),_=Math.max(e,s),S=t-B,O=t+B):(B=n/2,h=e-B,_=e+B,S=Math.min(t,s),O=Math.max(t,s)),{left:h,top:S,right:_,bottom:O}}function Fi(r,i,e,t){return r?0:(0,u.S)(i,e,t)}function Ws(r,i,e,t){const s=null===i,n=null===e,h=r&&!(s&&n)&&fr(r,t);return h&&(s||(0,u.aj)(i,h.left,h.right))&&(n||(0,u.aj)(e,h.top,h.bottom))}function pr(r,i){r.rect(i.x,i.y,i.w,i.h)}function rs(r,i,e={}){const t=r.x!==e.x?-i:0,s=r.y!==e.y?-i:0;return{x:r.x+t,y:r.y+s,w:r.w+((r.x+r.w!==e.x+e.w?i:0)-t),h:r.h+((r.y+r.h!==e.y+e.h?i:0)-s),radius:r.radius}}class $i extends xt{constructor(i){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,i&&Object.assign(this,i)}draw(i){const{inflateAmount:e,options:{borderColor:t,backgroundColor:s}}=this,{inner:n,outer:o}=function Yr(r){const i=fr(r),e=i.right-i.left,t=i.bottom-i.top,s=function $r(r,i,e){const s=r.borderSkipped,n=(0,u.av)(r.options.borderWidth);return{t:Fi(s.top,n.top,0,e),r:Fi(s.right,n.right,0,i),b:Fi(s.bottom,n.bottom,0,e),l:Fi(s.left,n.left,0,i)}}(r,e/2,t/2),n=function Os(r,i,e){const{enableBorderRadius:t}=r.getProps(["enableBorderRadius"]),s=r.options.borderRadius,n=(0,u.aw)(s),o=Math.min(i,e),h=r.borderSkipped,_=t||(0,u.i)(s);return{topLeft:Fi(!_||h.top||h.left,n.topLeft,0,o),topRight:Fi(!_||h.top||h.right,n.topRight,0,o),bottomLeft:Fi(!_||h.bottom||h.left,n.bottomLeft,0,o),bottomRight:Fi(!_||h.bottom||h.right,n.bottomRight,0,o)}}(r,e/2,t/2);return{outer:{x:i.left,y:i.top,w:e,h:t,radius:n},inner:{x:i.left+s.l,y:i.top+s.t,w:e-s.l-s.r,h:t-s.t-s.b,radius:{topLeft:Math.max(0,n.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,n.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,n.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,n.bottomRight-Math.max(s.b,s.r))}}}}(this),h=function _r(r){return r.topLeft||r.topRight||r.bottomLeft||r.bottomRight}(o.radius)?u.au:pr;i.save(),(o.w!==n.w||o.h!==n.h)&&(i.beginPath(),h(i,rs(o,e,n)),i.clip(),h(i,rs(n,-e,o)),i.fillStyle=t,i.fill("evenodd")),i.beginPath(),h(i,rs(n,e)),i.fillStyle=s,i.fill(),i.restore()}inRange(i,e,t){return Ws(this,i,e,t)}inXRange(i,e){return Ws(this,i,null,e)}inYRange(i,e){return Ws(this,null,i,e)}getCenterPoint(i){const{x:e,y:t,base:s,horizontal:n}=this.getProps(["x","y","base","horizontal"],i);return{x:n?(e+s)/2:e,y:n?t:(t+s)/2}}getRange(i){return"x"===i?this.width/2:this.height/2}}(0,U.Z)($i,"id","bar"),(0,U.Z)($i,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,U.Z)($i,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Zr=Object.freeze({__proto__:null,ArcElement:vs,BarElement:$i,LineElement:bi,PointElement:Kr});const Us=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Hi=Us.map(r=>r.replace("rgb(","rgba(").replace(")",", 0.5)"));function gr(r){return Us[r%Us.length]}function mr(r){return Hi[r%Hi.length]}function vr(r){let i;for(i in r)if(r[i].borderColor||r[i].backgroundColor)return!0;return!1}var Jr={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(r,i,e){if(!e.enabled)return;const{data:{datasets:t},options:s}=r.config,{elements:n}=s;if(!e.forceOverride&&(vr(t)||function Qr(r){return r&&(r.borderColor||r.backgroundColor)}(s)||n&&vr(n)))return;const o=function qr(r){let i=0;return(e,t)=>{const s=r.getDatasetMeta(t).controller;s instanceof Te?i=function Gr(r,i){return r.backgroundColor=r.data.map(()=>gr(i++)),i}(e,i):s instanceof Je?i=function ks(r,i){return r.backgroundColor=r.data.map(()=>mr(i++)),i}(e,i):s&&(i=function Xr(r,i){return r.borderColor=gr(i),r.backgroundColor=mr(i),++i}(e,i))}}(r);t.forEach(o)}};function br(r){if(r._decimated){const i=r._data;delete r._decimated,delete r._data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,writable:!0,value:i})}}function Sr(r){r.data.datasets.forEach(i=>{br(i)})}var tn={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(r,i,e)=>{if(!e.enabled)return void Sr(r);const t=r.width;r.data.datasets.forEach((s,n)=>{const{_data:o,indexAxis:h}=s,_=r.getDatasetMeta(n),S=o||s.data;if("y"===(0,u.a)([h,r.options.indexAxis])||!_.controller.supportsDecimation)return;const O=r.scales[_.xAxisID];if("linear"!==O.type&&"time"!==O.type||r.options.parsing)return;let oe,{start:B,count:V}=function wt(r,i){const e=i.length;let s,t=0;const{iScale:n}=r,{min:o,max:h,minDefined:_,maxDefined:S}=n.getUserBounds();return _&&(t=(0,u.S)((0,u.B)(i,n.axis,o).lo,0,e-1)),s=S?(0,u.S)((0,u.B)(i,n.axis,h).hi+1,t,e)-t:e-t,{start:t,count:s}}(_,S);if(V<=(e.threshold||4*t))br(s);else{switch((0,u.k)(o)&&(s._data=S,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(ce){this._data=ce}})),e.algorithm){case"lttb":oe=function Yi(r,i,e,t,s){const n=s.samples||t;if(n>=e)return r.slice(i,i+e);const o=[],h=(e-2)/(n-2);let _=0;const S=i+e-1;let B,V,Z,oe,ce,O=i;for(o[_++]=r[O],B=0;B<n-2;B++){let be,_e=0,we=0;const Be=Math.floor((B+1)*h)+1+i,Ne=Math.min(Math.floor((B+2)*h)+1,e)+i,Oe=Ne-Be;for(be=Be;be<Ne;be++)_e+=r[be].x,we+=r[be].y;_e/=Oe,we/=Oe;const Fe=Math.floor(B*h)+1+i,Ye=Math.min(Math.floor((B+1)*h)+1,e)+i,{x:je,y:et}=r[O];for(Z=oe=-1,be=Fe;be<Ye;be++)oe=.5*Math.abs((je-_e)*(r[be].y-et)-(je-r[be].x)*(we-et)),oe>Z&&(Z=oe,V=r[be],ce=be);o[_++]=V,O=ce}return o[_++]=r[S],o}(S,B,V,t,e);break;case"min-max":oe=function en(r,i,e,t){let o,h,_,S,O,B,V,Z,oe,ce,s=0,n=0;const _e=[],be=r[i].x,Ne=r[i+e-1].x-be;for(o=i;o<i+e;++o){h=r[o],_=(h.x-be)/Ne*t,S=h.y;const Oe=0|_;if(Oe===O)S<oe?(oe=S,B=o):S>ce&&(ce=S,V=o),s=(n*s+h.x)/++n;else{const Fe=o-1;if(!(0,u.k)(B)&&!(0,u.k)(V)){const Ye=Math.min(B,V),je=Math.max(B,V);Ye!==Z&&Ye!==Fe&&_e.push({...r[Ye],x:s}),je!==Z&&je!==Fe&&_e.push({...r[je],x:s})}o>0&&Fe!==Z&&_e.push(r[Fe]),_e.push(h),O=Oe,n=0,oe=ce=S,B=V=Z=o}}return _e}(S,B,V,t);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}s._decimated=oe}})},destroy(r){Sr(r)}};function zs(r,i,e,t){if(t)return;let s=i[r],n=e[r];return"angle"===r&&(s=(0,u.ay)(s),n=(0,u.ay)(n)),{property:r,start:s,end:n}}function Ss(r,i,e){for(;i>r;i--){const t=e[i];if(!isNaN(t.x)&&!isNaN(t.y))break}return i}function ns(r,i,e,t){return r&&i?t(r[e],i[e]):r?r[e]:i?i[e]:0}function js(r,i){let e=[],t=!1;return(0,u.b)(r)?(t=!0,e=r):e=function yr(r,i){const{x:e=null,y:t=null}=r||{},s=i.points,n=[];return i.segments.forEach(({start:o,end:h})=>{h=Ss(o,h,s);const _=s[o],S=s[h];null!==t?(n.push({x:_.x,y:t}),n.push({x:S.x,y:t})):null!==e&&(n.push({x:e,y:_.y}),n.push({x:e,y:S.y}))}),n}(r,i),e.length?new bi({points:e,options:{tension:0},_loop:t,_fullLoop:t}):null}function As(r){return r&&!1!==r.fill}function rn(r,i,e){let s=r[i].fill;const n=[i];let o;if(!e)return s;for(;!1!==s&&-1===n.indexOf(s);){if(!(0,u.g)(s))return s;if(o=r[s],!o)return!1;if(o.visible)return s;n.push(s),s=o.fill}return!1}function Cr(r,i,e){const t=function Tr(r){const i=r.options,e=i.fill;let t=(0,u.v)(e&&e.target,e);return void 0===t&&(t=!!i.backgroundColor),!1!==t&&null!==t&&(!0===t?"origin":t)}(r);if((0,u.i)(t))return!isNaN(t.value)&&t;let s=parseFloat(t);return(0,u.g)(s)&&Math.floor(s)===s?function xr(r,i,e,t){return("-"===r||"+"===r)&&(e=i+e),!(e===i||e<0||e>=t)&&e}(t[0],i,s,e):["origin","start","end","stack","shape"].indexOf(t)>=0&&t}function p(r,i,e){const t=[];for(let s=0;s<e.length;s++){const n=e[s],{first:o,last:h,point:_}=x(n,i,"x");if(!(!_||o&&h))if(o)t.unshift(_);else if(r.push(_),!h)break}r.push(...t)}function x(r,i,e){const t=r.interpolate(i,e);if(!t)return{};const s=t[e],n=r.segments,o=r.points;let h=!1,_=!1;for(let S=0;S<n.length;S++){const O=n[S],B=o[O.start][e],V=o[O.end][e];if((0,u.aj)(s,B,V)){h=s===B,_=s===V;break}}return{first:h,last:_,point:t}}class k{constructor(i){this.x=i.x,this.y=i.y,this.radius=i.radius}pathSegment(i,e,t){const{x:s,y:n,radius:o}=this;return i.arc(s,n,o,(e=e||{start:0,end:u.T}).end,e.start,!0),!t.bounds}interpolate(i){const{x:e,y:t,radius:s}=this,n=i.angle;return{x:e+Math.cos(n)*s,y:t+Math.sin(n)*s,angle:n}}}function xe(r,i,e){const t=function H(r){const{chart:i,fill:e,line:t}=r;if((0,u.g)(e))return function Y(r,i){const e=r.getDatasetMeta(i);return e&&r.isDatasetVisible(i)?e.dataset:null}(i,e);if("stack"===e)return function Vs(r){const{scale:i,index:e,line:t}=r,s=[],n=t.segments,o=t.points,h=function a(r,i){const e=[],t=r.getMatchingVisibleMetas("line");for(let s=0;s<t.length;s++){const n=t[s];if(n.index===i)break;n.hidden||e.unshift(n.dataset)}return e}(i,e);h.push(js({x:null,y:i.bottom},t));for(let _=0;_<n.length;_++){const S=n[_];for(let O=S.start;O<=S.end;O++)p(s,o[O],h)}return new bi({points:s,options:{}})}(r);if("shape"===e)return!0;const s=function ee(r){return(r.scale||{}).getPointPositionForValue?function ue(r){const{scale:i,fill:e}=r,t=i.options,s=i.getLabels().length,n=t.reverse?i.max:i.min,o=function wr(r,i,e){let t;return t="start"===r?e:"end"===r?i.options.reverse?i.min:i.max:(0,u.i)(r)?r.value:i.getBaseValue(),t}(e,i,n),h=[];if(t.grid.circular){const _=i.getPointPositionForValue(0,n);return new k({x:_.x,y:_.y,radius:i.getDistanceFromCenterForValue(o)})}for(let _=0;_<s;++_)h.push(i.getPointPositionForValue(_,o));return h}(r):function ae(r){const{scale:i={},fill:e}=r,t=function Er(r,i){let e=null;return"start"===r?e=i.bottom:"end"===r?e=i.top:(0,u.i)(r)?e=i.getPixelForValue(r.value):i.getBasePixel&&(e=i.getBasePixel()),e}(e,i);if((0,u.g)(t)){const s=i.isHorizontal();return{x:s?t:null,y:s?null:t}}return null}(r)}(r);return s instanceof k?s:js(s,t)}(i),{line:s,scale:n,axis:o}=i,h=s.options,_=h.fill,S=h.backgroundColor,{above:O=S,below:B=S}=_||{};t&&s.points.length&&((0,u.Y)(r,e),function Ie(r,i){const{line:e,target:t,above:s,below:n,area:o,scale:h}=i,_=e._loop?"angle":i.axis;r.save(),"x"===_&&n!==s&&(Qe(r,t,o.top),rt(r,{line:e,target:t,color:s,scale:h,property:_}),r.restore(),r.save(),Qe(r,t,o.bottom)),rt(r,{line:e,target:t,color:n,scale:h,property:_}),r.restore()}(r,{line:s,target:t,above:O,below:B,area:e,scale:n,axis:o}),(0,u.$)(r))}function Qe(r,i,e){const{segments:t,points:s}=i;let n=!0,o=!1;r.beginPath();for(const h of t){const{start:_,end:S}=h,O=s[_],B=s[Ss(_,S,s)];n?(r.moveTo(O.x,O.y),n=!1):(r.lineTo(O.x,e),r.lineTo(O.x,O.y)),o=!!i.pathSegment(r,h,{move:o}),o?r.closePath():r.lineTo(B.x,e)}r.lineTo(i.first().x,e),r.closePath(),r.clip()}function rt(r,i){const{line:e,target:t,property:s,color:n,scale:o}=i,h=function sn(r,i,e){const t=r.segments,s=r.points,n=i.points,o=[];for(const h of t){let{start:_,end:S}=h;S=Ss(_,S,s);const O=zs(e,s[_],s[S],h.loop);if(!i.segments){o.push({source:h,target:O,start:s[_],end:s[S]});continue}const B=(0,u.an)(i,O);for(const V of B){const Z=zs(e,n[V.start],n[V.end],V.loop),oe=(0,u.ax)(h,s,Z);for(const ce of oe)o.push({source:ce,target:V,start:{[e]:ns(O,Z,"start",Math.max)},end:{[e]:ns(O,Z,"end",Math.min)}})}}return o}(e,t,s);for(const{source:_,target:S,start:O,end:B}of h){const{style:{backgroundColor:V=n}={}}=_,Z=!0!==t;r.save(),r.fillStyle=V,yt(r,o,Z&&zs(s,O,B)),r.beginPath();const oe=!!e.pathSegment(r,_);let ce;if(Z){oe?r.closePath():Lt(r,t,B,s);const _e=!!t.pathSegment(r,S,{move:oe,reverse:!0});ce=oe&&_e,ce||Lt(r,t,O,s)}r.closePath(),r.fill(ce?"evenodd":"nonzero"),r.restore()}}function yt(r,i,e){const{top:t,bottom:s}=i.chart.chartArea,{property:n,start:o,end:h}=e||{};"x"===n&&(r.beginPath(),r.rect(o,t,h-o,s-t),r.clip())}function Lt(r,i,e,t){const s=i.interpolate(e,t);s&&r.lineTo(s.x,s.y)}var at={id:"filler",afterDatasetsUpdate(r,i,e){const t=(r.data.datasets||[]).length,s=[];let n,o,h,_;for(o=0;o<t;++o)n=r.getDatasetMeta(o),h=n.dataset,_=null,h&&h.options&&h instanceof bi&&(_={visible:r.isDatasetVisible(o),index:o,fill:Cr(h,o,t),chart:r,axis:n.controller.options.indexAxis,scale:n.vScale,line:h}),n.$filler=_,s.push(_);for(o=0;o<t;++o)_=s[o],_&&!1!==_.fill&&(_.fill=rn(s,o,e.propagate))},beforeDraw(r,i,e){const t="beforeDraw"===e.drawTime,s=r.getSortedVisibleDatasetMetas(),n=r.chartArea;for(let o=s.length-1;o>=0;--o){const h=s[o].$filler;h&&(h.line.updateControlPoints(n,h.axis),t&&h.fill&&xe(r.ctx,h,n))}},beforeDatasetsDraw(r,i,e){if("beforeDatasetsDraw"!==e.drawTime)return;const t=r.getSortedVisibleDatasetMetas();for(let s=t.length-1;s>=0;--s){const n=t[s].$filler;As(n)&&xe(r.ctx,n,r.chartArea)}},beforeDatasetDraw(r,i,e){const t=i.meta.$filler;!As(t)||"beforeDatasetDraw"!==e.drawTime||xe(r.ctx,t,r.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ge=(r,i)=>{let{boxHeight:e=i,boxWidth:t=i}=r;return r.usePointStyle&&(e=Math.min(e,i),t=r.pointStyleWidth||Math.min(t,i)),{boxWidth:t,boxHeight:e,itemHeight:Math.max(i,e)}};class Zi extends xt{constructor(i){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=i.chart,this.options=i.options,this.ctx=i.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(i,e,t){this.maxWidth=i,this.maxHeight=e,this._margins=t,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const i=this.options.labels||{};let e=(0,u.Q)(i.generateLabels,[this.chart],this)||[];i.filter&&(e=e.filter(t=>i.filter(t,this.chart.data))),i.sort&&(e=e.sort((t,s)=>i.sort(t,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:i,ctx:e}=this;if(!i.display)return void(this.width=this.height=0);const t=i.labels,s=(0,u.a0)(t.font),n=s.size,o=this._computeTitleHeight(),{boxWidth:h,itemHeight:_}=Ge(t,n);let S,O;e.font=s.string,this.isHorizontal()?(S=this.maxWidth,O=this._fitRows(o,n,h,_)+10):(O=this.maxHeight,S=this._fitCols(o,s,h,_)+10),this.width=Math.min(S,i.maxWidth||this.maxWidth),this.height=Math.min(O,i.maxHeight||this.maxHeight)}_fitRows(i,e,t,s){const{ctx:n,maxWidth:o,options:{labels:{padding:h}}}=this,_=this.legendHitBoxes=[],S=this.lineWidths=[0],O=s+h;let B=i;n.textAlign="left",n.textBaseline="middle";let V=-1,Z=-O;return this.legendItems.forEach((oe,ce)=>{const _e=t+e/2+n.measureText(oe.text).width;(0===ce||S[S.length-1]+_e+2*h>o)&&(B+=O,S[S.length-(ce>0?0:1)]=0,Z+=O,V++),_[ce]={left:0,top:Z,row:V,width:_e,height:s},S[S.length-1]+=_e+h}),B}_fitCols(i,e,t,s){const{ctx:n,maxHeight:o,options:{labels:{padding:h}}}=this,_=this.legendHitBoxes=[],S=this.columnSizes=[],O=o-i;let B=h,V=0,Z=0,oe=0,ce=0;return this.legendItems.forEach((_e,we)=>{const{itemWidth:be,itemHeight:Be}=function ys(r,i,e,t,s){const n=function nn(r,i,e,t){let s=r.text;return s&&"string"!=typeof s&&(s=s.reduce((n,o)=>n.length>o.length?n:o)),i+e.size/2+t.measureText(s).width}(t,r,i,e),o=function on(r,i,e){let t=r;return"string"!=typeof i.text&&(t=Mr(i,e)),t}(s,t,i.lineHeight);return{itemWidth:n,itemHeight:o}}(t,e,n,_e,s);we>0&&Z+Be+2*h>O&&(B+=V+h,S.push({width:V,height:Z}),oe+=V+h,ce++,V=Z=0),_[we]={left:oe,top:Z,col:ce,width:be,height:Be},V=Math.max(V,be),Z+=Be+h}),B+=V,S.push({width:V,height:Z}),B}adjustHitBoxes(){if(!this.options.display)return;const i=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:t,labels:{padding:s},rtl:n}}=this,o=(0,u.az)(n,this.left,this.width);if(this.isHorizontal()){let h=0,_=(0,u.a2)(t,this.left+s,this.right-this.lineWidths[h]);for(const S of e)h!==S.row&&(h=S.row,_=(0,u.a2)(t,this.left+s,this.right-this.lineWidths[h])),S.top+=this.top+i+s,S.left=o.leftForLtr(o.x(_),S.width),_+=S.width+s}else{let h=0,_=(0,u.a2)(t,this.top+i+s,this.bottom-this.columnSizes[h].height);for(const S of e)S.col!==h&&(h=S.col,_=(0,u.a2)(t,this.top+i+s,this.bottom-this.columnSizes[h].height)),S.top=_,S.left+=this.left+s,S.left=o.leftForLtr(o.x(S.left),S.width),_+=S.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const i=this.ctx;(0,u.Y)(i,this),this._draw(),(0,u.$)(i)}}_draw(){const{options:i,columnSizes:e,lineWidths:t,ctx:s}=this,{align:n,labels:o}=i,h=u.d.color,_=(0,u.az)(i.rtl,this.left,this.width),S=(0,u.a0)(o.font),{padding:O}=o,B=S.size,V=B/2;let Z;this.drawTitle(),s.textAlign=_.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=S.string;const{boxWidth:oe,boxHeight:ce,itemHeight:_e}=Ge(o,B),Be=this.isHorizontal(),Ne=this._computeTitleHeight();Z=Be?{x:(0,u.a2)(n,this.left+O,this.right-t[0]),y:this.top+O+Ne,line:0}:{x:this.left+O,y:(0,u.a2)(n,this.top+Ne+O,this.bottom-e[0].height),line:0},(0,u.aA)(this.ctx,i.textDirection);const Oe=_e+O;this.legendItems.forEach((Fe,Ye)=>{s.strokeStyle=Fe.fontColor,s.fillStyle=Fe.fontColor;const je=s.measureText(Fe.text).width,et=_.textAlign(Fe.textAlign||(Fe.textAlign=o.textAlign)),ft=oe+V+je;let ut=Z.x,vt=Z.y;_.setWidth(this.width),Be?Ye>0&&ut+ft+O>this.right&&(vt=Z.y+=Oe,Z.line++,ut=Z.x=(0,u.a2)(n,this.left+O,this.right-t[Z.line])):Ye>0&&vt+Oe>this.bottom&&(ut=Z.x=ut+e[Z.line].width+O,Z.line++,vt=Z.y=(0,u.a2)(n,this.top+Ne+O,this.bottom-e[Z.line].height)),function(Fe,Ye,je){if(isNaN(oe)||oe<=0||isNaN(ce)||ce<0)return;s.save();const et=(0,u.v)(je.lineWidth,1);if(s.fillStyle=(0,u.v)(je.fillStyle,h),s.lineCap=(0,u.v)(je.lineCap,"butt"),s.lineDashOffset=(0,u.v)(je.lineDashOffset,0),s.lineJoin=(0,u.v)(je.lineJoin,"miter"),s.lineWidth=et,s.strokeStyle=(0,u.v)(je.strokeStyle,h),s.setLineDash((0,u.v)(je.lineDash,[])),o.usePointStyle){const ft={radius:ce*Math.SQRT2/2,pointStyle:je.pointStyle,rotation:je.rotation,borderWidth:et},ut=_.xPlus(Fe,oe/2);(0,u.aD)(s,ft,ut,Ye+V,o.pointStyleWidth&&oe)}else{const ft=Ye+Math.max((B-ce)/2,0),ut=_.leftForLtr(Fe,oe),vt=(0,u.aw)(je.borderRadius);s.beginPath(),Object.values(vt).some(ni=>0!==ni)?(0,u.au)(s,{x:ut,y:ft,w:oe,h:ce,radius:vt}):s.rect(ut,ft,oe,ce),s.fill(),0!==et&&s.stroke()}s.restore()}(_.x(ut),vt,Fe),ut=(0,u.aB)(et,ut+oe+V,Be?ut+ft:this.right,i.rtl),function(Fe,Ye,je){(0,u.Z)(s,je.text,Fe,Ye+_e/2,S,{strikethrough:je.hidden,textAlign:_.textAlign(je.textAlign)})}(_.x(ut),vt,Fe),Be?Z.x+=ft+O:Z.y+="string"!=typeof Fe.text?Mr(Fe,S.lineHeight)+O:Oe}),(0,u.aC)(this.ctx,i.textDirection)}drawTitle(){const i=this.options,e=i.title,t=(0,u.a0)(e.font),s=(0,u.E)(e.padding);if(!e.display)return;const n=(0,u.az)(i.rtl,this.left,this.width),o=this.ctx,h=e.position,S=s.top+t.size/2;let O,B=this.left,V=this.width;if(this.isHorizontal())V=Math.max(...this.lineWidths),O=this.top+S,B=(0,u.a2)(i.align,B,this.right-V);else{const oe=this.columnSizes.reduce((ce,_e)=>Math.max(ce,_e.height),0);O=S+(0,u.a2)(i.align,this.top,this.bottom-oe-i.labels.padding-this._computeTitleHeight())}const Z=(0,u.a2)(h,B,B+V);o.textAlign=n.textAlign((0,u.a1)(h)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=t.string,(0,u.Z)(o,e.text,Z,O,t)}_computeTitleHeight(){const i=this.options.title,e=(0,u.a0)(i.font),t=(0,u.E)(i.padding);return i.display?e.lineHeight+t.height:0}_getLegendItemAt(i,e){let t,s,n;if((0,u.aj)(i,this.left,this.right)&&(0,u.aj)(e,this.top,this.bottom))for(n=this.legendHitBoxes,t=0;t<n.length;++t)if(s=n[t],(0,u.aj)(i,s.left,s.left+s.width)&&(0,u.aj)(e,s.top,s.top+s.height))return this.legendItems[t];return null}handleEvent(i){const e=this.options;if(!function Dr(r,i){return!(("mousemove"!==r&&"mouseout"!==r||!i.onHover&&!i.onLeave)&&(!i.onClick||"click"!==r&&"mouseup"!==r))}(i.type,e))return;const t=this._getLegendItemAt(i.x,i.y);if("mousemove"===i.type||"mouseout"===i.type){const s=this._hoveredItem,n=((r,i)=>null!==r&&null!==i&&r.datasetIndex===i.datasetIndex&&r.index===i.index)(s,t);s&&!n&&(0,u.Q)(e.onLeave,[i,s,this],this),this._hoveredItem=t,t&&!n&&(0,u.Q)(e.onHover,[i,t,this],this)}else t&&(0,u.Q)(e.onClick,[i,t,this],this)}}function Mr(r,i){return i*(r.text?r.text.length:0)}var os={id:"legend",_element:Zi,start(r,i,e){const t=r.legend=new Zi({ctx:r.ctx,options:e,chart:r});At.configure(r,t,e),At.addBox(r,t)},stop(r){At.removeBox(r,r.legend),delete r.legend},beforeUpdate(r,i,e){const t=r.legend;At.configure(r,t,e),t.options=e},afterUpdate(r){const i=r.legend;i.buildLabels(),i.adjustHitBoxes()},afterEvent(r,i){i.replay||r.legend.handleEvent(i.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(r,i,e){const t=i.datasetIndex,s=e.chart;s.isDatasetVisible(t)?(s.hide(t),i.hidden=!0):(s.show(t),i.hidden=!1)},onHover:null,onLeave:null,labels:{color:r=>r.chart.options.color,boxWidth:40,padding:10,generateLabels(r){const i=r.data.datasets,{labels:{usePointStyle:e,pointStyle:t,textAlign:s,color:n,useBorderRadius:o,borderRadius:h}}=r.legend.options;return r._getSortedDatasetMetas().map(_=>{const S=_.controller.getStyle(e?0:void 0),O=(0,u.E)(S.borderWidth);return{text:i[_.index].label,fillStyle:S.backgroundColor,fontColor:n,hidden:!_.visible,lineCap:S.borderCapStyle,lineDash:S.borderDash,lineDashOffset:S.borderDashOffset,lineJoin:S.borderJoinStyle,lineWidth:(O.width+O.height)/4,strokeStyle:S.borderColor,pointStyle:t||S.pointStyle,rotation:S.rotation,textAlign:s||S.textAlign,borderRadius:o&&(h||S.borderRadius),datasetIndex:_.index}},this)}},title:{color:r=>r.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:r=>!r.startsWith("on"),labels:{_scriptable:r=>!["generateLabels","filter","sort"].includes(r)}}};class Ps extends xt{constructor(i){super(),this.chart=i.chart,this.options=i.options,this.ctx=i.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(i,e){const t=this.options;if(this.left=0,this.top=0,!t.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=i,this.height=this.bottom=e;const s=(0,u.b)(t.text)?t.text.length:1;this._padding=(0,u.E)(t.padding);const n=s*(0,u.a0)(t.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const i=this.options.position;return"top"===i||"bottom"===i}_drawArgs(i){const{top:e,left:t,bottom:s,right:n,options:o}=this,h=o.align;let S,O,B,_=0;return this.isHorizontal()?(O=(0,u.a2)(h,t,n),B=e+i,S=n-t):("left"===o.position?(O=t+i,B=(0,u.a2)(h,s,e),_=-.5*u.P):(O=n-i,B=(0,u.a2)(h,e,s),_=.5*u.P),S=s-e),{titleX:O,titleY:B,maxWidth:S,rotation:_}}draw(){const i=this.ctx,e=this.options;if(!e.display)return;const t=(0,u.a0)(e.font),n=t.lineHeight/2+this._padding.top,{titleX:o,titleY:h,maxWidth:_,rotation:S}=this._drawArgs(n);(0,u.Z)(i,e.text,0,0,t,{color:e.color,maxWidth:_,rotation:S,textAlign:(0,u.a1)(e.align),textBaseline:"middle",translation:[o,h]})}}var kn={id:"title",_element:Ps,start(r,i,e){!function On(r,i){const e=new Ps({ctx:r.ctx,options:i,chart:r});At.configure(r,e,i),At.addBox(r,e),r.titleBlock=e}(r,e)},stop(r){At.removeBox(r,r.titleBlock),delete r.titleBlock},beforeUpdate(r,i,e){const t=r.titleBlock;At.configure(r,t,e),t.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ks=new WeakMap;var An={id:"subtitle",start(r,i,e){const t=new Ps({ctx:r.ctx,options:e,chart:r});At.configure(r,t,e),At.addBox(r,t),Ks.set(r,t)},stop(r){At.removeBox(r,Ks.get(r)),Ks.delete(r)},beforeUpdate(r,i,e){const t=Ks.get(r);At.configure(r,t,e),t.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const $s={average(r){if(!r.length)return!1;let i,e,t=0,s=0,n=0;for(i=0,e=r.length;i<e;++i){const o=r[i].element;if(o&&o.hasValue()){const h=o.tooltipPosition();t+=h.x,s+=h.y,++n}}return{x:t/n,y:s/n}},nearest(r,i){if(!r.length)return!1;let n,o,h,e=i.x,t=i.y,s=Number.POSITIVE_INFINITY;for(n=0,o=r.length;n<o;++n){const _=r[n].element;if(_&&_.hasValue()){const S=_.getCenterPoint(),O=(0,u.aE)(i,S);O<s&&(s=O,h=_)}}if(h){const _=h.tooltipPosition();e=_.x,t=_.y}return{x:e,y:t}}};function Di(r,i){return i&&((0,u.b)(i)?Array.prototype.push.apply(r,i):r.push(i)),r}function Xi(r){return("string"==typeof r||r instanceof String)&&r.indexOf("\n")>-1?r.split("\n"):r}function Pn(r,i){const{element:e,datasetIndex:t,index:s}=i,n=r.getDatasetMeta(t).controller,{label:o,value:h}=n.getLabelAndValue(s);return{chart:r,label:o,parsed:n.getParsed(s),raw:r.data.datasets[t].data[s],formattedValue:h,dataset:n.getDataset(),dataIndex:s,datasetIndex:t,element:e}}function an(r,i){const e=r.chart.ctx,{body:t,footer:s,title:n}=r,{boxWidth:o,boxHeight:h}=i,_=(0,u.a0)(i.bodyFont),S=(0,u.a0)(i.titleFont),O=(0,u.a0)(i.footerFont),B=n.length,V=s.length,Z=t.length,oe=(0,u.E)(i.padding);let ce=oe.height,_e=0,we=t.reduce((Ne,Oe)=>Ne+Oe.before.length+Oe.lines.length+Oe.after.length,0);we+=r.beforeBody.length+r.afterBody.length,B&&(ce+=B*S.lineHeight+(B-1)*i.titleSpacing+i.titleMarginBottom),we&&(ce+=Z*(i.displayColors?Math.max(h,_.lineHeight):_.lineHeight)+(we-Z)*_.lineHeight+(we-1)*i.bodySpacing),V&&(ce+=i.footerMarginTop+V*O.lineHeight+(V-1)*i.footerSpacing);let be=0;const Be=function(Ne){_e=Math.max(_e,e.measureText(Ne).width+be)};return e.save(),e.font=S.string,(0,u.F)(r.title,Be),e.font=_.string,(0,u.F)(r.beforeBody.concat(r.afterBody),Be),be=i.displayColors?o+2+i.boxPadding:0,(0,u.F)(t,Ne=>{(0,u.F)(Ne.before,Be),(0,u.F)(Ne.lines,Be),(0,u.F)(Ne.after,Be)}),be=0,e.font=O.string,(0,u.F)(r.footer,Be),e.restore(),_e+=oe.width,{width:_e,height:ce}}function In(r,i,e,t){const{x:s,width:n}=e,{width:o,chartArea:{left:h,right:_}}=r;let S="center";return"center"===t?S=s<=(h+_)/2?"left":"right":s<=n/2?S="left":s>=o-n/2&&(S="right"),function Rn(r,i,e,t){const{x:s,width:n}=t,o=e.caretSize+e.caretPadding;if("left"===r&&s+n+o>i.width||"right"===r&&s-n-o<0)return!0}(S,r,i,e)&&(S="center"),S}function gn(r,i,e){const t=e.yAlign||i.yAlign||function Ln(r,i){const{y:e,height:t}=i;return e<t/2?"top":e>r.height-t/2?"bottom":"center"}(r,e);return{xAlign:e.xAlign||i.xAlign||In(r,i,e,t),yAlign:t}}function mn(r,i,e,t){const{caretSize:s,caretPadding:n,cornerRadius:o}=r,{xAlign:h,yAlign:_}=e,S=s+n,{topLeft:O,topRight:B,bottomLeft:V,bottomRight:Z}=(0,u.aw)(o);let oe=function Bn(r,i){let{x:e,width:t}=r;return"right"===i?e-=t:"center"===i&&(e-=t/2),e}(i,h);const ce=function Fn(r,i,e){let{y:t,height:s}=r;return"top"===i?t+=e:t-="bottom"===i?s+e:s/2,t}(i,_,S);return"center"===_?"left"===h?oe+=S:"right"===h&&(oe-=S):"left"===h?oe-=Math.max(O,V)+s:"right"===h&&(oe+=Math.max(B,Z)+s),{x:(0,u.S)(oe,0,t.width-i.width),y:(0,u.S)(ce,0,t.height-i.height)}}function Or(r,i,e){const t=(0,u.E)(e.padding);return"center"===i?r.x+r.width/2:"right"===i?r.x+r.width-t.right:r.x+t.left}function vn(r){return Di([],Xi(r))}function Nn(r,i){const e=i&&i.dataset&&i.dataset.tooltip&&i.dataset.tooltip.callbacks;return e?r.override(e):r}const bn={beforeTitle:u.aF,title(r){if(r.length>0){const i=r[0],e=i.chart.data.labels,t=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return i.dataset.label||"";if(i.label)return i.label;if(t>0&&i.dataIndex<t)return e[i.dataIndex]}return""},afterTitle:u.aF,beforeBody:u.aF,beforeLabel:u.aF,label(r){if(this&&this.options&&"dataset"===this.options.mode)return r.label+": "+r.formattedValue||r.formattedValue;let i=r.dataset.label||"";i&&(i+=": ");const e=r.formattedValue;return(0,u.k)(e)||(i+=e),i},labelColor(r){const e=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(r){const e=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:u.aF,afterBody:u.aF,beforeFooter:u.aF,footer:u.aF,afterFooter:u.aF};function li(r,i,e,t){const s=r[i].call(e,t);return typeof s>"u"?bn[i].call(e,t):s}let Sn=(()=>{class r extends xt{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&t.options.animation&&s.animations,o=new m(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function Hn(r,i,e){return(0,u.j)(r,{tooltip:i,tooltipItems:e,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:s}=t,n=li(s,"beforeTitle",this,e),o=li(s,"title",this,e),h=li(s,"afterTitle",this,e);let _=[];return _=Di(_,Xi(n)),_=Di(_,Xi(o)),_=Di(_,Xi(h)),_}getBeforeBody(e,t){return vn(li(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,n=[];return(0,u.F)(e,o=>{const h={before:[],lines:[],after:[]},_=Nn(s,o);Di(h.before,Xi(li(_,"beforeLabel",this,o))),Di(h.lines,li(_,"label",this,o)),Di(h.after,Xi(li(_,"afterLabel",this,o))),n.push(h)}),n}getAfterBody(e,t){return vn(li(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,n=li(s,"beforeFooter",this,e),o=li(s,"footer",this,e),h=li(s,"afterFooter",this,e);let _=[];return _=Di(_,Xi(n)),_=Di(_,Xi(o)),_=Di(_,Xi(h)),_}_createItems(e){const t=this._active,s=this.chart.data,n=[],o=[],h=[];let S,O,_=[];for(S=0,O=t.length;S<O;++S)_.push(Pn(this.chart,t[S]));return e.filter&&(_=_.filter((B,V,Z)=>e.filter(B,V,Z,s))),e.itemSort&&(_=_.sort((B,V)=>e.itemSort(B,V,s))),(0,u.F)(_,B=>{const V=Nn(e.callbacks,B);n.push(li(V,"labelColor",this,B)),o.push(li(V,"labelPointStyle",this,B)),h.push(li(V,"labelTextColor",this,B))}),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=h,this.dataPoints=_,_}update(e,t){const s=this.options.setContext(this.getContext()),n=this._active;let o,h=[];if(n.length){const _=$s[s.position].call(this,n,this._eventPosition);h=this._createItems(s),this.title=this.getTitle(h,s),this.beforeBody=this.getBeforeBody(h,s),this.body=this.getBody(h,s),this.afterBody=this.getAfterBody(h,s),this.footer=this.getFooter(h,s);const S=this._size=an(this,s),O=Object.assign({},_,S),B=gn(this.chart,s,O),V=mn(s,O,B,this.chart);this.xAlign=B.xAlign,this.yAlign=B.yAlign,o={opacity:1,x:V.x,y:V.y,width:S.width,height:S.height,caretX:_.x,caretY:_.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=h,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,n){const o=this.getCaretPosition(e,s,n);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,s){const{xAlign:n,yAlign:o}=this,{caretSize:h,cornerRadius:_}=s,{topLeft:S,topRight:O,bottomLeft:B,bottomRight:V}=(0,u.aw)(_),{x:Z,y:oe}=e,{width:ce,height:_e}=t;let we,be,Be,Ne,Oe,Fe;return"center"===o?(Oe=oe+_e/2,"left"===n?(we=Z,be=we-h,Ne=Oe+h,Fe=Oe-h):(we=Z+ce,be=we+h,Ne=Oe-h,Fe=Oe+h),Be=we):(be="left"===n?Z+Math.max(S,B)+h:"right"===n?Z+ce-Math.max(O,V)-h:this.caretX,"top"===o?(Ne=oe,Oe=Ne-h,we=be-h,Be=be+h):(Ne=oe+_e,Oe=Ne+h,we=be+h,Be=be-h),Fe=Ne),{x1:we,x2:be,x3:Be,y1:Ne,y2:Oe,y3:Fe}}drawTitle(e,t,s){const n=this.title,o=n.length;let h,_,S;if(o){const O=(0,u.az)(s.rtl,this.x,this.width);for(e.x=Or(this,s.titleAlign,s),t.textAlign=O.textAlign(s.titleAlign),t.textBaseline="middle",h=(0,u.a0)(s.titleFont),_=s.titleSpacing,t.fillStyle=s.titleColor,t.font=h.string,S=0;S<o;++S)t.fillText(n[S],O.x(e.x),e.y+h.lineHeight/2),e.y+=h.lineHeight+_,S+1===o&&(e.y+=s.titleMarginBottom-_)}}_drawColorBox(e,t,s,n,o){const h=this.labelColors[s],_=this.labelPointStyles[s],{boxHeight:S,boxWidth:O}=o,B=(0,u.a0)(o.bodyFont),V=Or(this,"left",o),Z=n.x(V),ce=t.y+(S<B.lineHeight?(B.lineHeight-S)/2:0);if(o.usePointStyle){const _e={radius:Math.min(O,S)/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:1},we=n.leftForLtr(Z,O)+O/2,be=ce+S/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,(0,u.at)(e,_e,we,be),e.strokeStyle=h.borderColor,e.fillStyle=h.backgroundColor,(0,u.at)(e,_e,we,be)}else{e.lineWidth=(0,u.i)(h.borderWidth)?Math.max(...Object.values(h.borderWidth)):h.borderWidth||1,e.strokeStyle=h.borderColor,e.setLineDash(h.borderDash||[]),e.lineDashOffset=h.borderDashOffset||0;const _e=n.leftForLtr(Z,O),we=n.leftForLtr(n.xPlus(Z,1),O-2),be=(0,u.aw)(h.borderRadius);Object.values(be).some(Be=>0!==Be)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,(0,u.au)(e,{x:_e,y:ce,w:O,h:S,radius:be}),e.fill(),e.stroke(),e.fillStyle=h.backgroundColor,e.beginPath(),(0,u.au)(e,{x:we,y:ce+1,w:O-2,h:S-2,radius:be}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(_e,ce,O,S),e.strokeRect(_e,ce,O,S),e.fillStyle=h.backgroundColor,e.fillRect(we,ce+1,O-2,S-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:n}=this,{bodySpacing:o,bodyAlign:h,displayColors:_,boxHeight:S,boxWidth:O,boxPadding:B}=s,V=(0,u.a0)(s.bodyFont);let Z=V.lineHeight,oe=0;const ce=(0,u.az)(s.rtl,this.x,this.width),_e=function(et){t.fillText(et,ce.x(e.x+oe),e.y+Z/2),e.y+=Z+o},we=ce.textAlign(h);let be,Be,Ne,Oe,Fe,Ye,je;for(t.textAlign=h,t.textBaseline="middle",t.font=V.string,e.x=Or(this,we,s),t.fillStyle=s.bodyColor,(0,u.F)(this.beforeBody,_e),oe=_&&"right"!==we?"center"===h?O/2+B:O+2+B:0,Oe=0,Ye=n.length;Oe<Ye;++Oe){for(be=n[Oe],Be=this.labelTextColors[Oe],t.fillStyle=Be,(0,u.F)(be.before,_e),Ne=be.lines,_&&Ne.length&&(this._drawColorBox(t,e,Oe,ce,s),Z=Math.max(V.lineHeight,S)),Fe=0,je=Ne.length;Fe<je;++Fe)_e(Ne[Fe]),Z=V.lineHeight;(0,u.F)(be.after,_e)}oe=0,Z=V.lineHeight,(0,u.F)(this.afterBody,_e),e.y-=o}drawFooter(e,t,s){const n=this.footer,o=n.length;let h,_;if(o){const S=(0,u.az)(s.rtl,this.x,this.width);for(e.x=Or(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=S.textAlign(s.footerAlign),t.textBaseline="middle",h=(0,u.a0)(s.footerFont),t.fillStyle=s.footerColor,t.font=h.string,_=0;_<o;++_)t.fillText(n[_],S.x(e.x),e.y+h.lineHeight/2),e.y+=h.lineHeight+s.footerSpacing}}drawBackground(e,t,s,n){const{xAlign:o,yAlign:h}=this,{x:_,y:S}=e,{width:O,height:B}=s,{topLeft:V,topRight:Z,bottomLeft:oe,bottomRight:ce}=(0,u.aw)(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(_+V,S),"top"===h&&this.drawCaret(e,t,s,n),t.lineTo(_+O-Z,S),t.quadraticCurveTo(_+O,S,_+O,S+Z),"center"===h&&"right"===o&&this.drawCaret(e,t,s,n),t.lineTo(_+O,S+B-ce),t.quadraticCurveTo(_+O,S+B,_+O-ce,S+B),"bottom"===h&&this.drawCaret(e,t,s,n),t.lineTo(_+oe,S+B),t.quadraticCurveTo(_,S+B,_,S+B-oe),"center"===h&&"left"===o&&this.drawCaret(e,t,s,n),t.lineTo(_,S+V),t.quadraticCurveTo(_,S,_+V,S),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,n=s&&s.x,o=s&&s.y;if(n||o){const h=$s[e.position].call(this,this._active,this._eventPosition);if(!h)return;const _=this._size=an(this,e),S=Object.assign({},h,this._size),O=gn(t,e,S),B=mn(e,S,O,t);(n._to!==B.x||o._to!==B.y)&&(this.xAlign=O.xAlign,this.yAlign=O.yAlign,this.width=_.width,this.height=_.height,this.caretX=h.x,this.caretY=h.y,this._resolveAnimations().update(this,B))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const h=(0,u.E)(t.padding);t.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=s,this.drawBackground(o,e,n,t),(0,u.aA)(e,t.textDirection),o.y+=h.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),(0,u.aC)(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,n=e.map(({datasetIndex:_,index:S})=>{const O=this.chart.getDatasetMeta(_);if(!O)throw new Error("Cannot find a dataset at index "+_);return{datasetIndex:_,element:O.data[S],index:S}}),o=!(0,u.ah)(s,n),h=this._positionChanged(n,t);(o||h)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,s=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,o=this._active||[],h=this._getActiveElements(e,o,t,s),_=this._positionChanged(h,e),S=t||!(0,u.ah)(h,o)||_;return S&&(this._active=h,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),S}_getActiveElements(e,t,s,n){const o=this.options;if("mouseout"===e.type)return[];if(!n)return t.filter(_=>this.chart.data.datasets[_.datasetIndex]&&void 0!==this.chart.getDatasetMeta(_.datasetIndex).controller.getParsed(_.index));const h=this.chart.getElementsAtEventForMode(e,o.mode,o,s);return o.reverse&&h.reverse(),h}_positionChanged(e,t){const{caretX:s,caretY:n,options:o}=this,h=$s[o.position].call(this,e,t);return!1!==h&&(s!==h.x||n!==h.y)}}return(0,U.Z)(r,"positioners",$s),r})();var Un=Object.freeze({__proto__:null,Colors:Jr,Decimation:tn,Filler:at,Legend:os,SubTitle:An,Title:kn,Tooltip:{id:"tooltip",_element:Sn,positioners:$s,afterInit(r,i,e){e&&(r.tooltip=new Sn({chart:r,options:e}))},beforeUpdate(r,i,e){r.tooltip&&r.tooltip.initialize(e)},reset(r,i,e){r.tooltip&&r.tooltip.initialize(e)},afterDraw(r){const i=r.tooltip;if(i&&i._willRender()){const e={tooltip:i};if(!1===r.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0}))return;i.draw(r.ctx),r.notifyPlugins("afterTooltipDraw",e)}},afterEvent(r,i){r.tooltip&&r.tooltip.handleEvent(i.event,i.replay,i.inChartArea)&&(i.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(r,i)=>i.bodyFont.size,boxWidth:(r,i)=>i.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:bn},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:r=>"filter"!==r&&"itemSort"!==r&&"external"!==r,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});function yn(r){const i=this.getLabels();return r>=0&&r<i.length?i[r]:r}let Cn=(()=>{class r extends si{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const s=this.getLabels();for(const{index:n,label:o}of t)s[n]===o&&s.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if((0,u.k)(e))return null;const s=this.getLabels();return((r,i)=>null===r?null:(0,u.S)(Math.round(r),0,i))(t=isFinite(t)&&s[t]===e?t:function jn(r,i,e,t){const s=r.indexOf(i);return-1===s?((r,i,e,t)=>("string"==typeof i?(e=r.push(i)-1,t.unshift({index:e,label:i})):isNaN(i)&&(e=null),e))(r,i,e,t):s!==r.lastIndexOf(i)?e:s}(s,e,(0,u.v)(t,e),this._addedLabels),s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(s=0),t||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const e=this.min,t=this.max,s=this.options.offset,n=[];let o=this.getLabels();o=0===e&&t===o.length-1?o:o.slice(e,t+1),this._valueRange=Math.max(o.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let h=e;h<=t;h++)n.push({value:h});return n}getLabelForValue(e){return yn.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}return(0,U.Z)(r,"id","category"),(0,U.Z)(r,"defaults",{ticks:{callback:yn}}),r})();function xn(r,i,{horizontal:e,minRotation:t}){const s=(0,u.t)(t),n=(e?Math.sin(s):Math.cos(s))||.001;return Math.min(i/n,.75*i*(""+r).length)}class kr extends si{constructor(i){super(i),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(i,e){return(0,u.k)(i)||("number"==typeof i||i instanceof Number)&&!isFinite(+i)?null:+i}handleTickRangeOptions(){const{beginAtZero:i}=this.options,{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:n}=this;const o=_=>s=e?s:_,h=_=>n=t?n:_;if(i){const _=(0,u.s)(s),S=(0,u.s)(n);_<0&&S<0?h(0):_>0&&S>0&&o(0)}if(s===n){let _=0===n?1:Math.abs(.05*n);h(n+_),i||o(s-_)}this.min=s,this.max=n}getTickLimit(){const i=this.options.ticks;let s,{maxTicksLimit:e,stepSize:t}=i;return t?(s=Math.ceil(this.max/t)-Math.floor(this.min/t)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${t} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const i=this.options,e=i.ticks;let t=this.getTickLimit();t=Math.max(2,t);const o=function Vn(r,i){const e=[],{bounds:s,step:n,min:o,max:h,precision:_,count:S,maxTicks:O,maxDigits:B,includeBounds:V}=r,Z=n||1,oe=O-1,{min:ce,max:_e}=i,we=!(0,u.k)(o),be=!(0,u.k)(h),Be=!(0,u.k)(S),Ne=(_e-ce)/(B+1);let Fe,Ye,je,et,Oe=(0,u.aH)((_e-ce)/oe/Z)*Z;if(Oe<1e-14&&!we&&!be)return[{value:ce},{value:_e}];et=Math.ceil(_e/Oe)-Math.floor(ce/Oe),et>oe&&(Oe=(0,u.aH)(et*Oe/oe/Z)*Z),(0,u.k)(_)||(Fe=Math.pow(10,_),Oe=Math.ceil(Oe*Fe)/Fe),"ticks"===s?(Ye=Math.floor(ce/Oe)*Oe,je=Math.ceil(_e/Oe)*Oe):(Ye=ce,je=_e),we&&be&&n&&(0,u.aI)((h-o)/n,Oe/1e3)?(et=Math.round(Math.min((h-o)/Oe,O)),Oe=(h-o)/et,Ye=o,je=h):Be?(Ye=we?o:Ye,je=be?h:je,et=S-1,Oe=(je-Ye)/et):(et=(je-Ye)/Oe,et=(0,u.aJ)(et,Math.round(et),Oe/1e3)?Math.round(et):Math.ceil(et));const ft=Math.max((0,u.aK)(Oe),(0,u.aK)(Ye));Fe=Math.pow(10,(0,u.k)(_)?ft:_),Ye=Math.round(Ye*Fe)/Fe,je=Math.round(je*Fe)/Fe;let ut=0;for(we&&(V&&Ye!==o?(e.push({value:o}),Ye<o&&ut++,(0,u.aJ)(Math.round((Ye+ut*Oe)*Fe)/Fe,o,xn(o,Ne,r))&&ut++):Ye<o&&ut++);ut<et;++ut){const vt=Math.round((Ye+ut*Oe)*Fe)/Fe;if(be&&vt>h)break;e.push({value:vt})}return be&&V&&je!==h?e.length&&(0,u.aJ)(e[e.length-1].value,h,xn(h,Ne,r))?e[e.length-1].value=h:e.push({value:h}):(!be||je===h)&&e.push({value:je}),e}({maxTicks:t,bounds:i.bounds,min:i.min,max:i.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===i.bounds&&(0,u.aG)(o,this,"value"),i.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const i=this.ticks;let e=this.min,t=this.max;if(super.configure(),this.options.offset&&i.length){const s=(t-e)/Math.max(i.length-1,1)/2;e-=s,t+=s}this._startValue=e,this._endValue=t,this._valueRange=t-e}getLabelForValue(i){return(0,u.o)(i,this.chart.options.locale,this.options.ticks.format)}}class ln extends kr{determineDataLimits(){const{min:i,max:e}=this.getMinMax(!0);this.min=(0,u.g)(i)?i:0,this.max=(0,u.g)(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const i=this.isHorizontal(),e=i?this.width:this.height,t=(0,u.t)(this.options.ticks.minRotation),s=(i?Math.sin(t):Math.cos(t))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,n.lineHeight/s))}getPixelForValue(i){return null===i?NaN:this.getPixelForDecimal((i-this._startValue)/this._valueRange)}getValueForPixel(i){return this._startValue+this.getDecimalForPixel(i)*this._valueRange}}(0,U.Z)(ln,"id","linear"),(0,U.Z)(ln,"defaults",{ticks:{callback:u.aL.formatters.numeric}});const Si=r=>Math.floor((0,u.aM)(r)),Gi=(r,i)=>Math.pow(10,Si(r)+i);function En(r){return r/Math.pow(10,Si(r))==1}function qi(r,i,e){const t=Math.pow(10,e),s=Math.floor(r/t);return Math.ceil(i/t)-s}class z extends si{constructor(i){super(i),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(i,e){const t=kr.prototype.parse.apply(this,[i,e]);if(0!==t)return(0,u.g)(t)&&t>0?t:null;this._zero=!0}determineDataLimits(){const{min:i,max:e}=this.getMinMax(!0);this.min=(0,u.g)(i)?Math.max(0,i):null,this.max=(0,u.g)(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!(0,u.g)(this._userMin)&&(this.min=i===Gi(this.min,0)?Gi(this.min,-1):Gi(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:i,maxDefined:e}=this.getUserBounds();let t=this.min,s=this.max;const n=h=>t=i?t:h,o=h=>s=e?s:h;t===s&&(t<=0?(n(1),o(10)):(n(Gi(t,-1)),o(Gi(s,1)))),t<=0&&n(Gi(s,-1)),s<=0&&o(Gi(t,1)),this.min=t,this.max=s}buildTicks(){const i=this.options,t=function Kn(r,{min:i,max:e}){i=(0,u.O)(r.min,i);const t=[],s=Si(i);let n=function wn(r,i){let t=Si(i-r);for(;qi(r,i,t)>10;)t++;for(;qi(r,i,t)<10;)t--;return Math.min(t,Si(r))}(i,e),o=n<0?Math.pow(10,Math.abs(n)):1;const h=Math.pow(10,n),_=s>n?Math.pow(10,s):0,S=Math.round((i-_)*o)/o,O=Math.floor((i-_)/h/10)*h*10;let B=Math.floor((S-O)/Math.pow(10,n)),V=(0,u.O)(r.min,Math.round((_+O+B*Math.pow(10,n))*o)/o);for(;V<e;)t.push({value:V,major:En(V),significand:B}),B>=10?B=B<15?15:20:B++,B>=20&&(n++,B=2,o=n>=0?1:o),V=Math.round((_+O+B*Math.pow(10,n))*o)/o;const Z=(0,u.O)(r.max,V);return t.push({value:Z,major:En(Z),significand:B}),t}({min:this._userMin,max:this._userMax},this);return"ticks"===i.bounds&&(0,u.aG)(t,this,"value"),i.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(i){return void 0===i?"0":(0,u.o)(i,this.chart.options.locale,this.options.ticks.format)}configure(){const i=this.min;super.configure(),this._startValue=(0,u.aM)(i),this._valueRange=(0,u.aM)(this.max)-(0,u.aM)(i)}getPixelForValue(i){return(void 0===i||0===i)&&(i=this.min),null===i||isNaN(i)?NaN:this.getPixelForDecimal(i===this.min?0:((0,u.aM)(i)-this._startValue)/this._valueRange)}getValueForPixel(i){const e=this.getDecimalForPixel(i);return Math.pow(10,this._startValue+e*this._valueRange)}}function ne(r){const i=r.ticks;if(i.display&&r.display){const e=(0,u.E)(i.backdropPadding);return(0,u.v)(i.font&&i.font.size,u.d.font.size)+e.height}return 0}function ge(r,i,e){return e=(0,u.b)(e)?e:[e],{w:(0,u.aN)(r,i.string,e),h:e.length*i.lineHeight}}function Le(r,i,e,t,s){return r===t||r===s?{start:i-e/2,end:i+e/2}:r<t||r>s?{start:i-e,end:i}:{start:i,end:i+e}}function St(r,i,e,t,s){const n=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let h=0,_=0;t.start<i.l?(h=(i.l-t.start)/n,r.l=Math.min(r.l,i.l-h)):t.end>i.r&&(h=(t.end-i.r)/n,r.r=Math.max(r.r,i.r+h)),s.start<i.t?(_=(i.t-s.start)/o,r.t=Math.min(r.t,i.t-_)):s.end>i.b&&(_=(s.end-i.b)/o,r.b=Math.max(r.b,i.b+_))}function mt(r,i,e){const t=r.drawingArea,{extra:s,additionalAngle:n,padding:o,size:h}=e,_=r.getPointPosition(i,t+s+o,n),S=Math.round((0,u.U)((0,u.ay)(_.angle+u.H))),O=function Ys(r,i,e){return 90===e||270===e?r-=i/2:(e>270||e<90)&&(r-=i),r}(_.y,h.h,S),B=function yi(r){return 0===r||180===r?"center":r<180?"left":"right"}(S),V=function _i(r,i,e){return"right"===e?r-=i:"center"===e&&(r-=i/2),r}(_.x,h.w,B);return{visible:!0,x:_.x,y:O,textAlign:B,left:V,top:O,right:V+h.w,bottom:O+h.h}}function gt(r,i){if(!i)return!0;const{left:e,top:t,right:s,bottom:n}=r;return!((0,u.C)({x:e,y:t},i)||(0,u.C)({x:e,y:n},i)||(0,u.C)({x:s,y:t},i)||(0,u.C)({x:s,y:n},i))}function cn(r,i,e){const{left:t,top:s,right:n,bottom:o}=e,{backdropColor:h}=i;if(!(0,u.k)(h)){const _=(0,u.aw)(i.borderRadius),S=(0,u.E)(i.backdropPadding);r.fillStyle=h;const O=t-S.left,B=s-S.top,V=n-t+S.width,Z=o-s+S.height;Object.values(_).some(oe=>0!==oe)?(r.beginPath(),(0,u.au)(r,{x:O,y:B,w:V,h:Z,radius:_}),r.fill()):r.fillRect(O,B,V,Z)}}function dn(r,i,e,t){const{ctx:s}=r;if(e)s.arc(r.xCenter,r.yCenter,i,0,u.T);else{let n=r.getPointPosition(0,i);s.moveTo(n.x,n.y);for(let o=1;o<t;o++)n=r.getPointPosition(o,i),s.lineTo(n.x,n.y)}}(0,U.Z)(z,"id","logarithmic"),(0,U.Z)(z,"defaults",{ticks:{callback:u.aL.formatters.logarithmic,major:{enabled:!0}}});class un extends kr{constructor(i){super(i),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const i=this._padding=(0,u.E)(ne(this.options)/2),e=this.width=this.maxWidth-i.width,t=this.height=this.maxHeight-i.height;this.xCenter=Math.floor(this.left+e/2+i.left),this.yCenter=Math.floor(this.top+t/2+i.top),this.drawingArea=Math.floor(Math.min(e,t)/2)}determineDataLimits(){const{min:i,max:e}=this.getMinMax(!1);this.min=(0,u.g)(i)&&!isNaN(i)?i:0,this.max=(0,u.g)(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ne(this.options))}generateTickLabels(i){kr.prototype.generateTickLabels.call(this,i),this._pointLabels=this.getLabels().map((e,t)=>{const s=(0,u.Q)(this.options.pointLabels.callback,[e,t],this);return s||0===s?s:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const i=this.options;i.display&&i.pointLabels.display?function lt(r){const i={l:r.left+r._padding.left,r:r.right-r._padding.right,t:r.top+r._padding.top,b:r.bottom-r._padding.bottom},e=Object.assign({},i),t=[],s=[],n=r._pointLabels.length,o=r.options.pointLabels,h=o.centerPointLabels?u.P/n:0;for(let _=0;_<n;_++){const S=o.setContext(r.getPointLabelContext(_));s[_]=S.padding;const O=r.getPointPosition(_,r.drawingArea+s[_],h),B=(0,u.a0)(S.font),V=ge(r.ctx,B,r._pointLabels[_]);t[_]=V;const Z=(0,u.ay)(r.getIndexAngle(_)+h),oe=Math.round((0,u.U)(Z));St(e,i,Z,Le(oe,O.x,V.w,0,180),Le(oe,O.y,V.h,90,270))}r.setCenterPoint(i.l-e.l,e.r-i.r,i.t-e.t,e.b-i.b),r._pointLabelItems=function Rt(r,i,e){const t=[],s=r._pointLabels.length,n=r.options,{centerPointLabels:o,display:h}=n.pointLabels,_={extra:ne(n)/2,additionalAngle:o?u.P/s:0};let S;for(let O=0;O<s;O++){_.padding=e[O],_.size=i[O];const B=mt(r,O,_);t.push(B),"auto"===h&&(B.visible=gt(B,S),B.visible&&(S=B))}return t}(r,t,s)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(i,e,t,s){this.xCenter+=Math.floor((i-e)/2),this.yCenter+=Math.floor((t-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(i,e,t,s))}getIndexAngle(i){return(0,u.ay)(i*(u.T/(this._pointLabels.length||1))+(0,u.t)(this.options.startAngle||0))}getDistanceFromCenterForValue(i){if((0,u.k)(i))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-i)*e:(i-this.min)*e}getValueForDistanceFromCenter(i){if((0,u.k)(i))return NaN;const e=i/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(i){const e=this._pointLabels||[];if(i>=0&&i<e.length){const t=e[i];return function io(r,i,e){return(0,u.j)(r,{label:e,index:i,type:"pointLabel"})}(this.getContext(),i,t)}}getPointPosition(i,e,t=0){const s=this.getIndexAngle(i)-u.H+t;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(i,e){return this.getPointPosition(i,this.getDistanceFromCenterForValue(e))}getBasePosition(i){return this.getPointPositionForValue(i||0,this.getBaseValue())}getPointLabelPosition(i){const{left:e,top:t,right:s,bottom:n}=this._pointLabelItems[i];return{left:e,top:t,right:s,bottom:n}}drawBackground(){const{backgroundColor:i,grid:{circular:e}}=this.options;if(i){const t=this.ctx;t.save(),t.beginPath(),dn(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),t.closePath(),t.fillStyle=i,t.fill(),t.restore()}}drawGrid(){const i=this.ctx,e=this.options,{angleLines:t,grid:s,border:n}=e,o=this._pointLabels.length;let h,_,S;if(e.pointLabels.display&&function hn(r,i){const{ctx:e,options:{pointLabels:t}}=r;for(let s=i-1;s>=0;s--){const n=r._pointLabelItems[s];if(!n.visible)continue;const o=t.setContext(r.getPointLabelContext(s));cn(e,o,n);const h=(0,u.a0)(o.font),{x:_,y:S,textAlign:O}=n;(0,u.Z)(e,r._pointLabels[s],_,S+h.lineHeight/2,h,{color:o.color,textAlign:O,textBaseline:"middle"})}}(this,o),s.display&&this.ticks.forEach((O,B)=>{if(0!==B){_=this.getDistanceFromCenterForValue(O.value);const V=this.getContext(B),Z=s.setContext(V),oe=n.setContext(V);!function to(r,i,e,t,s){const n=r.ctx,o=i.circular,{color:h,lineWidth:_}=i;!o&&!t||!h||!_||e<0||(n.save(),n.strokeStyle=h,n.lineWidth=_,n.setLineDash(s.dash),n.lineDashOffset=s.dashOffset,n.beginPath(),dn(r,e,o,t),n.closePath(),n.stroke(),n.restore())}(this,Z,_,o,oe)}}),t.display){for(i.save(),h=o-1;h>=0;h--){const O=t.setContext(this.getPointLabelContext(h)),{color:B,lineWidth:V}=O;!V||!B||(i.lineWidth=V,i.strokeStyle=B,i.setLineDash(O.borderDash),i.lineDashOffset=O.borderDashOffset,_=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),S=this.getPointPosition(h,_),i.beginPath(),i.moveTo(this.xCenter,this.yCenter),i.lineTo(S.x,S.y),i.stroke())}i.restore()}}drawBorder(){}drawLabels(){const i=this.ctx,e=this.options,t=e.ticks;if(!t.display)return;const s=this.getIndexAngle(0);let n,o;i.save(),i.translate(this.xCenter,this.yCenter),i.rotate(s),i.textAlign="center",i.textBaseline="middle",this.ticks.forEach((h,_)=>{if(0===_&&!e.reverse)return;const S=t.setContext(this.getContext(_)),O=(0,u.a0)(S.font);if(n=this.getDistanceFromCenterForValue(this.ticks[_].value),S.showLabelBackdrop){i.font=O.string,o=i.measureText(h.label).width,i.fillStyle=S.backdropColor;const B=(0,u.E)(S.backdropPadding);i.fillRect(-o/2-B.left,-n-O.size/2-B.top,o+B.width,O.size+B.height)}(0,u.Z)(i,h.label,0,-n,O,{color:S.color,strokeColor:S.textStrokeColor,strokeWidth:S.textStrokeWidth})}),i.restore()}drawTitle(){}}(0,U.Z)(un,"id","radialLinear"),(0,U.Z)(un,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:u.aL.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:r=>r,padding:5,centerPointLabels:!1}}),(0,U.Z)(un,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,U.Z)(un,"descriptors",{angleLines:{_fallback:"grid"}});const Tn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ci=Object.keys(Tn);function Xn(r,i){return r-i}function Gn(r,i){if((0,u.k)(i))return null;const e=r._adapter,{parser:t,round:s,isoWeekday:n}=r._parseOpts;let o=i;return"function"==typeof t&&(o=t(o)),(0,u.g)(o)||(o="string"==typeof t?e.parse(o,t):e.parse(o)),null===o?null:(s&&(o="week"!==s||!(0,u.x)(n)&&!0!==n?e.startOf(o,s):e.startOf(o,"isoWeek",n)),+o)}function qn(r,i,e,t){const s=Ci.length;for(let n=Ci.indexOf(r);n<s-1;++n){const o=Tn[Ci[n]];if(o.common&&Math.ceil((e-i)/((o.steps?o.steps:Number.MAX_SAFE_INTEGER)*o.size))<=t)return Ci[n]}return Ci[s-1]}function Qn(r,i,e){if(e){if(e.length){const{lo:t,hi:s}=(0,u.aP)(e,i);r[e[t]>=i?e[t]:e[s]]=!0}}else r[i]=!0}function Jn(r,i,e){const t=[],s={},n=i.length;let o,h;for(o=0;o<n;++o)h=i[o],s[h]=o,t.push({value:h,major:!1});return 0!==n&&e?function no(r,i,e,t){const s=r._adapter,n=+s.startOf(i[0].value,t),o=i[i.length-1].value;let h,_;for(h=n;h<=o;h=+s.add(h,1,t))_=e[h],_>=0&&(i[_].major=!0);return i}(r,t,s,e):t}let $n=(()=>{class r extends si{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const s=e.time||(e.time={}),n=this._adapter=new ct__date(e.adapters.date);n.init(t),(0,u.ab)(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Gn(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:n,max:o,minDefined:h,maxDefined:_}=this.getUserBounds();function S(O){!h&&!isNaN(O.min)&&(n=Math.min(n,O.min)),!_&&!isNaN(O.max)&&(o=Math.max(o,O.max))}(!h||!_)&&(S(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&S(this.getMinMax(!1))),n=(0,u.g)(n)&&!isNaN(n)?n:+t.startOf(Date.now(),s),o=(0,u.g)(o)&&!isNaN(o)?o:+t.endOf(Date.now(),s)+1,this.min=Math.min(n,o-1),this.max=Math.max(n+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,n="labels"===s.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const o=this.min,_=(0,u.aO)(n,o,this.max);return this._unit=t.unit||(s.autoSkip?qn(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):function so(r,i,e,t,s){for(let n=Ci.length-1;n>=Ci.indexOf(e);n--){const o=Ci[n];if(Tn[o].common&&r._adapter.diff(s,t,o)>=i-1)return o}return Ci[e?Ci.indexOf(e):0]}(this,_.length,t.minUnit,this.min,this.max)),this._majorUnit=s.major.enabled&&"year"!==this._unit?function ro(r){for(let i=Ci.indexOf(r)+1,e=Ci.length;i<e;++i)if(Tn[Ci[i]].common)return Ci[i]}(this._unit):void 0,this.initOffsets(n),e.reverse&&_.reverse(),Jn(this,_,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n,o,t=0,s=0;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),t=1===e.length?1-n:(this.getDecimalForValue(e[1])-n)/2,o=this.getDecimalForValue(e[e.length-1]),s=1===e.length?o:(o-this.getDecimalForValue(e[e.length-2]))/2);const h=e.length<3?.5:.25;t=(0,u.S)(t,0,h),s=(0,u.S)(s,0,h),this._offsets={start:t,end:s,factor:1/(t+1+s)}}_generate(){const e=this._adapter,t=this.min,s=this.max,n=this.options,o=n.time,h=o.unit||qn(o.minUnit,t,s,this._getLabelCapacity(t)),_=(0,u.v)(n.ticks.stepSize,1),S="week"===h&&o.isoWeekday,O=(0,u.x)(S)||!0===S,B={};let Z,oe,V=t;if(O&&(V=+e.startOf(V,"isoWeek",S)),V=+e.startOf(V,O?"day":h),e.diff(s,t,h)>1e5*_)throw new Error(t+" and "+s+" are too far apart with stepSize of "+_+" "+h);const ce="data"===n.ticks.source&&this.getDataTimestamps();for(Z=V,oe=0;Z<s;Z=+e.add(Z,_,h),oe++)Qn(B,Z,ce);return(Z===s||"ticks"===n.bounds||1===oe)&&Qn(B,Z,ce),Object.keys(B).sort(Xn).map(_e=>+_e)}getLabelForValue(e){const s=this.options.time;return this._adapter.format(e,s.tooltipFormat?s.tooltipFormat:s.displayFormats.datetime)}format(e,t){return this._adapter.format(e,t||this.options.time.displayFormats[this._unit])}_tickFormatFunction(e,t,s,n){const o=this.options,h=o.ticks.callback;if(h)return(0,u.Q)(h,[e,t,s],this);const _=o.time.displayFormats,S=this._unit,O=this._majorUnit,V=O&&_[O],Z=s[t];return this._adapter.format(e,n||(O&&V&&Z&&Z.major?V:S&&_[S]))}generateTickLabels(e){let t,s,n;for(t=0,s=e.length;t<s;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,n=(0,u.t)(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(n),h=Math.sin(n),_=this._resolveTickFontOptions(0).size;return{w:s*o+_*h,h:s*h+_*o}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,n=s[t.unit]||s.millisecond,o=this._tickFormatFunction(e,0,Jn(this,[e],this._majorUnit),n),h=this._getLabelSize(o),_=Math.floor(this.isHorizontal()?this.width/h.w:this.height/h.h)-1;return _>0?_:1}getDataTimestamps(){let t,s,e=this._cache.data||[];if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,s=n.length;t<s;++t)e=e.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const n=this.getLabels();for(t=0,s=n.length;t<s;++t)e.push(Gn(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return(0,u._)(e.sort(Xn))}}return(0,U.Z)(r,"id","time"),(0,U.Z)(r,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}}),r})();function Mn(r,i,e){let n,o,h,_,t=0,s=r.length-1;e?(i>=r[t].pos&&i<=r[s].pos&&({lo:t,hi:s}=(0,u.B)(r,"pos",i)),({pos:n,time:h}=r[t]),({pos:o,time:_}=r[s])):(i>=r[t].time&&i<=r[s].time&&({lo:t,hi:s}=(0,u.B)(r,"time",i)),({time:n,pos:h}=r[t]),({time:o,pos:_}=r[s]));const S=o-n;return S?h+(_-h)*(i-n)/S:h}class Yn extends $n{constructor(i){super(i),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const i=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(i);this._minPos=Mn(e,this.min),this._tableRange=Mn(e,this.max)-this._minPos,super.initOffsets(i)}buildLookupTable(i){const{min:e,max:t}=this,s=[],n=[];let o,h,_,S,O;for(o=0,h=i.length;o<h;++o)S=i[o],S>=e&&S<=t&&s.push(S);if(s.length<2)return[{time:e,pos:0},{time:t,pos:1}];for(o=0,h=s.length;o<h;++o)O=s[o+1],_=s[o-1],S=s[o],Math.round((O+_)/2)!==S&&n.push({time:S,pos:o/(h-1)});return n}_generate(){const i=this.min,e=this.max;let t=super.getDataTimestamps();return(!t.includes(i)||!t.length)&&t.splice(0,0,i),(!t.includes(e)||1===t.length)&&t.push(e),t.sort((s,n)=>s-n)}_getTimestampsForTable(){let i=this._cache.all||[];if(i.length)return i;const e=this.getDataTimestamps(),t=this.getLabelTimestamps();return i=e.length&&t.length?this.normalize(e.concat(t)):e.length?e:t,i=this._cache.all=i,i}getDecimalForValue(i){return(Mn(this._table,i)-this._minPos)/this._tableRange}getValueForPixel(i){const e=this._offsets,t=this.getDecimalForPixel(i)/e.factor-e.end;return Mn(this._table,t*this._tableRange+this._minPos,!0)}}(0,U.Z)(Yn,"id","timeseries"),(0,U.Z)(Yn,"defaults",$n.defaults);const ao=[dt,Zr,Un,Object.freeze({__proto__:null,CategoryScale:Cn,LinearScale:ln,LogarithmicScale:z,RadialLinearScale:un,TimeScale:$n,TimeSeriesScale:Yn})]},8137:(Ct,qe,se)=>{"use strict";function U(a){return a+.5|0}se.d(qe,{$:()=>ws,A:()=>Pt,B:()=>st,C:()=>us,D:()=>$,E:()=>ar,F:()=>Zt,G:()=>qr,H:()=>jt,I:()=>pr,J:()=>Jr,K:()=>Qr,L:()=>Xt,M:()=>_r,N:()=>ts,O:()=>Wt,P:()=>kt,Q:()=>ct,R:()=>Hr,S:()=>Me,T:()=>Yt,U:()=>Pi,V:()=>Es,W:()=>Xe,X:()=>Rr,Y:()=>er,Z:()=>Br,_:()=>ti,a:()=>Ms,a0:()=>Fr,a1:()=>Cs,a2:()=>hs,a3:()=>ht,a4:()=>Ut,a5:()=>Ni,a6:()=>Tt,a7:()=>Ei,a8:()=>Ki,a9:()=>Ds,aA:()=>sn,aB:()=>ji,aC:()=>zs,aD:()=>Js,aE:()=>q,aF:()=>nt,aG:()=>oi,aH:()=>Ot,aI:()=>zi,aJ:()=>Ht,aK:()=>W,aL:()=>Pe,aM:()=>ei,aN:()=>Lr,aO:()=>Et,aP:()=>it,aa:()=>lr,ab:()=>pt,ac:()=>Te,ad:()=>ui,ae:()=>vr,af:()=>qs,ag:()=>ki,ah:()=>Qt,ai:()=>Wi,aj:()=>ot,ak:()=>Ts,al:()=>Ws,am:()=>xr,an:()=>As,ao:()=>en,ap:()=>br,aq:()=>Yi,ar:()=>fs,as:()=>pn,at:()=>Qs,au:()=>sr,av:()=>ps,aw:()=>Rs,ax:()=>js,ay:()=>pe,az:()=>tn,b:()=>Je,c:()=>Ti,d:()=>Gs,e:()=>Ii,f:()=>di,g:()=>_t,h:()=>es,i:()=>tt,j:()=>gs,k:()=>Ae,l:()=>It,m:()=>bt,n:()=>zt,o:()=>j,p:()=>Ee,q:()=>Gt,r:()=>Li,s:()=>Ui,t:()=>cs,u:()=>ai,v:()=>dt,w:()=>fi,x:()=>ls,y:()=>jr,z:()=>Xr});const u=(a,p,x)=>Math.max(Math.min(a,x),p);function he(a){return u(U(2.55*a),0,255)}function v(a){return u(U(255*a),0,255)}function y(a){return u(U(a/2.55)/100,0,1)}function T(a){return u(U(100*a),0,100)}const m={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},w=[..."0123456789ABCDEF"],D=a=>w[15&a],L=a=>w[(240&a)>>4]+w[15&a],M=a=>(240&a)>>4==(15&a);const b=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function E(a,p,x){const k=p*Math.min(x,1-x),H=(Y,ee=(Y+a/30)%12)=>x-k*Math.max(Math.min(ee-3,9-ee,1),-1);return[H(0),H(8),H(4)]}function A(a,p,x){const k=(H,Y=(H+a/60)%6)=>x-x*p*Math.max(Math.min(Y,4-Y,1),0);return[k(5),k(3),k(1)]}function R(a,p,x){const k=E(a,1,.5);let H;for(p+x>1&&(H=1/(p+x),p*=H,x*=H),H=0;H<3;H++)k[H]*=1-p-x,k[H]+=p;return k}function P(a){const x=a.r/255,k=a.g/255,H=a.b/255,Y=Math.max(x,k,H),ee=Math.min(x,k,H),ae=(Y+ee)/2;let ue,xe,Ie;return Y!==ee&&(Ie=Y-ee,xe=ae>.5?Ie/(2-Y-ee):Ie/(Y+ee),ue=function C(a,p,x,k,H){return a===H?(p-x)/k+(p<x?6:0):p===H?(x-a)/k+2:(a-p)/k+4}(x,k,H,Ie,Y),ue=60*ue+.5),[0|ue,xe||0,ae]}function K(a,p,x,k){return(Array.isArray(p)?a(p[0],p[1],p[2]):a(p,x,k)).map(v)}function ie(a,p,x){return K(E,a,p,x)}function me(a){return(a%360+360)%360}const N={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},G={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let re;const He=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,Ke=a=>a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055,I=a=>a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4);function Se(a,p,x){if(a){let k=P(a);k[p]=Math.max(0,Math.min(k[p]+k[p]*x,0===p?360:1)),k=ie(k),a.r=k[0],a.g=k[1],a.b=k[2]}}function ye(a,p){return a&&Object.assign(p||{},a)}function $e(a){var p={r:0,g:0,b:0,a:255};return Array.isArray(a)?a.length>=3&&(p={r:a[0],g:a[1],b:a[2],a:255},a.length>3&&(p.a=v(a[3]))):(p=ye(a,{r:0,g:0,b:0,a:1})).a=v(p.a),p}function ze(a){return"r"===a.charAt(0)?function We(a){const p=He.exec(a);let k,H,Y,x=255;if(p){if(p[7]!==k){const ee=+p[7];x=p[8]?he(ee):u(255*ee,0,255)}return k=+p[1],H=+p[3],Y=+p[5],k=255&(p[2]?he(k):u(k,0,255)),H=255&(p[4]?he(H):u(H,0,255)),Y=255&(p[6]?he(Y):u(Y,0,255)),{r:k,g:H,b:Y,a:x}}}(a):function ve(a){const p=b.exec(a);let k,x=255;if(!p)return;p[5]!==k&&(x=p[6]?he(+p[5]):v(+p[5]));const H=me(+p[2]),Y=+p[3]/100,ee=+p[4]/100;return k="hwb"===p[1]?function X(a,p,x){return K(R,a,p,x)}(H,Y,ee):"hsv"===p[1]?function J(a,p,x){return K(A,a,p,x)}(H,Y,ee):ie(H,Y,ee),{r:k[0],g:k[1],b:k[2],a:x}}(a)}class Ze{constructor(p){if(p instanceof Ze)return p;const x=typeof p;let k;"object"===x?k=$e(p):"string"===x&&(k=function f(a){var x,p=a.length;return"#"===a[0]&&(4===p||5===p?x={r:255&17*m[a[1]],g:255&17*m[a[2]],b:255&17*m[a[3]],a:5===p?17*m[a[4]]:255}:(7===p||9===p)&&(x={r:m[a[1]]<<4|m[a[2]],g:m[a[3]]<<4|m[a[4]],b:m[a[5]]<<4|m[a[6]],a:9===p?m[a[7]]<<4|m[a[8]]:255})),x}(p)||function ke(a){re||(re=function Q(){const a={},p=Object.keys(G),x=Object.keys(N);let k,H,Y,ee,ae;for(k=0;k<p.length;k++){for(ee=ae=p[k],H=0;H<x.length;H++)Y=x[H],ae=ae.replace(Y,N[Y]);Y=parseInt(G[ee],16),a[ae]=[Y>>16&255,Y>>8&255,255&Y]}return a}(),re.transparent=[0,0,0,0]);const p=re[a.toLowerCase()];return p&&{r:p[0],g:p[1],b:p[2],a:4===p.length?p[3]:255}}(p)||ze(p)),this._rgb=k,this._valid=!!k}get valid(){return this._valid}get rgb(){var p=ye(this._rgb);return p&&(p.a=y(p.a)),p}set rgb(p){this._rgb=$e(p)}rgbString(){return this._valid?function Re(a){return a&&(a.a<255?`rgba(${a.r}, ${a.g}, ${a.b}, ${y(a.a)})`:`rgb(${a.r}, ${a.g}, ${a.b})`)}(this._rgb):void 0}hexString(){return this._valid?function d(a){var p=(a=>M(a.r)&&M(a.g)&&M(a.b)&&M(a.a))(a)?D:L;return a?"#"+p(a.r)+p(a.g)+p(a.b)+((a,p)=>a<255?p(a):"")(a.a,p):void 0}(this._rgb):void 0}hslString(){return this._valid?function Ce(a){if(!a)return;const p=P(a),x=p[0],k=T(p[1]),H=T(p[2]);return a.a<255?`hsla(${x}, ${k}%, ${H}%, ${y(a.a)})`:`hsl(${x}, ${k}%, ${H}%)`}(this._rgb):void 0}mix(p,x){if(p){const k=this.rgb,H=p.rgb;let Y;const ee=x===Y?.5:x,ae=2*ee-1,ue=k.a-H.a,xe=((ae*ue==-1?ae:(ae+ue)/(1+ae*ue))+1)/2;Y=1-xe,k.r=255&xe*k.r+Y*H.r+.5,k.g=255&xe*k.g+Y*H.g+.5,k.b=255&xe*k.b+Y*H.b+.5,k.a=ee*k.a+(1-ee)*H.a,this.rgb=k}return this}interpolate(p,x){return p&&(this._rgb=function le(a,p,x){const k=I(y(a.r)),H=I(y(a.g)),Y=I(y(a.b));return{r:v(Ke(k+x*(I(y(p.r))-k))),g:v(Ke(H+x*(I(y(p.g))-H))),b:v(Ke(Y+x*(I(y(p.b))-Y))),a:a.a+x*(p.a-a.a)}}(this._rgb,p._rgb,x)),this}clone(){return new Ze(this.rgb)}alpha(p){return this._rgb.a=v(p),this}clearer(p){return this._rgb.a*=1-p,this}greyscale(){const p=this._rgb,x=U(.3*p.r+.59*p.g+.11*p.b);return p.r=p.g=p.b=x,this}opaquer(p){return this._rgb.a*=1+p,this}negate(){const p=this._rgb;return p.r=255-p.r,p.g=255-p.g,p.b=255-p.b,this}lighten(p){return Se(this._rgb,2,p),this}darken(p){return Se(this._rgb,2,-p),this}saturate(p){return Se(this._rgb,1,p),this}desaturate(p){return Se(this._rgb,1,-p),this}rotate(p){return function De(a,p){var x=P(a);x[0]=me(x[0]+p),x=ie(x),a.r=x[0],a.g=x[1],a.b=x[2]}(this._rgb,p),this}}function nt(){}const Te=(()=>{let a=0;return()=>a++})();function Ae(a){return null===a||typeof a>"u"}function Je(a){if(Array.isArray&&Array.isArray(a))return!0;const p=Object.prototype.toString.call(a);return"[object"===p.slice(0,7)&&"Array]"===p.slice(-6)}function tt(a){return null!==a&&"[object Object]"===Object.prototype.toString.call(a)}function _t(a){return("number"==typeof a||a instanceof Number)&&isFinite(+a)}function Wt(a,p){return _t(a)?a:p}function dt(a,p){return typeof a>"u"?p:a}const bt=(a,p)=>"string"==typeof a&&a.endsWith("%")?parseFloat(a)/100:+a/p,zt=(a,p)=>"string"==typeof a&&a.endsWith("%")?parseFloat(a)/100*p:+a;function ct(a,p,x){if(a&&"function"==typeof a.call)return a.apply(x,p)}function Zt(a,p,x,k){let H,Y,ee;if(Je(a))if(Y=a.length,k)for(H=Y-1;H>=0;H--)p.call(x,a[H],H);else for(H=0;H<Y;H++)p.call(x,a[H],H);else if(tt(a))for(ee=Object.keys(a),Y=ee.length,H=0;H<Y;H++)p.call(x,a[ee[H]],ee[H])}function Qt(a,p){let x,k,H,Y;if(!a||!p||a.length!==p.length)return!1;for(x=0,k=a.length;x<k;++x)if(H=a[x],Y=p[x],H.datasetIndex!==Y.datasetIndex||H.index!==Y.index)return!1;return!0}function Ft(a){if(Je(a))return a.map(Ft);if(tt(a)){const p=Object.create(null),x=Object.keys(a),k=x.length;let H=0;for(;H<k;++H)p[x[H]]=Ft(a[x[H]]);return p}return a}function Jt(a){return-1===["__proto__","prototype","constructor"].indexOf(a)}function $t(a,p,x,k){if(!Jt(a))return;const H=p[a],Y=x[a];tt(H)&&tt(Y)?Ut(H,Y,k):p[a]=Ft(Y)}function Ut(a,p,x){const k=Je(p)?p:[p],H=k.length;if(!tt(a))return a;const Y=(x=x||{}).merger||$t;let ee;for(let ae=0;ae<H;++ae){if(ee=k[ae],!tt(ee))continue;const ue=Object.keys(ee);for(let xe=0,Ie=ue.length;xe<Ie;++xe)Y(ue[xe],a,ee,x)}return a}function pt(a,p){return Ut(a,p,{merger:xi})}function xi(a,p,x){if(!Jt(a))return;const k=p[a],H=x[a];tt(k)&&tt(H)?pt(k,H):Object.prototype.hasOwnProperty.call(p,a)||(p[a]=Ft(H))}const pi={"":a=>a,x:a=>a.x,y:a=>a.y};function di(a,p){return(pi[p]||(pi[p]=function Ji(a){const p=function hi(a){const p=a.split("."),x=[];let k="";for(const H of p)k+=H,k.endsWith("\\")?k=k.slice(0,-1)+".":(x.push(k),k="");return x}(a);return x=>{for(const k of p){if(""===k)break;x=x&&x[k]}return x}}(p)))(a)}function Ni(a){return a.charAt(0).toUpperCase()+a.slice(1)}const es=a=>typeof a<"u",Ei=a=>"function"==typeof a,ki=(a,p)=>{if(a.size!==p.size)return!1;for(const x of a)if(!p.has(x))return!1;return!0};function Wi(a){return"mouseup"===a.type||"click"===a.type||"contextmenu"===a.type}const kt=Math.PI,Yt=2*kt,Ai=Yt+kt,gi=Number.POSITIVE_INFINITY,wi=kt/180,jt=kt/2,Vt=kt/4,At=2*kt/3,ei=Math.log10,Ui=Math.sign;function Ht(a,p,x){return Math.abs(a-p)<x}function Ot(a){const p=Math.round(a);a=Ht(a,p,a/1e3)?p:a;const x=Math.pow(10,Math.floor(ei(a))),k=a/x;return(k<=1?1:k<=2?2:k<=5?5:10)*x}function ts(a){const p=[],x=Math.sqrt(a);let k;for(k=1;k<x;k++)a%k==0&&(p.push(k),p.push(a/k));return x===(0|x)&&p.push(x),p.sort((H,Y)=>H-Y).pop(),p}function ls(a){return!isNaN(parseFloat(a))&&isFinite(a)}function zi(a,p){const x=Math.round(a);return x-p<=a&&x+p>=a}function oi(a,p,x){let k,H,Y;for(k=0,H=a.length;k<H;k++)Y=a[k][x],isNaN(Y)||(p.min=Math.min(p.min,Y),p.max=Math.max(p.max,Y))}function cs(a){return a*(kt/180)}function Pi(a){return a*(180/kt)}function W(a){if(!_t(a))return;let p=1,x=0;for(;Math.round(a*p)/p!==a;)p*=10,x++;return x}function $(a,p){const x=p.x-a.x,k=p.y-a.y,H=Math.sqrt(x*x+k*k);let Y=Math.atan2(k,x);return Y<-.5*kt&&(Y+=Yt),{angle:Y,distance:H}}function q(a,p){return Math.sqrt(Math.pow(p.x-a.x,2)+Math.pow(p.y-a.y,2))}function de(a,p){return(a-p+Ai)%Yt-kt}function pe(a){return(a%Yt+Yt)%Yt}function Ee(a,p,x,k){const H=pe(a),Y=pe(p),ee=pe(x),ae=pe(Y-H),ue=pe(ee-H),xe=pe(H-Y),Ie=pe(H-ee);return H===Y||H===ee||k&&Y===ee||ae>ue&&xe<Ie}function Me(a,p,x){return Math.max(p,Math.min(x,a))}function Xe(a){return Me(a,-32768,32767)}function ot(a,p,x,k=1e-6){return a>=Math.min(p,x)-k&&a<=Math.max(p,x)+k}function it(a,p,x){x=x||(ee=>a[ee]<p);let Y,k=a.length-1,H=0;for(;k-H>1;)Y=H+k>>1,x(Y)?H=Y:k=Y;return{lo:H,hi:k}}const st=(a,p,x,k)=>it(a,x,k?H=>{const Y=a[H][p];return Y<x||Y===x&&a[H+1][p]===x}:H=>a[H][p]<x),Pt=(a,p,x)=>it(a,x,k=>a[k][p]>=x);function Et(a,p,x){let k=0,H=a.length;for(;k<H&&a[k]<p;)k++;for(;H>k&&a[H-1]>x;)H--;return k>0||H<a.length?a.slice(k,H):a}const xt=["push","pop","shift","splice","unshift"];function It(a,p){a._chartjs?a._chartjs.listeners.push(p):(Object.defineProperty(a,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[p]}}),xt.forEach(x=>{const k="_onData"+Ni(x),H=a[x];Object.defineProperty(a,x,{configurable:!0,enumerable:!1,value(...Y){const ee=H.apply(this,Y);return a._chartjs.listeners.forEach(ae=>{"function"==typeof ae[k]&&ae[k](...Y)}),ee}})}))}function ai(a,p){const x=a._chartjs;if(!x)return;const k=x.listeners,H=k.indexOf(p);-1!==H&&k.splice(H,1),!(k.length>0)&&(xt.forEach(Y=>{delete a[Y]}),delete a._chartjs)}function ti(a){const p=new Set(a);return p.size===a.length?a:Array.from(p)}const Li=typeof window>"u"?function(a){return a()}:window.requestAnimationFrame;function Xt(a,p){let x=[],k=!1;return function(...H){x=H,k||(k=!0,Li.call(window,()=>{k=!1,a.apply(p,x)}))}}function ui(a,p){let x;return function(...k){return p?(clearTimeout(x),x=setTimeout(a,p,k)):a.apply(this,k),p}}const Cs=a=>"start"===a?"left":"end"===a?"right":"center",hs=(a,p,x)=>"start"===a?p:"end"===a?x:(p+x)/2,ji=(a,p,x,k)=>a===(k?"left":"right")?x:"center"===a?(p+x)/2:p;function Gt(a,p,x){const k=p.length;let H=0,Y=k;if(a._sorted){const{iScale:ee,_parsed:ae}=a,ue=ee.axis,{min:xe,max:Ie,minDefined:Qe,maxDefined:rt}=ee.getUserBounds();Qe&&(H=Me(Math.min(st(ae,ue,xe).lo,x?k:st(p,ue,ee.getPixelForValue(xe)).lo),0,k-1)),Y=rt?Me(Math.max(st(ae,ee.axis,Ie,!0).hi+1,x?0:st(p,ue,ee.getPixelForValue(Ie),!0).hi+1),H,k)-H:k-H}return{start:H,count:Y}}function fi(a){const{xScale:p,yScale:x,_scaleRanges:k}=a,H={xmin:p.min,xmax:p.max,ymin:x.min,ymax:x.max};if(!k)return a._scaleRanges=H,!0;const Y=k.xmin!==p.min||k.xmax!==p.max||k.ymin!==x.min||k.ymax!==x.max;return Object.assign(k,H),Y}const Ri=a=>0===a||1===a,vi=(a,p,x)=>-Math.pow(2,10*(a-=1))*Math.sin((a-p)*Yt/x),Vi=(a,p,x)=>Math.pow(2,-10*a)*Math.sin((a-p)*Yt/x)+1,Ii={linear:a=>a,easeInQuad:a=>a*a,easeOutQuad:a=>-a*(a-2),easeInOutQuad:a=>(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1),easeInCubic:a=>a*a*a,easeOutCubic:a=>(a-=1)*a*a+1,easeInOutCubic:a=>(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2),easeInQuart:a=>a*a*a*a,easeOutQuart:a=>-((a-=1)*a*a*a-1),easeInOutQuart:a=>(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2),easeInQuint:a=>a*a*a*a*a,easeOutQuint:a=>(a-=1)*a*a*a*a+1,easeInOutQuint:a=>(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2),easeInSine:a=>1-Math.cos(a*jt),easeOutSine:a=>Math.sin(a*jt),easeInOutSine:a=>-.5*(Math.cos(kt*a)-1),easeInExpo:a=>0===a?0:Math.pow(2,10*(a-1)),easeOutExpo:a=>1===a?1:1-Math.pow(2,-10*a),easeInOutExpo:a=>Ri(a)?a:a<.5?.5*Math.pow(2,10*(2*a-1)):.5*(2-Math.pow(2,-10*(2*a-1))),easeInCirc:a=>a>=1?a:-(Math.sqrt(1-a*a)-1),easeOutCirc:a=>Math.sqrt(1-(a-=1)*a),easeInOutCirc:a=>(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1),easeInElastic:a=>Ri(a)?a:vi(a,.075,.3),easeOutElastic:a=>Ri(a)?a:Vi(a,.075,.3),easeInOutElastic:a=>Ri(a)?a:a<.5?.5*vi(2*a,.1125,.45):.5+.5*Vi(2*a-1,.1125,.45),easeInBack:a=>a*a*(2.70158*a-1.70158),easeOutBack:a=>(a-=1)*a*(2.70158*a+1.70158)+1,easeInOutBack(a){let p=1.70158;return(a/=.5)<1?a*a*((1+(p*=1.525))*a-p)*.5:.5*((a-=2)*a*((1+(p*=1.525))*a+p)+2)},easeInBounce:a=>1-Ii.easeOutBounce(1-a),easeOutBounce:a=>a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,easeInOutBounce:a=>a<.5?.5*Ii.easeInBounce(2*a):.5*Ii.easeOutBounce(2*a-1)+.5};function ii(a){if(a&&"object"==typeof a){const p=a.toString();return"[object CanvasPattern]"===p||"[object CanvasGradient]"===p}return!1}function Ti(a){return ii(a)?a:new Ze(a)}function ds(a){return ii(a)?a:new Ze(a).saturate(.5).darken(.1).hexString()}const si=["x","y","borderWidth","radius","tension"],Bi=["color","borderColor","backgroundColor"],ss=new Map;function j(a,p,x){return function F(a,p){p=p||{};const x=a+JSON.stringify(p);let k=ss.get(x);return k||(k=new Intl.NumberFormat(a,p),ss.set(x,k)),k}(p,x).format(a)}const te={values:a=>Je(a)?a:""+a,numeric(a,p,x){if(0===a)return"0";const k=this.chart.options.locale;let H,Y=a;if(x.length>1){const xe=Math.max(Math.abs(x[0].value),Math.abs(x[x.length-1].value));(xe<1e-4||xe>1e15)&&(H="scientific"),Y=function fe(a,p){let x=p.length>3?p[2].value-p[1].value:p[1].value-p[0].value;return Math.abs(x)>=1&&a!==Math.floor(a)&&(x=a-Math.floor(a)),x}(a,x)}const ee=ei(Math.abs(Y)),ae=isNaN(ee)?1:Math.max(Math.min(-1*Math.floor(ee),20),0),ue={notation:H,minimumFractionDigits:ae,maximumFractionDigits:ae};return Object.assign(ue,this.options.ticks.format),j(a,k,ue)},logarithmic(a,p,x){if(0===a)return"0";const k=x[p].significand||a/Math.pow(10,Math.floor(ei(a)));return[1,2,3,5,10,15].includes(k)||p>.8*x.length?te.numeric.call(this,a,p,x):""}};var Pe={formatters:te};const ht=Object.create(null),Tt=Object.create(null);function Mt(a,p){if(!p)return a;const x=p.split(".");for(let k=0,H=x.length;k<H;++k){const Y=x[k];a=a[Y]||(a[Y]=Object.create(null))}return a}function Nt(a,p,x){return"string"==typeof p?Ut(Mt(a,p),x):Ut(Mt(a,""),p)}class ri{constructor(p,x){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=k=>k.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(k,H)=>ds(H.backgroundColor),this.hoverBorderColor=(k,H)=>ds(H.borderColor),this.hoverColor=(k,H)=>ds(H.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(p),this.apply(x)}set(p,x){return Nt(this,p,x)}get(p){return Mt(this,p)}describe(p,x){return Nt(Tt,p,x)}override(p,x){return Nt(ht,p,x)}route(p,x,k,H){const Y=Mt(this,p),ee=Mt(this,k),ae="_"+x;Object.defineProperties(Y,{[ae]:{value:Y[x],writable:!0},[x]:{enumerable:!0,get(){const ue=this[ae],xe=ee[H];return tt(ue)?Object.assign({},xe,ue):dt(ue,xe)},set(ue){this[ae]=ue}}})}apply(p){p.forEach(x=>x(this))}}var Gs=new ri({_scriptable:a=>!a.startsWith("on"),_indexable:a=>"events"!==a,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function is(a){a.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),a.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:p=>"onProgress"!==p&&"onComplete"!==p&&"fn"!==p}),a.set("animations",{colors:{type:"color",properties:Bi},numbers:{type:"number",properties:si}}),a.describe("animations",{_fallback:"animation"}),a.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:p=>0|p}}}})},function Ls(a){a.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function Ve(a){a.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(p,x)=>x.lineWidth,tickColor:(p,x)=>x.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Pe.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),a.route("scale.ticks","color","","color"),a.route("scale.grid","color","","borderColor"),a.route("scale.border","color","","borderColor"),a.route("scale.title","color","","color"),a.describe("scale",{_fallback:!1,_scriptable:p=>!p.startsWith("before")&&!p.startsWith("after")&&"callback"!==p&&"parser"!==p,_indexable:p=>"borderDash"!==p&&"tickBorderDash"!==p&&"dash"!==p}),a.describe("scales",{_fallback:"scale"}),a.describe("scale.ticks",{_scriptable:p=>"backdropPadding"!==p&&"callback"!==p,_indexable:p=>"backdropPadding"!==p})}]);function Es(a,p,x,k,H){let Y=p[H];return Y||(Y=p[H]=a.measureText(H).width,x.push(H)),Y>k&&(k=Y),k}function Lr(a,p,x,k){let H=(k=k||{}).data=k.data||{},Y=k.garbageCollect=k.garbageCollect||[];k.font!==p&&(H=k.data={},Y=k.garbageCollect=[],k.font=p),a.save(),a.font=p;let ee=0;const ae=x.length;let ue,xe,Ie,Qe,rt;for(ue=0;ue<ae;ue++)if(Qe=x[ue],null==Qe||Je(Qe)){if(Je(Qe))for(xe=0,Ie=Qe.length;xe<Ie;xe++)rt=Qe[xe],null!=rt&&!Je(rt)&&(ee=Es(a,H,Y,ee,rt))}else ee=Es(a,H,Y,ee,Qe);a.restore();const yt=Y.length/2;if(yt>x.length){for(ue=0;ue<yt;ue++)delete H[Y[ue]];Y.splice(0,yt)}return ee}function Rr(a,p,x){const k=a.currentDevicePixelRatio,H=0!==x?Math.max(x/2,.5):0;return Math.round((p-H)*k)/k+H}function qs(a,p){(p=p||a.getContext("2d")).save(),p.resetTransform(),p.clearRect(0,0,a.width,a.height),p.restore()}function Qs(a,p,x,k){Js(a,p,x,k,null)}function Js(a,p,x,k,H){let Y,ee,ae,ue,xe,Ie,Qe,rt;const yt=p.pointStyle,Lt=p.rotation,at=p.radius;let Ge=(Lt||0)*wi;if(yt&&"object"==typeof yt&&(Y=yt.toString(),"[object HTMLImageElement]"===Y||"[object HTMLCanvasElement]"===Y))return a.save(),a.translate(x,k),a.rotate(Ge),a.drawImage(yt,-yt.width/2,-yt.height/2,yt.width,yt.height),void a.restore();if(!(isNaN(at)||at<=0)){switch(a.beginPath(),yt){default:H?a.ellipse(x,k,H/2,at,0,0,Yt):a.arc(x,k,at,0,Yt),a.closePath();break;case"triangle":Ie=H?H/2:at,a.moveTo(x+Math.sin(Ge)*Ie,k-Math.cos(Ge)*at),Ge+=At,a.lineTo(x+Math.sin(Ge)*Ie,k-Math.cos(Ge)*at),Ge+=At,a.lineTo(x+Math.sin(Ge)*Ie,k-Math.cos(Ge)*at),a.closePath();break;case"rectRounded":xe=.516*at,ue=at-xe,ee=Math.cos(Ge+Vt)*ue,Qe=Math.cos(Ge+Vt)*(H?H/2-xe:ue),ae=Math.sin(Ge+Vt)*ue,rt=Math.sin(Ge+Vt)*(H?H/2-xe:ue),a.arc(x-Qe,k-ae,xe,Ge-kt,Ge-jt),a.arc(x+rt,k-ee,xe,Ge-jt,Ge),a.arc(x+Qe,k+ae,xe,Ge,Ge+jt),a.arc(x-rt,k+ee,xe,Ge+jt,Ge+kt),a.closePath();break;case"rect":if(!Lt){ue=Math.SQRT1_2*at,Ie=H?H/2:ue,a.rect(x-Ie,k-ue,2*Ie,2*ue);break}Ge+=Vt;case"rectRot":Qe=Math.cos(Ge)*(H?H/2:at),ee=Math.cos(Ge)*at,ae=Math.sin(Ge)*at,rt=Math.sin(Ge)*(H?H/2:at),a.moveTo(x-Qe,k-ae),a.lineTo(x+rt,k-ee),a.lineTo(x+Qe,k+ae),a.lineTo(x-rt,k+ee),a.closePath();break;case"crossRot":Ge+=Vt;case"cross":Qe=Math.cos(Ge)*(H?H/2:at),ee=Math.cos(Ge)*at,ae=Math.sin(Ge)*at,rt=Math.sin(Ge)*(H?H/2:at),a.moveTo(x-Qe,k-ae),a.lineTo(x+Qe,k+ae),a.moveTo(x+rt,k-ee),a.lineTo(x-rt,k+ee);break;case"star":Qe=Math.cos(Ge)*(H?H/2:at),ee=Math.cos(Ge)*at,ae=Math.sin(Ge)*at,rt=Math.sin(Ge)*(H?H/2:at),a.moveTo(x-Qe,k-ae),a.lineTo(x+Qe,k+ae),a.moveTo(x+rt,k-ee),a.lineTo(x-rt,k+ee),Ge+=Vt,Qe=Math.cos(Ge)*(H?H/2:at),ee=Math.cos(Ge)*at,ae=Math.sin(Ge)*at,rt=Math.sin(Ge)*(H?H/2:at),a.moveTo(x-Qe,k-ae),a.lineTo(x+Qe,k+ae),a.moveTo(x+rt,k-ee),a.lineTo(x-rt,k+ee);break;case"line":ee=H?H/2:Math.cos(Ge)*at,ae=Math.sin(Ge)*at,a.moveTo(x-ee,k-ae),a.lineTo(x+ee,k+ae);break;case"dash":a.moveTo(x,k),a.lineTo(x+Math.cos(Ge)*(H?H/2:at),k+Math.sin(Ge)*at);break;case!1:a.closePath()}a.fill(),p.borderWidth>0&&a.stroke()}}function us(a,p,x){return x=x||.5,!p||a&&a.x>p.left-x&&a.x<p.right+x&&a.y>p.top-x&&a.y<p.bottom+x}function er(a,p){a.save(),a.beginPath(),a.rect(p.left,p.top,p.right-p.left,p.bottom-p.top),a.clip()}function ws(a){a.restore()}function fs(a,p,x,k,H){if(!p)return a.lineTo(x.x,x.y);if("middle"===H){const Y=(p.x+x.x)/2;a.lineTo(Y,p.y),a.lineTo(Y,x.y)}else"after"===H!=!!k?a.lineTo(p.x,x.y):a.lineTo(x.x,p.y);a.lineTo(x.x,x.y)}function pn(a,p,x,k){if(!p)return a.lineTo(x.x,x.y);a.bezierCurveTo(k?p.cp1x:p.cp2x,k?p.cp1y:p.cp2y,k?x.cp2x:x.cp1x,k?x.cp2y:x.cp1y,x.x,x.y)}function ir(a,p,x,k,H){if(H.strikethrough||H.underline){const Y=a.measureText(k),ee=p-Y.actualBoundingBoxLeft,ae=p+Y.actualBoundingBoxRight,xe=x+Y.actualBoundingBoxDescent,Ie=H.strikethrough?(x-Y.actualBoundingBoxAscent+xe)/2:xe;a.strokeStyle=a.fillStyle,a.beginPath(),a.lineWidth=H.decorationWidth||2,a.moveTo(ee,Ie),a.lineTo(ae,Ie),a.stroke()}}function Ir(a,p){const x=a.fillStyle;a.fillStyle=p.color,a.fillRect(p.left,p.top,p.width,p.height),a.fillStyle=x}function Br(a,p,x,k,H,Y={}){const ee=Je(p)?p:[p],ae=Y.strokeWidth>0&&""!==Y.strokeColor;let ue,xe;for(a.save(),a.font=H.string,function tr(a,p){p.translation&&a.translate(p.translation[0],p.translation[1]),Ae(p.rotation)||a.rotate(p.rotation),p.color&&(a.fillStyle=p.color),p.textAlign&&(a.textAlign=p.textAlign),p.textBaseline&&(a.textBaseline=p.textBaseline)}(a,Y),ue=0;ue<ee.length;++ue)xe=ee[ue],Y.backdrop&&Ir(a,Y.backdrop),ae&&(Y.strokeColor&&(a.strokeStyle=Y.strokeColor),Ae(Y.strokeWidth)||(a.lineWidth=Y.strokeWidth),a.strokeText(xe,x,k,Y.maxWidth)),a.fillText(xe,x,k,Y.maxWidth),ir(a,x,k,xe,Y),k+=Number(H.lineHeight);a.restore()}function sr(a,p){const{x,y:k,w:H,h:Y,radius:ee}=p;a.arc(x+ee.topLeft,k+ee.topLeft,ee.topLeft,1.5*kt,kt,!0),a.lineTo(x,k+Y-ee.bottomLeft),a.arc(x+ee.bottomLeft,k+Y-ee.bottomLeft,ee.bottomLeft,kt,jt,!0),a.lineTo(x+H-ee.bottomRight,k+Y),a.arc(x+H-ee.bottomRight,k+Y-ee.bottomRight,ee.bottomRight,jt,0,!0),a.lineTo(x+H,k+ee.topRight),a.arc(x+H-ee.topRight,k+ee.topRight,ee.topRight,0,-jt,!0),a.lineTo(x+ee.topLeft,k)}const rr=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,nr=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function or(a,p){const x=(""+a).match(rr);if(!x||"normal"===x[1])return 1.2*p;switch(a=+x[2],x[3]){case"px":return a;case"%":a/=100}return p*a}const _s=a=>+a||0;function Ts(a,p){const x={},k=tt(p),H=k?Object.keys(p):p,Y=tt(a)?k?ee=>dt(a[ee],a[p[ee]]):ee=>a[ee]:()=>a;for(const ee of H)x[ee]=_s(Y(ee));return x}function ps(a){return Ts(a,{top:"y",right:"x",bottom:"y",left:"x"})}function Rs(a){return Ts(a,["topLeft","topRight","bottomLeft","bottomRight"])}function ar(a){const p=ps(a);return p.width=p.left+p.right,p.height=p.top+p.bottom,p}function Fr(a,p){let x=dt((a=a||{}).size,(p=p||Gs.font).size);"string"==typeof x&&(x=parseInt(x,10));let k=dt(a.style,p.style);k&&!(""+k).match(nr)&&(console.warn('Invalid font style specified: "'+k+'"'),k=void 0);const H={family:dt(a.family,p.family),lineHeight:or(dt(a.lineHeight,p.lineHeight),x),size:x,style:k,weight:dt(a.weight,p.weight),string:""};return H.string=function xs(a){return!a||Ae(a.size)||Ae(a.family)?null:(a.style?a.style+" ":"")+(a.weight?a.weight+" ":"")+a.size+"px "+a.family}(H),H}function Ms(a,p,x,k){let Y,ee,ae,H=!0;for(Y=0,ee=a.length;Y<ee;++Y)if(ae=a[Y],void 0!==ae&&(void 0!==p&&"function"==typeof ae&&(ae=ae(p),H=!1),void 0!==x&&Je(ae)&&(ae=ae[x%ae.length],H=!1),void 0!==ae))return k&&!H&&(k.cacheable=!1),ae}function Hr(a,p,x){const{min:k,max:H}=a,Y=zt(p,(H-k)/2),ee=(ae,ue)=>x&&0===ae?0:ae+ue;return{min:ee(k,-Math.abs(Y)),max:ee(H,Y)}}function gs(a,p){return Object.assign(Object.create(a),p)}function Ds(a,p=[""],x,k,H=(()=>a[0])){const Y=x||a;typeof k>"u"&&(k=ur("_fallback",a));const ee={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:a,_rootScopes:Y,_fallback:k,_getTarget:H,override:ae=>Ds([ae,...a],p,Y,k)};return new Proxy(ee,{deleteProperty:(ae,ue)=>(delete ae[ue],delete ae._keys,delete a[0][ue],!0),get:(ae,ue)=>ms(ae,ue,()=>function Fs(a,p,x,k){let H;for(const Y of p)if(H=ur(Nr(Y,a),x),typeof H<"u")return Mi(a,H)?bs(x,k,a,H):H}(ue,p,a,ae)),getOwnPropertyDescriptor:(ae,ue)=>Reflect.getOwnPropertyDescriptor(ae._scopes[0],ue),getPrototypeOf:()=>Reflect.getPrototypeOf(a[0]),has:(ae,ue)=>Hs(ae).includes(ue),ownKeys:ae=>Hs(ae),set(ae,ue,xe){const Ie=ae._storage||(ae._storage=H());return ae[ue]=Ie[ue]=xe,delete ae._keys,!0}})}function Ki(a,p,x,k){const H={_cacheable:!1,_proxy:a,_context:p,_subProxy:x,_stack:new Set,_descriptors:lr(a,k),setContext:Y=>Ki(a,Y,x,k),override:Y=>Ki(a.override(Y),p,x,k)};return new Proxy(H,{deleteProperty:(Y,ee)=>(delete Y[ee],delete a[ee],!0),get:(Y,ee,ae)=>ms(Y,ee,()=>function Is(a,p,x){const{_proxy:k,_context:H,_subProxy:Y,_descriptors:ee}=a;let ae=k[p];return Ei(ae)&&ee.isScriptable(p)&&(ae=function Wr(a,p,x,k){const{_proxy:H,_context:Y,_subProxy:ee,_stack:ae}=x;if(ae.has(a))throw new Error("Recursion detected: "+Array.from(ae).join("->")+"->"+a);ae.add(a);let ue=p(Y,ee||k);return ae.delete(a),Mi(a,ue)&&(ue=bs(H._scopes,H,a,ue)),ue}(p,ae,a,x)),Je(ae)&&ae.length&&(ae=function vs(a,p,x,k){const{_proxy:H,_context:Y,_subProxy:ee,_descriptors:ae}=x;if(typeof Y.index<"u"&&k(a))return p[Y.index%p.length];if(tt(p[0])){const ue=p,xe=H._scopes.filter(Ie=>Ie!==ue);p=[];for(const Ie of ue){const Qe=bs(xe,H,a,Ie);p.push(Ki(Qe,Y,ee&&ee[a],ae))}}return p}(p,ae,a,ee.isIndexable)),Mi(p,ae)&&(ae=Ki(ae,H,Y&&Y[p],ee)),ae}(Y,ee,ae)),getOwnPropertyDescriptor:(Y,ee)=>Y._descriptors.allKeys?Reflect.has(a,ee)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(a,ee),getPrototypeOf:()=>Reflect.getPrototypeOf(a),has:(Y,ee)=>Reflect.has(a,ee),ownKeys:()=>Reflect.ownKeys(a),set:(Y,ee,ae)=>(a[ee]=ae,delete Y[ee],!0)})}function lr(a,p={scriptable:!0,indexable:!0}){const{_scriptable:x=p.scriptable,_indexable:k=p.indexable,_allKeys:H=p.allKeys}=a;return{allKeys:H,scriptable:x,indexable:k,isScriptable:Ei(x)?x:()=>x,isIndexable:Ei(k)?k:()=>k}}const Nr=(a,p)=>a?a+Ni(p):p,Mi=(a,p)=>tt(p)&&"adapters"!==a&&(null===Object.getPrototypeOf(p)||p.constructor===Object);function ms(a,p,x){if(Object.prototype.hasOwnProperty.call(a,p))return a[p];const k=x();return a[p]=k,k}function Bs(a,p,x){return Ei(a)?a(p,x):a}const Ur=(a,p)=>!0===a?p:"string"==typeof a?di(p,a):void 0;function cr(a,p,x,k,H){for(const Y of p){const ee=Ur(x,Y);if(ee){a.add(ee);const ae=Bs(ee._fallback,x,H);if(typeof ae<"u"&&ae!==x&&ae!==k)return ae}else if(!1===ee&&typeof k<"u"&&x!==k)return null}return!1}function bs(a,p,x,k){const H=p._rootScopes,Y=Bs(p._fallback,x,k),ee=[...a,...H],ae=new Set;ae.add(k);let ue=hr(ae,ee,x,Y||x,k);return!(null===ue||typeof Y<"u"&&Y!==x&&(ue=hr(ae,ee,Y,ue,k),null===ue))&&Ds(Array.from(ae),[""],H,Y,()=>function dr(a,p,x){const k=a._getTarget();p in k||(k[p]={});const H=k[p];return Je(H)&&tt(x)?x:H||{}}(p,x,k))}function hr(a,p,x,k,H){for(;x;)x=cr(a,p,x,k,H);return x}function ur(a,p){for(const x of p){if(!x)continue;const k=x[a];if(typeof k<"u")return k}}function Hs(a){let p=a._keys;return p||(p=a._keys=function zr(a){const p=new Set;for(const x of a)for(const k of Object.keys(x).filter(H=>!H.startsWith("_")))p.add(k);return Array.from(p)}(a._scopes)),p}function jr(a,p,x,k){const{iScale:H}=a,{key:Y="r"}=this._parsing,ee=new Array(k);let ae,ue,xe,Ie;for(ae=0,ue=k;ae<ue;++ae)xe=ae+x,Ie=p[xe],ee[ae]={r:H.parse(di(Ie,Y),xe)};return ee}const Vr=Number.EPSILON||1e-14,bi=(a,p)=>p<a.length&&!a[p].skip&&a[p],Ns=a=>"x"===a?"y":"x";function Kr(a,p,x,k){const H=a.skip?p:a,Y=p,ee=x.skip?p:x,ae=q(Y,H),ue=q(ee,Y);let xe=ae/(ae+ue),Ie=ue/(ae+ue);xe=isNaN(xe)?0:xe,Ie=isNaN(Ie)?0:Ie;const Qe=k*xe,rt=k*Ie;return{previous:{x:Y.x-Qe*(ee.x-H.x),y:Y.y-Qe*(ee.y-H.y)},next:{x:Y.x+rt*(ee.x-H.x),y:Y.y+rt*(ee.y-H.y)}}}function Os(a,p,x){return Math.max(Math.min(a,x),p)}function Ws(a,p,x,k,H){let Y,ee,ae,ue;if(p.spanGaps&&(a=a.filter(xe=>!xe.skip)),"monotone"===p.cubicInterpolationMode)!function $r(a,p="x"){const x=Ns(p),k=a.length,H=Array(k).fill(0),Y=Array(k);let ee,ae,ue,xe=bi(a,0);for(ee=0;ee<k;++ee)if(ae=ue,ue=xe,xe=bi(a,ee+1),ue){if(xe){const Ie=xe[p]-ue[p];H[ee]=0!==Ie?(xe[x]-ue[x])/Ie:0}Y[ee]=ae?xe?Ui(H[ee-1])!==Ui(H[ee])?0:(H[ee-1]+H[ee])/2:H[ee-1]:H[ee]}(function fr(a,p,x){const k=a.length;let H,Y,ee,ae,ue,xe=bi(a,0);for(let Ie=0;Ie<k-1;++Ie)if(ue=xe,xe=bi(a,Ie+1),ue&&xe){if(Ht(p[Ie],0,Vr)){x[Ie]=x[Ie+1]=0;continue}H=x[Ie]/p[Ie],Y=x[Ie+1]/p[Ie],ae=Math.pow(H,2)+Math.pow(Y,2),!(ae<=9)&&(ee=3/Math.sqrt(ae),x[Ie]=H*ee*p[Ie],x[Ie+1]=Y*ee*p[Ie])}})(a,H,Y),function Fi(a,p,x="x"){const k=Ns(x),H=a.length;let Y,ee,ae,ue=bi(a,0);for(let xe=0;xe<H;++xe){if(ee=ae,ae=ue,ue=bi(a,xe+1),!ae)continue;const Ie=ae[x],Qe=ae[k];ee&&(Y=(Ie-ee[x])/3,ae[`cp1${x}`]=Ie-Y,ae[`cp1${k}`]=Qe-Y*p[xe]),ue&&(Y=(ue[x]-Ie)/3,ae[`cp2${x}`]=Ie+Y,ae[`cp2${k}`]=Qe+Y*p[xe])}}(a,Y,p)}(a,H);else{let xe=k?a[a.length-1]:a[0];for(Y=0,ee=a.length;Y<ee;++Y)ae=a[Y],ue=Kr(xe,ae,a[Math.min(Y+1,ee-(k?0:1))%ee],p.tension),ae.cp1x=ue.previous.x,ae.cp1y=ue.previous.y,ae.cp2x=ue.next.x,ae.cp2y=ue.next.y,xe=ae}p.capBezierPoints&&function Yr(a,p){let x,k,H,Y,ee,ae=us(a[0],p);for(x=0,k=a.length;x<k;++x)ee=Y,Y=ae,ae=x<k-1&&us(a[x+1],p),Y&&(H=a[x],ee&&(H.cp1x=Os(H.cp1x,p.left,p.right),H.cp1y=Os(H.cp1y,p.top,p.bottom)),ae&&(H.cp2x=Os(H.cp2x,p.left,p.right),H.cp2y=Os(H.cp2y,p.top,p.bottom)))}(a,x)}function _r(){return typeof window<"u"&&typeof document<"u"}function pr(a){let p=a.parentNode;return p&&"[object ShadowRoot]"===p.toString()&&(p=p.host),p}function rs(a,p,x){let k;return"string"==typeof a?(k=parseInt(a,10),-1!==a.indexOf("%")&&(k=k/100*p.parentNode[x])):k=a,k}const $i=a=>a.ownerDocument.defaultView.getComputedStyle(a,null),Us=["top","right","bottom","left"];function Hi(a,p,x){const k={};x=x?"-"+x:"";for(let H=0;H<4;H++){const Y=Us[H];k[Y]=parseFloat(a[p+"-"+Y+x])||0}return k.width=k.left+k.right,k.height=k.top+k.bottom,k}const gr=(a,p,x)=>(a>0||p>0)&&(!x||!x.shadowRoot);function Xr(a,p){if("native"in a)return a;const{canvas:x,currentDevicePixelRatio:k}=p,H=$i(x),Y="border-box"===H.boxSizing,ee=Hi(H,"padding"),ae=Hi(H,"border","width"),{x:ue,y:xe,box:Ie}=function mr(a,p){const x=a.touches,k=x&&x.length?x[0]:a,{offsetX:H,offsetY:Y}=k;let ae,ue,ee=!1;if(gr(H,Y,a.target))ae=H,ue=Y;else{const xe=p.getBoundingClientRect();ae=k.clientX-xe.left,ue=k.clientY-xe.top,ee=!0}return{x:ae,y:ue,box:ee}}(a,x),Qe=ee.left+(Ie&&ae.left),rt=ee.top+(Ie&&ae.top);let{width:yt,height:Lt}=p;return Y&&(yt-=ee.width+ae.width,Lt-=ee.height+ae.height),{x:Math.round((ue-Qe)/yt*x.width/k),y:Math.round((xe-rt)/Lt*x.height/k)}}const ks=a=>Math.round(10*a)/10;function qr(a,p,x,k){const H=$i(a),Y=Hi(H,"margin"),ee=rs(H.maxWidth,a,"clientWidth")||gi,ae=rs(H.maxHeight,a,"clientHeight")||gi,ue=function Gr(a,p,x){let k,H;if(void 0===p||void 0===x){const Y=pr(a);if(Y){const ee=Y.getBoundingClientRect(),ae=$i(Y),ue=Hi(ae,"border","width"),xe=Hi(ae,"padding");p=ee.width-xe.width-ue.width,x=ee.height-xe.height-ue.height,k=rs(ae.maxWidth,Y,"clientWidth"),H=rs(ae.maxHeight,Y,"clientHeight")}else p=a.clientWidth,x=a.clientHeight}return{width:p,height:x,maxWidth:k||gi,maxHeight:H||gi}}(a,p,x);let{width:xe,height:Ie}=ue;if("content-box"===H.boxSizing){const rt=Hi(H,"border","width"),yt=Hi(H,"padding");xe-=yt.width+rt.width,Ie-=yt.height+rt.height}return xe=Math.max(0,xe-Y.width),Ie=Math.max(0,k?xe/k:Ie-Y.height),xe=ks(Math.min(xe,ee,ue.maxWidth)),Ie=ks(Math.min(Ie,ae,ue.maxHeight)),xe&&!Ie&&(Ie=ks(xe/2)),(void 0!==p||void 0!==x)&&k&&ue.height&&Ie>ue.height&&(Ie=ue.height,xe=ks(Math.floor(Ie*k))),{width:xe,height:Ie}}function vr(a,p,x){const k=p||1,H=Math.floor(a.height*k),Y=Math.floor(a.width*k);a.height=Math.floor(a.height),a.width=Math.floor(a.width);const ee=a.canvas;return ee.style&&(x||!ee.style.height&&!ee.style.width)&&(ee.style.height=`${a.height}px`,ee.style.width=`${a.width}px`),(a.currentDevicePixelRatio!==k||ee.height!==H||ee.width!==Y)&&(a.currentDevicePixelRatio=k,ee.height=H,ee.width=Y,a.ctx.setTransform(k,0,0,k,0,0),!0)}const Qr=function(){let a=!1;try{const p={get passive(){return a=!0,!1}};_r()&&(window.addEventListener("test",null,p),window.removeEventListener("test",null,p))}catch{}return a}();function Jr(a,p){const x=function Zr(a,p){return $i(a).getPropertyValue(p)}(a,p),k=x&&x.match(/^(\d+)(\.\d+)?px$/);return k?+k[1]:void 0}function Yi(a,p,x,k){return{x:a.x+x*(p.x-a.x),y:a.y+x*(p.y-a.y)}}function en(a,p,x,k){return{x:a.x+x*(p.x-a.x),y:"middle"===k?x<.5?a.y:p.y:"after"===k?x<1?a.y:p.y:x>0?p.y:a.y}}function br(a,p,x,k){const H={x:a.cp2x,y:a.cp2y},Y={x:p.cp1x,y:p.cp1y},ee=Yi(a,H,x),ae=Yi(H,Y,x),ue=Yi(Y,p,x),xe=Yi(ee,ae,x),Ie=Yi(ae,ue,x);return Yi(xe,Ie,x)}const Sr=function(a,p){return{x:x=>a+a+p-x,setWidth(x){p=x},textAlign:x=>"center"===x?x:"right"===x?"left":"right",xPlus:(x,k)=>x-k,leftForLtr:(x,k)=>x-k}},wt=function(){return{x:a=>a,setWidth(a){},textAlign:a=>a,xPlus:(a,p)=>a+p,leftForLtr:(a,p)=>a}};function tn(a,p,x){return a?Sr(p,x):wt()}function sn(a,p){let x,k;("ltr"===p||"rtl"===p)&&(x=a.canvas.style,k=[x.getPropertyValue("direction"),x.getPropertyPriority("direction")],x.setProperty("direction",p,"important"),a.prevTextDirection=k)}function zs(a,p){void 0!==p&&(delete a.prevTextDirection,a.canvas.style.setProperty("direction",p[0],p[1]))}function yr(a){return"angle"===a?{between:Ee,compare:de,normalize:pe}:{between:ot,compare:(p,x)=>p-x,normalize:p=>p}}function Ss({start:a,end:p,count:x,loop:k,style:H}){return{start:a%x,end:p%x,loop:k&&(p-a+1)%x==0,style:H}}function js(a,p,x){if(!x)return[a];const{property:k,start:H,end:Y}=x,ee=p.length,{compare:ae,between:ue,normalize:xe}=yr(k),{start:Ie,end:Qe,loop:rt,style:yt}=function ns(a,p,x){const{property:k,start:H,end:Y}=x,{between:ee,normalize:ae}=yr(k),ue=p.length;let rt,yt,{start:xe,end:Ie,loop:Qe}=a;if(Qe){for(xe+=ue,Ie+=ue,rt=0,yt=ue;rt<yt&&ee(ae(p[xe%ue][k]),H,Y);++rt)xe--,Ie--;xe%=ue,Ie%=ue}return Ie<xe&&(Ie+=ue),{start:xe,end:Ie,loop:Qe,style:a.style}}(a,p,x),Lt=[];let qt,Zi,ys,at=!1,Ge=null;for(let os=Ie,Ps=Ie;os<=Qe;++os)Zi=p[os%ee],!Zi.skip&&(qt=xe(Zi[k]),qt!==ys&&(at=ue(qt,H,Y),null===Ge&&(at||ue(H,ys,qt)&&0!==ae(H,ys))&&(Ge=0===ae(qt,H)?os:Ps),null!==Ge&&(!at||0===ae(Y,qt)||ue(Y,ys,qt))&&(Lt.push(Ss({start:Ge,end:os,loop:rt,count:ee,style:yt})),Ge=null),Ps=os,ys=qt));return null!==Ge&&Lt.push(Ss({start:Ge,end:Qe,loop:rt,count:ee,style:yt})),Lt}function As(a,p){const x=[],k=a.segments;for(let H=0;H<k.length;H++){const Y=js(k[H],a.points,p);Y.length&&x.push(...Y)}return x}function xr(a,p){const x=a.points,k=a.options.spanGaps,H=x.length;if(!H)return[];const Y=!!a._loop,{start:ee,end:ae}=function rn(a,p,x,k){let H=0,Y=p-1;if(x&&!k)for(;H<p&&!a[H].skip;)H++;for(;H<p&&a[H].skip;)H++;for(H%=p,x&&(Y+=H);Y>H&&a[Y%p].skip;)Y--;return Y%=p,{start:H,end:Y}}(x,H,Y,k);return Er(a,!0===k?[{start:ee,end:ae,loop:Y}]:function Cr(a,p,x,k){const H=a.length,Y=[];let ue,ee=p,ae=a[p];for(ue=p+1;ue<=x;++ue){const xe=a[ue%H];xe.skip||xe.stop?ae.skip||(Y.push({start:p%H,end:(ue-1)%H,loop:k=!1}),p=ee=xe.stop?ue:null):(ee=ue,ae.skip&&(p=ue)),ae=xe}return null!==ee&&Y.push({start:p%H,end:ee%H,loop:k}),Y}(x,ee,ae<ee?ae+H:ae,!!a._fullLoop&&0===ee&&ae===H-1),x,p)}function Er(a,p,x,k){return k&&k.setContext&&x?function wr(a,p,x,k){const H=a._chart.getContext(),Y=Tr(a.options),{_datasetIndex:ee,options:{spanGaps:ae}}=a,ue=x.length,xe=[];let Ie=Y,Qe=p[0].start,rt=Qe;function yt(Lt,at,Ge,qt){const Zi=ae?-1:1;if(Lt!==at){for(Lt+=ue;x[Lt%ue].skip;)Lt-=Zi;for(;x[at%ue].skip;)at+=Zi;Lt%ue!=at%ue&&(xe.push({start:Lt%ue,end:at%ue,loop:Ge,style:qt}),Ie=qt,Qe=at%ue)}}for(const Lt of p){Qe=ae?Qe:Lt.start;let Ge,at=x[Qe%ue];for(rt=Qe+1;rt<=Lt.end;rt++){const qt=x[rt%ue];Ge=Tr(k.setContext(gs(H,{type:"segment",p0:at,p1:qt,p0DataIndex:(rt-1)%ue,p1DataIndex:rt%ue,datasetIndex:ee}))),Vs(Ge,Ie)&&yt(Qe,rt-1,Lt.loop,Ie),at=qt,Ie=Ge}Qe<rt-1&&yt(Qe,rt-1,Lt.loop,Ie)}return xe}(a,p,x,k):p}function Tr(a){return{backgroundColor:a.backgroundColor,borderCapStyle:a.borderCapStyle,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderJoinStyle:a.borderJoinStyle,borderWidth:a.borderWidth,borderColor:a.borderColor}}function Vs(a,p){if(!p)return!1;const x=[],k=function(H,Y){return ii(Y)?(x.includes(Y)||x.push(Y),x.indexOf(Y)):Y};return JSON.stringify(a,k)!==JSON.stringify(p,k)}},7246:(Ct,qe,se)=>{"use strict";se.d(qe,{jh:()=>xn,vQ:()=>Kn});var U=se(5879),u=se(7816),he=se(8137),g=se(5619),v=se(3997);const w=function m(z,ne){return z===ne||z!=z&&ne!=ne},L=function D(z,ne){for(var ge=z.length;ge--;)if(w(z[ge][0],ne))return ge;return-1};var l=Array.prototype.splice;function P(z){var ne=-1,ge=null==z?0:z.length;for(this.clear();++ne<ge;){var Le=z[ne];this.set(Le[0],Le[1])}}P.prototype.clear=function y(){this.__data__=[],this.size=0},P.prototype.delete=function f(z){var ne=this.__data__,ge=L(ne,z);return!(ge<0||(ge==ne.length-1?ne.pop():l.call(ne,ge,1),--this.size,0))},P.prototype.get=function d(z){var ne=this.__data__,ge=L(ne,z);return ge<0?void 0:ne[ge][1]},P.prototype.has=function E(z){return L(this.__data__,z)>-1},P.prototype.set=function R(z,ne){var ge=this.__data__,Le=L(ge,z);return Le<0?(++this.size,ge.push([z,ne])):ge[Le][1]=ne,this};const K=P,Q="object"==typeof global&&global&&global.Object===Object&&global;var re="object"==typeof self&&self&&self.Object===Object&&self;const He=Q||re||Function("return this")();var We=He.Symbol,Ke=Object.prototype,I=Ke.hasOwnProperty,le=Ke.toString,Se=We?We.toStringTag:void 0;var Ze=Object.prototype.toString;var Je=We?We.toStringTag:void 0;const _t=function tt(z){return null==z?void 0===z?"[object Undefined]":"[object Null]":Je&&Je in Object(z)?function ye(z){var ne=I.call(z,Se),ge=z[Se];try{z[Se]=void 0;var Le=!0}catch{}var lt=le.call(z);return Le&&(ne?z[Se]=ge:delete z[Se]),lt}(z):function Ue(z){return Ze.call(z)}(z)},dt=function Wt(z){var ne=typeof z;return null!=z&&("object"==ne||"function"==ne)},Ft=function Qt(z){if(!dt(z))return!1;var ne=_t(z);return"[object Function]"==ne||"[object GeneratorFunction]"==ne||"[object AsyncFunction]"==ne||"[object Proxy]"==ne};var z,Jt=He["__core-js_shared__"],Ut=(z=/[^.]+$/.exec(Jt&&Jt.keys&&Jt.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"";var pi=Function.prototype.toString;var Ni=/^\[object .+?Constructor\]$/,kt=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Ai=function Yt(z){return!(!dt(z)||function pt(z){return!!Ut&&Ut in z}(z))&&(Ft(z)?kt:Ni).test(function hi(z){if(null!=z){try{return pi.call(z)}catch{}try{return z+""}catch{}}return""}(z))},Vt=function jt(z,ne){var ge=function gi(z,ne){return z?.[ne]}(z,ne);return Ai(ge)?ge:void 0},ei=Vt(He,"Map"),Ht=Vt(Object,"create");var Pi=Object.prototype.hasOwnProperty;var de=Object.prototype.hasOwnProperty;function it(z){var ne=-1,ge=null==z?0:z.length;for(this.clear();++ne<ge;){var Le=z[ne];this.set(Le[0],Le[1])}}it.prototype.clear=function Ot(){this.__data__=Ht?Ht(null):{},this.size=0},it.prototype.delete=function ls(z){var ne=this.has(z)&&delete this.__data__[z];return this.size-=ne?1:0,ne},it.prototype.get=function W(z){var ne=this.__data__;if(Ht){var ge=ne[z];return"__lodash_hash_undefined__"===ge?void 0:ge}return Pi.call(ne,z)?ne[z]:void 0},it.prototype.has=function pe(z){var ne=this.__data__;return Ht?void 0!==ne[z]:de.call(ne,z)},it.prototype.set=function Xe(z,ne){var ge=this.__data__;return this.size+=this.has(z)?0:1,ge[z]=Ht&&void 0===ne?"__lodash_hash_undefined__":ne,this};const st=it,ti=function ai(z,ne){var ge=z.__data__;return function xt(z){var ne=typeof z;return"string"==ne||"number"==ne||"symbol"==ne||"boolean"==ne?"__proto__"!==z:null===z}(ne)?ge["string"==typeof ne?"string":"hash"]:ge.map};function fi(z){var ne=-1,ge=null==z?0:z.length;for(this.clear();++ne<ge;){var Le=z[ne];this.set(Le[0],Le[1])}}fi.prototype.clear=function Pt(){this.size=0,this.__data__={hash:new st,map:new(ei||K),string:new st}},fi.prototype.delete=function mi(z){var ne=ti(this,z).delete(z);return this.size-=ne?1:0,ne},fi.prototype.get=function Xt(z){return ti(this,z).get(z)},fi.prototype.has=function Cs(z){return ti(this,z).has(z)},fi.prototype.set=function ji(z,ne){var ge=ti(this,z),Le=ge.size;return ge.set(z,ne),this.size+=ge.size==Le?0:1,this};const Ri=fi;function ii(z){var ne=this.__data__=new K(z);this.size=ne.size}ii.prototype.clear=function ie(){this.__data__=new K,this.size=0},ii.prototype.delete=function J(z){var ne=this.__data__,ge=ne.delete(z);return this.size=ne.size,ge},ii.prototype.get=function ve(z){return this.__data__.get(z)},ii.prototype.has=function Ce(z){return this.__data__.has(z)},ii.prototype.set=function Vi(z,ne){var ge=this.__data__;if(ge instanceof K){var Le=ge.__data__;if(!ei||Le.length<199)return Le.push([z,ne]),this.size=++ge.size,this;ge=this.__data__=new Ri(Le)}return ge.set(z,ne),this.size=ge.size,this};const Ti=ii;var ds=function(){try{var z=Vt(Object,"defineProperty");return z({},"",{}),z}catch{}}();const si=ds,is=function Bi(z,ne,ge){"__proto__"==ne&&si?si(z,ne,{configurable:!0,enumerable:!0,value:ge,writable:!0}):z[ne]=ge},ss=function Ls(z,ne,ge){(void 0!==ge&&!w(z[ne],ge)||void 0===ge&&!(ne in z))&&is(z,ne,ge)};var te=function F(z){return function(ne,ge,Le){for(var lt=-1,St=Object(ne),mt=Le(ne),gt=mt.length;gt--;){var Rt=mt[z?gt:++lt];if(!1===ge(St[Rt],Rt,St))break}return ne}}();const fe=te;var Pe="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ve=Pe&&"object"==typeof module&&module&&!module.nodeType&&module,Tt=Ve&&Ve.exports===Pe?He.Buffer:void 0,Mt=Tt?Tt.allocUnsafe:void 0;const xs=He.Uint8Array,qs=function Rr(z,ne){var ge=ne?function Es(z){var ne=new z.constructor(z.byteLength);return new xs(ne).set(new xs(z)),ne}(z.buffer):z.buffer;return new z.constructor(ge,z.byteOffset,z.length)};var us=Object.create,er=function(){function z(){}return function(ne){if(!dt(ne))return{};if(us)return us(ne);z.prototype=ne;var ge=new z;return z.prototype=void 0,ge}}();const ws=er;var tr=function fs(z,ne){return function(ge){return z(ne(ge))}}(Object.getPrototypeOf,Object);const ir=tr;var Ir=Object.prototype;const sr=function Br(z){var ne=z&&z.constructor;return z===("function"==typeof ne&&ne.prototype||Ir)},_s=function or(z){return null!=z&&"object"==typeof z},Rs=function ps(z){return _s(z)&&"[object Arguments]"==_t(z)};var ar=Object.prototype,Fr=ar.hasOwnProperty,Ms=ar.propertyIsEnumerable,Hr=Rs(function(){return arguments}())?Rs:function(z){return _s(z)&&Fr.call(z,"callee")&&!Ms.call(z,"callee")};const gs=Hr,Ki=Array.isArray,Mi=function Nr(z){return"number"==typeof z&&z>-1&&z%1==0&&z<=9007199254740991},Is=function ms(z){return null!=z&&Mi(z.length)&&!Ft(z)};var cr="object"==typeof exports&&exports&&!exports.nodeType&&exports,bs=cr&&"object"==typeof module&&module&&!module.nodeType&&module,dr=bs&&bs.exports===cr?He.Buffer:void 0;const Hs=(dr?dr.isBuffer:void 0)||function Bs(){return!1};var bi=Function.prototype.toString,Ns=Object.prototype.hasOwnProperty,Kr=bi.call(Object);var wt={};wt["[object Float32Array]"]=wt["[object Float64Array]"]=wt["[object Int8Array]"]=wt["[object Int16Array]"]=wt["[object Int32Array]"]=wt["[object Uint8Array]"]=wt["[object Uint8ClampedArray]"]=wt["[object Uint16Array]"]=wt["[object Uint32Array]"]=!0,wt["[object Arguments]"]=wt["[object Array]"]=wt["[object ArrayBuffer]"]=wt["[object Boolean]"]=wt["[object DataView]"]=wt["[object Date]"]=wt["[object Error]"]=wt["[object Function]"]=wt["[object Map]"]=wt["[object Number]"]=wt["[object Object]"]=wt["[object RegExp]"]=wt["[object Set]"]=wt["[object String]"]=wt["[object WeakMap]"]=!1;var Ss="object"==typeof exports&&exports&&!exports.nodeType&&exports,ns=Ss&&"object"==typeof module&&module&&!module.nodeType&&module,As=ns&&ns.exports===Ss&&Q.process,rn=function(){try{return ns&&ns.require&&ns.require("util").types||As&&As.binding&&As.binding("util")}catch{}}(),xr=rn&&rn.isTypedArray;const wr=xr?function zs(z){return function(ne){return z(ne)}}(xr):function tn(z){return _s(z)&&Mi(z.length)&&!!wt[_t(z)]},Vs=function Tr(z,ne){if(("constructor"!==ne||"function"!=typeof z[ne])&&"__proto__"!=ne)return z[ne]};var p=Object.prototype.hasOwnProperty;const k=function x(z,ne,ge){var Le=z[ne];(!p.call(z,ne)||!w(Le,ge)||void 0===ge&&!(ne in z))&&is(z,ne,ge)};var xe=/^(?:0|[1-9]\d*)$/;const Qe=function Ie(z,ne){var ge=typeof z;return!!(ne=ne??9007199254740991)&&("number"==ge||"symbol"!=ge&&xe.test(z))&&z>-1&&z%1==0&&z<ne};var yt=Object.prototype.hasOwnProperty;const at=function Lt(z,ne){var ge=Ki(z),Le=!ge&&gs(z),lt=!ge&&!Le&&Hs(z),St=!ge&&!Le&&!lt&&wr(z),mt=ge||Le||lt||St,gt=mt?function ee(z,ne){for(var ge=-1,Le=Array(z);++ge<z;)Le[ge]=ne(ge);return Le}(z.length,String):[],Rt=gt.length;for(var yi in z)(ne||yt.call(z,yi))&&(!mt||!("length"==yi||lt&&("offset"==yi||"parent"==yi)||St&&("buffer"==yi||"byteLength"==yi||"byteOffset"==yi)||Qe(yi,Rt)))&&gt.push(yi);return gt};var ys=Object.prototype.hasOwnProperty;const on=function nn(z){if(!dt(z))return function Ge(z){var ne=[];if(null!=z)for(var ge in Object(z))ne.push(ge);return ne}(z);var ne=sr(z),ge=[];for(var Le in z)"constructor"==Le&&(ne||!ys.call(z,Le))||ge.push(Le);return ge},Dr=function Mr(z){return Is(z)?at(z,!0):on(z)},Ps=function os(z){return function H(z,ne,ge,Le){var lt=!ge;ge||(ge={});for(var St=-1,mt=ne.length;++St<mt;){var gt=ne[St],Rt=Le?Le(ge[gt],z[gt],gt,ge,z):void 0;void 0===Rt&&(Rt=z[gt]),lt?is(ge,gt,Rt):k(ge,gt,Rt)}return ge}(z,Dr(z))},kn=function On(z,ne,ge,Le,lt,St,mt){var gt=Vs(z,ge),Rt=Vs(ne,ge),yi=mt.get(Rt);if(yi)ss(z,ge,yi);else{var _i=St?St(gt,Rt,ge+"",z,ne,mt):void 0,Ys=void 0===_i;if(Ys){var cn=Ki(Rt),hn=!cn&&Hs(Rt),dn=!cn&&!hn&&wr(Rt);_i=Rt,cn||hn||dn?Ki(gt)?_i=gt:function Wr(z){return _s(z)&&Is(z)}(gt)?_i=function Qs(z,ne){var ge=-1,Le=z.length;for(ne||(ne=Array(Le));++ge<Le;)ne[ge]=z[ge];return ne}(gt):hn?(Ys=!1,_i=function Nt(z,ne){if(ne)return z.slice();var ge=z.length,Le=Mt?Mt(ge):new z.constructor(ge);return z.copy(Le),Le}(Rt,!0)):dn?(Ys=!1,_i=qs(Rt,!0)):_i=[]:function fr(z){if(!_s(z)||"[object Object]"!=_t(z))return!1;var ne=ir(z);if(null===ne)return!0;var ge=Ns.call(ne,"constructor")&&ne.constructor;return"function"==typeof ge&&ge instanceof ge&&bi.call(ge)==Kr}(Rt)||gs(Rt)?(_i=gt,gs(gt)?_i=Ps(gt):(!dt(gt)||Ft(gt))&&(_i=function rr(z){return"function"!=typeof z.constructor||sr(z)?{}:ws(ir(z))}(Rt))):Ys=!1}Ys&&(mt.set(Rt,_i),lt(_i,Rt,Le,St,mt),mt.delete(Rt)),ss(z,ge,_i)}},An=function Ks(z,ne,ge,Le,lt){z!==ne&&fe(ne,function(St,mt){if(lt||(lt=new Ti),dt(St))kn(z,ne,mt,ge,Ks,Le,lt);else{var gt=Le?Le(Vs(z,mt),St,mt+"",z,ne,lt):void 0;void 0===gt&&(gt=St),ss(z,mt,gt)}},Dr)},Di=function $s(z){return z};var an=Math.max;const gn=function In(z){return function(){return z}};var Bn=si?function(z,ne){return si(z,"toString",{configurable:!0,enumerable:!1,value:gn(ne),writable:!0})}:Di,vn=Date.now,bn=function Hn(z){var ne=0,ge=0;return function(){var Le=vn(),lt=16-(Le-ge);if(ge=Le,lt>0){if(++ne>=800)return arguments[0]}else ne=0;return z.apply(void 0,arguments)}}(Bn);const li=bn,Wn=function Sn(z,ne){return li(function Ln(z,ne,ge){return ne=an(void 0===ne?z.length-1:ne,0),function(){for(var Le=arguments,lt=-1,St=an(Le.length-ne,0),mt=Array(St);++lt<St;)mt[lt]=Le[ne+lt];lt=-1;for(var gt=Array(ne+1);++lt<ne;)gt[lt]=Le[lt];return gt[ne]=ge(mt),function Xi(z,ne,ge){switch(ge.length){case 0:return z.call(ne);case 1:return z.call(ne,ge[0]);case 2:return z.call(ne,ge[0],ge[1]);case 3:return z.call(ne,ge[0],ge[1],ge[2])}return z.apply(ne,ge)}(z,this,gt)}}(z,ne,Di),z+"")};var yn=function jn(z){return Wn(function(ne,ge){var Le=-1,lt=ge.length,St=lt>1?ge[lt-1]:void 0,mt=lt>2?ge[2]:void 0;for(St=z.length>3&&"function"==typeof St?(lt--,St):void 0,mt&&function Un(z,ne,ge){if(!dt(ge))return!1;var Le=typeof ne;return!!("number"==Le?Is(ge)&&Qe(ne,ge.length):"string"==Le&&ne in ge)&&w(ge[ne],z)}(ge[0],ge[1],mt)&&(St=lt<3?void 0:St,lt=1),ne=Object(ne);++Le<lt;){var gt=ge[Le];gt&&z(ne,gt,Le,St)}return ne})}(function(z,ne,ge){An(z,ne,ge)});const Cn=yn;let Vn=(()=>{var z;class ne{constructor(){this.colorschemesOptions=new g.X(void 0)}setColorschemesOptions(Le){this.pColorschemesOptions=Le,this.colorschemesOptions.next(Le)}getColorschemesOptions(){return this.pColorschemesOptions}}return(z=ne).\u0275fac=function(Le){return new(Le||z)},z.\u0275prov=U.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),ne})(),xn=(()=>{var z;class ne{constructor(Le,lt,St){this.zone=lt,this.themeService=St,this.type="bar",this.plugins=[],this.chartClick=new U.vpe,this.chartHover=new U.vpe,this.subs=[],this.themeOverrides={},this.ctx=Le.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe((0,v.x)()).subscribe(mt=>this.themeChanged(mt)))}ngOnChanges(Le){const lt=["type"],St=Object.getOwnPropertyNames(Le);if(St.some(mt=>lt.includes(mt))||St.every(mt=>Le[mt].isFirstChange()))this.render();else{const mt=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,mt.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,mt.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,mt.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(Le=>Le.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new u.kL(this.ctx,this.getChartConfiguration()))}update(Le){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(Le))}hideDataset(Le,lt){this.chart&&(this.chart.getDatasetMeta(Le).hidden=lt,this.update())}isDatasetHidden(Le){return this.chart?.getDatasetMeta(Le)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(Le){this.themeOverrides=Le,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return Cn({onHover:(Le,lt)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:Le,active:lt}))},onClick:(Le,lt)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:Le,active:lt}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}}return(z=ne).\u0275fac=function(Le){return new(Le||z)(U.Y36(U.SBq),U.Y36(U.R0b),U.Y36(Vn))},z.\u0275dir=U.lG2({type:z,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[U.TTD]}),ne})();const kr=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],ln={plugins:{colors:{enabled:!1}},datasets:{line:{backgroundColor:z=>Si(qi(z.datasetIndex),.4),borderColor:z=>Si(qi(z.datasetIndex),1),pointBackgroundColor:z=>Si(qi(z.datasetIndex),1),pointBorderColor:"#fff"},bar:{backgroundColor:z=>Si(qi(z.datasetIndex),.6),borderColor:z=>Si(qi(z.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:z=>Si(qi(z.dataIndex),.6),borderColor:"#fff"},get pie(){return this.doughnut},polarArea:{backgroundColor:z=>Si(qi(z.dataIndex),.6),borderColor:z=>Si(qi(z.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function Si(z,ne){return"rgba("+z.concat(ne).join(",")+")"}function Gi(z,ne){return Math.floor(Math.random()*(ne-z+1))+z}function qi(z=0){return kr[z]||function En(){return[Gi(0,255),Gi(0,255),Gi(0,255)]}()}let wn=(()=>{var z;class ne{constructor(){this.generateColors=!0}}return(z=ne).\u0275fac=function(Le){return new(Le||z)},z.\u0275prov=U.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),ne})();u.kL.register(...u.zX);let Kn=(()=>{var z;class ne{constructor(Le){Le?.plugins&&u.kL.register(...Le.plugins);const lt=Cn(Le?.generateColors?ln:{},Le?.defaults||{});he.d.set(lt)}static forRoot(Le){return{ngModule:ne,providers:[{provide:wn,useValue:Le}]}}}return(z=ne).\u0275fac=function(Le){return new(Le||z)(U.LFG(wn,8))},z.\u0275mod=U.oAB({type:z}),z.\u0275inj=U.cJS({}),ne})()},3427:(Ct,qe,se)=>{"use strict";se.d(qe,{Co:()=>Ze,UU:()=>Se,nu:()=>$e});var U=se(6028),u=se(5879),he=se(6223),g=se(3680),v=se(5683),y=se(8525),T=se(5619),m=se(2096),w=se(2572),D=se(8645),L=se(4664),M=se(7398),l=se(7921),f=se(932),c=se(9773),d=se(8180),b=se(9397),E=se(2181),A=se(8774),R=se(6814),C=se(2296),P=se(5986),K=se(617),ie=se(5940),X=se(2596),J=se(6385);const me=["searchSelectInput"],ve=["innerSelectSearch"];function De(Ue,nt){if(1&Ue){const Te=u.EpF();u.TgZ(0,"mat-checkbox",10),u.NdJ("change",function(Je){u.CHM(Te);const tt=u.oxw();return u.KtG(tt._emitSelectAllBooleanToParent(Je.checked))}),u.qZA()}if(2&Ue){const Te=u.oxw();u.Q6J("color",null==Te.matFormField?null:Te.matFormField.color)("checked",Te.toggleAllCheckboxChecked)("indeterminate",Te.toggleAllCheckboxIndeterminate)("matTooltip",Te.toggleAllCheckboxTooltipMessage)("matTooltipPosition",Te.toggleAllCheckboxTooltipPosition)}}function Ce(Ue,nt){1&Ue&&u._UZ(0,"mat-spinner",11)}function N(Ue,nt){1&Ue&&u.Hsn(0,1,["*ngIf","clearIcon; else defaultIcon"])}function G(Ue,nt){if(1&Ue&&(u.TgZ(0,"mat-icon",15),u._uU(1),u.qZA()),2&Ue){const Te=u.oxw(2);u.Q6J("svgIcon",Te.closeSvgIcon),u.xp6(1),u.hij(" ",Te.closeSvgIcon?null:Te.closeIcon," ")}}function Q(Ue,nt){if(1&Ue){const Te=u.EpF();u.TgZ(0,"button",12),u.NdJ("click",function(){u.CHM(Te);const Je=u.oxw();return u.KtG(Je._reset(!0))}),u.YNc(1,N,1,0,"ng-content",13),u.YNc(2,G,2,2,"ng-template",null,14,u.W1O),u.qZA()}if(2&Ue){const Te=u.MAs(3),Ae=u.oxw();u.xp6(1),u.Q6J("ngIf",Ae.clearIcon)("ngIfElse",Te)}}function re(Ue,nt){1&Ue&&u.Hsn(0,2,["*ngIf","noEntriesFound; else defaultNoEntriesFound"])}function ke(Ue,nt){if(1&Ue&&u._uU(0),2&Ue){const Te=u.oxw(2);u.Oqu(Te.noEntriesFoundLabel)}}function He(Ue,nt){if(1&Ue&&(u.TgZ(0,"div",16),u.YNc(1,re,1,0,"ng-content",13),u.YNc(2,ke,1,1,"ng-template",null,17,u.W1O),u.qZA()),2&Ue){const Te=u.MAs(3),Ae=u.oxw();u.xp6(1),u.Q6J("ngIf",Ae.noEntriesFound)("ngIfElse",Te)}}const We=[[["",8,"mat-select-search-custom-header-content"]],[["","ngxMatSelectSearchClear",""]],[["","ngxMatSelectNoEntriesFound",""]]],Re=function(Ue,nt){return{"mat-select-search-inner-multiple":Ue,"mat-select-search-inner-toggle-all":nt}},Ke=[".mat-select-search-custom-header-content","[ngxMatSelectSearchClear]","[ngxMatSelectNoEntriesFound]"];let I=(()=>{class Ue{}return Ue.\u0275fac=function(Te){return new(Te||Ue)},Ue.\u0275dir=u.lG2({type:Ue,selectors:[["","ngxMatSelectSearchClear",""]]}),Ue})();const le=["ariaLabel","clearSearchInput","closeIcon","closeSvgIcon","disableInitialFocus","disableScrollToActiveOnOptionsChanged","enableClearOnEscapePressed","hideClearSearchButton","noEntriesFoundLabel","placeholderLabel","preventHomeEndKeyPropagation","searching"],Se=new u.OlP("mat-selectsearch-default-options");let ye=(()=>{class Ue{}return Ue.\u0275fac=function(Te){return new(Te||Ue)},Ue.\u0275dir=u.lG2({type:Ue,selectors:[["","ngxMatSelectNoEntriesFound",""]]}),Ue})(),$e=(()=>{class Ue{constructor(Te,Ae,Je,tt=null,_t=null,Wt){this.matSelect=Te,this.changeDetectorRef=Ae,this._viewportRuler=Je,this.matOption=tt,this.matFormField=_t,this.placeholderLabel="Suche",this.type="text",this.closeIcon="close",this.noEntriesFoundLabel="Keine Optionen gefunden",this.clearSearchInput=!0,this.searching=!1,this.disableInitialFocus=!1,this.enableClearOnEscapePressed=!1,this.preventHomeEndKeyPropagation=!1,this.disableScrollToActiveOnOptionsChanged=!1,this.ariaLabel="dropdown search",this.showToggleAllCheckbox=!1,this.toggleAllCheckboxChecked=!1,this.toggleAllCheckboxIndeterminate=!1,this.toggleAllCheckboxTooltipMessage="",this.toggleAllCheckboxTooltipPosition="below",this.hideClearSearchButton=!1,this.alwaysRestoreSelectedOptionsMulti=!1,this.toggleAll=new u.vpe,this.onTouched=dt=>{},this._options$=new T.X(null),this.optionsList$=this._options$.pipe((0,L.w)(dt=>dt?dt.changes.pipe((0,M.U)(bt=>bt.toArray()),(0,l.O)(dt.toArray())):(0,m.of)(null))),this.optionsLength$=this.optionsList$.pipe((0,M.U)(dt=>dt?dt.length:0)),this._formControl=new he.NI(""),this._showNoEntriesFound$=(0,w.a)([this._formControl.valueChanges,this.optionsLength$]).pipe((0,M.U)(([dt,bt])=>this.noEntriesFoundLabel&&dt&&bt===this.getOptionsLengthOffset())),this._onDestroy=new D.x,this.applyDefaultOptions(Wt)}get value(){return this._formControl.value}set _options(Te){this._options$.next(Te)}get _options(){return this._options$.getValue()}applyDefaultOptions(Te){if(Te)for(const Ae of le)Te.hasOwnProperty(Ae)&&(this[Ae]=Te[Ae])}ngOnInit(){this.matOption?(this.matOption.disabled=!0,this.matOption._getHostElement().classList.add("contains-mat-select-search"),this.matOption._getHostElement().setAttribute("aria-hidden","true")):console.error("<ngx-mat-select-search> must be placed inside a <mat-option> element"),this.matSelect.openedChange.pipe((0,f.g)(1),(0,c.R)(this._onDestroy)).subscribe(Te=>{Te?(this.updateInputWidth(),this.disableInitialFocus||this._focus()):this.clearSearchInput&&this._reset()}),this.matSelect.openedChange.pipe((0,d.q)(1),(0,L.w)(Te=>{this._options=this.matSelect.options;let Ae=this._options.toArray()[this.getOptionsLengthOffset()];return this._options.changes.pipe((0,b.b)(()=>{setTimeout(()=>{const Je=this._options.toArray(),tt=Je[this.getOptionsLengthOffset()],_t=this.matSelect._keyManager;_t&&this.matSelect.panelOpen&&((!this.matSelect.compareWith(Ae,tt)||!_t.activeItem||!Je.find(dt=>this.matSelect.compareWith(dt,_t.activeItem)))&&_t.setActiveItem(this.getOptionsLengthOffset()),setTimeout(()=>{this.updateInputWidth()})),Ae=tt})}))})).pipe((0,c.R)(this._onDestroy)).subscribe(),this._showNoEntriesFound$.pipe((0,c.R)(this._onDestroy)).subscribe(Te=>{this.matOption&&(Te?this.matOption._getHostElement().classList.add("mat-select-search-no-entries-found"):this.matOption._getHostElement().classList.remove("mat-select-search-no-entries-found"))}),this._viewportRuler.change().pipe((0,c.R)(this._onDestroy)).subscribe(()=>{this.matSelect.panelOpen&&this.updateInputWidth()}),this.initMultipleHandling(),this.optionsList$.pipe((0,c.R)(this._onDestroy)).subscribe(()=>{this.changeDetectorRef.markForCheck()})}_emitSelectAllBooleanToParent(Te){this.toggleAll.emit(Te)}ngOnDestroy(){this._onDestroy.next(),this._onDestroy.complete()}_isToggleAllCheckboxVisible(){return this.matSelect.multiple&&this.showToggleAllCheckbox}_handleKeydown(Te){(Te.key&&1===Te.key.length||Te.keyCode>=U.A&&Te.keyCode<=U.Z||Te.keyCode>=U.xE&&Te.keyCode<=U.aO||Te.keyCode===U.L_||this.preventHomeEndKeyPropagation&&(Te.keyCode===U.Sd||Te.keyCode===U.uR))&&Te.stopPropagation(),this.matSelect.multiple&&Te.key&&Te.keyCode===U.K5&&setTimeout(()=>this._focus()),!0===this.enableClearOnEscapePressed&&Te.keyCode===U.hY&&this.value&&(this._reset(!0),Te.stopPropagation())}_handleKeyup(Te){if(Te.keyCode===U.LH||Te.keyCode===U.JH){const Ae=this.matSelect._getAriaActiveDescendant(),Je=this._options.toArray().findIndex(tt=>tt.id===Ae);-1!==Je&&(this.unselectActiveDescendant(),this.activeDescendant=this._options.toArray()[Je]._getHostElement(),this.activeDescendant.setAttribute("aria-selected","true"),this.searchSelectInput.nativeElement.setAttribute("aria-activedescendant",Ae))}}writeValue(Te){this._lastExternalInputValue=Te,this._formControl.setValue(Te),this.changeDetectorRef.markForCheck()}onBlur(){this.unselectActiveDescendant(),this.onTouched()}registerOnChange(Te){this._formControl.valueChanges.pipe((0,E.h)(Ae=>Ae!==this._lastExternalInputValue),(0,b.b)(()=>this._lastExternalInputValue=void 0),(0,c.R)(this._onDestroy)).subscribe(Te)}registerOnTouched(Te){this.onTouched=Te}_focus(){if(!this.searchSelectInput||!this.matSelect.panel)return;const Te=this.matSelect.panel.nativeElement,Ae=Te.scrollTop;this.searchSelectInput.nativeElement.focus(),Te.scrollTop=Ae}_reset(Te){this._formControl.setValue(""),Te&&this._focus()}initMultipleHandling(){this.matSelect.ngControl?(this.previousSelectedValues=this.matSelect.ngControl.value,this.matSelect.ngControl.valueChanges.pipe((0,c.R)(this._onDestroy)).subscribe(Te=>{let Ae=!1;if(this.matSelect.multiple&&(this.alwaysRestoreSelectedOptionsMulti||this._formControl.value&&this._formControl.value.length)&&this.previousSelectedValues&&Array.isArray(this.previousSelectedValues)){(!Te||!Array.isArray(Te))&&(Te=[]);const Je=this.matSelect.options.map(tt=>tt.value);this.previousSelectedValues.forEach(tt=>{!Te.some(_t=>this.matSelect.compareWith(_t,tt))&&!Je.some(_t=>this.matSelect.compareWith(_t,tt))&&(Te.push(tt),Ae=!0)})}this.previousSelectedValues=Te,Ae&&this.matSelect._onChange(Te)})):this.matSelect.multiple&&console.error("the mat-select containing ngx-mat-select-search must have a ngModel or formControl directive when multiple=true")}updateInputWidth(){if(!this.innerSelectSearch||!this.innerSelectSearch.nativeElement)return;let Ae,Te=this.innerSelectSearch.nativeElement;for(;Te=Te.parentElement;)if(Te.classList.contains("mat-select-panel")){Ae=Te;break}Ae&&(this.innerSelectSearch.nativeElement.style.width=Ae.clientWidth+"px")}getOptionsLengthOffset(){return this.matOption?1:0}unselectActiveDescendant(){this.activeDescendant?.removeAttribute("aria-selected"),this.searchSelectInput.nativeElement.removeAttribute("aria-activedescendant")}}return Ue.\u0275fac=function(Te){return new(Te||Ue)(u.Y36(y.gD),u.Y36(u.sBO),u.Y36(A.rL),u.Y36(g.ey,8),u.Y36(v.KE,8),u.Y36(Se,8))},Ue.\u0275cmp=u.Xpm({type:Ue,selectors:[["ngx-mat-select-search"]],contentQueries:function(Te,Ae,Je){if(1&Te&&(u.Suo(Je,I,5),u.Suo(Je,ye,5)),2&Te){let tt;u.iGM(tt=u.CRH())&&(Ae.clearIcon=tt.first),u.iGM(tt=u.CRH())&&(Ae.noEntriesFound=tt.first)}},viewQuery:function(Te,Ae){if(1&Te&&(u.Gf(me,7,u.SBq),u.Gf(ve,7,u.SBq)),2&Te){let Je;u.iGM(Je=u.CRH())&&(Ae.searchSelectInput=Je.first),u.iGM(Je=u.CRH())&&(Ae.innerSelectSearch=Je.first)}},inputs:{placeholderLabel:"placeholderLabel",type:"type",closeIcon:"closeIcon",closeSvgIcon:"closeSvgIcon",noEntriesFoundLabel:"noEntriesFoundLabel",clearSearchInput:"clearSearchInput",searching:"searching",disableInitialFocus:"disableInitialFocus",enableClearOnEscapePressed:"enableClearOnEscapePressed",preventHomeEndKeyPropagation:"preventHomeEndKeyPropagation",disableScrollToActiveOnOptionsChanged:"disableScrollToActiveOnOptionsChanged",ariaLabel:"ariaLabel",showToggleAllCheckbox:"showToggleAllCheckbox",toggleAllCheckboxChecked:"toggleAllCheckboxChecked",toggleAllCheckboxIndeterminate:"toggleAllCheckboxIndeterminate",toggleAllCheckboxTooltipMessage:"toggleAllCheckboxTooltipMessage",toggleAllCheckboxTooltipPosition:"toggleAllCheckboxTooltipPosition",hideClearSearchButton:"hideClearSearchButton",alwaysRestoreSelectedOptionsMulti:"alwaysRestoreSelectedOptionsMulti"},outputs:{toggleAll:"toggleAll"},features:[u._Bn([{provide:he.JU,useExisting:(0,u.Gpc)(()=>Ue),multi:!0}])],ngContentSelectors:Ke,decls:13,vars:14,consts:[["matInput","",1,"mat-select-search-input","mat-select-search-hidden"],[1,"mat-select-search-inner","mat-typography","mat-datepicker-content","mat-tab-header",3,"ngClass"],["innerSelectSearch",""],[1,"mat-select-search-inner-row"],["class","mat-select-search-toggle-all-checkbox","matTooltipClass","ngx-mat-select-search-toggle-all-tooltip",3,"color","checked","indeterminate","matTooltip","matTooltipPosition","change",4,"ngIf"],["autocomplete","off",1,"mat-select-search-input",3,"type","formControl","placeholder","keydown","keyup","blur"],["searchSelectInput",""],["class","mat-select-search-spinner","diameter","16",4,"ngIf"],["mat-icon-button","","aria-label","Clear","class","mat-select-search-clear",3,"click",4,"ngIf"],["class","mat-select-search-no-entries-found",4,"ngIf"],["matTooltipClass","ngx-mat-select-search-toggle-all-tooltip",1,"mat-select-search-toggle-all-checkbox",3,"color","checked","indeterminate","matTooltip","matTooltipPosition","change"],["diameter","16",1,"mat-select-search-spinner"],["mat-icon-button","","aria-label","Clear",1,"mat-select-search-clear",3,"click"],[4,"ngIf","ngIfElse"],["defaultIcon",""],[3,"svgIcon"],[1,"mat-select-search-no-entries-found"],["defaultNoEntriesFound",""]],template:function(Te,Ae){1&Te&&(u.F$t(We),u._UZ(0,"input",0),u.TgZ(1,"div",1,2)(3,"div",3),u.YNc(4,De,1,5,"mat-checkbox",4),u.TgZ(5,"input",5,6),u.NdJ("keydown",function(tt){return Ae._handleKeydown(tt)})("keyup",function(tt){return Ae._handleKeyup(tt)})("blur",function(){return Ae.onBlur()}),u.qZA(),u.YNc(7,Ce,1,0,"mat-spinner",7),u.YNc(8,Q,4,2,"button",8),u.Hsn(9),u.qZA(),u._UZ(10,"mat-divider"),u.qZA(),u.YNc(11,He,4,2,"div",9),u.ALo(12,"async")),2&Te&&(u.xp6(1),u.Q6J("ngClass",u.WLB(11,Re,Ae.matSelect.multiple,Ae._isToggleAllCheckboxVisible())),u.xp6(3),u.Q6J("ngIf",Ae._isToggleAllCheckboxVisible()),u.xp6(1),u.Q6J("type",Ae.type)("formControl",Ae._formControl)("placeholder",Ae.placeholderLabel),u.uIk("aria-label",Ae.ariaLabel),u.xp6(2),u.Q6J("ngIf",Ae.searching),u.xp6(1),u.Q6J("ngIf",!Ae.hideClearSearchButton&&Ae.value&&!Ae.searching),u.xp6(3),u.Q6J("ngIf",u.lcZ(12,9,Ae._showNoEntriesFound$)))},dependencies:[R.mk,R.O5,he.Fj,he.JJ,he.oH,C.RK,P.oG,K.Hw,ie.Ou,X.gM,J.d,R.Ov],styles:[".mat-select-search-hidden[_ngcontent-%COMP%]{visibility:hidden}.mat-select-search-inner[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;z-index:100;font-size:inherit;box-shadow:none;background-color:var(--mat-select-panel-background-color)}.mat-select-search-inner.mat-select-search-inner-multiple.mat-select-search-inner-toggle-all[_ngcontent-%COMP%]   .mat-select-search-inner-row[_ngcontent-%COMP%]{display:flex;align-items:center}.mat-select-search-input[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;border:none;font-family:inherit;font-size:inherit;color:currentColor;outline:none;background-color:var(--mat-select-panel-background-color);padding:0 44px 0 16px;height:calc(3em - 1px);line-height:calc(3em - 1px)}[dir=rtl][_nghost-%COMP%]   .mat-select-search-input[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .mat-select-search-input[_ngcontent-%COMP%]{padding-right:16px;padding-left:44px}.mat-select-search-inner-toggle-all[_ngcontent-%COMP%]   .mat-select-search-input[_ngcontent-%COMP%]{padding-left:5px}.mat-select-search-no-entries-found[_ngcontent-%COMP%]{padding-top:8px}.mat-select-search-clear[_ngcontent-%COMP%]{position:absolute;right:4px;top:0}[dir=rtl][_nghost-%COMP%]   .mat-select-search-clear[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .mat-select-search-clear[_ngcontent-%COMP%]{right:auto;left:4px}.mat-select-search-spinner[_ngcontent-%COMP%]{position:absolute;right:16px;top:calc(50% - 8px)}[dir=rtl][_nghost-%COMP%]   .mat-select-search-spinner[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .mat-select-search-spinner[_ngcontent-%COMP%]{right:auto;left:16px}  .mat-mdc-option[aria-disabled=true].contains-mat-select-search{position:sticky;top:-8px;z-index:1;opacity:1;margin-top:-8px;pointer-events:all}  .mat-mdc-option[aria-disabled=true].contains-mat-select-search .mat-icon{margin-right:0;margin-left:0}  .mat-mdc-option[aria-disabled=true].contains-mat-select-search mat-pseudo-checkbox{display:none}  .mat-mdc-option[aria-disabled=true].contains-mat-select-search .mdc-list-item__primary-text{opacity:1}.mat-select-search-toggle-all-checkbox[_ngcontent-%COMP%]{padding-left:5px}[dir=rtl][_nghost-%COMP%]   .mat-select-search-toggle-all-checkbox[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .mat-select-search-toggle-all-checkbox[_ngcontent-%COMP%]{padding-left:0;padding-right:5px}"],changeDetection:0}),Ue})(),Ze=(()=>{class Ue{}return Ue.\u0275fac=function(Te){return new(Te||Ue)},Ue.\u0275mod=u.oAB({type:Ue}),Ue.\u0275inj=u.cJS({imports:[R.ez,he.UX,C.ot,P.p9,K.Ps,ie.Cq,X.AV,J.t]}),Ue})()},1180:(Ct,qe,se)=>{"use strict";function U(v){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(v)}function g(v,y,T){return(y=function he(v){var y=function u(v,y){if("object"!==U(v)||null===v)return v;var T=v[Symbol.toPrimitive];if(void 0!==T){var m=T.call(v,y||"default");if("object"!==U(m))return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===y?String:Number)(v)}(v,"string");return"symbol"===U(y)?y:String(y)}(y))in v?Object.defineProperty(v,y,{value:T,enumerable:!0,configurable:!0,writable:!0}):v[y]=T,v}se.d(qe,{Z:()=>g})}}]);