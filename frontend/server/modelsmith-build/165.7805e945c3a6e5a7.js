"use strict";(self.webpackChunkmodelsmith=self.webpackChunkmodelsmith||[]).push([[165],{6165:(J,y,n)=>{n.r(y),n.d(y,{ModelTrainingModule:()=>ct});var g,o=n(6814),N=n(4245),m=n(3328),v=n(1668),T=n(1501),p=n(2655),d=n(7582),l=n(6223),c=n(8791),O=n(3620),S=n(7398),_=n(3997),F=n(2181),L=n(3607),B=n(39),f=n(4378),r=n(7820),P=n(127),t=n(5879),M=n(9532),U=n(3705),b=n(2296),Y=n(617),R=n(836),K=n(8180),G=n(5195),D=n(5683),k=n(8525),w=n(3680);function z(i,e){if(1&i&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.key),t.xp6(1),t.hij(" ",a.value," ")}}let Z=((g=class{get parentFormGroup(){return this.controlContainer.control}get algorithmTypeFormGroup(){return this.parentFormGroup.get(this.controlKey)}get algorithmTypeFormControl(){return this.algorithmTypeFormGroup.get(this.ALGORITHM_TYPE_CONTROL_NAME)}constructor(e,a){this.controlContainer=e,this.scriptFacadeService=a,this.controlKey="",this.algorithmTypesOptions=r.VN.filter(s=>s.key!==r.Bd.TRAIN),this.ALGORITHM_TYPE_CONTROL_NAME="algorithmType"}ngOnInit(){this.initForm(),this.loadInitialData(),this.listenToScriptStateChanges()}loadInitialData(){this.scriptFacadeService.scriptDetails$.pipe((0,R.T)(1),(0,K.q)(1),(0,F.h)(e=>!(0,f.Bm)(e?.algKey)),(0,S.U)(e=>e.algKey)).subscribe(e=>{switch(e){case r.tp.MACHINE_UNLEARNING_TRAIN:this.algorithmTypeFormControl.patchValue(r.Bd.MACHINE_UNLEARNING);break;case r.tp.PRUNING_TRAIN:this.algorithmTypeFormControl.patchValue(r.Bd.PRUNING);break;case r.tp.QUANTIZATION_TRAIN:this.algorithmTypeFormControl.patchValue(r.Bd.QUANTIZATION);break;default:{const a=(0,r.t6)(e);if((0,f.Bm)(a))break;this.algorithmTypeFormControl.patchValue(a)}}}),this.scriptFacadeService.dispatch(B.aj.getCurrentOrLastActiveScriptDetails())}initForm(){this.parentFormGroup.addControl(this.controlKey,new l.cw({[this.ALGORITHM_TYPE_CONTROL_NAME]:new l.NI(r.Bd.PRUNING,l.kI.required)}))}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,c.t)(this)).subscribe(e=>{(0,P.A)(e)?this.algorithmTypeFormGroup.disable():this.algorithmTypeFormGroup.enable()})}trackByAlgorithmType(e,a){return a.key}}).\u0275fac=function(e){return new(e||g)(t.Y36(l.gN),t.Y36(M.OF))},g.\u0275cmp=t.Xpm({type:g,selectors:[["ms-panel-algorithm-type"]],inputs:{controlKey:"controlKey"},features:[t._Bn([],[{provide:l.gN,useFactory:()=>(0,t.f3M)(l.gN,{skipSelf:!0})}])],decls:8,vars:4,consts:[[1,"ms-card","parameters-card"],[1,"heading-sub-section-title"],[3,"formGroupName"],[1,"form-field-container"],["appearance","outline","subscriptSizing","dynamic"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"p",1),t._uU(2,"Algorithm Type"),t.qZA(),t.ynx(3,2),t.TgZ(4,"div",3)(5,"mat-form-field",4)(6,"mat-select",5),t.YNc(7,z,2,2,"mat-option",6),t.qZA()()(),t.BQk(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("formGroupName",a.controlKey),t.xp6(3),t.Q6J("formControlName",a.ALGORITHM_TYPE_CONTROL_NAME),t.xp6(1),t.Q6J("ngForOf",a.algorithmTypesOptions)("ngForTrackBy",a.trackByAlgorithmType))},dependencies:[o.sg,G.a8,D.KE,k.gD,w.ey,l.JJ,l.JL,l.u,l.x0]}),g);Z=(0,d.gn)([(0,c.c)()],Z);var $=n(6385),V=n(7754);let j=(()=>{var i;class e{transform(s,A=2){const C=Number(s);if(isNaN(C)||0===C)return"0 Bytes";const pt=A<0?0:A,Q=Math.floor(Math.log(C)/Math.log(1024));return parseFloat((C/Math.pow(1024,Q)).toFixed(pt))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][Q]}}return(i=e).\u0275fac=function(s){return new(s||i)},i.\u0275pipe=t.Yjl({name:"adaptiveFileSize",type:i,pure:!0,standalone:!0}),e})();var h,H=n(5844),X=n(7602);function W(i,e){if(1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"adaptiveFileSize"),t.BQk()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.value))}}function q(i,e){if(1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"date"),t.BQk()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,a.value,"medium"))}}function tt(i,e){if(1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"readableDuration"),t.BQk()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.value))}}function et(i,e){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(a.value)}}function at(i,e){1&i&&(t.TgZ(0,"div",15),t._UZ(1,"mat-divider"),t.qZA())}function it(i,e){if(1&i&&(t.TgZ(0,"div")(1,"div",8)(2,"div",9),t._uU(3),t.ALo(4,"parametersLabel"),t.qZA(),t.TgZ(5,"div",10),t.ynx(6,11),t.YNc(7,W,3,3,"ng-container",12),t.YNc(8,q,3,4,"ng-container",12),t.YNc(9,tt,3,3,"ng-container",12),t.YNc(10,et,2,1,"ng-container",13),t.BQk(),t.qZA()(),t.YNc(11,at,2,0,"div",14),t.qZA()),2&i){const a=e.$implicit,s=e.last;t.xp6(3),t.hij("",t.lcZ(4,6,a.key),":"),t.xp6(3),t.Q6J("ngSwitch",a.key),t.xp6(1),t.Q6J("ngSwitchCase","file_size_bytes"),t.xp6(1),t.Q6J("ngSwitchCase","creation_date"),t.xp6(1),t.Q6J("ngSwitchCase","training_duration_seconds"),t.xp6(2),t.Q6J("ngIf",!s)}}function nt(i,e){if(1&i&&(t.TgZ(0,"div",6),t.YNc(1,it,12,8,"div",7),t.qZA()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",a)}}function ot(i,e){if(1&i&&(t.TgZ(0,"div",4),t.YNc(1,nt,2,1,"div",5),t.qZA()),2&i){const a=e.$implicit;t.oxw();const s=t.MAs(6);t.xp6(1),t.Q6J("ngIf",a.length>0)("ngIfElse",s)}}function st(i,e){1&i&&t._UZ(0,"ms-empty-state",16)}let I=((h=class{constructor(e){this.modelsFacadeService=e,this.metadata={}}ngOnInit(){this.modelsFacadeService.modelMetadata$.pipe((0,R.T)(1),(0,c.t)(this)).subscribe(e=>{this.metadata=e})}}).\u0275fac=function(e){return new(e||h)(t.Y36(U.V))},h.\u0275cmp=t.Xpm({type:h,selectors:[["ms-panel-model-metadata"]],decls:7,vars:3,consts:[[1,"ms-card","metadata-card"],[1,"heading-sub-section-title"],["class","metadata-wrapper",4,"ngIf"],["noMetadata",""],[1,"metadata-wrapper"],["class","key-value-container single",4,"ngIf","ngIfElse"],[1,"key-value-container","single"],[4,"ngFor","ngForOf"],[1,"key-value-pair","space-between"],[1,"key-value-key"],[1,"key-value-value"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","pt-2",4,"ngIf"],[1,"pt-2"],["title","No metadata available"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"p",1),t._uU(2,"Model Training Information"),t.qZA(),t.YNc(3,ot,2,2,"div",2),t.ALo(4,"keyvalue"),t.YNc(5,st,1,0,"ng-template",null,3,t.W1O),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",t.lcZ(4,1,a.metadata)))},dependencies:[o.sg,o.O5,o.RF,o.n9,o.ED,$.d,G.a8,V.u,o.uU,o.Nd,j,H.n,X.N],styles:[".metadata-wrapper[_ngcontent-%COMP%]{max-height:300px;overflow:auto;padding-right:20px}"]}),h);var u;I=(0,d.gn)([(0,c.c)()],I);const lt=["panelParameters"];let x=((u=class{constructor(e,a,s,A){this.navigationService=e,this.scriptFacadeService=a,this.snackbarService=s,this.modelsFacadeService=A,this.form=new l.cw({}),this.isScriptActive=!1,this.selectedAlgorithmType=r.Bd.PRUNING,this.selectedAlgorithmKey=r.tp.PRUNING_TRAIN}ngOnInit(){this.listenToAlgorithmPanelChanges(),this.listenToScriptStateChanges(),this.listenToFormChangesToLoadModelMetadata()}listenToAlgorithmPanelChanges(){this.form.valueChanges.pipe((0,O.b)(50),(0,S.U)(()=>{const e=this.form.getRawValue();return e.algorithmTypeGroup&&e.algorithmTypeGroup.algorithmType}),(0,_.x)(),(0,F.h)(e=>!!e),(0,c.t)(this)).subscribe(e=>{this.selectedAlgorithmType=e,this.selectedAlgorithmKey=r.R0[e]})}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,c.t)(this)).subscribe(e=>{this.isScriptActive=(0,P.A)(e),(0,P.A)(e)?this.form.disable():this.form.enable()})}listenToFormChangesToLoadModelMetadata(){this.form.valueChanges.pipe((0,O.b)(50),(0,S.U)(e=>{const a=e.algorithmTypeGroup?.algorithmType,s=e.model?.model;return{algorithmType:a,model:s}}),(0,_.x)((e,a)=>JSON.stringify(e)===JSON.stringify(a)),(0,F.h)(({algorithmType:e,model:a})=>!(0,f.Bm)(e)&&!(0,f.Bm)(a)),(0,c.t)(this)).subscribe(({algorithmType:e,model:a})=>{this.modelsFacadeService.dispatch(L.o.getModelMetadata({algorithmType:e,modelName:a}))})}submit(){if((0,f.kK)(this.selectedAlgorithmType))return void this.snackbarService.showError("Select an algorithm before running a script.");const{model:e}=this.form.getRawValue(),{model:a}=e,s={alg:this.selectedAlgorithmKey,params:{...this.panelParametersComponent.parametersFormatted,arch:a}};this.scriptFacadeService.dispatch(B.aj.callScript({configs:s}))}}).\u0275fac=function(e){return new(e||u)(t.Y36(M.f5),t.Y36(M.OF),t.Y36(M.QD),t.Y36(U.V))},u.\u0275cmp=t.Xpm({type:u,selectors:[["ms-model-training"]],viewQuery:function(e,a){if(1&e&&t.Gf(lt,5),2&e){let s;t.iGM(s=t.CRH())&&(a.panelParametersComponent=s.first)}},decls:17,vars:7,consts:[[1,"heading-primary-title","title"],[1,"page-wrapper"],[1,"left",3,"formGroup"],["controlKey","algorithmTypeGroup"],["controlKey","model",3,"algorithmType","areNotTrainedItemsSelectable","isInitialLoadForTrainTypeModels","isTrainedModelsPageVisible"],["controlKey","params",3,"algorithm"],["panelParameters",""],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-stroked-button","","color","primary",1,"ml-2",3,"click"],["fontSet","ms","fontIcon","icon-ArrowLeft"],[1,"right"]],template:function(e,a){1&e&&(t.TgZ(0,"p",0),t._uU(1,"Model Training"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2),t._UZ(4,"ms-panel-algorithm-type",3)(5,"ms-panel-model",4)(6,"ms-panel-model-metadata")(7,"ms-panel-parameters",5,6),t.TgZ(9,"div")(10,"button",7),t.NdJ("click",function(){return a.submit()}),t._uU(11," Run "),t.qZA(),t.TgZ(12,"button",8),t.NdJ("click",function(){return a.navigationService.goToPreviousPage()}),t._UZ(13,"mat-icon",9),t._uU(14," Go back "),t.qZA()()(),t.TgZ(15,"div",10),t._UZ(16,"ms-terminal"),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("formGroup",a.form),t.xp6(2),t.Q6J("algorithmType",a.selectedAlgorithmType)("areNotTrainedItemsSelectable",!0)("isInitialLoadForTrainTypeModels",!0)("isTrainedModelsPageVisible",!1),t.xp6(2),t.Q6J("algorithm",a.selectedAlgorithmKey),t.xp6(3),t.Q6J("disabled",a.isScriptActive||a.form.invalid))},dependencies:[b.lW,Y.Hw,l.JL,l.sg,T.d,m.d,v.w,Z,I],styles:[".title[_ngcontent-%COMP%]{margin-bottom:13px}"]}),u);x=(0,d.gn)([(0,c.c)()],x);const rt=[{path:"",component:x}];let mt=(()=>{var i;class e{}return(i=e).\u0275fac=function(s){return new(s||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.Bz.forChild(rt),p.Bz]}),e})(),ct=(()=>{var i;class e{}return(i=e).\u0275fac=function(s){return new(s||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[o.ez,N.m,mt,T.d,m.d,v.w]}),e})()},7754:(J,y,n)=>{n.d(y,{u:()=>N});var o=n(5879);let N=(()=>{var m;class v{constructor(){this.title="",this.message=""}}return(m=v).\u0275fac=function(p){return new(p||m)},m.\u0275cmp=o.Xpm({type:m,selectors:[["ms-empty-state"]],inputs:{title:"title",message:"message"},standalone:!0,features:[o.jDz],decls:6,vars:2,consts:[["src","assets/icons/empty-state.svg"],[1,"heading-section-title"],[1,"paragraph-regular-p2-large"]],template:function(p,d){1&p&&(o.TgZ(0,"div"),o._UZ(1,"img",0),o.TgZ(2,"div",1),o._uU(3),o.qZA(),o.TgZ(4,"div",2),o._uU(5),o.qZA()()),2&p&&(o.xp6(3),o.Oqu(d.title),o.xp6(2),o.Oqu(d.message))},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:100%;text-align:center}div[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}img[_ngcontent-%COMP%]{max-width:100%;height:auto}"]}),v})()}}]);