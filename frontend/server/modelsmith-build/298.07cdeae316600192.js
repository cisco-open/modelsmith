"use strict";(self.webpackChunkmodelsmith=self.webpackChunkmodelsmith||[]).push([[298],{3328:(J,y,e)=>{e.d(y,{d:()=>c});var u,x=e(7582),p=e(6814),t=e(5879),r=e(6223),f=e(5195),E=e(5683),M=e(617),O=e(5940),h=e(8525),C=e(2655),d=e(8791),T=e(3427),L=e(2181),v=e(7398),U=e(7921),D=e(3607),K=e(6799),B=e(9547),A=e(4378),R=e(127),g=e(6826),F=e(3705),N=e(8471),W=e(833),I=e(3680);function Z(_,n){1&_&&(t.ynx(0),t._UZ(1,"ms-spining-indicator",11),t.BQk())}function S(_,n){if(1&_&&(t.ynx(0),t.YNc(1,Z,2,0,"ng-container",5),t.BQk()),2&_){const s=n.ngIf,m=t.oxw();t.xp6(1),t.Q6J("ngIf",s===m.PageKey.MODEL_TRAINING)}}function P(_,n){1&_&&t._UZ(0,"mat-icon",16)}function i(_,n){if(1&_&&(t.TgZ(0,"mat-option",14),t._uU(1),t.YNc(2,P,1,0,"mat-icon",15),t.qZA()),2&_){const s=n.$implicit;t.Q6J("value",s.name)("disabled",!s.isTrained),t.xp6(1),t.hij(" ",s.name," "),t.xp6(1),t.Q6J("ngIf",!s.isTrained)}}function a(_,n){1&_&&(t.TgZ(0,"mat-option",17),t._uU(1,"No results found"),t.qZA())}function o(_,n){if(1&_&&(t.ynx(0),t.YNc(1,i,3,4,"mat-option",12),t.YNc(2,a,2,0,"mat-option",13),t.BQk()),2&_){const s=n.ngIf,m=t.oxw();t.xp6(1),t.Q6J("ngForOf",s)("ngForTrackBy",m.trackByModel),t.xp6(1),t.Q6J("ngIf",0===s.length)}}const l=function(_){return[_]};let c=((u=class{ngOnChanges(n){n.algorithmType&&n.algorithmType.currentValue&&this.configureModels(n.algorithmType.currentValue)}get parentFormGroup(){return this.controlContainer.control}get modelFormGroup(){return this.parentFormGroup.get(this.controlKey)}get modelControl(){return this.modelFormGroup?.get(this.MODEL_CONTROL_NAME)}constructor(n,s,m,Q){this.controlContainer=n,this.modelsFacadeService=s,this.scriptFacadeService=m,this.pageRunningScriptSpiningIndicatorService=Q,this.controlKey="",this.PageKey=K.C,this.RoutesList=B.Z,this.searchModel=new r.NI,this.models=[],this.MODEL_CONTROL_NAME="model"}ngOnInit(){this.initializeForm(),this.listenToScriptStateChanges(),this.listenToSearchModelValueChanges(),this.configureModels(this.algorithmType)}configureModels(n){n&&(this.getModelsByTypeSubscription?.unsubscribe(),this.getModelsByTypeSubscription=this.subscribeToModelsListChanges(n),this.modelsFacadeService.dispatch(D.o.getModelsList({algorithmType:n})),this.modelsFacadeService.dispatch(D.o.getCurrentOrPreviousSelectedModel({algorithmType:n})))}listenToCurrentModelChanges(){this.modelsFacadeService.currentModel$.pipe((0,d.t)(this)).subscribe(n=>{if((0,A.Bm)(n))return;const s=this.models.find(m=>m.name===n);s&&s.isTrained&&this.modelControl?.patchValue(n)})}subscribeToModelsListChanges(n){let s=!1;return this.modelsFacadeService.getModelsByType(n).pipe((0,L.h)(m=>!(0,A.yD)(m)),(0,v.U)(m=>[...m].sort((Q,G)=>Number(G.isTrained)-Number(Q.isTrained)))).subscribe(m=>{this.models=m,this.searchModel.setValue(""),s||(this.listenToCurrentModelChanges(),s=!0)})}initializeForm(){this.parentFormGroup.addControl(this.controlKey,new r.cw({[this.MODEL_CONTROL_NAME]:new r.NI("",r.kI.required)}))}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,d.t)(this)).subscribe(n=>{(0,R.A)(n)?this.modelFormGroup.disable():this.modelFormGroup.enable()})}listenToSearchModelValueChanges(){this.filteredModels=this.searchModel.valueChanges.pipe((0,d.t)(this),(0,U.O)(""),(0,v.U)(n=>this.filterModels(n)))}filterModels(n){const s=n.toLowerCase();return this.models.filter(m=>m.name.toLowerCase().includes(s))}trackByModel(n,s){return s.name}ngOnDestroy(){this.parentFormGroup.removeControl(this.controlKey)}}).\u0275fac=function(n){return new(n||u)(t.Y36(r.gN),t.Y36(F.V),t.Y36(N.O),t.Y36(W.T))},u.\u0275cmp=t.Xpm({type:u,selectors:[["ms-panel-model"]],inputs:{controlKey:"controlKey",algorithmType:"algorithmType"},standalone:!0,features:[t._Bn([],[{provide:r.gN,useFactory:()=>(0,t.f3M)(r.gN,{skipSelf:!0})}]),t.TTD,t.jDz],decls:17,vars:11,consts:[[1,"ms-card","model-card"],[1,"panel-title-wrapper"],[1,"heading-sub-section-title"],[1,"train-models"],[3,"routerLink"],[4,"ngIf"],[1,"form-field-container",3,"formGroupName"],["appearance","outline","subscriptSizing","dynamic"],["formControlName","model","placeholder","Select a model..."],["label","Predefined Models"],[3,"formControl"],[1,"ml-2"],[3,"value","disabled",4,"ngFor","ngForOf","ngForTrackBy"],["disabled","",4,"ngIf"],[3,"value","disabled"],["class","mat-error","fontSet","ms","fontIcon","icon-X",4,"ngIf"],["fontSet","ms","fontIcon","icon-X",1,"mat-error"],["disabled",""]],template:function(n,s){1&n&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2),t._uU(3,"Model"),t.qZA(),t.TgZ(4,"div",3)(5,"a",4),t._uU(6,"Train models"),t.qZA(),t.YNc(7,S,2,1,"ng-container",5),t.ALo(8,"async"),t.qZA()(),t.TgZ(9,"div",6)(10,"mat-form-field",7)(11,"mat-select",8)(12,"mat-optgroup",9)(13,"mat-option"),t._UZ(14,"ngx-mat-select-search",10),t.qZA(),t.YNc(15,o,3,3,"ng-container",5),t.ALo(16,"async"),t.qZA()()()()()),2&n&&(t.xp6(5),t.Q6J("routerLink",t.VKq(9,l,"/"+s.RoutesList.MODEL_TRAINING.ROOT)),t.xp6(2),t.Q6J("ngIf",t.lcZ(8,5,s.pageRunningScriptSpiningIndicatorService.currentRunningPage$)),t.xp6(2),t.Q6J("formGroupName",s.controlKey),t.xp6(5),t.Q6J("formControl",s.searchModel),t.xp6(1),t.Q6J("ngIf",t.lcZ(16,7,s.filteredModels)))},dependencies:[r.UX,r.JJ,r.JL,r.oH,r.u,r.x0,f.QW,f.a8,E.lN,E.KE,h.LD,h.gD,I.ey,I.Nv,M.Ps,M.Hw,p.ez,p.sg,p.O5,p.Ov,T.Co,T.nu,C.rH,O.Cq,g.E],styles:[".panel-title-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:12px}.panel-title-wrapper[_ngcontent-%COMP%]   .train-models[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),u);c=(0,x.gn)([(0,d.c)()],c)},1668:(J,y,e)=>{e.d(y,{w:()=>P});var g,x=e(7582),p=e(6814),t=e(5879),r=e(6223),f=e(5195),E=e(5986),M=e(5683),O=e(2032),h=e(8525),C=e(2596),d=e(8791),T=e(7398),L=e(836),v=e(3946),U=e(9547),D=e(8279),K=e(127),B=e(3221),A=e(8471),R=e(3680);function F(i,a){if(1&i&&(t.TgZ(0,"div",10)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-form-field",11),t._UZ(4,"input",12)(5,"mat-icon",13),t.qZA()()),2&i){const o=t.oxw(),l=o.$implicit,c=o.index;t.xp6(2),t.Oqu(l.label),t.xp6(2),t.Q6J("formControlName",c)("placeholder",l.placeholder)("type",l.inputType),t.xp6(1),t.s9C("matTooltip",l.help)}}function N(i,a){if(1&i&&(t.TgZ(0,"mat-option",16),t._uU(1),t.qZA()),2&i){const o=a.$implicit;t.Q6J("value",o.value),t.xp6(1),t.hij(" ",o.viewValue," ")}}function W(i,a){if(1&i&&(t.TgZ(0,"div",10)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-form-field",11)(4,"mat-select",14),t.YNc(5,N,2,2,"mat-option",15),t.qZA(),t._UZ(6,"mat-icon",13),t.qZA()()),2&i){const o=t.oxw(),l=o.$implicit,c=o.index;t.xp6(2),t.Oqu(l.label),t.xp6(2),t.Q6J("formControlName",c),t.xp6(1),t.Q6J("ngForOf",l.options),t.xp6(1),t.s9C("matTooltip",l.help)}}function I(i,a){if(1&i&&(t.TgZ(0,"div",17)(1,"mat-checkbox",14),t._uU(2),t.qZA(),t.TgZ(3,"div",18),t._UZ(4,"mat-icon",19),t.qZA()()),2&i){const o=t.oxw(),l=o.index,c=o.$implicit;t.xp6(1),t.Q6J("formControlName",l),t.xp6(1),t.Oqu(c.label),t.xp6(2),t.s9C("matTooltip",c.help)}}function u(i,a){if(1&i&&(t.ynx(0),t.YNc(1,F,6,5,"div",8),t.YNc(2,W,7,4,"div",8),t.YNc(3,I,5,3,"div",9),t.BQk()),2&i){const o=a.$implicit;t.xp6(1),t.Q6J("ngIf","text"===o.inputType||"number"===o.inputType),t.xp6(1),t.Q6J("ngIf","select"===o.inputType),t.xp6(1),t.Q6J("ngIf","checkbox"===o.inputType)}}function Z(i,a){if(1&i&&(t.TgZ(0,"div",4),t.ynx(1,5),t.TgZ(2,"div",6),t.YNc(3,u,4,3,"ng-container",7),t.qZA(),t.BQk(),t.qZA()),2&i){const o=t.oxw();t.xp6(1),t.Q6J("formGroupName",o.controlKey),t.xp6(2),t.Q6J("ngForOf",o.parameters)}}function S(i,a){1&i&&(t.TgZ(0,"p",20),t._uU(1,"No parameters configured."),t.qZA())}let P=((g=class{ngOnChanges(a){a.algorithm&&a.algorithm.currentValue&&(this.alg=a.algorithm.currentValue,this.loadParametersForAlgorithm(this.alg))}get parentFormGroup(){return this.controlContainer.control}get paramsFormGroup(){return this.parentFormGroup.get(this.controlKey)}get parametersFormArray(){return this.paramsFormGroup.get("parametersArray")}constructor(a,o,l,c){this.fb=a,this.controlContainer=o,this.parametersFacadeService=l,this.scriptFacadeService=c,this.controlKey="",this.RoutesList=U.Z,this.alg=D.k2,this.isScriptActive=!1,this.parameters=[]}ngOnInit(){this.initForm(),this.listenToScriptStateChanges()}initForm(){this.parentFormGroup.addControl(this.controlKey,new r.cw({parametersArray:new r.Oe([])}))}loadParametersForAlgorithm(a){this.parametersFacadeService.dispatch(v.j.loadParameters({arg:a})),this.parametersFacadeService.parameters$.pipe((0,T.U)(o=>o[a]?.data||[]),(0,L.T)(1),(0,d.t)(this)).subscribe(o=>{this.buildFormArray(o)})}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,d.t)(this)).subscribe(a=>{this.isScriptActive=(0,K.A)(a)})}buildFormArray(a){this.parametersFormArray.clear(),a.forEach(o=>{this.parametersFormArray.push(this.fb.control(o.defaultValue))}),this.isScriptActive?this.paramsFormGroup.disable():this.paramsFormGroup.enable(),this.parameters=a}get parametersFormatted(){const a={},o=this.parametersFormArray.getRawValue();return this.parameters.forEach((l,c)=>{a[l.argName]=o[c]}),a}ngOnDestroy(){this.parentFormGroup.removeControl(this.controlKey)}}).\u0275fac=function(a){return new(a||g)(t.Y36(r.qu),t.Y36(r.gN),t.Y36(B.E),t.Y36(A.O))},g.\u0275cmp=t.Xpm({type:g,selectors:[["ms-panel-parameters"]],inputs:{controlKey:"controlKey",algorithm:"algorithm"},standalone:!0,features:[t._Bn([],[{provide:r.gN,useFactory:()=>(0,t.f3M)(r.gN,{skipSelf:!0})}]),t.TTD,t.jDz],decls:6,vars:2,consts:[[1,"ms-card","parameters-card"],[1,"heading-sub-section-title"],["class","parameters-wrapper",4,"ngIf","ngIfElse"],["noParametersTemplate",""],[1,"parameters-wrapper"],[3,"formGroupName"],["formArrayName","parametersArray"],[4,"ngFor","ngForOf"],["class","form-field-container",4,"ngIf"],["class","form-field-container inline-container mb-[22px]",4,"ngIf"],[1,"form-field-container"],["appearance","outline"],["matInput","",3,"formControlName","placeholder","type"],["fontSet","ms","fontIcon","icon-Info","matSuffix","",3,"matTooltip"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-field-container","inline-container","mb-[22px]"],[1,"ml-2"],["fontSet","ms","fontIcon","icon-Info",3,"matTooltip"],[1,"no-parameters-message"]],template:function(a,o){if(1&a&&(t.TgZ(0,"mat-card",0)(1,"p",1),t._uU(2,"Parameters"),t.qZA(),t.YNc(3,Z,4,2,"div",2),t.YNc(4,S,2,0,"ng-template",null,3,t.W1O),t.qZA()),2&a){const l=t.MAs(5);t.xp6(3),t.Q6J("ngIf",o.parameters.length)("ngIfElse",l)}},dependencies:[p.ez,p.sg,p.O5,O.c,O.Nt,M.KE,M.hX,M.R9,r.UX,r.Fj,r.JJ,r.JL,r.u,r.x0,r.CE,f.QW,f.a8,M.lN,h.LD,h.gD,R.ey,C.AV,C.gM,E.p9,E.oG],styles:[".parameters-card[_ngcontent-%COMP%]   .parameters-wrapper[_ngcontent-%COMP%]{max-height:400px;overflow:auto;padding-right:20px}.parameters-card[_ngcontent-%COMP%]   .parameters-wrapper[_ngcontent-%COMP%]   .parameter-divider[_ngcontent-%COMP%]{margin-bottom:20px}"]}),g);P=(0,x.gn)([(0,d.c)()],P)}}]);