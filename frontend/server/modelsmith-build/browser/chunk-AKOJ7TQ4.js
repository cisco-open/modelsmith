import{a as ct,e as pt,g as Hi,h as Oe,i as Ie}from"./chunk-6GVGRTBF.js";import{a as ji,b as mt,c as Gi}from"./chunk-H4YXRKOV.js";import{a as lt}from"./chunk-DMXFRYPI.js";import{a as Xi,b as Yi}from"./chunk-WP2WLVOC.js";import{a as Li,b as de,c as zi,d as st,e as Pe}from"./chunk-73XHKPJW.js";import"./chunk-3ZHMSG5W.js";import{b as Vi}from"./chunk-KK5JZLDV.js";import{$ as Ge,$a as K,$c as xi,A as xe,Aa as w,Ab as ai,Ad as rt,Ae as Ni,Bd as Bt,Ca as E,Cc as Ci,Cd as I,Da as C,Ea as m,Ec as _i,G as Et,Hc as Te,I as Dt,Ja as ne,Ka as re,Kb as si,La as oe,Lb as Ue,Lc as vi,Ma as j,Mb as li,Mc as kt,N as Yt,Na as d,Nb as ci,O as U,Oa as A,Ob as Ee,Oc as q,Od as yi,P as we,Pa as F,Pb as pi,Pc as Pt,Qa as ae,Qb as Mt,Qc as Ot,Qd as Ae,R as H,Ra as se,Rb as mi,Rc as ze,S as Wt,Sa as le,Sb as At,Sc as It,T,Ta as be,Tb as di,U as ye,V as Ne,W as je,Wa as Tt,Wc as tt,Y as $t,Ya as b,Z as _,Za as S,Zb as Rt,Zc as it,Zd as bi,_ as v,_a as Jt,a as O,aa as Ut,ab as ei,b as z,ca as Kt,cb as Ye,cd as wi,de as me,ea as Ve,ec as Ke,ed as nt,ee as Re,fa as B,fb as Y,fc as Qe,fe as ke,gb as Q,ge as Si,ha as Qt,hb as ti,he as ot,i as wt,ia as Ft,ib as ii,ic as hi,ja as s,jb as ni,jc as ui,je as Ei,ka as f,kb as We,kc as fe,ke as at,la as qt,lc as Le,le as Di,m as ie,mb as Se,nb as ri,nc as ce,o as yt,ob as oi,oc as De,pb as $e,pc as qe,qa as u,qe as Fi,rc as gi,rd as pe,re as Ti,s as bt,sa as p,sc as Ze,sd as N,se as Mi,ta as X,te as Ai,ua as Xe,uc as Je,ue as Ri,va as Zt,vc as fi,ve as ki,w as Gt,wa as l,we as Pi,x as St,xa as c,xc as Fe,xe as Oi,ya as g,yd as Me,ye as Ii,z as Xt,za as x,zb as ge,zc as et,ze as Bi}from"./chunk-JA5VSLUI.js";var Cn=["hueSlider"],_n=["alphaSlider"];function vn(n,i){if(n&1){let e=E();l(0,"div",10),C("newValue",function(r){_(e);let o=m();return v(o.onSliderChange("saturation-lightness",r))}),l(1,"div",11),g(2,"div"),c()()}if(n&2){let e=m();X("background-color",e.hueSliderColor),p("rgX",1)("rgY",1),s(),X("top",e.slider==null?null:e.slider.v,"px")("left",e.slider==null?null:e.slider.s,"px")}}function xn(n,i){if(n&1&&(l(0,"div",12),g(1,"div",13)(2,"div",14),c()),n&2){let e=m();s(2),X("background-color",e.selectedColor)}}function wn(n,i){if(n&1){let e=E();l(0,"div",15,1),C("newValue",function(r){_(e);let o=m();return v(o.onSliderChange("hue",r))}),l(2,"div",16)(3,"div"),g(4,"div"),c()()()}if(n&2){let e=m();p("rgX",1),s(2),X("left",e.slider==null?null:e.slider.h,"px")}}function yn(n,i){if(n&1){let e=E();l(0,"div",17,2),C("newValue",function(r){_(e);let o=m();return v(o.onSliderChange("alpha",r))}),g(2,"div",18),l(3,"div",16)(4,"div"),g(5,"div"),c()()()}if(n&2){let e=m();p("rgX",1),s(2),p("ngStyle",e.getBackgroundColor(e.alphaSliderColor)),s(),X("left",e.slider==null?null:e.slider.a,"px")}}var bn=["dialog"],Ui=n=>({background:n});function Sn(n,i){n&1&&g(0,"div",12)}function En(n,i){if(n&1){let e=E();x(0),l(1,"div",9)(2,"div",10),C("click",function(){let r=_(e).$implicit,o=m(2);return v(o.onColorClick(r))}),u(3,Sn,1,0,"div",11),c()(),w()}if(n&2){let e=i.$implicit,t=i.index,r=m(2);s(2),Xe("colornull",!e),p("ngStyle",r.getBackgroundColor(e)),s(),p("ngIf",t==r.indexSeleccionado)}}function Dn(n,i){if(n&1&&g(0,"div",18),n&2){let e=m(3);p("ngStyle",e.getBackgroundColor(e.color))}}function Fn(n,i){if(n&1){let e=E();l(0,"div",13),C("click",function(){_(e);let r=m(2);return v(r.addColor())}),u(1,Dn,1,1,"div",14),Ge(),l(2,"svg",15),g(3,"path",16)(4,"path",17),c()()}if(n&2){let e=m(2);s(),p("ngIf",e.indexSeleccionado===void 0)}}function Tn(n,i){if(n&1){let e=E();l(0,"color-picker",19),C("colorChange",function(r){_(e);let o=m(2);return v(o.onChangeColorPicker(r))})("onAlphaChange",function(r){_(e);let o=m(2);return v(o.onAlphaChange(r))}),c()}if(n&2){let e=m(2);p("controls",e.colorPickerControls)("color",e.hsva)}}function Mn(n,i){if(n&1&&(x(0),l(1,"div",5),u(2,En,4,4,"ng-container",6)(3,Fn,5,1,"div",7)(4,Tn,1,2,"color-picker",8),c(),w()),n&2){let e=m();s(),p("@colorsAnimation",e.colorsAnimationEffect),s(),p("ngForOf",e.palette),s(),p("ngIf",!e.hideColorPicker&&e.colorPickerControls!="only-alpha"),s(),p("ngIf",!e.hideColorPicker&&e.colorPickerControls=="only-alpha")}}function An(n,i){n&1&&g(0,"div",12)}function Rn(n,i){if(n&1){let e=E();x(0),l(1,"div",9)(2,"div",25),C("click",function(){let r=_(e).$implicit,o=m(2);return v(o.changeColor(r))}),u(3,An,1,0,"div",11),c()(),w()}if(n&2){let e=i.$implicit,t=m(2);s(2),Xe("colornull",!e),p("ngStyle",Tt(4,Ui,e)),s(),p("ngIf",t.isSelected(e))}}function kn(n,i){if(n&1){let e=E();x(0),l(1,"div",5)(2,"div",20)(3,"div",21),C("click",function(){_(e);let r=m();return v(r.onClickBack())}),Ge(),l(4,"svg",22),g(5,"path",23)(6,"path",24),c()()(),u(7,Rn,4,6,"ng-container",6),c(),w()}if(n&2){let e=m();s(),p("@colorsAnimation",e.colorsAnimationEffect),s(6),p("ngForOf",e.variants)}}function Pn(n,i){if(n&1){let e=E();x(0),l(1,"div",26)(2,"div",27),C("click",function(){_(e);let r=m();return v(r.onClickBack())}),Ge(),l(3,"svg",22),g(4,"path",23)(5,"path",24),c()(),Ut(),l(6,"button",28),C("click",function(){_(e);let r=m();return v(r.emitClose("cancel"))}),d(7),c(),l(8,"button",28),C("click",function(){_(e);let r=m();return v(r.emitClose("accept"))}),d(9),c()(),l(10,"div",29)(11,"color-picker",30),C("sliderChange",function(r){_(e);let o=m();return v(o.onChangeColorPicker(r))}),c()(),w()}if(n&2){let e=m();s(7),F(" ",e.cancelLabel," "),s(2),F(" ",e.acceptLabel," "),s(2),p("controls",e.colorPickerControls)("color",e.hsva)}}function On(n,i){if(n&1){let e=E();l(0,"div",31)(1,"p",32),C("click",function(){_(e);let r=m();return v(r.nextFormat())}),d(2),c(),l(3,"div",33)(4,"input",34,1),C("keyup",function(){_(e);let r=j(5),o=m();return v(o.changeColorManual(r.value))})("keydown.enter",function(){_(e);let r=m();return v(r.emitClose("accept"))}),c()()()}if(n&2){let e=m();s(2),A(e.colorFormats[e.format]),s(2),X("font-size",e.color&&e.color.length>23?9:10,"px")("letter-spacing",e.color&&e.color.length>16?0:1.5,"px"),p("placeholder",e.placeholder)("value",e.color)}}var Nt=["hex","rgba","hsla","cmyk"],R=function(n){return n[n.HEX=0]="HEX",n[n.RGBA=1]="RGBA",n[n.HSLA=2]="HSLA",n[n.CMYK=3]="CMYK",n}(R||{}),Wi=[{color:"rojo",preview:"#E57373",variants:["#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828"]},{color:"rosa",preview:"#F06292",variants:["#FCE4EC","#F8BBD0","#F48FB1","#F06292","#EC407A","#E91E63","#D81B60","#C2185B","#AD1457"]},{color:"purpura",preview:"#BA68C8",variants:["#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A"]},{color:"purpura oscuro",preview:"#9575CD",variants:["#EDE7F6","#D1C4E9","#B39DDB","#9575CD","#7E57C2","#673AB7","#5E35B1","#512DA8","#4527A0"]},{color:"indigo",preview:"#7986CB",variants:["#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593"]},{color:"azul",preview:"#64B5F6",variants:["#E3F2FD","#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#2196F3","#1E88E5","#1976D2","#1565C0"]},{color:"celeste",preview:"#4FC3F7",variants:["#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD"]},{color:"cyan",preview:"#4DD0E1",variants:["#E0F7FA","#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00BCD4","#00ACC1","#0097A7","#00838F"]},{color:"color",preview:"#4DB6AC",variants:["#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#009688","#00897B","#00796B","#00695C"]},{color:"verde",preview:"#81C784",variants:["#E8F5E9","#C8E6C9","#A5D6A7","#81C784","#66BB6A","#4CAF50","#43A047","#388E3C","#2E7D32"]},{color:"verde claro",preview:"#AED581",variants:["#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#689F38","#558B2F"]},{color:"lima",preview:"#DCE775",variants:["#F9FBE7","#F0F4C3","#E6EE9C","#DCE775","#D4E157","#CDDC39","#C0CA33","#AFB42B","#9E9D24"]},{color:"amarillo",preview:"#FFF176",variants:["#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825"]},{color:"ambar",preview:"#FFD54F",variants:["#FFF8E1","#FFECB3","#FFE082","#FFD54F","#FFCA28","#FFC107","#FFB300","#FFA000","#FF8F00"]},{color:"naranja",preview:"#FFB74D",variants:["#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00"]},{color:"naranja oscuro",preview:"#FF8A65",variants:["#FBE9E7","#FFCCBC","#FFAB91","#FF8A65","#FF7043","#FF5722","#F4511E","#E64A19","#D84315"]},{color:"marron",preview:"#A1887F",variants:["#EFEBE9","#D7CCC8","#BCAAA4","#A1887F","#8D6E63","#795548","#6D4C41","#5D4037","#4E342E"]},{color:"escala de grises",preview:"#E0E0E0",variants:["#FFFFFF","#FAFAFA","#F5F5F5","#EEEEEE","#E0E0E0","#BDBDBD","#9E9E9E","#757575","#616161","#424242","#000000"]},{color:"azul gris",preview:"#90A4AE",variants:["#ECEFF1","#CFD8DC","#B0BEC5","#90A4AE","#78909C","#607D8B","#546E7A","#455A64","#37474F"]}],W=class{constructor(i,e,t,r){this.r=i,this.g=e,this.b=t,this.a=r}denormalize(){return this.r=Math.round(this.r*255),this.g=Math.round(this.g*255),this.b=Math.round(this.b*255),this}toString(){return this.denormalize(),"rgb"+(this.a!=1?"a(":"(")+this.r+", "+this.g+", "+this.b+(this.a!=1?", "+this.a.toPrecision(2)+")":")")}},G=class{constructor(i,e,t,r){this.h=i,this.s=e,this.v=t,this.a=r,this.onChange=new B(!0)}onColorChange(i){this.s=i.s/i.rgX,this.v=i.v/i.rgY}onHueChange(i){this.h=i.v/i.rgX}onValueChange(i){this.v=i.v/i.rgX}onAlphaChange(i){this.a=i.v/i.rgX}},Ce=class{constructor(i,e,t,r){this.h=i,this.s=e,this.l=t,this.a=r}denormalize(){return this.h=Math.round(this.h*360),this.s=Math.round(this.s*100),this.l=Math.round(this.l*100),this}toString(){return"hsl"+(this.a!=1?"a(":"(")+this.h+", "+this.s+"%, "+this.l+"%"+(this.a!=1?", "+this.a.toPrecision(2)+")":")")}},he=class{constructor(i,e,t,r,o=1){this.c=i,this.m=e,this.y=t,this.k=r,this.a=o}denormalize(){return this.c=Math.round(this.c*100),this.m=Math.round(this.m*100),this.y=Math.round(this.y*100),this.k=Math.round(this.k*100),this}toString(){return this.denormalize(),"cmyk("+this.c+", "+this.m+", "+this.y+", "+this.k+")"}},Vt=class{constructor(i){i&&(this.preview=i.preview,this.variants=i.variants)}},ut=(()=>{class n{constructor(){}toFormat(e,t){var r="";if(e)switch(t){case R.HEX:var a=this.hsvaToRgba(e);a.denormalize();var r=this.rgbaToHex(a,!0);break;case R.HSLA:var o=this.hsva2hsla(e);o.denormalize();var r=o.toString();break;case R.RGBA:var a=this.hsvaToRgba(e),r=a.toString();break;case R.CMYK:var h=this.hsvaToCmyk(e),r=h.toString();break}return r}stringToFormat(e,t){var r=this.stringToHsva(e,!0);return this.toFormat(r,t)}hsva2hsla(e){let t=e.h,r=e.s,o=e.v,a=e.a;if(o===0)return new Ce(t,0,0,a);if(r===0&&o===1)return new Ce(t,1,1,a);{let h=o*(2-r)/2;return new Ce(t,o*r/(1-Math.abs(2*h-1)),h,a)}}hsla2hsva(e){let t=Math.min(e.h,1),r=Math.min(e.s,1),o=Math.min(e.l,1),a=Math.min(e.a,1);if(o===0)return new G(t,0,0,a);{let h=o+r*(1-Math.abs(2*o-1))/2;return new G(t,2*(h-o)/h,h,a)}}hsvaToRgba(e){let t,r,o,a=e.h,h=e.s,y=e.v,D=e.a,$=Math.floor(a*6),ve=a*6-$,P=y*(1-h),Be=y*(1-ve*h),ue=y*(1-(1-ve)*h);switch($%6){case 0:t=y,r=ue,o=P;break;case 1:t=Be,r=y,o=P;break;case 2:t=P,r=y,o=ue;break;case 3:t=P,r=Be,o=y;break;case 4:t=ue,r=P,o=y;break;case 5:t=y,r=P,o=Be;break;default:t=0,r=0,o=0}return new W(t,r,o,D)}cmykToRgb(e){let t=(1-e.c)*(1-e.k),r=(1-e.m)*(1-e.k),o=(1-e.y)*(1-e.k);return new W(t,r,o,e.a)}rgbaToCmyk(e){let t=1-Math.max(e.r,e.g,e.b);if(t===1)return new he(0,0,0,1,e.a);{let r=(1-e.r-t)/(1-t),o=(1-e.g-t)/(1-t),a=(1-e.b-t)/(1-t);return new he(r,o,a,t,e.a)}}hsvaToCmyk(e){let t=this.hsvaToRgba(e);return this.rgbaToCmyk(t)}rgbaToHsva(e){let t,r,o=Math.min(e.r,1),a=Math.min(e.g,1),h=Math.min(e.b,1),y=Math.min(e.a,1),D=Math.max(o,a,h),$=Math.min(o,a,h),ve=D,P=D-$;if(r=D===0?0:P/D,D===$)t=0;else{switch(D){case o:t=(a-h)/P+(a<h?6:0);break;case a:t=(h-o)/P+2;break;case h:t=(o-a)/P+4;break;default:t=0}t/=6}return new G(t,r,ve,y)}rgbaToHex(e,t){let r="#"+(16777216|e.r<<16|e.g<<8|e.b).toString(16).substr(1);return e.a!=1&&(r+=(256|Math.round(e.a*255)).toString(16).substr(1)),r}normalizeCMYK(e){return new he(e.c/100,e.m/100,e.y/100,e.k/100,e.a)}denormalizeCMYK(e){return new he(Math.floor(e.c*100),Math.floor(e.m*100),Math.floor(e.y*100),Math.floor(e.k*100),e.a)}denormalizeRGBA(e){return new W(Math.round(e.r*255),Math.round(e.g*255),Math.round(e.b*255),e.a)}stringToHsva(e="",t=!0){let r=null;e=(e||"").toLowerCase();let o=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return new W(parseInt(a[2],10)/255,parseInt(a[3],10)/255,parseInt(a[4],10)/255,isNaN(parseFloat(a[5]))?1:parseFloat(a[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return new Ce(parseInt(a[2],10)/360,parseInt(a[3],10)/100,parseInt(a[4],10)/100,isNaN(parseFloat(a[5]))?1:parseFloat(a[5]))}},{re:/cmyk?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return new he(parseInt(a[1],10)/100,parseInt(a[2],10)/100,parseInt(a[3],10)/100,parseInt(a[4],10)/100)}}];t?o.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(a){return new W(parseInt(a[1],16)/255,parseInt(a[2],16)/255,parseInt(a[3],16)/255,parseInt(a[4]||"FF",16)/255)}}):o.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(a){return new W(parseInt(a[1],16)/255,parseInt(a[2],16)/255,parseInt(a[3],16)/255,1)}}),o.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(a){return new W(parseInt(a[1]+a[1],16)/255,parseInt(a[2]+a[2],16)/255,parseInt(a[3]+a[3],16)/255,1)}});for(let a in o)if(o.hasOwnProperty(a)){let h=o[a],y=h.re.exec(e),D=y&&h.parse(y);if(D){if(D instanceof W)r=this.rgbaToHsva(D);else if(D instanceof Ce)r=this.hsla2hsva(D);else if(D instanceof he){let $=this.cmykToRgb(D);r=this.rgbaToHsva($)}return r}}return r}outputFormat(e){return this.hsvaToRgba(e).toString()}getFormatByString(e){if(e){e=e.toLowerCase();let t=/(#([\da-f]{3}(?:[\da-f]{3})?(?:[\da-f]{2})?))/,r=/(rgba\((\d{1,3},\s?){3}(1|0?\.\d+)\)|rgb\(\d{1,3}(,\s?\d{1,3}){2}\))/,o=/(hsla\((\d{1,3}%?,\s?){3}(1|0?\.\d+)\)|hsl\(\d{1,3}%?(,\s?\d{1,3}%?){2}\))/,a=/(cmyk\(\d{1,3}(,\s?\d{1,3}){3}\))/;if(t.test(e))return"hex";if(r.test(e))return"rgba";if(o.test(e))return"hsla";if(a.test(e))return"cmyk"}return"hex"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})(),dt=class{constructor(i,e,t,r){this.h=i,this.s=e,this.v=t,this.a=r}},Lt=class{constructor(i,e,t,r){this.h=i,this.s=e,this.v=t,this.a=r}},In=(()=>{class n{mouseDown(e){this.start(e)}touchStart(e){this.start(e)}constructor(e){this.elRef=e,this.dragEnd=new B,this.dragStart=new B,this.newValue=new B,this.listenerMove=t=>this.move(t),this.listenerStop=()=>this.stop()}move(e){e.preventDefault(),this.setCursor(e)}start(e){this.setCursor(e),e.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(e){let t=this.elRef.nativeElement.getBoundingClientRect();return(e.pageX!==void 0?e.pageX:e.touches[0].pageX)-t.left-window.pageXOffset}getY(e){let t=this.elRef.nativeElement.getBoundingClientRect();return(e.pageY!==void 0?e.pageY:e.touches[0].pageY)-t.top-window.pageYOffset}setCursor(e){let t=this.elRef.nativeElement.offsetWidth,r=this.elRef.nativeElement.offsetHeight,o=Math.max(0,Math.min(this.getX(e),t)),a=Math.max(0,Math.min(this.getY(e),r));this.rgX!==void 0&&this.rgY!==void 0?this.newValue.emit({s:o/t,v:1-a/r,rgX:this.rgX,rgY:this.rgY}):this.rgX===void 0&&this.rgY!==void 0?this.newValue.emit({v:a/r,rgY:this.rgY}):this.rgX!==void 0&&this.rgY===void 0&&this.newValue.emit({v:o/t,rgX:this.rgX})}}return n.\u0275fac=function(e){return new(e||n)(f(Ve))},n.\u0275dir=Ne({type:n,selectors:[["","slider",""]],hostBindings:function(e,t){e&1&&C("mousedown",function(o){return t.mouseDown(o)})("touchstart",function(o){return t.touchStart(o)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),n})(),Bn=(()=>{class n{constructor(e,t){this.service=e,this.cdr=t,this.color=new G(0,1,1,1),this.controls="default",this.sliderChange=new B(!1),this.onAlphaChange=new B(!1),this.hsva=new G(0,1,1,1),this.selectedColor="#000000",this.fallbackColor="#000000"}ngOnInit(){this.color||(this.color=new G(0,1,1,1)),this.slider=new dt(0,0,0,0),this.update()}ngOnDestroy(){}ngOnChanges(e){e.color&&this.color&&this.update()}ngAfterViewInit(){let e=this.hueSlider?.nativeElement.offsetWidth||140,t=this.alphaSlider?.nativeElement.offsetWidth||140;this.sliderDimMax=new Lt(e,220,130,t),this.update()}onSliderChange(e,t){switch(e){case"saturation-lightness":this.hsva.onColorChange(t);break;case"hue":this.hsva.onHueChange(t);break;case"alpha":this.hsva.onAlphaChange(t),this.onAlphaChange.emit(t);break;case"value":this.hsva.onValueChange(t);break}this.update(),this.setColor(this.outputColor)}setColor(e){this.color=e,this.sliderChange.emit(this.color)}getBackgroundColor(e){return{background:"linear-gradient(90deg, rgba(36,0,0,0) 0%, "+e+" 100%)"}}update(){if(this.hsva=this.color,this.sliderDimMax){let e=this.service.hsvaToRgba(this.hsva).denormalize(),t=this.service.hsvaToRgba(new G(this.hsva.h,1,1,1)).denormalize();this.hueSliderColor="rgb("+t.r+","+t.g+","+t.b+")",this.alphaSliderColor="rgb("+e.r+","+e.g+","+e.b+")",this.outputColor=this.hsva,this.selectedColor=this.service.hsvaToRgba(this.hsva).toString(),this.slider=new dt(this.hsva.h*this.sliderDimMax.h-5,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-5),this.cdr.detectChanges()}}}return n.\u0275fac=function(e){return new(e||n)(f(ut),f(Ye))},n.\u0275cmp=T({type:n,selectors:[["color-picker"]],viewQuery:function(e,t){if(e&1&&(ne(Cn,5),ne(_n,5)),e&2){let r;re(r=oe())&&(t.hueSlider=r.first),re(r=oe())&&(t.alphaSlider=r.first)}},inputs:{color:"color",controls:"controls"},outputs:{sliderChange:"sliderChange",onAlphaChange:"onAlphaChange"},features:[$t],decls:8,vars:4,consts:[["dialogPopup",""],["hueSlider",""],["alphaSlider",""],[1,"color-picker",3,"click"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue",4,"ngIf"],[1,"hue-alpha","box"],["class","left",4,"ngIf"],[1,"right"],["class","hue",3,"slider","rgX","newValue",4,"ngIf"],["class","alpha",3,"slider","rgX","newValue",4,"ngIf"],[1,"saturation-lightness",3,"newValue","slider","rgX","rgY"],[1,"cursor"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],[1,"hue",3,"newValue","slider","rgX"],[1,"sliderCursor"],[1,"alpha",3,"newValue","slider","rgX"],[1,"alpha-gradient",3,"ngStyle"]],template:function(e,t){if(e&1){let r=E();l(0,"div",3,0),C("click",function(a){return _(r),v(a.stopPropagation())}),u(2,vn,3,8,"div",4),l(3,"div",5),u(4,xn,3,2,"div",6),l(5,"div",7),u(6,wn,5,3,"div",8)(7,yn,6,4,"div",9),c()()()}e&2&&(s(2),p("ngIf",t.controls!="only-alpha"),s(2),p("ngIf",t.controls!="only-alpha"),s(2),p("ngIf",t.controls!="only-alpha"),s(),p("ngIf",t.controls!="no-alpha"))},dependencies:[Q,We,In],styles:[`.color-picker{position:relative;z-index:1000;width:220px;height:auto;cursor:default;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;touch-action:none}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:invalid,.color-picker input:-moz-ui-invalid,.color-picker input:-moz-submit-invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .sliderCursor{width:10px;border-radius:5px;position:absolute;margin-top:-3px;border:1px solid black}.color-picker .sliderCursor>div{border:2px solid white;border-radius:5px}.color-picker .sliderCursor>div>div{border-radius:5px;border:1px solid black;height:24px}.color-picker .cursor{position:absolute;width:21px;border:3px solid black;border-radius:100%;margin:-2px 0 0 -2px}.color-picker .cursor>div{height:15px;border:3px solid white;border-radius:100%}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{flex:1 1 auto;display:flex;flex-direction:column;gap:10px;padding:12px 8px}.color-picker .hue-alpha{display:flex;align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:24px;border:none;border-radius:5px;position:relative;cursor:pointer;background-size:100% 100%;background:linear-gradient(to right,red 0%,#ff0 17%,lime 33%,cyan 50%,blue 66%,#f0f 83%,red 100%)}.color-picker .alpha{direction:ltr;position:relative;width:100%;height:24px;border:none;border-radius:5px;cursor:pointer;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .alpha-gradient{width:100%;height:100%;border-radius:5px;position:absolute}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;box-shadow:0 1px 1px 1px #00000026;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .saturation-lightness{direction:ltr;cursor:crosshair;width:100%;position:relative;height:130px;border:none;touch-action:manipulation;background-image:linear-gradient(to top,#000 0%,transparent 100%),linear-gradient(to right,#fff 0%,transparent 100%)}
`],encapsulation:2}),n})(),Nn=(()=>{class n{click(e){this.isOutside(e)&&this.emitClose("cancel")}onScroll(){this.onScreenMovement()}onResize(){this.onScreenMovement()}constructor(e,t){this.service=e,this.cdr=t,this.color="#000000",this.previewColor="#000000",this.hsva=new G(0,1,1,1),this.colorsAnimationEffect="slide-in",this.palette=Wi,this.variants=[],this.userFormats=[],this.colorFormats=Nt,this.format=R.HEX,this.formatMap={hex:R.HEX,rgba:R.RGBA,hsla:R.HSLA,cmyk:R.CMYK},this.canChangeFormat=!0,this.menu=1,this.hideColorPicker=!1,this.hideTextInput=!1,this.colorPickerControls="default",this.placeholder="#FFFFFF"}ngOnInit(){this.setPosition(),this.hsva=this.service.stringToHsva(this.color),this.indexSeleccionado=this.findIndexSelectedColor(this.palette)}ngAfterViewInit(){this.setPositionY()}onScreenMovement(){this.setPosition(),this.setPositionY(),this.panelRef.nativeElement.style.transition||(this.panelRef.nativeElement.style.transition="transform 0.5s ease-out")}findIndexSelectedColor(e){let t;if(this.color)for(let r=0;r<e.length;r++){let o=e[r];typeof o=="string"?this.service.stringToFormat(this.color,R.HEX)==this.service.stringToFormat(o,R.HEX)&&(t=r):o===void 0?this.color=void 0:this.findIndexSelectedColor(o.variants)!=null&&(t=r)}return t}iniciate(e,t,r,o,a,h,y,D,$,ve,P,Be,ue=[]){if(this.colorPickerControls=P,this.triggerInstance=e,this.TriggerBBox=t,this.color=r,this.hideColorPicker=D,this.hideTextInput=y,this.acceptLabel=$,this.cancelLabel=ve,ue.length&&ue.every(fn=>Nt.includes(fn))&&(this.colorFormats=ue),h?this.colorFormats.includes(h)?(this.format=this.colorFormats.indexOf(h.toLowerCase()),this.canChangeFormat=!1,this.service.getFormatByString(this.color)!=h.toLowerCase()&&this.setColor(this.service.stringToHsva(this.color))):(console.error("Format provided is invalid, using HEX"),this.format=R.HEX):(this.format=this.colorFormats.indexOf(this.service.getFormatByString(this.color)),this.format<0&&(this.format=0)),this.previewColor=this.color,this.palette=o??Wi,this.colorsAnimationEffect=a,Be=="top"){let jt=this.TriggerBBox.nativeElement.getBoundingClientRect();this.positionString="transform: translateY(calc( -100% - "+jt.height+"px ))"}}setPosition(){if(this.TriggerBBox){let t=this.TriggerBBox.nativeElement.getBoundingClientRect();this.top=t.top+t.height,t.left+250>window.innerWidth?this.left=t.right<250?window.innerWidth/2-250/2:t.right-250:this.left=t.left}}setPositionY(){let e=this.TriggerBBox.nativeElement.getBoundingClientRect(),t=this.panelRef.nativeElement.getBoundingClientRect(),r=t.height;e.bottom+r>window.innerHeight?this.positionString=e.top<t.height?"transform: translateY(-"+e.bottom+"px );":"transform: translateY(calc( -100% - "+e.height+"px ));":this.positionString="",this.cdr.detectChanges()}hasVariant(e){return this.previewColor?typeof e!="string"&&e.variants.some(t=>t.toUpperCase()==this.previewColor.toUpperCase()):!1}isSelected(e){return this.previewColor?typeof e=="string"&&e.toUpperCase()==this.previewColor.toUpperCase():!1}getBackgroundColor(e){return typeof e=="string"?{background:e}:{background:e?.preview}}onAlphaChange(e){this.palette=this.ChangeAlphaOnPalette(e,this.palette)}ChangeAlphaOnPalette(e,t){var r=[];for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="string"){let h=this.service.stringToHsva(a);h.onAlphaChange(e),r.push(this.service.toFormat(h,this.format))}else{let h=new Vt,y=this.service.stringToHsva(a.preview);y.onAlphaChange(e),h.preview=this.service.toFormat(y,this.format),h.variants=this.ChangeAlphaOnPalette(e,a.variants),r.push(h)}}return r}changeColor(e){this.setColor(this.service.stringToHsva(e)),this.emitClose("accept")}onChangeColorPicker(e){this.temporalColor=e,this.color=this.service.toFormat(e,this.format),this.triggerInstance.sliderChange(this.service.toFormat(e,this.format))}changeColorManual(e){this.previewColor=e,this.color=e,this.hsva=this.service.stringToHsva(e),this.setPreviewColor(this.hsva),this.temporalColor=this.hsva,this.triggerInstance.setColor(this.color,this.previewColor)}setColor(e,t=-1){this.hsva=e;let r=this.colorFormats[this.format],o=t;o<0&&(o=this.formatMap[r]),this.color=this.service.toFormat(e,o),this.setPreviewColor(e),this.triggerInstance.setColor(this.color,this.previewColor)}setPreviewColor(e){this.previewColor=e?this.service.hsvaToRgba(e).toString():void 0}onChange(){}onColorClick(e){typeof e=="string"||e===void 0?this.changeColor(e):(this.variants=e.variants,this.menu=2)}addColor(){this.menu=3,this.backupColor=this.color,this.temporalColor=this.service.stringToHsva(this.color)}nextFormat(){if(this.canChangeFormat){this.format=(this.format+1)%this.colorFormats.length;let e=this.colorFormats[this.format],t=this.formatMap[e];this.setColor(this.hsva,t),this.placeholder=this.service.toFormat(new G(0,0,1,1),t)}}emitClose(e){this.menu==3&&(e=="cancel"||e=="accept"&&this.setColor(this.temporalColor)),this.triggerInstance.closePanel()}onClickBack(){this.menu==3&&(this.color=this.backupColor,this.hsva=this.service.stringToHsva(this.color)),this.indexSeleccionado=this.findIndexSelectedColor(this.palette),this.menu=1}isOutside(e){return e.target.classList.contains("ngx-colors-overlay")}}return n.\u0275fac=function(e){return new(e||n)(f(ut),f(Ye))},n.\u0275cmp=T({type:n,selectors:[["ngx-colors-panel"]],viewQuery:function(e,t){if(e&1&&ne(bn,5),e&2){let r;re(r=oe())&&(t.panelRef=r.first)}},hostVars:4,hostBindings:function(e,t){e&1&&C("mousedown",function(o){return t.click(o)},!1,Ft)("scroll",function(){return t.onScroll()},!1,Ft)("resize",function(){return t.onResize()},!1,Qt),e&2&&X("top",t.top,"px")("left",t.left,"px")},decls:6,vars:6,consts:[["dialog",""],["paintInput",""],[1,"opened"],[4,"ngIf"],["class","manual-input-wrapper",4,"ngIf"],[1,"colors"],[4,"ngFor","ngForOf"],["style","background: rgb(245 245 245); position: relative","class","circle button",3,"click",4,"ngIf"],[3,"controls","color","colorChange","onAlphaChange",4,"ngIf"],[1,"circle","wrapper","color"],[1,"circle","color","circle-border",3,"click","ngStyle"],["class","selected",4,"ngIf"],[1,"selected"],[1,"circle","button",2,"background","rgb(245 245 245)","position","relative",3,"click"],["style",`
            position: absolute;
            height: 7px;
            width: 7px;
            border: 1px solid rgba(0, 0, 0, 0.03);
            border-radius: 100%;
            top: 0;
            right: 0;
          `,3,"ngStyle",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#222222"],["d","M24 24H0V0h24v24z","fill","none","opacity",".87"],["d","M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"],[2,"position","absolute","height","7px","width","7px","border","1px solid rgba(0, 0, 0, 0.03)","border-radius","100%","top","0","right","0",3,"ngStyle"],[3,"colorChange","onAlphaChange","controls","color"],[1,"circle","wrapper"],[1,"add",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["d","M0 0h24v24H0z","fill","none"],["d","M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"],[1,"circle","circle-border",3,"click","ngStyle"],[1,"nav-wrapper"],[1,"round-button","button",2,"float","left",3,"click"],[2,"float","right",3,"click"],[1,"color-picker-wrapper"],[3,"sliderChange","controls","color"],[1,"manual-input-wrapper"],[2,"cursor","pointer",3,"click"],[1,"g-input"],["type","text",3,"keyup","keydown.enter","placeholder","value"]],template:function(e,t){e&1&&(l(0,"div",2,0),u(2,Mn,5,4,"ng-container",3)(3,kn,8,2,"ng-container",3)(4,Pn,12,4,"ng-container",3)(5,On,6,7,"div",4),c()),e&2&&(Zt(t.positionString),s(2),p("ngIf",t.menu==1),s(),p("ngIf",t.menu==2),s(),p("ngIf",t.menu==3),s(),p("ngIf",!t.hideTextInput))},dependencies:[Y,Q,We,Bn],styles:["[_nghost-%COMP%]{position:fixed;z-index:2001}.hidden[_ngcontent-%COMP%]{display:none}.button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.top[_ngcontent-%COMP%]{transform:translateY(-100%)}.opened[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background:#fff;width:250px;border-radius:5px;position:absolute}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;font-family:inherit;font-size:12px;background-color:unset;-webkit-user-select:none;user-select:none;padding:10px;letter-spacing:1px;color:#222;border-radius:3px;line-height:20px}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .opened[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-color:#0000000d;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1);transition-property:opacity,background-color;transition-duration:.2s,.2s;transition-timing-function:cubic-bezier(.35,0,.25,1),cubic-bezier(.35,0,.25,1);transition-delay:0s,0s}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;margin:15px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:34px;width:34px;box-sizing:border-box;border-radius:100%;cursor:pointer}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{font-size:20px;line-height:45px;text-align:center}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border:2px solid white;border-radius:100%;height:28px;width:28px;box-sizing:border-box;margin:2px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper[_ngcontent-%COMP%]{margin:0 5px 5px;flex:34px 0 0}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.button[_ngcontent-%COMP%]{margin:0 5px 5px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper.color[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle-border[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.03)}.opened[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]{margin:5px 15px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]{overflow:hidden;margin:5px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .round-button[_ngcontent-%COMP%]{padding:5px 0;width:40px;height:40px;box-sizing:border-box;border-radius:100%;text-align:center;line-height:45px}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]{display:flex;margin:15px;font-family:sans-serif}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center;font-size:10px;letter-spacing:1.5px;text-transform:uppercase;line-height:48px;width:145px;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]{border:1px solid #e8ebed;height:45px;border-radius:5px;width:100%}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:9px;border:none;width:100%;text-transform:uppercase;outline:none;text-align:center;letter-spacing:1px;color:#595b65;height:100%;border-radius:5px;margin:0;padding:0}"],data:{animation:[vi("colorsAnimation",[Ot("void => slide-in",[ze(":enter",q({opacity:0}),{optional:!0}),ze(":enter",It("10ms",[kt(".3s ease-in",Pt([q({opacity:0,transform:"translatex(-50%)",offset:0}),q({opacity:.5,transform:"translatex(-10px) scale(1.1)",offset:.3}),q({opacity:1,transform:"translatex(0)",offset:1})]))]),{optional:!0})]),Ot("void => popup",[ze(":enter",q({opacity:0,transform:"scale(0)"}),{optional:!0}),ze(":enter",It("10ms",[kt("500ms ease-out",Pt([q({opacity:.5,transform:"scale(.5)",offset:.3}),q({opacity:1,transform:"scale(1.1)",offset:.8}),q({opacity:1,transform:"scale(1)",offset:1})]))]),{optional:!0})])])]}}),n})(),$i={position:"fixed",height:"100%",width:"100%","z-index":2e3,top:0,left:0},Ki=(()=>{class n{constructor(e,t,r){this.resolver=e,this.applicationRef=t,this.injector=r}createPanel(e,t){this.componentRef!=null&&this.removePanel();let r=this.resolver.resolveComponentFactory(Nn);this.componentRef=r.create(this.injector),this.applicationRef.attachView(this.componentRef.hostView);let o=this.componentRef.hostView.rootNodes[0];return this.overlay=document.createElement("div"),this.overlay.id="ngx-colors-overlay",this.overlay.classList.add("ngx-colors-overlay"),this.overlay.classList.add(t),Object.keys($i).forEach(a=>{this.overlay.style[a]=$i[a]}),e?document.getElementById(e).appendChild(this.overlay):document.body.appendChild(this.overlay),this.overlay.appendChild(o),this.componentRef}removePanel(){this.applicationRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.overlay.remove()}}return n.\u0275fac=function(e){return new(e||n)(H(qt),H(ei),H(Kt))},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})(),zt=(()=>{class n{onClick(){this.openPanel()}constructor(e,t,r){this.triggerRef=e,this.panelFactory=t,this.service=r,this.color="",this.colorsAnimation="slide-in",this.position="bottom",this.attachTo=void 0,this.overlayClassName=void 0,this.colorPickerControls="default",this.acceptLabel="ACCEPT",this.cancelLabel="CANCEL",this.change=new B,this.input=new B,this.slider=new B,this.close=new B,this.open=new B,this.isDisabled=!1,this.onTouchedCallback=()=>{},this.onChangeCallback=()=>{}}ngOnDestroy(){this.panelRef&&this.panelFactory.removePanel()}openPanel(){this.isDisabled||(this.panelRef=this.panelFactory.createPanel(this.attachTo,this.overlayClassName),this.panelRef.instance.iniciate(this,this.triggerRef,this.color,this.palette,this.colorsAnimation,this.format,this.hideTextInput,this.hideColorPicker,this.acceptLabel,this.cancelLabel,this.colorPickerControls,this.position,this.formats)),this.open.emit(this.color)}closePanel(){this.panelFactory.removePanel(),this.onTouchedCallback(),this.close.emit(this.color)}setDisabledState(e){this.isDisabled=e,this.triggerRef.nativeElement.style.opacity=e?.5:1}setColor(e,t=""){this.writeValue(e,t),this.onChangeCallback(e),this.input.emit(e)}sliderChange(e){this.slider.emit(e)}get value(){return this.color}set value(e){this.setColor(e),this.onChangeCallback(e)}writeValue(e,t=""){if(e!==this.color){if(this.format){let o=Nt.indexOf(this.format.toLowerCase());e=this.service.stringToFormat(e,o)}this.color=e;let r=!1;e&&e.startsWith("cmyk")&&(r=!0,t||(t=this.service.stringToFormat(e,R.RGBA))),this.change.emit(r?t:e)}}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}}return n.\u0275fac=function(e){return new(e||n)(f(Ve),f(Ki),f(ut))},n.\u0275dir=Ne({type:n,selectors:[["","ngx-colors-trigger",""]],hostBindings:function(e,t){e&1&&C("click",function(){return t.onClick()})},inputs:{colorsAnimation:"colorsAnimation",palette:"palette",format:"format",formats:"formats",position:"position",hideTextInput:"hideTextInput",hideColorPicker:"hideColorPicker",attachTo:"attachTo",overlayClassName:"overlayClassName",colorPickerControls:"colorPickerControls",acceptLabel:"acceptLabel",cancelLabel:"cancelLabel"},outputs:{change:"change",input:"input",slider:"slider",close:"close",open:"open"},features:[be([{provide:hi,useExisting:Yt(()=>n),multi:!0}])]}),n})(),Qi=(()=>{class n{constructor(e,t){this.cdRef=e,this.triggerDirective=t,this.triggerDirectiveColorChangeSubscription=null,this.color=this.triggerDirective.color}ngOnInit(){this.triggerDirectiveColorChangeSubscription=this.triggerDirective.change.subscribe(e=>{this.color=e,this.cdRef.markForCheck()})}ngOnDestroy(){this.triggerDirectiveColorChangeSubscription&&this.triggerDirectiveColorChangeSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(f(Ye),f(zt,1))},n.\u0275cmp=T({type:n,selectors:[["ngx-colors"]],decls:4,vars:5,consts:[[1,"app-color-picker"],[1,"preview"],[1,"preview-background"],[1,"circle",3,"ngStyle"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"div",1)(2,"div",2),g(3,"div",3),c()()()),e&2&&(s(3),Xe("colornull",!t.color),p("ngStyle",Tt(3,Ui,t.color)))},dependencies:[We],styles:["[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]{line-height:1px;font-family:sans-serif}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin:2px;display:inline-block;box-sizing:border-box;border-radius:100%;background:white;cursor:pointer;padding:3px;box-shadow:0 1px 1px #0003,0 1px 1px 1px #00000024,0 1px 1px 1px #0000001f}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-background[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px;border-radius:100%}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:20px;width:20px;box-sizing:border-box;border-radius:100%;cursor:pointer}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .noselected[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}"]}),n})(),qi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=we({providers:[ut,Ki],imports:[$e]}),n})();var M=ai({source:"[Run Records -> Records]",events:{"Get Run Records Filenames":ge(),"Get Run Records Filenames Success":ge(),"Get Run Records Filenames Failure":ge(),"Get Run Record Summarized Data":ge(),"Get Run Record Summarized Data Success":ge(),"Get Run Record Summarized Data Failure":ge()}});var gt=class extends nt{constructor(i){super(`run-records-filenames/${i}`,void 0,void 0,!1)}};var ft=class extends nt{constructor(i,e){super(`run-records-summarized-data/${i}/${e}`,void 0,void 0,!1)}};var Zi=(()=>{let i=class i{constructor(t,r){this.apiClient=t,this.actions$=r,this.getRunRecordsFilenames$=Mt(()=>this.actions$.pipe(At(M.getRunRecordsFilenames),Dt(o=>{let{algorithmType:a}=o;return this.apiClient.serviceCall(new gt(a)).pipe(bt(h=>M.getRunRecordsFilenamesSuccess({files:h})),St(h=>yt(M.getRunRecordsFilenamesFailure({error:h}))))}))),this.getRunRecordSummarizedData$=Mt(()=>this.actions$.pipe(At(M.getRunRecordSummarizedData),Dt(o=>{let{algorithmType:a,filename:h}=o;return this.apiClient.serviceCall(new ft(a,h)).pipe(bt(y=>M.getRunRecordSummarizedDataSuccess({record:y})),St(y=>yt(M.getRunRecordSummarizedDataFailure({error:y}))))})))}};i.\u0275fac=function(r){return new(r||i)(H(wi),H(mi))},i.\u0275prov=U({token:i,factory:i.\u0275fac});let n=i;return n})();var Ln={filenames:[],summarizedRecord:{},error:""},Ji=pi(Ln,Ee(M.getRunRecordsFilenamesSuccess,(n,{files:i})=>z(O({},n),{filenames:i,error:null})),Ee(M.getRunRecordsFilenamesFailure,(n,{error:i})=>z(O({},n),{error:i})),Ee(M.getRunRecordSummarizedData,n=>z(O({},n),{loading:!0,error:null})),Ee(M.getRunRecordSummarizedDataSuccess,(n,{record:i})=>z(O({},n),{summarizedRecord:i,error:null})),Ee(M.getRunRecordSummarizedDataFailure,(n,{error:i})=>z(O({},n),{error:i})));var en=li("runRecords");var tn=Ue(en,n=>n.records),nn=Ue(tn,n=>n.filenames),rn=Ue(tn,n=>n.summarizedRecord);var on={records:Ji};var an=(()=>{let i=class i{get lineClamp(){return this.maxEllipsisLines}onMouseEnter(){this.isTextOverflowing?this.tooltip.show():this.tooltip.hide()}onMouseLeave(){this.tooltip.hide()}constructor(t,r){this.tooltip=t,this.elementRef=r,this.maxEllipsisLines=2,this.display="-webkit-box",this.overflow="hidden",this.boxOrient="vertical",this.textOverflow="ellipsis",this.whiteSpace="normal",this.wordBreak="break-all"}ngAfterViewInit(){setTimeout(()=>{this.tooltip.message=this.elementRef.nativeElement.textContent.trim(),this.tooltip.position="above"},0)}get isTextOverflowing(){let t=parseInt(window.getComputedStyle(this.elementRef.nativeElement).lineHeight),r=this.maxEllipsisLines*t;return this.elementRef.nativeElement.scrollHeight>r}};i.\u0275fac=function(r){return new(r||i)(f(Ae),f(Ve))},i.\u0275dir=Ne({type:i,selectors:[["","msUseEllipsis",""]],hostVars:14,hostBindings:function(r,o){r&1&&C("mouseenter",function(){return o.onMouseEnter()})("mouseleave",function(){return o.onMouseLeave()}),r&2&&X("display",o.display)("overflow",o.overflow)("-webkit-box-orient",o.boxOrient)("-webkit-line-clamp",o.lineClamp)("text-overflow",o.textOverflow)("white-space",o.whiteSpace)("word-break",o.wordBreak)},inputs:{maxEllipsisLines:"maxEllipsisLines"},standalone:!0,features:[be([Ae])]});let n=i;return n})();var sn=(()=>{let i=class i{transform(t){return typeof t=="string"&&t&&t!="None"||typeof t=="number"&&!isNaN(t)?t.toString():"-"}};i.\u0275fac=function(r){return new(r||i)},i.\u0275pipe=je({name:"emptyTableField",type:i,pure:!0,standalone:!0});let n=i;return n})();var ln=(()=>{let i=class i{transform(t){return t&&typeof t=="object"&&Object.keys(t).length>0}};i.\u0275fac=function(r){return new(r||i)},i.\u0275pipe=je({name:"hasKeys",type:i,pure:!0,standalone:!0});let n=i;return n})();var V=function(n){return n.ADD="add",n.EDIT="edit",n.VIEW="view",n}(V||{});var Ct=(()=>{let i=class i{constructor(t){this.store=t,this.filenames$=this.store.select(nn),this.summarizedRecord$=this.store.select(rn)}dispatch(t){this.store.dispatch(t)}};i.\u0275fac=function(r){return new(r||i)(H(si))},i.\u0275prov=U({token:i,factory:i.\u0275fac});let n=i;return n})();var L=(()=>{let i=class i{get algorithmType(){return this._algorithmType.value}get algorithmType$(){return this._algorithmType.asObservable()}set algorithmType(t){this._recordsMap.set(this._algorithmType.value,this._records.value),this._algorithmType.next(t);let r=this._recordsMap.get(t)||[];this._records.next(r)}get records(){return this._records.value}get records$(){return this._records.asObservable()}addRecord(t){this.stopTooltips();let o=[...this._records.value,t];this._records.next(o),this._recordsMap.set(this._algorithmType.value,o)}updateRecord(t,r){this.stopTooltips();let o=this._records.value;if(t>=0&&t<o.length){let a=[...o];a[t]=r,this._records.next(a),this._recordsMap.set(this._algorithmType.value,a)}}removeRecord(t){this.stopTooltips();let r=this._records.value;if(t>=0&&t<r.length){let o=r.filter((a,h)=>h!==t);this._records.next(o),this._recordsMap.set(this._algorithmType.value,o)}}stopTooltips(){this.chartToolsGlobalSignalsService.toggleTooltips=!1,this.chartToolsGlobalSignalsService.toggleZoom=!1}constructor(t){this.chartToolsGlobalSignalsService=t,this._recordsMap=new Map,this._records=new wt([]),this._algorithmType=new wt(I.PRUNING)}};i.\u0275fac=function(r){return new(r||i)(H(Oe))},i.\u0275prov=U({token:i,factory:i.\u0275fac});let n=i;return n})();var pn=(()=>{let i=class i{get parentFormGroup(){return this.controlContainer.control}get chartFormGroup(){return this.parentFormGroup.get(this.controlKey)}get borderColorControl(){return this.chartFormGroup.get(this.CHART_BODER_COLOR_CONTROL_NAME)}get backgroundColorControl(){return this.chartFormGroup.get(this.CHART_BACKGROUND_COLOR_CONTROL_NAME)}constructor(t){this.controlContainer=t,this.controlKey="",this.CHART_BODER_COLOR_CONTROL_NAME="borderColor",this.CHART_BACKGROUND_COLOR_CONTROL_NAME="backgroundColor"}ngOnInit(){}};i.\u0275fac=function(r){return new(r||i)(f(Le))},i.\u0275cmp=T({type:i,selectors:[["ms-chart-colors-form-controls"]],inputs:{controlKey:"controlKey"},features:[be([],[{provide:Le,useFactory:()=>Wt(Le,{skipSelf:!0})}])],decls:15,vars:5,consts:[[3,"formGroupName"],[1,"form-field-container"],[1,"flex","items-center"],[1,"mr-2"],["ngx-colors-trigger","",3,"formControlName"]],template:function(r,o){r&1&&(x(0,0),l(1,"div",1)(2,"mat-label"),d(3,"Chart border color"),c(),l(4,"div",2)(5,"div",3),g(6,"ngx-colors",4),c(),d(7),c()(),l(8,"div",1)(9,"mat-label"),d(10,"Chart background color"),c(),l(11,"div",2)(12,"div",3),g(13,"ngx-colors",4),c(),d(14),c()(),w()),r&2&&(p("formGroupName",o.controlKey),s(6),p("formControlName",o.CHART_BODER_COLOR_CONTROL_NAME),s(),F(" ",o.borderColorControl==null?null:o.borderColorControl.value," "),s(6),p("formControlName",o.CHART_BACKGROUND_COLOR_CONTROL_NAME),s(),F(" ",o.backgroundColorControl==null?null:o.backgroundColorControl.value," "))},dependencies:[Qi,zt,tt,ce,De,Fe,fi]});let n=i;return n})();function Jn(n,i){if(n&1&&(l(0,"mat-option",14),d(1),c()),n&2){let e=m();s(),F(" No algorithm was yet run. Please run a ",e.algorithmTypeLabel," algorithm. ")}}function er(n,i){if(n&1&&(l(0,"mat-option",16),d(1),c()),n&2){let e=i.$implicit;p("value",e.name)("disabled",e.disabled),s(),F(" ",e.name," ")}}function tr(n,i){if(n&1&&(x(0),u(1,er,2,3,"mat-option",15),w()),n&2){let e=m();s(),p("ngForOf",e.files)}}function ir(n,i){n&1&&(l(0,"div")(1,"div",17),g(2,"mat-spinner",18),c()())}function nr(n,i){if(n&1&&(x(0),d(1),b(2,"readableDuration"),w()),n&2){let e=m().$implicit;s(),A(S(2,1,e.value))}}function rr(n,i){if(n&1&&(x(0),d(1),w()),n&2){let e=m().$implicit;s(),A(e.value)}}function or(n,i){n&1&&(l(0,"div",33),g(1,"mat-divider"),c())}function ar(n,i){if(n&1&&(l(0,"div",25)(1,"div",26)(2,"div",27),d(3),b(4,"parametersLabel"),c(),l(5,"div",28),x(6,29),u(7,nr,3,3,"ng-container",30)(8,rr,2,1,"ng-container",31),w(),c()(),u(9,or,2,0,"div",32),c()),n&2){let e=i.$implicit,t=i.last;s(3),F("",S(4,4,e.key),":"),s(3),p("ngSwitch",e.key),s(),p("ngSwitchCase","duration_seconds"),s(2),p("ngIf",!t)}}function sr(n,i){if(n&1&&(x(0),u(1,ar,10,6,"div",24),w()),n&2){let e=i.ngIf;s(),p("ngForOf",e)}}function lr(n,i){n&1&&(l(0,"div",34),d(1,"No data available"),c())}function cr(n,i){if(n&1&&(x(0),d(1),b(2,"adaptiveFileSize"),w()),n&2){let e=m().$implicit;s(),A(S(2,1,e.value))}}function pr(n,i){if(n&1&&(x(0),d(1),b(2,"date"),w()),n&2){let e=m().$implicit;s(),A(Jt(2,1,e.value,"medium"))}}function mr(n,i){if(n&1&&(x(0),d(1),b(2,"readableDuration"),w()),n&2){let e=m().$implicit;s(),A(S(2,1,e.value))}}function dr(n,i){if(n&1&&(x(0),d(1),w()),n&2){let e=m().$implicit;s(),A(e.value)}}function hr(n,i){n&1&&(l(0,"div",33),g(1,"mat-divider"),c())}function ur(n,i){if(n&1&&(l(0,"div",25)(1,"div",26)(2,"div",27),d(3),b(4,"parametersLabel"),c(),l(5,"div",28),x(6,29),u(7,cr,3,3,"ng-container",30)(8,pr,3,4,"ng-container",30)(9,mr,3,3,"ng-container",30)(10,dr,2,1,"ng-container",31),w(),c()(),u(11,hr,2,0,"div",32),c()),n&2){let e=i.$implicit,t=i.last;s(3),F("",S(4,6,e.key),":"),s(3),p("ngSwitch",e.key),s(),p("ngSwitchCase","file_size_bytes"),s(),p("ngSwitchCase","creation_date"),s(),p("ngSwitchCase","training_duration_seconds"),s(2),p("ngIf",!t)}}function gr(n,i){if(n&1&&(x(0),u(1,ur,12,8,"div",24),b(2,"keyvalue"),w()),n&2){let e=m(3);s(),p("ngForOf",S(2,1,e.summarizedRecord==null?null:e.summarizedRecord.modelTrainingDetails))}}function fr(n,i){n&1&&(l(0,"div",34),d(1,"No data available"),c())}function Cr(n,i){n&1&&(l(0,"div",33),g(1,"mat-divider"),c())}function _r(n,i){if(n&1&&(l(0,"div",25)(1,"div",26)(2,"div",27),d(3),b(4,"parametersLabel"),c(),l(5,"div",28),d(6),c()(),u(7,Cr,2,0,"div",32),c()),n&2){let e=i.$implicit,t=i.last;s(3),F("",S(4,3,e.key),":"),s(3),A(e.value),s(),p("ngIf",!t)}}function vr(n,i){if(n&1&&(x(0),u(1,_r,8,5,"div",24),w()),n&2){let e=i.ngIf;s(),p("ngForOf",e)}}function xr(n,i){n&1&&(l(0,"div",34),d(1,"No data available"),c())}function wr(n,i){if(n&1&&(x(0),g(1,"ms-chart-colors-form-controls",35)(2,"ms-line-chart",36),w()),n&2){let e=m(3);s(2),p("data",e.lastRunAccuracyTestingChartData)("settings",e.testingAccuracyChartDisplaySettings)}}function yr(n,i){n&1&&(l(0,"div",34),d(1,"No data available"),c())}function br(n,i){if(n&1){let e=E();x(0),g(1,"mat-divider"),l(2,"div",19)(3,"mat-label"),d(4,"Set run name"),c(),l(5,"mat-form-field",9),g(6,"input",20),c()(),l(7,"mat-accordion",21)(8,"mat-expansion-panel",22),le("expandedChange",function(r){_(e);let o=m(2);return se(o.panelStates.statistics,r)||(o.panelStates.statistics=r),v(r)}),l(9,"mat-expansion-panel-header")(10,"mat-panel-title",23),d(11," Statistics "),c()(),u(12,sr,2,1,"ng-container",13),b(13,"keyvalue"),u(14,lr,2,0,"ng-template",null,2,K),c(),l(16,"mat-expansion-panel",22),le("expandedChange",function(r){_(e);let o=m(2);return se(o.panelStates.modelTrainingDetails,r)||(o.panelStates.modelTrainingDetails=r),v(r)}),l(17,"mat-expansion-panel-header")(18,"mat-panel-title",23),d(19," Model training details "),c()(),u(20,gr,3,3,"ng-container",13),b(21,"hasKeys"),u(22,fr,2,0,"ng-template",null,3,K),c(),l(24,"mat-expansion-panel",22),le("expandedChange",function(r){_(e);let o=m(2);return se(o.panelStates.parameters,r)||(o.panelStates.parameters=r),v(r)}),l(25,"mat-expansion-panel-header")(26,"mat-panel-title",23),d(27," Parameters "),c()(),u(28,vr,2,1,"ng-container",13),b(29,"keyvalue"),u(30,xr,2,0,"ng-template",null,4,K),c(),l(32,"mat-expansion-panel",22),le("expandedChange",function(r){_(e);let o=m(2);return se(o.panelStates.accuracy,r)||(o.panelStates.accuracy=r),v(r)}),l(33,"mat-expansion-panel-header")(34,"mat-panel-title",23),d(35," Last Accuracy Test Run "),c()(),u(36,wr,3,2,"ng-container",13),b(37,"keyvalue"),u(38,yr,2,0,"ng-template",null,5,K),c()(),w()}if(n&2){let e=j(15),t=j(23),r=j(31),o=j(39),a=m(2);s(8),ae("expanded",a.panelStates.statistics),s(4),p("ngIf",S(13,12,a.summarizedRecord==null?null:a.summarizedRecord.statistics))("ngIfElse",e),s(4),ae("expanded",a.panelStates.modelTrainingDetails),s(4),p("ngIf",S(21,14,a.summarizedRecord==null?null:a.summarizedRecord.modelTrainingDetails))("ngIfElse",t),s(4),ae("expanded",a.panelStates.parameters),s(4),p("ngIf",S(29,16,a.summarizedRecord==null?null:a.summarizedRecord.parameters))("ngIfElse",r),s(4),ae("expanded",a.panelStates.accuracy),s(4),p("ngIf",S(37,18,a.summarizedRecord==null?null:a.summarizedRecord.parameters))("ngIfElse",o)}}function Sr(n,i){if(n&1&&u(0,br,40,20,"ng-container",13),n&2){let e=m(),t=j(14);p("ngIf",!!e.summarizedRecord)("ngIfElse",t)}}function Er(n,i){n&1&&g(0,"ms-empty-state",37)}var Z,_e=(Z=class{get chartFormGroup(){return this.form.get("chart")}get selectRunFormControl(){return this.form.get("selectRun")}get runNameFormControl(){return this.form.get("runName")}constructor(i,e,t,r,o,a){this.drawerRef=i,this.drawerConfig=e,this.fb=t,this.recordsFacadeService=r,this.recordsDataService=o,this.customAPILoadingService=a,this.panelStates={statistics:!0,parameters:!0,accuracy:!0,modelTrainingDetails:!0},this.form=new qe({}),this.algorithmTypeLabel="",this.files=[],this.isSummarizedRecordLoading$=this.customAPILoadingService.getLoadingObservableForKey(Xi.RUN_RECORDS_SUMMARIZED_DATA),this.testingAccuracyChartDisplaySettings={},this.lastRunAccuracyTestingChartData=[]}ngAfterViewInit(){this.restorePanelStates()}ngOnInit(){switch(this.initForm(),this.initChartDisplaySettings(),this.listenToChartColorChanges(),this.algorithmTypeLabel=this.getAlgorithmTypeString(),this.drawerConfig.actionType){case V.ADD:{this.loadData(),this.configureAddTypeActions();break}case V.EDIT:case V.VIEW:{this.configureEditOrViewTypeActions();break}}}getAlgorithmTypeString(){switch(this.recordsDataService.algorithmType){case I.PRUNING:return"pruning";case I.QUANTIZATION:return"quantization";case I.MACHINE_UNLEARNING:return"machine unlearning";default:return"specified"}}initChartDisplaySettings(){let i=0;switch(this.recordsDataService.algorithmType){case I.PRUNING:{i=100;break}case I.QUANTIZATION:{i=79;break}case I.MACHINE_UNLEARNING:{i=36;break}default:break}this.testingAccuracyChartDisplaySettings={yAxisMinimumValue:0,yAxisTickInterval:20,chartDataStructure:pt.SINGLE_PHASE_X_AXIS,xAxisDataPointsCount:i,yAxisMaximumValue:100,isXAxisVisible:!0,isXAxisDynamic:!0,areTooltipsEnabled:!0,xAxisInitialLabelValue:1,xAxisLabelPrefix:"Step:",datasetLabelPrefix:"Test:",isChartWithCustomColorSettings:!0,customChartColors:{datasetColors:[{backgroundColor:"rgba(241, 196, 15, 0.2)",borderColor:"#f1c40f"}]}}}listenToChartColorChanges(){this.chartFormGroup.valueChanges.pipe(Xt(300),N(this)).subscribe(i=>{if(Me(i))return;let{backgroundColor:e,borderColor:t}=i;this.testingAccuracyChartDisplaySettings=z(O({},this.testingAccuracyChartDisplaySettings),{customChartColors:{datasetColors:[{backgroundColor:e,borderColor:t}]}}),this.lastRunAccuracyTestingChartData=[...this.lastRunAccuracyTestingChartData]})}configureEditOrViewTypeActions(){let{recordName:i,recordFilename:e,record:t,chartColors:r}=this.drawerConfig.data;this.drawerConfig.actionType===V.VIEW?this.form.disable():this.drawerConfig.actionType===V.EDIT&&this.selectRunFormControl.disable(),this.files=[{name:e,disabled:!0}],this.form.patchValue({selectRun:e,runName:i,chart:{borderColor:r.borderColor,backgroundColor:r.backgroundColor}}),this.summarizedRecord=t,this.lastRunAccuracyTestingChartData=this.configureChartDataset(t),this.testingAccuracyChartDisplaySettings=z(O({},this.testingAccuracyChartDisplaySettings),{hasCustomDatasetsLabels:!0,customDatasetsLabels:[i],customChartColors:{datasetColors:[{backgroundColor:r.backgroundColor||"rgba(241, 196, 15, 0.2)",borderColor:r.borderColor||"#f1c40f"}]}})}configureAddTypeActions(){this.listenToSelectRunFormValueChanges(),this.listenToSummarizedRecordChanges()}listenToSelectRunFormValueChanges(){this.selectRunFormControl.valueChanges.pipe(N(this),Gt(i=>!rt(i))).subscribe(i=>{this.runNameFormControl.reset(),this.recordsFacadeService.dispatch(M.getRunRecordSummarizedData({algorithmType:this.recordsDataService.algorithmType,filename:i}))})}listenToSummarizedRecordChanges(){this.recordsFacadeService.summarizedRecord$.pipe(N(this),Et(1)).subscribe(i=>{this.summarizedRecord=i,this.lastRunAccuracyTestingChartData=this.configureChartDataset(i);let e=this.summarizedRecord?.statistics.algorithm_key,t=this.summarizedRecord?.parameters.arch;!rt(e)&&!rt(t)&&this.runNameFormControl.setValue(`${e}_${t}`),this.savePanelStates(),this.restorePanelStates()})}configureChartDataset(i){return[{datasetIndex:0,values:i.lastRunTestingAccuracyData||[]}]}loadData(){this.recordsFacadeService.dispatch(M.getRunRecordsFilenames({algorithmType:this.recordsDataService.algorithmType})),this.recordsFacadeService.filenames$.pipe(Et(1),xe(1)).subscribe(i=>{let e=new Set(this.recordsDataService.records.map(t=>t.recordFilename));this.files=i.map(t=>({name:t,disabled:e.has(t)}))})}initForm(){let i=this.getDefaultChartColors();this.form=this.fb.group({selectRun:[null,fe.required],runName:[null,fe.required],chart:this.fb.group({borderColor:[i.borderColor,fe.required],backgroundColor:[i.backgroundColor,fe.required]})})}getDefaultChartColors(){let i=Math.max(this.recordsDataService.records.length,0),e=Hi[ct.YELLOW].datasetColors[i];return{borderColor:e.borderColor,backgroundColor:e.backgroundColor}}save(i){if(i!==de.SAVE)return;let{backgroundColor:e,borderColor:t}=this.form.get("chart")?.getRawValue();this.drawerRef.close({result:{recordName:this.runNameFormControl.value,recordFilename:this.selectRunFormControl.value,record:this.summarizedRecord,chartColors:{backgroundColor:e,borderColor:t}},status:i})}close(){this.drawerRef.close()}savePanelStates(){this.panels.forEach((i,e)=>{this.panelStates[e]=i.expanded})}restorePanelStates(){this.panels.forEach((i,e)=>{this.panelStates[e]!==void 0&&(i.expanded=this.panelStates[e])})}},Z.\u0275fac=function(e){return new(e||Z)(f(zi),f(Li),f(et),f(Ct),f(L),f(Yi))},Z.\u0275cmp=T({type:Z,selectors:[["ms-run-drawer-actions"]],viewQuery:function(e,t){if(e&1&&ne(me,5),e&2){let r;re(r=oe())&&(t.panels=r)}},decls:15,vars:8,consts:[["content",""],["noData",""],["noStatisticsData",""],["noModelTrainingDetailsData",""],["noParametersData",""],["noAccuracyData",""],[3,"actionEvent","isSaveDisabled"],[3,"formGroup"],[1,"form-field-container"],["appearance","outline"],["formControlName","selectRun","placeholder","Select a run record"],["disabled","",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["disabled",""],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],[1,"spinner-wrapper","mt-4"],["diameter","80"],[1,"form-field-container","mt-4"],["matInput","","formControlName","runName","placeholder","Set run name"],["multi",""],[3,"expandedChange","expanded"],[1,"paragraph-bold-p3-small-bold"],["class","key-value-container single",4,"ngFor","ngForOf"],[1,"key-value-container","single"],[1,"key-value-pair","space-between"],[1,"key-value-key"],[1,"key-value-value"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","pt-2",4,"ngIf"],[1,"pt-2"],[1,"no-data-container"],["controlKey","chart"],[3,"data","settings"],["title","Awaiting Run Record Selection","message","Select a run record from the dropdown to view details and statistics."]],template:function(e,t){if(e&1){let r=E();l(0,"ms-drawer",6),C("actionEvent",function(a){return _(r),v(t.save(a))}),l(1,"form",7)(2,"div",8)(3,"mat-label"),d(4,"Select run record"),c(),l(5,"mat-form-field",9)(6,"mat-select",10),u(7,Jn,2,1,"mat-option",11)(8,tr,2,1,"ng-container",12),c()()(),u(9,ir,3,0,"div",13),b(10,"async"),u(11,Sr,1,2,"ng-template",null,0,K),c()(),u(13,Er,1,0,"ng-template",null,1,K)}if(e&2){let r=j(12);p("isSaveDisabled",t.form.invalid),s(),p("formGroup",t.form),s(6),p("ngIf",t.files.length===0),s(),p("ngIf",t.files.length>0),s(),p("ngIf",S(10,6,t.isSummarizedRecordLoading$))("ngIfElse",r)}},dependencies:[Y,Q,ti,ii,ni,st,Qe,xi,it,tt,ot,Ke,yi,Si,me,Re,ke,Ze,ui,ce,De,Je,Fe,Ie,lt,pn,Se,ri,oi,Gi,mt,ji,ln],styles:[".spinner-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),Z);_e=ie([pe()],_e);function Fr(n,i){if(n&1){let e=E();l(0,"mat-card",3)(1,"div",4)(2,"div",5),d(3),c(),l(4,"div",6)(5,"button",7),C("click",function(){let r=_(e).$implicit,o=m(2);return v(o.viewRecord(r))}),g(6,"mat-icon",8),c(),l(7,"button",7),C("click",function(){let r=_(e),o=r.$implicit,a=r.index,h=m(2);return v(h.editRecord(a,o))}),g(8,"mat-icon",9),c(),l(9,"button",10),C("click",function(){let r=_(e).index,o=m(2);return v(o.removeRecord(r))}),l(10,"mat-icon",11),d(11,"delete"),c()()()()()}if(n&2){let e=i.$implicit;s(3),A(e.recordName)}}function Tr(n,i){if(n&1&&(x(0),u(1,Fr,12,1,"mat-card",2),w()),n&2){let e=i.ngIf;s(),p("ngForOf",e)}}var un=(()=>{let i=class i{constructor(t,r){this.recordsDataService=t,this.drawerService=r}removeRecord(t){this.recordsDataService.removeRecord(t)}viewRecord(t){this.drawerService.open(_e,{title:"View Run",showSaveButton:!1,showCloseButton:!0,closeButtonLabel:"Close",actionType:V.VIEW,data:t})}editRecord(t,r){this.drawerService.open(_e,{title:"Edit Run",saveButtonLabel:"Update",showCloseButton:!0,closeButtonLabel:"Close",actionType:V.EDIT,data:r}).afterClosed().pipe(xe(1)).subscribe(a=>{let{status:h}=a;if(h===de.DISMISS||h===de.CLOSE)return;let{result:y}=a;Me(y)||this.recordsDataService.updateRecord(t,y)})}};i.\u0275fac=function(r){return new(r||i)(f(L),f(Pe))},i.\u0275cmp=T({type:i,selectors:[["ms-algorithm-comparison-list"]],decls:3,vars:3,consts:[[1,"items-wrapper"],[4,"ngIf"],["class","ms-card comparison-item",4,"ngFor","ngForOf"],[1,"ms-card","comparison-item"],[1,"item-wrapper"],["msUseEllipsis",""],[1,"record-summary-buttons-wrapper"],["mat-icon-button","","color","primary",3,"click"],["fontSet","ms","fontIcon","icon-Eye",1,"mat-primary"],["fontSet","ms","fontIcon","icon-PencilSimple",1,"mat-primary"],["mat-icon-button","","color","error",3,"click"],[1,"mat-error"]],template:function(r,o){r&1&&(l(0,"div",0),u(1,Tr,2,1,"ng-container",1),b(2,"async"),c()),r&2&&(s(),p("ngIf",S(2,1,o.recordsDataService.records$)))},dependencies:[Y,Q,_i,Te,bi,an,Se],styles:[".items-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));grid-gap:20px;padding:20px 0}.items-wrapper[_ngcontent-%COMP%]   .ms-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0003}.items-wrapper[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.items-wrapper[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .record-summary-buttons-wrapper[_ngcontent-%COMP%]{display:flex}"]});let n=i;return n})();var J,_t=(J=class{constructor(i,e){this.recordsDataService=i,this.chartToolsGlobalSignalsService=e,this.testingAccuracyChartDisplaySettings={yAxisMinimumValue:0,yAxisMaximumValue:100,yAxisTickInterval:20,chartDataStructure:pt.SINGLE_PHASE_X_AXIS,datasetColorSettingsKey:ct.YELLOW,isXAxisVisible:!0,xAxisLabelPrefix:"Step:",zoomRangeLimits:{min:0,max:100},isXAxisDynamic:!0,hasCustomDatasetsLabels:!0},this.lastRunsAccuracyTestingChartData=[],this.enableTooltips=!1,this.enableZoom=!1}ngOnInit(){this.listenToRecordsChanges(),this.subscribeToChartToolsSignals()}listenToRecordsChanges(){this.recordsDataService.records$.pipe(N(this)).subscribe(i=>{Bt(i)||(this.lastRunsAccuracyTestingChartData=this.configureChartDatasets(i),this.testingAccuracyChartDisplaySettings=z(O({},this.testingAccuracyChartDisplaySettings),{customDatasetsLabels:i.map(e=>e.recordName),xAxisDataPointsCount:i[0].record.lastRunTestingAccuracyData.length,isChartWithCustomColorSettings:!0,customChartColors:{datasetColors:i.map(e=>e.chartColors)}}))})}subscribeToChartToolsSignals(){this.chartToolsGlobalSignalsService.toggleTooltips$.pipe(N(this)).subscribe(i=>{this.enableTooltips=i}),this.chartToolsGlobalSignalsService.toggleZoom$.pipe(N(this)).subscribe(i=>{this.enableZoom=i})}configureChartDatasets(i){let e=[];return i.forEach((t,r)=>{let{record:o}=t;e.push({datasetIndex:r,values:o.lastRunTestingAccuracyData||[]})}),e}toggleTooltip(i){this.chartToolsGlobalSignalsService.toggleTooltips=i.checked}toggleZoom(i){this.chartToolsGlobalSignalsService.toggleZoom=i.checked}},J.\u0275fac=function(e){return new(e||J)(f(L),f(Oe))},J.\u0275cmp=T({type:J,selectors:[["ms-algorithm-comparison-chart"]],decls:14,vars:4,consts:[["expanded","true"],[1,"paragraph-bold-p3-small-bold"],[1,"mt-2","flex"],["color","primary",3,"ngModelChange","change","ngModel"],[1,"flex"],["color","primary",1,"ml-2",3,"ngModelChange","change","ngModel"],[1,"ml-1"],["fontSet","ms","fontIcon","icon-Info","matTooltip","Use mouse wheel or touchpad pinch to zoom in/out. Drag to select an area for specific zoom, or use touchpad gestures to navigate."],[3,"data","settings"]],template:function(e,t){e&1&&(l(0,"mat-expansion-panel",0)(1,"mat-expansion-panel-header")(2,"mat-panel-title",1),d(3," Last Accuracy Test Run "),c()(),l(4,"div",2)(5,"div")(6,"mat-slide-toggle",3),le("ngModelChange",function(o){return se(t.enableTooltips,o)||(t.enableTooltips=o),o}),C("change",function(o){return t.toggleTooltip(o)}),d(7," Enable tooltips "),c()(),l(8,"div",4)(9,"mat-slide-toggle",5),le("ngModelChange",function(o){return se(t.enableZoom,o)||(t.enableZoom=o),o}),C("change",function(o){return t.toggleZoom(o)}),d(10," Enable zoom "),c(),l(11,"div",6),g(12,"mat-icon",7),c()()(),g(13,"ms-line-chart",8),c()),e&2&&(s(6),ae("ngModel",t.enableTooltips),s(3),ae("ngModel",t.enableZoom),s(4),p("data",t.lastRunsAccuracyTestingChartData)("settings",t.testingAccuracyChartDisplaySettings))},dependencies:[Te,Ae,Ei,me,Re,ke,ce,gi,Ie]}),J);_t=ie([pe()],_t);function Rr(n,i){n&1&&(l(0,"th",10),d(1,"Record Name"),c())}function kr(n,i){if(n&1&&(l(0,"td",11),d(1),c()),n&2){let e=i.$implicit;s(),A(e.recordName)}}function Pr(n,i){if(n&1&&(l(0,"th",10),d(1),b(2,"parametersLabel"),c()),n&2){let e=m().$implicit;s(),F(" ",S(2,1,e)," ")}}function Or(n,i){if(n&1&&(l(0,"td",11),d(1),b(2,"emptyTableField"),c()),n&2){let e=i.$implicit,t=m().$implicit;s(),F(" ",S(2,1,e[t])," ")}}function Ir(n,i){if(n&1&&(x(0,12),u(1,Pr,3,3,"th",5)(2,Or,3,3,"td",6),w()),n&2){let e=i.$implicit;p("matColumnDef",e)}}function Br(n,i){n&1&&g(0,"tr",13)}function Nr(n,i){n&1&&g(0,"tr",14)}var ee,vt=(ee=class{constructor(i){this.recordsDataService=i,this.dataSource=new Ni,this.displayedColumns=[]}ngOnInit(){this.recordsDataService.records$.pipe(N(this)).subscribe(i=>{this.updateDisplayedColumns(i),this.updateDataSource(i)})}ngAfterViewInit(){Me(this.sort)||setTimeout(()=>{this.dataSource.sort=this.sort},1200)}updateDisplayedColumns(i){let e=new Set;i.forEach(t=>{Object.keys(t.record.parameters).forEach(r=>{r!=="save_dir"&&r!=="data"&&e.add(r)})}),this.displayedColumns=["recordName",...Array.from(e)]}updateDataSource(i){let e=i.map(t=>{let r=t.record.parameters;return O({recordName:t.recordName},r)});this.dataSource.data=e}},ee.\u0275fac=function(e){return new(e||ee)(f(L))},ee.\u0275cmp=T({type:ee,selectors:[["ms-algorithm-comparison-table"]],viewQuery:function(e,t){if(e&1&&ne(at,5),e&2){let r;re(r=oe())&&(t.sort=r.first)}},decls:12,vars:4,consts:[["expanded","true"],[1,"paragraph-bold-p3-small-bold"],[1,"table-container"],["mat-table","","matSort","",1,"mat-table",3,"dataSource"],["matColumnDef","recordName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","hover-highlight",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"matColumnDef"],["mat-header-row",""],["mat-row","",1,"hover-highlight"]],template:function(e,t){e&1&&(l(0,"mat-expansion-panel",0)(1,"mat-expansion-panel-header")(2,"mat-panel-title",1),d(3," Parameters "),c()(),l(4,"div",2)(5,"table",3),x(6,4),u(7,Rr,2,0,"th",5)(8,kr,2,1,"td",6),w(),u(9,Ir,3,1,"ng-container",7)(10,Br,1,0,"tr",8)(11,Nr,1,0,"tr",9),c()()()),e&2&&(s(5),p("dataSource",t.dataSource),s(4),p("ngForOf",t.displayedColumns.slice(1)),s(),p("matHeaderRowDef",t.displayedColumns),s(),p("matRowDefColumns",t.displayedColumns))},dependencies:[Y,Fi,Mi,Pi,Ai,Ti,Oi,Ri,ki,Ii,Bi,at,Di,me,Re,ke,mt,sn],styles:[".table-container[_ngcontent-%COMP%]{overflow:auto}.hover-highlight[_ngcontent-%COMP%]:hover{background-color:var(--backgrounds-80)}.mat-column-disable_8bit_head_stem[_ngcontent-%COMP%]{min-width:200px}.mat-column-workers[_ngcontent-%COMP%], .mat-column-n_bits_w[_ngcontent-%COMP%], .mat-column-channel_wise[_ngcontent-%COMP%], .mat-column-n_bits_a[_ngcontent-%COMP%]{min-width:160px}.mat-column-act_quant[_ngcontent-%COMP%]{min-width:180px}.mat-column-num_samples[_ngcontent-%COMP%], .mat-column-iters_w[_ngcontent-%COMP%]{min-width:160px}.mat-column-keep_cpu[_ngcontent-%COMP%], .mat-column-awq[_ngcontent-%COMP%]{min-width:180px}.mat-column-aaq[_ngcontent-%COMP%], .mat-column-init_wmode[_ngcontent-%COMP%], .mat-column-init_amode[_ngcontent-%COMP%]{min-width:200px}.mat-column-num_indexes_to_replace[_ngcontent-%COMP%]{min-width:185px}.mat-column-unlearn_lr[_ngcontent-%COMP%], .mat-column-alpha[_ngcontent-%COMP%], .mat-column-unlearn_epochs[_ngcontent-%COMP%], .mat-column-train_seed[_ngcontent-%COMP%], .mat-column-class_to_replace[_ngcontent-%COMP%], .mat-column-indexes_to_replace[_ngcontent-%COMP%], .mat-column-no_aug[_ngcontent-%COMP%]{min-width:200px}.mat-column-imagenet_arch[_ngcontent-%COMP%]{min-width:220px}.mat-column-num_workers[_ngcontent-%COMP%]{min-width:180px}"]}),ee);vt=ie([pe()],vt);function Lr(n,i){if(n&1&&(l(0,"mat-option",13),d(1),c()),n&2){let e=i.$implicit;p("value",e.key),s(),F(" ",e.value," ")}}function zr(n,i){n&1&&(x(0),g(1,"ms-algorithm-comparison-list"),l(2,"div",8),g(3,"mat-divider"),c(),g(4,"ms-algorithm-comparison-table"),l(5,"div",8),g(6,"mat-divider"),c(),g(7,"ms-algorithm-comparison-chart"),w())}function Hr(n,i){n&1&&(l(0,"div",14),g(1,"ms-empty-state",15),c())}var te,xt=(te=class{get algorithmTypeFormControl(){return this.form.get(this.ALGORITHM_TYPE_CONTROL_NAME)}constructor(i,e,t){this.drawerService=i,this.recordsDataService=e,this.fb=t,this.form=new qe({}),this.algorithmTypesOptions=[{key:I.QUANTIZATION,value:"Quantization"},{key:I.PRUNING,value:"Pruning"},{key:I.MACHINE_UNLEARNING,value:"Machine Unlearning"}],this.ALGORITHM_TYPE_CONTROL_NAME="algorithmType"}openAddRunDrawer(){this.drawerService.open(_e,{title:"Add Run",saveButtonLabel:"Add",showCloseButton:!0,closeButtonLabel:"Close",actionType:V.ADD}).afterClosed().pipe(xe(1)).subscribe(e=>{let{status:t}=e;if(t===de.DISMISS||t===de.CLOSE)return;let{result:r}=e;this.recordsDataService.addRecord(r)})}ngOnInit(){this.initForm(),this.listenToAlgorithmTypeChanges()}initForm(){this.form=this.fb.group({[this.ALGORITHM_TYPE_CONTROL_NAME]:[this.recordsDataService.algorithmType,fe.required]})}listenToAlgorithmTypeChanges(){this.algorithmTypeFormControl.valueChanges.pipe(N(this)).subscribe(i=>{this.recordsDataService.algorithmType=i})}trackByAlgorithmType(i,e){return e.key}},te.\u0275fac=function(e){return new(e||te)(f(Pe),f(L),f(et))},te.\u0275cmp=T({type:te,selectors:[["ms-algorithm-comparison"]],decls:19,vars:8,consts:[["noData",""],[1,"title-wrapper"],[1,"heading-primary-title","title"],[1,"ml-2",3,"formGroup"],[1,"form-field-container","w-56","mt-2"],["appearance","outline"],["placeholder","Select a run record",3,"formControlName"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mt-4","mb-4"],["mat-stroked-button","","color","primary",3,"click"],["fontSet","ms","fontIcon","icon-Plus"],[1,"mt-4"],[4,"ngIf","ngIfElse"],[3,"value"],[1,"no-data-wrapper"],["title","No data selected"]],template:function(e,t){if(e&1){let r=E();l(0,"div",1)(1,"p",2),d(2,"Algorithm Comparison for"),c(),l(3,"form",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-select",6),u(7,Lr,2,2,"mat-option",7),c()()()()(),l(8,"div",8),g(9,"mat-divider"),c(),l(10,"button",9),C("click",function(){return _(r),v(t.openAddRunDrawer())}),g(11,"mat-icon",10),d(12,` Add run
`),c(),l(13,"div",11),g(14,"mat-divider"),c(),u(15,zr,8,0,"ng-container",12),b(16,"async"),u(17,Hr,2,0,"ng-template",null,0,K)}if(e&2){let r=j(18);s(3),p("formGroup",t.form),s(3),p("formControlName",t.ALGORITHM_TYPE_CONTROL_NAME),s(),p("ngForOf",t.algorithmTypesOptions)("ngForTrackBy",t.trackByAlgorithmType),s(8),p("ngIf",S(16,6,t.recordsDataService.records$).length>0)("ngIfElse",r)}},dependencies:[Y,Q,Qe,Ci,Te,it,ot,Ke,Ze,ce,De,Je,Fe,lt,un,_t,vt,Se],styles:[".no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}.title-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),te);xt=ie([pe()],xt);var jr=[{path:"",component:xt}],gn=(()=>{let i=class i{};i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=ye({type:i}),i.\u0275inj=we({imports:[Rt.forChild(jr),Rt]});let n=i;return n})();var Hs=(()=>{let i=class i{};i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=ye({type:i}),i.\u0275inj=we({providers:[Pe,Ct,L,Oe],imports:[$e,gn,st,qi,Vi,ci.forFeature("runRecords",on),di.forFeature([Zi]),Ie]});let n=i;return n})();export{Hs as AlgorithmComparisonModule};
