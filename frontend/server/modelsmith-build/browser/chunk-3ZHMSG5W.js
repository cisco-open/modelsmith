import{Ab as A,Bb as U,I as b,Kb as g,Lb as f,Md as V,O as a,Ob as l,Pb as y,Qb as F,R as s,Rb as D,Sb as I,Ub as Q,Ud as Y,Vd as v,Wd as J,Xb as q,_b as H,a as u,b as p,bc as h,cd as T,dd as X,ed as S,f as z,h as $,i as L,o as x,s as P,u as O,ud as K,w as B,x as j,zb as c}from"./chunk-JA5VSLUI.js";var lt=5e3,W=5e3,ft=1e4,Z=(()=>{let t=class t{constructor(r){this.snackbar=r}showSuccess(r){this.showBanner(r,v.SUCCESS,lt,"notification-panel-success")}showInfo(r){this.showBanner(r,v.INFO,W,"notification-panel-info")}showError(r){this.showBanner(r,v.ERROR,ft,"notification-panel-error")}showWarning(r){this.showBanner(r,v.WARNING,W,"notification-panel-warning")}showBanner(r,i,o,m){this.snackbar.openFromComponent(J,{duration:o,data:{message:r,notificationType:i},panelClass:m})}};t.\u0275fac=function(i){return new(i||t)(s(Y))},t.\u0275prov=a({token:t,factory:t.\u0275fac});let e=t;return e})();var n=A({source:"[Core -> Charts]",events:{"Get Current Pruning Chart Data":U(),"Get Current Pruning Chart Data Success":c(),"Get Current Pruning Chart Data Failure":c(),"Get Current Quantization Chart Data":U(),"Get Current Quantization Chart Data Success":c(),"Get Current Quantization Chart Data Failure":c(),"Get Current Machine Unlearning Chart Data":U(),"Get Current Machine Unlearning Chart Data Success":c(),"Get Current Machine Unlearning Chart Data Failure":c(),"Get Chart Configuration Settings":c(),"Get Chart Configuration Settings Success":c(),"Get Chart Configuration Settings Failure":c()}});var w=class extends S{constructor(t){let ut=`type=${t.join(",")}`;super(`chart-configuration-settings?${ut}`,void 0,void 0,!1)}};var R=class extends S{constructor(){super("current-machine-unlearning-chart-data",void 0,void 0,!1)}};var k=class extends S{constructor(){super("current-pruning-chart-data",void 0,void 0,!1)}};var N=class extends S{constructor(){super("current-quantization-chart-data",void 0,void 0,!1)}};var Bt=(()=>{let t=class t{constructor(r,i){this.apiClient=r,this.actions$=i,this.getCurrentPruningChartData$=F(()=>this.actions$.pipe(I(n.getCurrentPruningChartData),b(()=>this.apiClient.serviceCall(new k).pipe(P(o=>n.getCurrentPruningChartDataSuccess({pruningProgress:o})),j(o=>x(n.getCurrentPruningChartDataFailure({error:o}))))))),this.getCurrentQuantizationChartData$=F(()=>this.actions$.pipe(I(n.getCurrentQuantizationChartData),b(()=>this.apiClient.serviceCall(new N).pipe(P(o=>n.getCurrentQuantizationChartDataSuccess({quantizationProgress:o})),j(o=>x(n.getCurrentQuantizationChartDataFailure({error:o}))))))),this.getCurrentMachineUnlearningChartData$=F(()=>this.actions$.pipe(I(n.getCurrentMachineUnlearningChartData),b(()=>this.apiClient.serviceCall(new R).pipe(P(o=>n.getCurrentMachineUnlearningChartDataSuccess({machineUnlearningProgress:o})),j(o=>x(n.getCurrentMachineUnlearningChartDataFailure({error:o}))))))),this.getChartConfigurationSettings$=F(()=>this.actions$.pipe(I(n.getChartConfigurationSettings),b(o=>this.apiClient.serviceCall(new w(o.chartTypes)).pipe(P(m=>n.getChartConfigurationSettingsSuccess({settings:m})),j(m=>x(n.getChartConfigurationSettingsFailure({error:m})))))))}};t.\u0275fac=function(i){return new(i||t)(s(T),s(D))},t.\u0275prov=a({token:t,factory:t.\u0275fac});let e=t;return e})();var gt={pruningProgress:[],machineUnlearningProgress:void 0,quantizationProgress:void 0,settings:{},error:null},Xt=y(gt,l(n.getCurrentPruningChartDataSuccess,(e,{pruningProgress:t})=>p(u({},e),{pruningProgress:t,machineUnlearningProgress:void 0,quantizationProgress:void 0,error:null})),l(n.getCurrentPruningChartDataFailure,(e,{error:t})=>p(u({},e),{pruningProgress:[],error:t})),l(n.getCurrentQuantizationChartDataSuccess,(e,{quantizationProgress:t})=>p(u({},e),{pruningProgress:[],quantizationProgress:t,machineUnlearningProgress:void 0,error:null})),l(n.getCurrentQuantizationChartDataFailure,(e,{error:t})=>p(u({},e),{quantizationProgress:void 0,error:t})),l(n.getCurrentMachineUnlearningChartDataSuccess,(e,{machineUnlearningProgress:t})=>p(u({},e),{pruningProgress:[],quantizationProgress:void 0,machineUnlearningProgress:t,error:null})),l(n.getCurrentQuantizationChartDataFailure,(e,{error:t})=>p(u({},e),{quantizationProgress:void 0,error:t})),l(n.getCurrentPruningChartDataFailure,(e,{error:t})=>p(u({},e),{pruningProgress:[],error:t})),l(n.getChartConfigurationSettingsSuccess,(e,{settings:t})=>p(u({},e),{settings:u(u({},e.settings),t),error:null})),l(n.getChartConfigurationSettingsFailure,(e,{error:t})=>p(u({},e),{error:t})));var _=f(h,e=>e.charts.pruningProgress),tt=f(h,e=>e.charts.quantizationProgress),et=f(h,e=>e.charts.machineUnlearningProgress),rt=f(h,e=>e.charts.settings);var oe=(()=>{let t=class t{constructor(r){this.store=r,this.pruningProgress=this.store.select(_),this.quantizationProgress$=this.store.select(tt),this.machineUnlearningProgress$=this.store.select(et),this.settings$=this.store.select(rt)}dispatch(r){this.store.dispatch(r)}};t.\u0275fac=function(i){return new(i||t)(s(g))},t.\u0275prov=a({token:t,factory:t.\u0275fac});let e=t;return e})();var it=A({source:"[Core -> File]",events:{"Upload File":c(),"Upload File Success":c(),"Upload File Failure":c(),"Upload File and Call Script":c()}});var st=(()=>{let t=class t{constructor(r){this.store=r}dispatch(r){this.store.dispatch(r)}};t.\u0275fac=function(i){return new(i||t)(s(g))},t.\u0275prov=a({token:t,factory:t.\u0275fac});let e=t;return e})();var le=(()=>{let t=class t{constructor(r,i){this.bannerService=r,this.fileFacadeService=i,this._fileSubject=new L(null)}get isFileLoaded(){return!!this._fileSubject.value}get file$(){return this._fileSubject.asObservable()}set file(r){this._fileSubject.next(r)}get file(){return this._fileSubject.value}clearFile(){this._fileSubject.next(null)}uploadFile(){if(!this.file){this.bannerService.showError("No file to upload.");return}this.fileFacadeService.dispatch(it.uploadFile({file:this.file}))}};t.\u0275fac=function(i){return new(i||t)(s(Z),s(st))},t.\u0275prov=a({token:t,factory:t.\u0275fac});let e=t;return e})();var Ce=(()=>{let t=class t{constructor(r){this.router=r,this.history=[]}trackNavigationHistory(){this.addInitialUrl(),this.router.events.pipe(B(r=>r instanceof Q)).subscribe(r=>{this.history.push(r.urlAfterRedirects)})}addInitialUrl(){let r=this.router.url;this.history.push(r)}goToPreviousPage(r=H.MODEL_COMPRESSION.ROOT){let i=this.getPreviousUrl();i==="/"?this.router.navigateByUrl(`/${r}`):this.router.navigateByUrl(i)}getPreviousUrl(){return this.history[this.history.length-2]||"/"}};t.\u0275fac=function(i){return new(i||t)(s(q))},t.\u0275prov=a({token:t,factory:t.\u0275fac});let e=t;return e})();var ot=f(h,e=>e.parameters);var Fe=(()=>{let t=class t{constructor(r){this.store=r,this.parameters$=this.store.select(ot)}dispatch(r){this.store.dispatch(r)}};t.\u0275fac=function(i){return new(i||t)(s(g))},t.\u0275prov=a({token:t,factory:t.\u0275fac});let e=t;return e})();var nt=f(h,e=>e.statistics.statistics);var at=(()=>{let t=class t{constructor(r){this.store=r,this.statistics$=this.store.select(nt)}dispatch(r){this.store.dispatch(r)}};t.\u0275fac=function(i){return new(i||t)(s(g))},t.\u0275prov=a({token:t,factory:t.\u0275fac});let e=t;return e})();var ct=f(h,e=>e.terminal.messages);var Re=(()=>{let t=class t{constructor(r){this.store=r,this.messages$=this.store.select(ct)}dispatch(r){this.store.dispatch(r)}};t.\u0275fac=function(i){return new(i||t)(s(g))},t.\u0275prov=a({token:t,factory:t.\u0275fac});let e=t;return e})();var d=A({source:"[Core -> Statistics]",events:{"Get Statistics":U(),"Get Statistics Success":c(),"Get Statistics Failure":c(),"Update Statistics":c()}});var M=class extends S{constructor(){super("statistics",void 0,void 0,!1)}};var qe=(()=>{let t=class t{constructor(r,i){this.apiClient=r,this.actions$=i,this.getStatistics=F(()=>this.actions$.pipe(I(d.getStatistics),b(()=>this.apiClient.serviceCall(new M).pipe(P(o=>d.getStatisticsSuccess({statistics:o})),j(o=>x(d.getStatisticsFailure({error:o})))))))}};t.\u0275fac=function(i){return new(i||t)(s(T),s(D))},t.\u0275prov=a({token:t,factory:t.\u0275fac});let e=t;return e})();var dt={statistics:{},error:null},Ve=y(dt,l(d.getStatisticsSuccess,(e,{statistics:t})=>p(u({},e),{statistics:t,error:null})),l(d.getStatisticsFailure,(e,{error:t})=>p(u({},e),{error:t})),l(d.updateStatistics,(e,{statistics:t})=>p(u({},e),{statistics:t,error:null})));var E=function(e){return e.TERMINAL="terminal",e.SCRIPT_STATUS="script_status",e.STATISTICS="statistics",e.CHARTS_PREFIX="chart_",e}(E||{}),xt=function(e){return e.UPDATE_TESTING="chart_updateTesting",e.UPDATE_LATEST_VALUE="chart_updateLatestValue",e.ENHANCE_SINGLE_PHASE_X_AXIS="chart_enhanceSinglePhaseXAxis",e}(xt||{});var fr=(()=>{let t=class t{handleBeforeUnload(){this.close()}constructor(r,i){this.scriptFacadeService=r,this.statisticsFacadeService=i,this.terminalMessagesSubject=new $,this.chartsMessagesSubject=new $,this.connect()}connect(){this.close(),this.socket=new WebSocket(X.websocketUrl),this.socket.onopen=()=>{console.log("WebSocket connected!")},this.socket.onmessage=r=>z(this,null,function*(){let i=JSON.parse(r.data),{topic:o="",data:m}=i;switch(o){case E.TERMINAL:this.terminalMessagesSubject.next(m);break;case E.SCRIPT_STATUS:this.scriptFacadeService.dispatch(K.updateScriptStatus({status:m}));break;case E.STATISTICS:let{statistics:pt}=m||{};this.statisticsFacadeService.dispatch(d.updateStatistics({statistics:pt}));break;default:o.startsWith(E.CHARTS_PREFIX)?this.chartsMessagesSubject.next({topic:o,data:m}):console.warn("Unknown message type:",o)}}),this.socket.onerror=r=>{console.error("WebSocket Error:",r)},this.socket.onclose=r=>{r.wasClean?console.log(`Closed cleanly, code=${r.code}, reason=${r.reason}`):console.error("Connection died"),O(5e3).subscribe(()=>this.connect())}}get terminalMessages$(){return this.terminalMessagesSubject.asObservable()}get chartsMessages$(){return this.chartsMessagesSubject.asObservable()}send(r){this.socket&&this.socket.readyState===this.socket.OPEN&&this.socket.send(r)}close(){this.socket&&this.socket.readyState!==this.socket.CLOSED&&this.socket.close()}};t.\u0275fac=function(i){return new(i||t)(s(V),s(at))},t.\u0275prov=a({token:t,factory:t.\u0275fac});let e=t;return e})();export{Z as a,n as b,Bt as c,Xt as d,oe as e,st as f,it as g,le as h,Ce as i,Fe as j,at as k,Re as l,d as m,qe as n,Ve as o,xt as p,fr as q};
