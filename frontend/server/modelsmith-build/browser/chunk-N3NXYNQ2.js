import{a as ue}from"./chunk-3MPJUBOL.js";import{a as le,b as se}from"./chunk-LYLUD7NS.js";import{a as oe,b as ne}from"./chunk-UHAD5NWO.js";import{a as Z,b as ee}from"./chunk-LZY4CHNS.js";import{d as de}from"./chunk-IEEULA7X.js";import{b as ie}from"./chunk-RMGWBHNQ.js";import{a as te,b as re}from"./chunk-LO4ECSBK.js";import{a as me,b as pe}from"./chunk-Q3NXZ5DV.js";import{b as ae,m as ce}from"./chunk-2E46GXN3.js";import{a as O,b as g}from"./chunk-J6PH3BGD.js";import{a as z,d as J,h as Q,i as W}from"./chunk-D3S6HEU5.js";import{$a as y,$d as f,Ab as G,Bb as $,Ea as a,Fa as c,Q as P,Qa as v,Rd as k,Sa as s,Ya as d,Yd as D,Za as F,_a as x,ab as n,ad as w,bb as o,be as K,cb as h,ce as L,da as T,db as A,de as V,eb as E,ha as I,ke as j,lb as u,le as R,me as B,ne as U,oa as b,ob as _,oe as H,p as M,qe as q,ub as l,vb as C,wb as N,we as X,x as S,xe as Y}from"./chunk-VYHIF4FK.js";function he(r,t){if(r&1&&(n(0,"div",6)(1,"mat-label"),l(2),o(),n(3,"mat-form-field",8),h(4,"input",9)(5,"mat-icon",10),o()()),r&2){let e=u(),i=e.$implicit,m=e.$index;a(2),C(i.label),a(2),s("formControlName",m)("placeholder",i.placeholder)("type",i.inputType),a(),_("matTooltip",i.help)}}function _e(r,t){if(r&1&&(n(0,"mat-option",12),l(1),o()),r&2){let e=t.$implicit;s("value",e.value),a(),N(" ",e.viewValue," ")}}function Ce(r,t){if(r&1&&(n(0,"div",6)(1,"mat-label"),l(2),o(),n(3,"mat-form-field",8)(4,"mat-select",11),x(5,_e,2,2,"mat-option",12,F),o(),h(7,"mat-icon",10),o()()),r&2){let e=u(),i=e.$implicit,m=e.$index;a(2),C(i.label),a(2),s("formControlName",m),a(),y(i.options),a(2),_("matTooltip",i.help)}}function ve(r,t){if(r&1&&(n(0,"div",7)(1,"mat-checkbox",11),l(2),o(),n(3,"div",13),h(4,"mat-icon",14),o()()),r&2){let e=u(),i=e.$implicit,m=e.$index;a(),s("formControlName",m),a(),C(i.label),a(2),_("matTooltip",i.help)}}function Fe(r,t){if(r&1&&v(0,he,6,5,"div",6)(1,Ce,8,3,"div",6)(2,ve,5,3,"div",7),r&2){let e=t.$implicit;d(e.inputType==="text"||e.inputType==="number"?0:-1),a(),d(e.inputType==="select"?1:-1),a(),d(e.inputType==="checkbox"?2:-1)}}function xe(r,t){if(r&1&&(n(0,"div",2),A(1,4),n(2,"div",5),x(3,Fe,3,3,null,null,F),o(),E(),o()),r&2){let e=u();a(),s("formGroupName",e.controlKey),a(2),y(e.parameters)}}function ye(r,t){r&1&&(n(0,"p",3),l(1,"No parameters configured."),o())}var p,fe=(p=class{ngOnChanges(t){t.algorithm&&t.algorithm.currentValue&&(this.alg=t.algorithm.currentValue,this.loadParametersForAlgorithm(this.alg))}get parentFormGroup(){return this.controlContainer.control}get paramsFormGroup(){return this.parentFormGroup.get(this.controlKey)}get parametersFormArray(){return this.paramsFormGroup.get("parametersArray")}constructor(t,e,i,m){this.fb=t,this.controlContainer=e,this.parametersFacadeService=i,this.scriptFacadeService=m,this.controlKey="",this.RoutesList=w,this.alg=de,this.isScriptActive=!1,this.parameters=[]}ngOnInit(){this.initForm(),this.listenToScriptStateChanges()}initForm(){this.parentFormGroup.addControl(this.controlKey,new V({parametersArray:new U([])}))}loadParametersForAlgorithm(t){this.parametersFacadeService.dispatch(ue.loadParameters({arg:t})),this.parametersFacadeService.parameters$.pipe(S(e=>e[t]?.data||[]),P(1),g(this)).subscribe(e=>{this.buildFormArray(e)})}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe(g(this)).subscribe(t=>{this.isScriptActive=ie(t)})}buildFormArray(t){this.parametersFormArray.clear(),t.forEach(e=>{this.parametersFormArray.push(this.fb.control(e.defaultValue))}),this.isScriptActive?this.paramsFormGroup.disable():this.paramsFormGroup.enable(),this.parameters=t}get parametersFormatted(){let t={},e=this.parametersFormArray.getRawValue();return this.parameters.forEach((i,m)=>{t[i.argName]=e[m]}),t}ngOnDestroy(){this.parentFormGroup.removeControl(this.controlKey)}},p.\u0275fac=function(e){return new(e||p)(c(H),c(f),c(ce),c(ae))},p.\u0275cmp=I({type:p,selectors:[["ms-panel-parameters"]],inputs:{controlKey:"controlKey",algorithm:"algorithm"},standalone:!0,features:[G([],[{provide:f,useFactory:()=>T(f,{skipSelf:!0})}]),b,$],decls:5,vars:1,consts:[[1,"ms-card","parameters-card"],[1,"heading-sub-section-title"],[1,"parameters-wrapper"],[1,"no-parameters-message"],[3,"formGroupName"],["formArrayName","parametersArray"],[1,"form-field-container"],[1,"form-field-container","inline-container","mb-[22px]"],["appearance","outline"],["matInput","",3,"formControlName","placeholder","type"],["fontSet","ms","fontIcon","icon-Info","matSuffix","",3,"matTooltip"],[3,"formControlName"],[3,"value"],[1,"ml-2"],["fontSet","ms","fontIcon","icon-Info",3,"matTooltip"]],template:function(e,i){e&1&&(n(0,"mat-card",0)(1,"p",1),l(2,"Parameters"),o(),v(3,xe,5,1,"div",2)(4,ye,2,0,"p",3),o()),e&2&&(a(3),d(i.parameters.length?3:4))},dependencies:[ee,Z,Q,z,J,q,D,K,L,B,j,R,pe,me,W,se,le,k,re,te,ne,oe,Y,X],styles:[".parameters-card[_ngcontent-%COMP%]   .parameters-wrapper[_ngcontent-%COMP%]{max-height:400px;overflow:auto;padding-right:20px}.parameters-card[_ngcontent-%COMP%]   .parameters-wrapper[_ngcontent-%COMP%]   .parameter-divider[_ngcontent-%COMP%]{margin-bottom:20px}"]}),p);fe=M([O()],fe);export{fe as a};
