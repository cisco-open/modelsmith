"use strict";(self.webpackChunkmodelsmith=self.webpackChunkmodelsmith||[]).push([[486],{2486:(zt,O,a)=>{a.r(O),a.d(O,{AlgorithmComparisonModule:()=>Ut});var g=a(6814),f=a(5154),m=a(4221);const d=(0,m.R7)({source:"[Run Records -> Records]",events:{"Get Run Records Filenames":(0,m.Ky)(),"Get Run Records Filenames Success":(0,m.Ky)(),"Get Run Records Filenames Failure":(0,m.Ky)(),"Get Run Record Summarized Data":(0,m.Ky)(),"Get Run Record Summarized Data Success":(0,m.Ky)(),"Get Run Record Summarized Data Failure":(0,m.Ky)()}});var b=a(4664),x=a(7398),I=a(6306),L=a(2096),X=a(395),M=a(4992);class H extends M.eW{constructor(r){super(`run-records-filenames/${r}`,void 0,void 0,!1)}}class W extends M.eW{constructor(r,o){super(`run-records-summarized-data/${r}/${o}`,void 0,void 0,!1)}}var t=a(5879);let j=(()=>{var e;class r{constructor(n,s){this.apiClient=n,this.actions$=s,this.getRunRecordsFilenames$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(d.getRunRecordsFilenames),(0,b.w)(i=>{const{algorithmType:l}=i;return this.apiClient.serviceCall(new H(l)).pipe((0,x.U)(u=>d.getRunRecordsFilenamesSuccess({files:u})),(0,I.K)(u=>(0,L.of)(d.getRunRecordsFilenamesFailure({error:u}))))}))),this.getRunRecordSummarizedData$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(d.getRunRecordSummarizedData),(0,b.w)(i=>{const{algorithmType:l,filename:u}=i;return this.apiClient.serviceCall(new W(l,u)).pipe((0,x.U)(_=>d.getRunRecordSummarizedDataSuccess({record:_})),(0,I.K)(_=>(0,L.of)(d.getRunRecordSummarizedDataFailure({error:_}))))})))}}return(e=r).\u0275fac=function(n){return new(n||e)(t.LFG(X.I),t.LFG(f.eX))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),r})();const tt=(0,m.Lq)({filenames:[],summarizedRecord:{},error:""},(0,m.on)(d.getRunRecordsFilenamesSuccess,(e,{files:r})=>({...e,filenames:r,error:null})),(0,m.on)(d.getRunRecordsFilenamesFailure,(e,{error:r})=>({...e,error:r})),(0,m.on)(d.getRunRecordSummarizedData,e=>({...e,loading:!0,error:null})),(0,m.on)(d.getRunRecordSummarizedDataSuccess,(e,{record:r})=>({...e,summarizedRecord:r,error:null})),(0,m.on)(d.getRunRecordSummarizedDataFailure,(e,{error:r})=>({...e,error:r}))),et=(0,m.ZF)("runRecords"),U=(0,m.P1)(et,e=>e.records),rt=(0,m.P1)(U,e=>e.filenames),ot=(0,m.P1)(U,e=>e.summarizedRecord),nt={records:tt};var at=a(4245),p=a(9190),Z=a(9421),z=a(2655),F=a(8180),h=function(e){return e.ADD="add",e.EDIT="edit",e.VIEW="view",e}(h||{}),E=a(7582),c=a(6223),C=a(8791),st=a(3620),it=a(2181),P=a(836),G=a(155),A=a(4378),J=a(7820),B=a(301),Y=a(6455);let Q=(()=>{var e;class r{constructor(n){this.store=n,this.filenames$=this.store.select(rt),this.summarizedRecord$=this.store.select(ot)}dispatch(n){this.store.dispatch(n)}}return(e=r).\u0275fac=function(n){return new(n||e)(t.LFG(m.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),r})();var ct=a(5619);const lt=[{recordName:"First run",recordFilename:"2024_04_16_09:44:06_IPG_ResNet18",record:{parameters:{lr:.1,epochs:2,pruning_times:3,pruning_ratio:.2,rewinding_epoch:1,best_acc:0,save_dir:"/home/ipop/modelsmith/examples_pruning/models_checkpoints",arch:"ResNet18"},statistics:{duration_seconds:268.2938714027405},lastRunTestingAccuracyData:[74,69,66.667,67.25,68.2,69.167,69.143,67.5,67.222,67.2,67.364,67.917,67.923,67.786,67.733,67.188,67.353,67.444,67.737,67.65,67.619,67.682,67.783,67.833,67.96,67.577,67.667,67.75,67.931,68.067,68.29,68.344,68.242,68.118,67.914,68.028,67.784,67.737,68.026,68,68.073,68.071,68.047,68.159,68.111,68.065,68.085,68.021,68.102,68.22,68.255,68.365,68.434,68.352,68.327,68.357,68.386,68.517,68.373,68.4,68.295,68.274,68.27,68.297,68.354,68.333,68.343,68.265,68.232,68.129,68.127,68.25,68.329,68.419,68.387,68.382,68.416,68.423,68.354,68.3,68.37,68.341,68.386,68.286,68.294,68.337,68.23,68.17,68.18,68.178,68.187,68.217,68.161,68.117,68.137,68.208,68.268,68.214,68.172,68.16]}},{recordName:"Record 2",recordFilename:"2024_04_16_10:12:57_IMP_ResNet18",record:{parameters:{lr:.1,epochs:1,pruning_times:1,pruning_ratio:.2,rewinding_epoch:1,best_acc:0,save_dir:"/home/ipop/modelsmith/examples_pruning/models_checkpoints",arch:"ResNet18"},statistics:{duration_seconds:46.21076583862305},lastRunTestingAccuracyData:[60,54.5,53,53,53.2,53.5,53.714,53.75,54,54.9,55.364,55,54.769,54.857,54.933,54.875,55.353,55.056,55.421,55.25,55.571,55.182,55.13,55.042,55,54.808,54.667,54.607,54.586,54.8,55.065,55.031,55.061,55.059,55.029,55.194,54.973,54.763,54.872,54.85,54.902,54.952,55.116,55.136,55.222,55.239,55.34,55.417,55.49,55.54,55.451,55.346,55.396,55.37,55.273,55.321,55.368,55.552,55.458,55.467,55.492,55.435,55.476,55.422,55.354,55.364,55.328,55.25,55.174,55.129,55.099,55.25,55.274,55.324,55.347,55.447,55.455,55.423,55.506,55.562,55.642,55.573,55.602,55.583,55.553,55.57,55.529,55.602,55.607,55.622,55.648,55.739,55.774,55.67,55.674,55.74,55.763,55.724,55.667,55.7]}},{recordName:"Another run",recordFilename:"2024_04_17_08:33:13_IMP_ResNet18",record:{parameters:{lr:.1,epochs:2,pruning_times:3,pruning_ratio:.2,rewinding_epoch:1,best_acc:0,save_dir:"/home/ipop/modelsmith/examples_pruning/models_checkpoints",arch:"ResNet18"},statistics:{duration_seconds:268.1203279495239},lastRunTestingAccuracyData:[74,71.5,68.333,69.75,70.2,70.667,69.714,68.625,68.667,69,69.636,70.25,70,69.5,69.733,69.5,69.588,69.556,69.579,69.4,69.19,69.273,69.435,69.417,69.28,69,68.889,69.179,69.31,69.233,69.29,69.281,69.333,69.206,69,69.139,68.946,68.921,69.103,69.15,69.146,69.143,69.302,69.409,69.356,69.152,69.234,69.354,69.449,69.42,69.294,69.269,69.472,69.389,69.327,69.268,69.246,69.345,69.271,69.25,69.115,69.129,69.143,69.203,69.138,69.136,69.134,69.088,69.029,68.971,69,69.056,69.164,69.203,69.187,69.263,69.195,69.141,69.114,69.1,69.111,69.134,69.157,69.119,69.129,69.174,69.103,69.08,69.056,69.056,69.132,69.163,69.118,69.074,69.126,69.208,69.309,69.235,69.212,69.25]}}];let y=(()=>{var e;class r{get records(){return this._records.value}get records$(){return this._records.asObservable()}addRecord(n){const i=[...this._records.value,n];this._records.next(i)}updateRecord(n,s){const i=this._records.value;if(n>=0&&n<i.length){const l=[...i];l[n]=s,this._records.next(l)}}removeRecord(n){const s=this._records.value;if(n>=0&&n<s.length){const i=s.filter((l,u)=>u!==n);this._records.next(i)}}constructor(){this._records=new ct.X(lt)}}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),r})();var mt=a(8763),k=a(6385),w=a(5195),$=a(2032),T=a(5683),dt=a(8525),ut=a(3680),pt=a(5940),gt=a(7754),S=a(170);let ht=(()=>{var e;class r{get parentFormGroup(){return this.controlContainer.control}get modelFormGroup(){return this.parentFormGroup.get(this.controlKey)}get borderColorControl(){return this.modelFormGroup.get(this.CHART_BODER_COLOR_CONTROL_NAME)}get backgroundColorControl(){return this.modelFormGroup.get(this.CHART_BACKGROUND_COLOR_CONTROL_NAME)}constructor(n){this.controlContainer=n,this.controlKey="",this.CHART_BODER_COLOR_CONTROL_NAME="borderColor",this.CHART_BACKGROUND_COLOR_CONTROL_NAME="backgroundColor"}ngOnInit(){this.initializeForm()}initializeForm(){this.parentFormGroup.addControl(this.controlKey,new c.cw({[this.CHART_BODER_COLOR_CONTROL_NAME]:new c.NI(new S.Il(241,196,15),c.kI.required),[this.CHART_BACKGROUND_COLOR_CONTROL_NAME]:new c.NI(new S.Il(241,196,15,.2),c.kI.required)}))}ngOnDestroy(){this.parentFormGroup.removeControl(this.controlKey)}}return(e=r).\u0275fac=function(n){return new(n||e)(t.Y36(c.gN))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ms-chart-colors-form-controls"]],inputs:{controlKey:"controlKey"},features:[t._Bn([],[{provide:c.gN,useFactory:()=>(0,t.f3M)(c.gN,{skipSelf:!0})}])],decls:17,vars:5,consts:[[3,"formGroupName"],[1,"form-field-container"],["matInput","","formControlName","borderColor",3,"ngxMatColorPicker"],["matSuffix","",3,"for"],["pickerBorderColor",""],["matInput","","formControlName","backgroundColor",3,"ngxMatColorPicker"],["pickerBackgroundColor",""]],template:function(n,s){if(1&n&&(t.ynx(0,0),t.TgZ(1,"div",1)(2,"mat-label"),t._uU(3,"Chart border color"),t.qZA(),t.TgZ(4,"mat-form-field"),t._UZ(5,"input",2)(6,"ngx-mat-color-toggle",3)(7,"ngx-mat-color-picker",null,4),t.qZA()(),t.TgZ(9,"div",1)(10,"mat-label"),t._uU(11,"Chart background color"),t.qZA(),t.TgZ(12,"mat-form-field"),t._UZ(13,"input",5)(14,"ngx-mat-color-toggle",3)(15,"ngx-mat-color-picker",null,6),t.qZA()(),t.BQk()),2&n){const i=t.MAs(8),l=t.MAs(16);t.Q6J("formGroupName",s.controlKey),t.xp6(5),t.Q6J("ngxMatColorPicker",i),t.xp6(1),t.Q6J("for",i),t.xp6(7),t.Q6J("ngxMatColorPicker",l),t.xp6(1),t.Q6J("for",l)}},dependencies:[$.Nt,T.KE,T.hX,T.R9,S.p2,S._f,S._C,c.Fj,c.JJ,c.JL,c.u,c.x0]}),r})();var R,ft=a(5844),Ct=a(7602);function Rt(e,r){if(1&e&&(t.TgZ(0,"mat-option",9),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.Q6J("value",o.name)("disabled",o.disabled),t.xp6(1),t.hij(" ",o.name," ")}}function vt(e,r){1&e&&(t.TgZ(0,"div")(1,"div",10),t._UZ(2,"mat-spinner",11),t.qZA()())}function _t(e,r){if(1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"readableDuration"),t.BQk()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,o.value))}}function At(e,r){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.value)}}function yt(e,r){1&e&&(t.TgZ(0,"div",27),t._UZ(1,"mat-divider"),t.qZA())}function Tt(e,r){if(1&e&&(t.TgZ(0,"div",19)(1,"div",20)(2,"div",21),t._uU(3),t.ALo(4,"parametersLabel"),t.qZA(),t.TgZ(5,"div",22),t.ynx(6,23),t.YNc(7,_t,3,3,"ng-container",24),t.YNc(8,At,2,1,"ng-container",25),t.BQk(),t.qZA()(),t.YNc(9,yt,2,0,"div",26),t.qZA()),2&e){const o=r.$implicit,n=r.last;t.xp6(3),t.hij("",t.lcZ(4,4,o.key),":"),t.xp6(3),t.Q6J("ngSwitch",o.key),t.xp6(1),t.Q6J("ngSwitchCase","duration_seconds"),t.xp6(2),t.Q6J("ngIf",!n)}}function St(e,r){if(1&e&&(t.TgZ(0,"mat-card",16)(1,"p",17),t._uU(2,"Statistics"),t.qZA(),t.YNc(3,Tt,10,6,"div",18),t.qZA()),2&e){const o=r.$implicit;t.xp6(3),t.Q6J("ngForOf",o)}}function Dt(e,r){1&e&&(t.TgZ(0,"div",27),t._UZ(1,"mat-divider"),t.qZA())}function xt(e,r){if(1&e&&(t.TgZ(0,"div",19)(1,"div",20)(2,"div",21),t._uU(3),t.ALo(4,"parametersLabel"),t.qZA(),t.TgZ(5,"div",22),t._uU(6),t.qZA()(),t.YNc(7,Dt,2,0,"div",26),t.qZA()),2&e){const o=r.$implicit,n=r.last;t.xp6(3),t.hij("",t.lcZ(4,3,o.key),":"),t.xp6(3),t.hij(" ",o.value," "),t.xp6(1),t.Q6J("ngIf",!n)}}function Zt(e,r){if(1&e&&(t.TgZ(0,"mat-card",16)(1,"div",17),t._uU(2,"Parameters"),t.qZA(),t.YNc(3,xt,8,5,"div",18),t.qZA()),2&e){const o=r.$implicit;t.xp6(3),t.Q6J("ngForOf",o)}}function Ft(e,r){if(1&e&&(t.TgZ(0,"mat-card",28)(1,"p",29),t._uU(2,"Last Accuracy Test Runs"),t.qZA(),t._UZ(3,"ms-chart-colors-form-controls",30)(4,"ms-line-chart",31),t.qZA()),2&e){const o=t.oxw(3);t.xp6(4),t.Q6J("data",o.lastRunAccuracyTestingChartData)("settings",o.testingAccuracyChartDisplaySettings)}}function wt(e,r){if(1&e&&(t.ynx(0),t._UZ(1,"mat-divider"),t.TgZ(2,"div",12)(3,"mat-label"),t._uU(4,"Set run name"),t.qZA(),t.TgZ(5,"mat-form-field",3),t._UZ(6,"input",13),t.qZA()(),t.YNc(7,St,4,1,"mat-card",14),t.ALo(8,"keyvalue"),t.YNc(9,Zt,4,1,"mat-card",14),t.ALo(10,"keyvalue"),t.YNc(11,Ft,5,2,"mat-card",15),t.BQk()),2&e){const o=t.oxw(2);t.xp6(7),t.Q6J("ngIf",t.lcZ(8,3,null==o.summarizedRecord?null:o.summarizedRecord.statistics)),t.xp6(2),t.Q6J("ngIf",t.lcZ(10,5,null==o.summarizedRecord?null:o.summarizedRecord.parameters)),t.xp6(2),t.Q6J("ngIf",!(null==o.summarizedRecord||!o.summarizedRecord.lastRunTestingAccuracyData))}}function Nt(e,r){if(1&e&&t.YNc(0,wt,12,7,"ng-container",6),2&e){const o=t.oxw(),n=t.MAs(13);t.Q6J("ngIf",!!o.summarizedRecord)("ngIfElse",n)}}function Ot(e,r){1&e&&t._UZ(0,"ms-empty-state",32)}let D=((R=class{get selectRunFormControl(){return this.form.get("selectRun")}get runNameFormControl(){return this.form.get("runName")}constructor(r,o,n,s,i,l){this.drawerRef=r,this.drawerConfig=o,this.fb=n,this.recordsFacadeService=s,this.recordsDataService=i,this.customAPILoadingService=l,this.form=new c.cw({}),this.files=[],this.isSummarizedRecordLoading$=this.customAPILoadingService.getLoadingObservableForKey(G.dh.RUN_RECORDS_SUMMARIZED_DATA),this.testingAccuracyChartDisplaySettings={yAxisMinimumValue:0,yAxisTickInterval:20,chartDataStructure:Y.nR.SINGLE_PHASE_X_AXIS,xAxisDataPointsCount:100,yAxisMaximumValue:100,datasetColorSettingsKey:B.g.YELLOW,isXAxisVisible:!1,areTooltipsEnabled:!0,xAxisLabelPrefix:"Step:",datasetLabelPrefix:"Test:"},this.lastRunAccuracyTestingChartData=[]}ngOnInit(){switch(this.initForm(),this.listenToChartColorChanges(),this.drawerConfig.actionType){case h.ADD:this.loadData(),this.configureAddTypeActions();break;case h.EDIT:case h.VIEW:this.configureEditOrViewTypeActions()}}listenToChartColorChanges(){this.form.valueChanges.pipe((0,x.U)(r=>r.chart??{}),(0,st.b)(300),(0,C.t)(this)).subscribe(r=>{if((0,A.Qr)(r))return;const{backgroundColor:o,borderColor:n}=r,{rgba:s}=o,{rgba:i}=n;console.log(s),console.log(i)})}configureEditOrViewTypeActions(){this.drawerConfig.actionType===h.VIEW?this.form.disable():this.drawerConfig.actionType===h.EDIT&&this.selectRunFormControl.disable();const{recordName:r,recordFilename:o,record:n}=this.drawerConfig.data;this.files=[o],this.selectRunFormControl.patchValue(o),this.runNameFormControl.patchValue(r),this.summarizedRecord=n,this.lastRunAccuracyTestingChartData=this.configureChartDataset(n),this.testingAccuracyChartDisplaySettings={...this.testingAccuracyChartDisplaySettings,hasCustomDatasetsLabels:!0,customDatasetsLabels:[r]}}configureAddTypeActions(){this.listenToSelectRunFormValueChanges(),this.listenToSummarizedRecordChanges()}listenToSelectRunFormValueChanges(){this.selectRunFormControl.valueChanges.pipe((0,C.t)(this),(0,it.h)(r=>!(0,A.Bm)(r))).subscribe(r=>{this.recordsFacadeService.dispatch(d.getRunRecordSummarizedData({algorithmType:J.Bd.PRUNING,filename:r}))})}listenToSummarizedRecordChanges(){this.recordsFacadeService.summarizedRecord$.pipe((0,C.t)(this),(0,P.T)(1)).subscribe(r=>{this.summarizedRecord=r,this.lastRunAccuracyTestingChartData=this.configureChartDataset(r);const o=this.summarizedRecord?.statistics.algorithm_key,n=this.summarizedRecord?.parameters.arch;!(0,A.Bm)(o)&&!(0,A.Bm)(n)&&this.runNameFormControl.setValue(`${o}_${n}`)})}configureChartDataset(r){return[{datasetIndex:0,values:r.lastRunTestingAccuracyData||[]}]}loadData(){this.recordsFacadeService.dispatch(d.getRunRecordsFilenames({algorithmType:J.Bd.PRUNING})),this.recordsFacadeService.filenames$.pipe((0,P.T)(1),(0,F.q)(1)).subscribe(r=>{const o=new Set(this.recordsDataService.records.map(n=>n.recordFilename));this.files=r.map(n=>({name:n,disabled:o.has(n)}))})}initForm(){this.form=this.fb.group({selectRun:[null,c.kI.required],runName:[null,c.kI.required]})}save(r){r===p.ni.SAVE&&this.drawerRef.close({result:{recordName:this.runNameFormControl.value,recordFilename:this.selectRunFormControl.value,record:this.summarizedRecord},status:r})}close(){this.drawerRef.close()}}).\u0275fac=function(r){return new(r||R)(t.Y36(p.Pf),t.Y36(p.ZI),t.Y36(c.qu),t.Y36(Q),t.Y36(y),t.Y36(G.Fv))},R.\u0275cmp=t.Xpm({type:R,selectors:[["ms-run-drawer-actions"]],decls:14,vars:7,consts:[[3,"isSaveDisabled","actionEvent"],[3,"formGroup"],[1,"form-field-container"],["appearance","outline"],["formControlName","selectRun","placeholder","Select a run record"],[3,"value","disabled",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["content",""],["noData",""],[3,"value","disabled"],[1,"spinner-wrapper","mt-4"],["diameter","80"],[1,"form-field-container","mt-4"],["matInput","","formControlName","runName","placeholder","Set run name"],["class","ms-card record-wrapper mb-4",4,"ngIf"],["class","ms-card record-wrapper",4,"ngIf"],[1,"ms-card","record-wrapper","mb-4"],[1,"paragraph-bold-p3-small-bold","mb-4"],["class","key-value-container single",4,"ngFor","ngForOf"],[1,"key-value-container","single"],[1,"key-value-pair","space-between"],[1,"key-value-key"],[1,"key-value-value"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","pt-2",4,"ngIf"],[1,"pt-2"],[1,"ms-card","record-wrapper"],[1,"paragraph-bold-p3-small-bold","pt-2","pb-2"],["controlKey","chart"],[3,"data","settings"],["title","Awaiting Run Record Selection","message","Select a run record from the dropdown to view details and statistics."]],template:function(r,o){if(1&r&&(t.TgZ(0,"ms-drawer",0),t.NdJ("actionEvent",function(s){return o.save(s)}),t.TgZ(1,"form",1)(2,"div",2)(3,"mat-label"),t._uU(4,"Select run record"),t.qZA(),t.TgZ(5,"mat-form-field",3)(6,"mat-select",4),t.YNc(7,Rt,2,3,"mat-option",5),t.qZA()()(),t.YNc(8,vt,3,0,"div",6),t.ALo(9,"async"),t.YNc(10,Nt,1,2,"ng-template",null,7,t.W1O),t.qZA()(),t.YNc(12,Ot,1,0,"ng-template",null,8,t.W1O)),2&r){const n=t.MAs(11);t.Q6J("isSaveDisabled",o.form.invalid),t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(6),t.Q6J("ngForOf",o.files),t.xp6(1),t.Q6J("ngIf",t.lcZ(9,5,o.isSummarizedRecordLoading$))("ngIfElse",n)}},dependencies:[g.sg,g.O5,g.RF,g.n9,g.ED,mt.k,k.d,w.a8,$.Nt,T.KE,T.hX,dt.gD,ut.ey,pt.Ou,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,Z.w,gt.u,ht,g.Ov,g.Nd,ft.n,Ct.N],styles:[".spinner-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),R);D=(0,E.gn)([(0,C.c)()],D);var K=a(2296),V=a(617);function bt(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"mat-card",2)(1,"div",3)(2,"div"),t._uU(3),t.qZA(),t.TgZ(4,"div",4)(5,"button",5),t.NdJ("click",function(){const i=t.CHM(o).$implicit,l=t.oxw();return t.KtG(l.viewRecord(i))}),t._UZ(6,"mat-icon",6),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){const s=t.CHM(o),i=s.index,l=s.$implicit,u=t.oxw();return t.KtG(u.editRecord(i,l))}),t._UZ(8,"mat-icon",7),t.qZA(),t.TgZ(9,"button",8),t.NdJ("click",function(){const i=t.CHM(o).index,l=t.oxw();return t.KtG(l.removeRecord(i))}),t.TgZ(10,"mat-icon",9),t._uU(11,"delete"),t.qZA()()()()()}if(2&e){const o=r.$implicit;t.xp6(3),t.Oqu(o.recordName)}}let It=(()=>{var e;class r{constructor(n,s){this.recordsDataService=n,this.drawerService=s}removeRecord(n){this.recordsDataService.removeRecord(n)}viewRecord(n){this.drawerService.open(D,{title:"View Run",showSaveButton:!1,showCloseButton:!0,closeButtonLabel:"Close",actionType:h.VIEW,data:n})}editRecord(n,s){this.drawerService.open(D,{title:"Edit Run",saveButtonLabel:"Update",showCloseButton:!0,closeButtonLabel:"Close",actionType:h.EDIT,data:s}).afterClosed().pipe((0,F.q)(1)).subscribe(l=>{const{status:u}=l;if(u===p.ni.DISMISS||u===p.ni.CLOSE)return;const{result:_}=l;(0,A.Qr)(_)||this.recordsDataService.updateRecord(n,_)})}}return(e=r).\u0275fac=function(n){return new(n||e)(t.Y36(y),t.Y36(p.zv))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ms-algorithm-comparison-list"]],decls:3,vars:3,consts:[[1,"items-wrapper"],["class","ms-card comparison-item",4,"ngFor","ngForOf"],[1,"ms-card","comparison-item"],[1,"item-wrapper"],[1,"record-summary-buttons-wrapper"],["mat-icon-button","","color","primary",3,"click"],["fontSet","ms","fontIcon","icon-Eye",1,"mat-primary"],["fontSet","ms","fontIcon","icon-PencilSimple",1,"mat-primary"],["mat-icon-button","","color","error",3,"click"],[1,"mat-error"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0),t.YNc(1,bt,12,1,"mat-card",1),t.ALo(2,"async"),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,s.recordsDataService.records$)))},dependencies:[g.sg,K.RK,V.Hw,w.a8,g.Ov],styles:[".items-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));grid-gap:20px;padding:20px 0}.items-wrapper[_ngcontent-%COMP%]   .ms-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0003}.items-wrapper[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.items-wrapper[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .record-summary-buttons-wrapper[_ngcontent-%COMP%]{display:flex}"]}),r})();var v;let N=((v=class{constructor(r){this.recordsDataService=r,this.testingAccuracyChartDisplaySettings={yAxisMinimumValue:0,yAxisTickInterval:20,chartDataStructure:Y.nR.SINGLE_PHASE_X_AXIS,xAxisDataPointsCount:100,yAxisMaximumValue:100,datasetColorSettingsKey:B.g.YELLOW,isXAxisVisible:!1,areTooltipsEnabled:!0,xAxisLabelPrefix:"Step:",hasCustomDatasetsLabels:!0},this.lastRunsAccuracyTestingChartData=[]}ngOnInit(){this.listenToRecordsChanges()}listenToRecordsChanges(){this.recordsDataService.records$.pipe((0,C.t)(this)).subscribe(r=>{this.lastRunsAccuracyTestingChartData=this.configureChartDatasets(r),this.testingAccuracyChartDisplaySettings={...this.testingAccuracyChartDisplaySettings,customDatasetsLabels:r.map(o=>o.recordName)}})}configureChartDatasets(r){const o=[];return r.forEach((n,s)=>{const{record:i}=n;o.push({datasetIndex:s,values:i.lastRunTestingAccuracyData||[]})}),o}}).\u0275fac=function(r){return new(r||v)(t.Y36(y))},v.\u0275cmp=t.Xpm({type:v,selectors:[["ms-algorithm-comparison-chart"]],decls:4,vars:2,consts:[[1,"ms-card","algorithm-comparisson-charts"],[1,"paragraph-bold-p3-small-bold","p-2"],[3,"data","settings"]],template:function(r,o){1&r&&(t.TgZ(0,"mat-card",0)(1,"p",1),t._uU(2,"Last Accuracy Test Runs"),t.qZA(),t._UZ(3,"ms-line-chart",2),t.qZA()),2&r&&(t.xp6(3),t.Q6J("data",o.lastRunsAccuracyTestingChartData)("settings",o.testingAccuracyChartDisplaySettings))},dependencies:[w.a8,Z.w]}),v);N=(0,E.gn)([(0,C.c)()],N);const Lt=[{path:"",component:(()=>{var e;class r{constructor(n,s){this.drawerService=n,this.recordsDataService=s}openAddRunDrawer(){this.drawerService.open(D,{title:"Add Run",saveButtonLabel:"Add",showCloseButton:!0,closeButtonLabel:"Close",actionType:h.ADD}).afterClosed().pipe((0,F.q)(1)).subscribe(s=>{const{status:i}=s;if(i===p.ni.DISMISS||i===p.ni.CLOSE)return;const{result:l}=s;this.recordsDataService.addRecord(l)})}}return(e=r).\u0275fac=function(n){return new(n||e)(t.Y36(p.zv),t.Y36(y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ms-algorithm-comparison"]],decls:11,vars:0,consts:[[1,"heading-primary-title","title"],["mat-stroked-button","","color","primary",3,"click"],["fontSet","ms","fontIcon","icon-Plus"],[1,"mt-4"],[1,"mb-4"]],template:function(n,s){1&n&&(t.TgZ(0,"p",0),t._uU(1,"Algorithm Comparison"),t.qZA(),t.TgZ(2,"button",1),t.NdJ("click",function(){return s.openAddRunDrawer()}),t._UZ(3,"mat-icon",2),t._uU(4," Add run\n"),t.qZA(),t.TgZ(5,"div",3),t._UZ(6,"mat-divider"),t.qZA(),t._UZ(7,"ms-algorithm-comparison-list"),t.TgZ(8,"div",4),t._UZ(9,"mat-divider"),t.qZA(),t._UZ(10,"ms-algorithm-comparison-chart"))},dependencies:[k.d,K.lW,V.Hw,It,N]}),r})()}];let Mt=(()=>{var e;class r{}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[z.Bz.forChild(Lt),z.Bz]}),r})(),Ut=(()=>{var e;class r{}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[p.zv,Q,y],imports:[g.ez,Mt,p.kZ,at.m,m.Aw.forFeature("runRecords",nt),f.sQ.forFeature([j]),Z.w]}),r})()}}]);