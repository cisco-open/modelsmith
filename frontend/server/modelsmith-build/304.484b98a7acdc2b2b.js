"use strict";(self.webpackChunkmodelsmith=self.webpackChunkmodelsmith||[]).push([[304],{3304:(Vt,N,s)=>{s.r(N),s.d(N,{AlgorithmComparisonModule:()=>$t});var p=s(6814),C=s(5154),m=s(4221);const d=(0,m.R7)({source:"[Run Records -> Records]",events:{"Get Run Records Filenames":(0,m.Ky)(),"Get Run Records Filenames Success":(0,m.Ky)(),"Get Run Records Filenames Failure":(0,m.Ky)(),"Get Run Record Summarized Data":(0,m.Ky)(),"Get Run Record Summarized Data Success":(0,m.Ky)(),"Get Run Record Summarized Data Failure":(0,m.Ky)()}});var L=s(4664),E=s(7398),M=s(6306),U=s(2096),tt=s(395),z=s(4992);class et extends z.eW{constructor(r){super(`run-records-filenames/${r}`,void 0,void 0,!1)}}class rt extends z.eW{constructor(r,o){super(`run-records-summarized-data/${r}/${o}`,void 0,void 0,!1)}}var t=s(5879);let ot=(()=>{var e;class r{constructor(n,a){this.apiClient=n,this.actions$=a,this.getRunRecordsFilenames$=(0,C.GW)(()=>this.actions$.pipe((0,C.l4)(d.getRunRecordsFilenames),(0,L.w)(i=>{const{algorithmType:c}=i;return this.apiClient.serviceCall(new et(c)).pipe((0,E.U)(u=>d.getRunRecordsFilenamesSuccess({files:u})),(0,M.K)(u=>(0,U.of)(d.getRunRecordsFilenamesFailure({error:u}))))}))),this.getRunRecordSummarizedData$=(0,C.GW)(()=>this.actions$.pipe((0,C.l4)(d.getRunRecordSummarizedData),(0,L.w)(i=>{const{algorithmType:c,filename:u}=i;return this.apiClient.serviceCall(new rt(c,u)).pipe((0,E.U)(A=>d.getRunRecordSummarizedDataSuccess({record:A})),(0,M.K)(A=>(0,U.of)(d.getRunRecordSummarizedDataFailure({error:A}))))})))}}return(e=r).\u0275fac=function(n){return new(n||e)(t.LFG(tt.I),t.LFG(C.eX))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),r})();const at=(0,m.Lq)({filenames:[],summarizedRecord:{},error:""},(0,m.on)(d.getRunRecordsFilenamesSuccess,(e,{files:r})=>({...e,filenames:r,error:null})),(0,m.on)(d.getRunRecordsFilenamesFailure,(e,{error:r})=>({...e,error:r})),(0,m.on)(d.getRunRecordSummarizedData,e=>({...e,loading:!0,error:null})),(0,m.on)(d.getRunRecordSummarizedDataSuccess,(e,{record:r})=>({...e,summarizedRecord:r,error:null})),(0,m.on)(d.getRunRecordSummarizedDataFailure,(e,{error:r})=>({...e,error:r}))),st=(0,m.ZF)("runRecords"),k=(0,m.P1)(st,e=>e.records),it=(0,m.P1)(k,e=>e.filenames),ct=(0,m.P1)(k,e=>e.summarizedRecord),lt={records:at};var mt=s(4245),g=s(9190),x=s(5094),B=s(9624),J=s(2655),b=s(8180),h=function(e){return e.ADD="add",e.EDIT="edit",e.VIEW="view",e}(h||{}),G=s(7582),l=s(6223),v=s(8791),dt=s(3620),ut=s(2181),Y=s(836),P=s(155),y=s(4378),Q=s(7820),pt=s(874),$=s(301),V=s(6455),f=s(170);const H=e=>/^#([0-9A-F]{3,4}){1,2}$/i.test(e)?gt(e):/^rgba?\(\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*\d*\.?\d+)?\)$/i.test(e)?Z(e):(console.warn("Unsupported color format:",e),new f.Il(0,0,0)),Z=e=>{const r=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.?\d*))?\)$/);if(r){const o=parseInt(r[1],10),n=parseInt(r[2],10),a=parseInt(r[3],10),i=parseFloat(r[4]??"1");return new f.Il(o,n,a,i)}return console.warn("Failed to parse color:",e),new f.Il(0,0,0)},gt=e=>{const r=e.replace("#","").toUpperCase();let o,n,a,i=1;if([3,4].includes(r.length))o=parseInt(r.charAt(0).repeat(2),16),n=parseInt(r.charAt(1).repeat(2),16),a=parseInt(r.charAt(2).repeat(2),16),4===r.length&&(i=parseInt(r.charAt(3).repeat(2),16)/255);else{if(![6,8].includes(r.length))return console.warn("Invalid hex color format:",e),new f.Il(0,0,0);o=parseInt(r.substring(0,2),16),n=parseInt(r.substring(2,4),16),a=parseInt(r.substring(4,6),16),8===r.length&&(i=parseInt(r.substring(6,8),16)/255)}return new f.Il(o,n,a,i)};let K=(()=>{var e;class r{constructor(n){this.store=n,this.filenames$=this.store.select(it),this.summarizedRecord$=this.store.select(ct)}dispatch(n){this.store.dispatch(n)}}return(e=r).\u0275fac=function(n){return new(n||e)(t.LFG(m.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),r})();var ht=s(5619);let T=(()=>{var e;class r{get records(){return this._records.value}get records$(){return this._records.asObservable()}addRecord(n){const i=[...this._records.value,n];this._records.next(i)}updateRecord(n,a){const i=this._records.value;if(n>=0&&n<i.length){const c=[...i];c[n]=a,this._records.next(c)}}removeRecord(n){const a=this._records.value;if(n>=0&&n<a.length){const i=a.filter((c,u)=>u!==n);this._records.next(i)}}constructor(){this._records=new ht.X([])}}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),r})();var ft=s(8763),W=s(6385),w=s(5195),X=s(2032),S=s(5683),Ct=s(8525),vt=s(3680),Rt=s(5940),j=s(7754);let _t=(()=>{var e;class r{get parentFormGroup(){return this.controlContainer.control}get chartFormGroup(){return this.parentFormGroup.get(this.controlKey)}get borderColorControl(){return this.chartFormGroup.get(this.CHART_BODER_COLOR_CONTROL_NAME)}get backgroundColorControl(){return this.chartFormGroup.get(this.CHART_BACKGROUND_COLOR_CONTROL_NAME)}constructor(n){this.controlContainer=n,this.controlKey="",this.CHART_BODER_COLOR_CONTROL_NAME="borderColor",this.CHART_BACKGROUND_COLOR_CONTROL_NAME="backgroundColor"}ngOnInit(){}}return(e=r).\u0275fac=function(n){return new(n||e)(t.Y36(l.gN))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ms-chart-colors-form-controls"]],inputs:{controlKey:"controlKey"},features:[t._Bn([],[{provide:l.gN,useFactory:()=>(0,t.f3M)(l.gN,{skipSelf:!0})}])],decls:17,vars:7,consts:[[3,"formGroupName"],[1,"form-field-container"],["matInput","",3,"ngxMatColorPicker","formControlName"],["matSuffix","",3,"for"],["pickerBorderColor",""],["pickerBackgroundColor",""]],template:function(n,a){if(1&n&&(t.ynx(0,0),t.TgZ(1,"div",1)(2,"mat-label"),t._uU(3,"Chart border color"),t.qZA(),t.TgZ(4,"mat-form-field"),t._UZ(5,"input",2)(6,"ngx-mat-color-toggle",3)(7,"ngx-mat-color-picker",null,4),t.qZA()(),t.TgZ(9,"div",1)(10,"mat-label"),t._uU(11,"Chart background color"),t.qZA(),t.TgZ(12,"mat-form-field"),t._UZ(13,"input",2)(14,"ngx-mat-color-toggle",3)(15,"ngx-mat-color-picker",null,5),t.qZA()(),t.BQk()),2&n){const i=t.MAs(8),c=t.MAs(16);t.Q6J("formGroupName",a.controlKey),t.xp6(5),t.Q6J("ngxMatColorPicker",i)("formControlName",a.CHART_BODER_COLOR_CONTROL_NAME),t.xp6(1),t.Q6J("for",i),t.xp6(7),t.Q6J("ngxMatColorPicker",c)("formControlName",a.CHART_BACKGROUND_COLOR_CONTROL_NAME),t.xp6(1),t.Q6J("for",c)}},dependencies:[X.Nt,S.KE,S.hX,S.R9,f.p2,f._f,f._C,l.Fj,l.JJ,l.JL,l.u,l.x0]}),r})();var R,At=s(5844),yt=s(7602);function Tt(e,r){if(1&e&&(t.TgZ(0,"mat-option",9),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.Q6J("value",o.name)("disabled",o.disabled),t.xp6(1),t.hij(" ",o.name," ")}}function St(e,r){1&e&&(t.TgZ(0,"div")(1,"div",10),t._UZ(2,"mat-spinner",11),t.qZA()())}function Dt(e,r){if(1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"readableDuration"),t.BQk()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,o.value))}}function xt(e,r){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.value)}}function bt(e,r){1&e&&(t.TgZ(0,"div",27),t._UZ(1,"mat-divider"),t.qZA())}function Zt(e,r){if(1&e&&(t.TgZ(0,"div",19)(1,"div",20)(2,"div",21),t._uU(3),t.ALo(4,"parametersLabel"),t.qZA(),t.TgZ(5,"div",22),t.ynx(6,23),t.YNc(7,Dt,3,3,"ng-container",24),t.YNc(8,xt,2,1,"ng-container",25),t.BQk(),t.qZA()(),t.YNc(9,bt,2,0,"div",26),t.qZA()),2&e){const o=r.$implicit,n=r.last;t.xp6(3),t.hij("",t.lcZ(4,4,o.key),":"),t.xp6(3),t.Q6J("ngSwitch",o.key),t.xp6(1),t.Q6J("ngSwitchCase","duration_seconds"),t.xp6(2),t.Q6J("ngIf",!n)}}function wt(e,r){if(1&e&&(t.TgZ(0,"mat-card",16)(1,"p",17),t._uU(2,"Statistics"),t.qZA(),t.YNc(3,Zt,10,6,"div",18),t.qZA()),2&e){const o=r.$implicit;t.xp6(3),t.Q6J("ngForOf",o)}}function Ft(e,r){1&e&&(t.TgZ(0,"div",27),t._UZ(1,"mat-divider"),t.qZA())}function It(e,r){if(1&e&&(t.TgZ(0,"div",19)(1,"div",20)(2,"div",21),t._uU(3),t.ALo(4,"parametersLabel"),t.qZA(),t.TgZ(5,"div",22),t._uU(6),t.qZA()(),t.YNc(7,Ft,2,0,"div",26),t.qZA()),2&e){const o=r.$implicit,n=r.last;t.xp6(3),t.hij("",t.lcZ(4,3,o.key),":"),t.xp6(3),t.hij(" ",o.value," "),t.xp6(1),t.Q6J("ngIf",!n)}}function Ot(e,r){if(1&e&&(t.TgZ(0,"mat-card",16)(1,"div",17),t._uU(2,"Parameters"),t.qZA(),t.YNc(3,It,8,5,"div",18),t.qZA()),2&e){const o=r.$implicit;t.xp6(3),t.Q6J("ngForOf",o)}}function Nt(e,r){if(1&e&&(t.TgZ(0,"mat-card",28)(1,"p",29),t._uU(2,"Last Accuracy Test Runs"),t.qZA(),t._UZ(3,"ms-chart-colors-form-controls",30)(4,"ms-line-chart",31),t.qZA()),2&e){const o=t.oxw(3);t.xp6(4),t.Q6J("data",o.lastRunAccuracyTestingChartData)("settings",o.testingAccuracyChartDisplaySettings)}}function Lt(e,r){if(1&e&&(t.ynx(0),t._UZ(1,"mat-divider"),t.TgZ(2,"div",12)(3,"mat-label"),t._uU(4,"Set run name"),t.qZA(),t.TgZ(5,"mat-form-field",3),t._UZ(6,"input",13),t.qZA()(),t.YNc(7,wt,4,1,"mat-card",14),t.ALo(8,"keyvalue"),t.YNc(9,Ot,4,1,"mat-card",14),t.ALo(10,"keyvalue"),t.YNc(11,Nt,5,2,"mat-card",15),t.BQk()),2&e){const o=t.oxw(2);t.xp6(7),t.Q6J("ngIf",t.lcZ(8,3,null==o.summarizedRecord?null:o.summarizedRecord.statistics)),t.xp6(2),t.Q6J("ngIf",t.lcZ(10,5,null==o.summarizedRecord?null:o.summarizedRecord.parameters)),t.xp6(2),t.Q6J("ngIf",!(null==o.summarizedRecord||!o.summarizedRecord.lastRunTestingAccuracyData))}}function Et(e,r){if(1&e&&t.YNc(0,Lt,12,7,"ng-container",6),2&e){const o=t.oxw(),n=t.MAs(13);t.Q6J("ngIf",!!o.summarizedRecord)("ngIfElse",n)}}function Mt(e,r){1&e&&t._UZ(0,"ms-empty-state",32)}let D=((R=class{get chartFormGroup(){return this.form.get("chart")}get selectRunFormControl(){return this.form.get("selectRun")}get runNameFormControl(){return this.form.get("runName")}constructor(r,o,n,a,i,c){this.drawerRef=r,this.drawerConfig=o,this.fb=n,this.recordsFacadeService=a,this.recordsDataService=i,this.customAPILoadingService=c,this.form=new l.cw({}),this.files=[],this.isSummarizedRecordLoading$=this.customAPILoadingService.getLoadingObservableForKey(P.dh.RUN_RECORDS_SUMMARIZED_DATA),this.testingAccuracyChartDisplaySettings={yAxisMinimumValue:0,yAxisTickInterval:20,chartDataStructure:V.nR.SINGLE_PHASE_X_AXIS,xAxisDataPointsCount:100,yAxisMaximumValue:100,isXAxisVisible:!1,areTooltipsEnabled:!0,xAxisLabelPrefix:"Step:",datasetLabelPrefix:"Test:",isChartWithCustomColorSettings:!0,customChartColors:{datasetColors:[{backgroundColor:"rgba(241, 196, 15, 0.2)",borderColor:"#f1c40f"}]}},this.lastRunAccuracyTestingChartData=[]}ngOnInit(){switch(this.initForm(),this.listenToChartColorChanges(),this.drawerConfig.actionType){case h.ADD:this.loadData(),this.configureAddTypeActions();break;case h.EDIT:case h.VIEW:this.configureEditOrViewTypeActions()}}listenToChartColorChanges(){this.chartFormGroup.valueChanges.pipe((0,dt.b)(300),(0,v.t)(this)).subscribe(r=>{if((0,y.Qr)(r))return;const{backgroundColor:o,borderColor:n}=r,{rgba:a}=o,{rgba:i}=n;this.testingAccuracyChartDisplaySettings={...this.testingAccuracyChartDisplaySettings,customChartColors:{datasetColors:[{backgroundColor:a,borderColor:i}]}},this.lastRunAccuracyTestingChartData=[...this.lastRunAccuracyTestingChartData]})}configureEditOrViewTypeActions(){const{recordName:r,recordFilename:o,record:n,chartColors:a}=this.drawerConfig.data;this.drawerConfig.actionType===h.VIEW?this.form.disable():this.drawerConfig.actionType===h.EDIT&&this.selectRunFormControl.disable(),this.files=[{name:o,disabled:!0}],this.form.patchValue({selectRun:o,runName:r,chart:{borderColor:Z(a.borderColor),backgroundColor:Z(a.backgroundColor)}}),this.summarizedRecord=n,this.lastRunAccuracyTestingChartData=this.configureChartDataset(n),this.testingAccuracyChartDisplaySettings={...this.testingAccuracyChartDisplaySettings,hasCustomDatasetsLabels:!0,customDatasetsLabels:[r],customChartColors:{datasetColors:[{backgroundColor:a.backgroundColor||"rgba(241, 196, 15, 0.2)",borderColor:a.borderColor||"#f1c40f"}]}}}configureAddTypeActions(){this.listenToSelectRunFormValueChanges(),this.listenToSummarizedRecordChanges()}listenToSelectRunFormValueChanges(){this.selectRunFormControl.valueChanges.pipe((0,v.t)(this),(0,ut.h)(r=>!(0,y.Bm)(r))).subscribe(r=>{this.runNameFormControl.reset(),this.recordsFacadeService.dispatch(d.getRunRecordSummarizedData({algorithmType:Q.Bd.PRUNING,filename:r}))})}listenToSummarizedRecordChanges(){this.recordsFacadeService.summarizedRecord$.pipe((0,v.t)(this),(0,Y.T)(1)).subscribe(r=>{this.summarizedRecord=r,this.lastRunAccuracyTestingChartData=this.configureChartDataset(r);const o=this.summarizedRecord?.statistics.algorithm_key,n=this.summarizedRecord?.parameters.arch;!(0,y.Bm)(o)&&!(0,y.Bm)(n)&&this.runNameFormControl.setValue(`${o}_${n}`)})}configureChartDataset(r){return[{datasetIndex:0,values:r.lastRunTestingAccuracyData||[]}]}loadData(){this.recordsFacadeService.dispatch(d.getRunRecordsFilenames({algorithmType:Q.Bd.PRUNING})),this.recordsFacadeService.filenames$.pipe((0,Y.T)(1),(0,b.q)(1)).subscribe(r=>{const o=new Set(this.recordsDataService.records.map(n=>n.recordFilename));this.files=r.map(n=>({name:n,disabled:o.has(n)}))})}initForm(){const r=this.getDefaultChartColors();this.form=this.fb.group({selectRun:[null,l.kI.required],runName:[null,l.kI.required],chart:this.fb.group({borderColor:[r.borderColor,l.kI.required],backgroundColor:[r.backgroundColor,l.kI.required]})})}getDefaultChartColors(){const r=Math.max(this.recordsDataService.records.length,0),o=pt.g[$.g.YELLOW].datasetColors[r];return{borderColor:H(o.borderColor),backgroundColor:H(o.backgroundColor)}}save(r){if(r!==g.ni.SAVE)return;const{backgroundColor:o,borderColor:n}=this.form.get("chart")?.getRawValue(),{rgba:a}=o,{rgba:i}=n;this.drawerRef.close({result:{recordName:this.runNameFormControl.value,recordFilename:this.selectRunFormControl.value,record:this.summarizedRecord,chartColors:{backgroundColor:a,borderColor:i}},status:r})}close(){this.drawerRef.close()}}).\u0275fac=function(r){return new(r||R)(t.Y36(g.Pf),t.Y36(g.ZI),t.Y36(l.qu),t.Y36(K),t.Y36(T),t.Y36(P.Fv))},R.\u0275cmp=t.Xpm({type:R,selectors:[["ms-run-drawer-actions"]],decls:14,vars:7,consts:[[3,"isSaveDisabled","actionEvent"],[3,"formGroup"],[1,"form-field-container"],["appearance","outline"],["formControlName","selectRun","placeholder","Select a run record"],[3,"value","disabled",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["content",""],["noData",""],[3,"value","disabled"],[1,"spinner-wrapper","mt-4"],["diameter","80"],[1,"form-field-container","mt-4"],["matInput","","formControlName","runName","placeholder","Set run name"],["class","ms-card record-wrapper mb-4",4,"ngIf"],["class","ms-card record-wrapper",4,"ngIf"],[1,"ms-card","record-wrapper","mb-4"],[1,"paragraph-bold-p3-small-bold","mb-4"],["class","key-value-container single",4,"ngFor","ngForOf"],[1,"key-value-container","single"],[1,"key-value-pair","space-between"],[1,"key-value-key"],[1,"key-value-value"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","pt-2",4,"ngIf"],[1,"pt-2"],[1,"ms-card","record-wrapper"],[1,"paragraph-bold-p3-small-bold","pt-2","pb-2"],["controlKey","chart"],[3,"data","settings"],["title","Awaiting Run Record Selection","message","Select a run record from the dropdown to view details and statistics."]],template:function(r,o){if(1&r&&(t.TgZ(0,"ms-drawer",0),t.NdJ("actionEvent",function(a){return o.save(a)}),t.TgZ(1,"form",1)(2,"div",2)(3,"mat-label"),t._uU(4,"Select run record"),t.qZA(),t.TgZ(5,"mat-form-field",3)(6,"mat-select",4),t.YNc(7,Tt,2,3,"mat-option",5),t.qZA()()(),t.YNc(8,St,3,0,"div",6),t.ALo(9,"async"),t.YNc(10,Et,1,2,"ng-template",null,7,t.W1O),t.qZA()(),t.YNc(12,Mt,1,0,"ng-template",null,8,t.W1O)),2&r){const n=t.MAs(11);t.Q6J("isSaveDisabled",o.form.invalid),t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(6),t.Q6J("ngForOf",o.files),t.xp6(1),t.Q6J("ngIf",t.lcZ(9,5,o.isSummarizedRecordLoading$))("ngIfElse",n)}},dependencies:[p.sg,p.O5,p.RF,p.n9,p.ED,ft.k,W.d,w.a8,X.Nt,S.KE,S.hX,Ct.gD,vt.ey,Rt.Ou,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,x.w,j.u,_t,p.Ov,p.Nd,At.n,yt.N],styles:[".spinner-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),R);D=(0,G.gn)([(0,v.c)()],D);var q=s(2296),F=s(617),I=s(2596);let Ut=(()=>{var e;class r{get lineClamp(){return this.maxEllipsisLines}onMouseEnter(){this.isTextOverflowing?this.tooltip.show():this.tooltip.hide()}onMouseLeave(){this.tooltip.hide()}constructor(n,a){this.tooltip=n,this.elementRef=a,this.maxEllipsisLines=2,this.display="-webkit-box",this.overflow="hidden",this.boxOrient="vertical",this.textOverflow="ellipsis",this.whiteSpace="normal",this.wordBreak="break-all"}ngAfterViewInit(){setTimeout(()=>{this.tooltip.message=this.elementRef.nativeElement.textContent.trim(),this.tooltip.position="above"},0)}get isTextOverflowing(){const n=parseInt(window.getComputedStyle(this.elementRef.nativeElement).lineHeight);return this.elementRef.nativeElement.scrollHeight>this.maxEllipsisLines*n}}return(e=r).\u0275fac=function(n){return new(n||e)(t.Y36(I.gM),t.Y36(t.SBq))},e.\u0275dir=t.lG2({type:e,selectors:[["","msUseEllipsis",""]],hostVars:14,hostBindings:function(n,a){1&n&&t.NdJ("mouseenter",function(){return a.onMouseEnter()})("mouseleave",function(){return a.onMouseLeave()}),2&n&&t.Udp("display",a.display)("overflow",a.overflow)("-webkit-box-orient",a.boxOrient)("-webkit-line-clamp",a.lineClamp)("text-overflow",a.textOverflow)("white-space",a.whiteSpace)("word-break",a.wordBreak)},inputs:{maxEllipsisLines:"maxEllipsisLines"},standalone:!0,features:[t._Bn([I.gM])]}),r})();function zt(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"mat-card",4)(1,"div",5)(2,"div",6),t._uU(3),t.qZA(),t.TgZ(4,"div",7)(5,"button",8),t.NdJ("click",function(){const i=t.CHM(o).$implicit,c=t.oxw(3);return t.KtG(c.viewRecord(i))}),t._UZ(6,"mat-icon",9),t.qZA(),t.TgZ(7,"button",8),t.NdJ("click",function(){const a=t.CHM(o),i=a.index,c=a.$implicit,u=t.oxw(3);return t.KtG(u.editRecord(i,c))}),t._UZ(8,"mat-icon",10),t.qZA(),t.TgZ(9,"button",11),t.NdJ("click",function(){const i=t.CHM(o).index,c=t.oxw(3);return t.KtG(c.removeRecord(i))}),t.TgZ(10,"mat-icon",12),t._uU(11,"delete"),t.qZA()()()()()}if(2&e){const o=r.$implicit;t.xp6(3),t.Oqu(o.recordName)}}function kt(e,r){if(1&e&&(t.ynx(0),t.YNc(1,zt,12,1,"mat-card",3),t.BQk()),2&e){const o=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",o)}}function Bt(e,r){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,kt,2,1,"ng-container",2),t.qZA()),2&e){const o=r.ngIf;t.oxw();const n=t.MAs(3);t.ekj("items-wrapper",o&&o.length>0)("no-data-wrapper",!o||0===o.length),t.xp6(1),t.Q6J("ngIf",o.length>0)("ngIfElse",n)}}function Jt(e,r){1&e&&(t.TgZ(0,"div",13),t._UZ(1,"ms-empty-state",14),t.qZA())}let Gt=(()=>{var e;class r{constructor(n,a){this.recordsDataService=n,this.drawerService=a}removeRecord(n){this.recordsDataService.removeRecord(n)}viewRecord(n){this.drawerService.open(D,{title:"View Run",showSaveButton:!1,showCloseButton:!0,closeButtonLabel:"Close",actionType:h.VIEW,data:n})}editRecord(n,a){this.drawerService.open(D,{title:"Edit Run",saveButtonLabel:"Update",showCloseButton:!0,closeButtonLabel:"Close",actionType:h.EDIT,data:a}).afterClosed().pipe((0,b.q)(1)).subscribe(c=>{const{status:u}=c;if(u===g.ni.DISMISS||u===g.ni.CLOSE)return;const{result:A}=c;(0,y.Qr)(A)||this.recordsDataService.updateRecord(n,A)})}}return(e=r).\u0275fac=function(n){return new(n||e)(t.Y36(T),t.Y36(g.zv))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ms-algorithm-comparison-list"]],decls:4,vars:4,consts:[[3,"items-wrapper","no-data-wrapper",4,"ngIf","ngIfElse"],["noData",""],[4,"ngIf","ngIfElse"],["class","ms-card comparison-item",4,"ngFor","ngForOf"],[1,"ms-card","comparison-item"],[1,"item-wrapper"],["msUseEllipsis",""],[1,"record-summary-buttons-wrapper"],["mat-icon-button","","color","primary",3,"click"],["fontSet","ms","fontIcon","icon-Eye",1,"mat-primary"],["fontSet","ms","fontIcon","icon-PencilSimple",1,"mat-primary"],["mat-icon-button","","color","error",3,"click"],[1,"mat-error"],[1,"no-data-wrapper"],["title","No data selected"]],template:function(n,a){if(1&n&&(t.YNc(0,Bt,2,6,"div",0),t.ALo(1,"async"),t.YNc(2,Jt,2,0,"ng-template",null,1,t.W1O)),2&n){const i=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,a.recordsDataService.records$))("ngIfElse",i)}},dependencies:[p.sg,p.O5,q.RK,F.Hw,w.a8,j.u,Ut,p.Ov],styles:[".items-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));grid-gap:20px;padding:20px 0}.items-wrapper[_ngcontent-%COMP%]   .ms-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0003}.items-wrapper[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.items-wrapper[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .record-summary-buttons-wrapper[_ngcontent-%COMP%]{display:flex}.no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),r})();var _,Yt=s(2599);let O=((_=class{constructor(r,o){this.recordsDataService=r,this.chartToolsGlobalSignalsService=o,this.testingAccuracyChartDisplaySettings={yAxisMinimumValue:0,yAxisTickInterval:20,chartDataStructure:V.nR.SINGLE_PHASE_X_AXIS,xAxisDataPointsCount:100,yAxisMaximumValue:100,datasetColorSettingsKey:$.g.YELLOW,isXAxisVisible:!1,xAxisLabelPrefix:"Step:",hasCustomDatasetsLabels:!0},this.lastRunsAccuracyTestingChartData=[]}ngOnInit(){this.listenToRecordsChanges()}listenToRecordsChanges(){this.recordsDataService.records$.pipe((0,v.t)(this)).subscribe(r=>{this.lastRunsAccuracyTestingChartData=this.configureChartDatasets(r),this.testingAccuracyChartDisplaySettings={...this.testingAccuracyChartDisplaySettings,customDatasetsLabels:r.map(o=>o.recordName),isChartWithCustomColorSettings:!0,customChartColors:{datasetColors:r.map(o=>o.chartColors)}}})}configureChartDatasets(r){const o=[];return r.forEach((n,a)=>{const{record:i}=n;o.push({datasetIndex:a,values:i.lastRunTestingAccuracyData||[]})}),o}toggleTooltip(r){this.chartToolsGlobalSignalsService.toggleTooltips=r.checked}toggleZoom(r){this.chartToolsGlobalSignalsService.toggleZoom=r.checked}}).\u0275fac=function(r){return new(r||_)(t.Y36(T),t.Y36(B.d))},_.\u0275cmp=t.Xpm({type:_,selectors:[["ms-algorithm-comparison-chart"]],decls:13,vars:2,consts:[[1,"ms-card","algorithm-comparisson-charts"],[1,"paragraph-bold-p3-small-bold","pt-2","pb-2"],[1,"mt-2","flex"],["color","primary",3,"change"],[1,"flex"],["color","primary",1,"ml-2",3,"change"],[1,"ml-1"],["fontSet","ms","fontIcon","icon-Info","matTooltip","Use mouse wheel or touchpad pinch to zoom in/out. Drag to select an area for specific zoom, or use touchpad gestures to navigate."],[3,"data","settings"]],template:function(r,o){1&r&&(t.TgZ(0,"mat-card",0)(1,"p",1),t._uU(2,"Last Accuracy Test Runs"),t.qZA(),t.TgZ(3,"div",2)(4,"div")(5,"mat-slide-toggle",3),t.NdJ("change",function(a){return o.toggleTooltip(a)}),t._uU(6," Enable tooltips "),t.qZA()(),t.TgZ(7,"div",4)(8,"mat-slide-toggle",5),t.NdJ("change",function(a){return o.toggleZoom(a)}),t._uU(9," Enable zoom "),t.qZA(),t.TgZ(10,"div",6),t._UZ(11,"mat-icon",7),t.qZA()()(),t._UZ(12,"ms-line-chart",8),t.qZA()),2&r&&(t.xp6(12),t.Q6J("data",o.lastRunsAccuracyTestingChartData)("settings",o.testingAccuracyChartDisplaySettings))},dependencies:[F.Hw,w.a8,I.gM,Yt.Rr,x.w]}),_);O=(0,G.gn)([(0,v.c)()],O);const Pt=[{path:"",component:(()=>{var e;class r{constructor(n,a){this.drawerService=n,this.recordsDataService=a}openAddRunDrawer(){this.drawerService.open(D,{title:"Add Run",saveButtonLabel:"Add",showCloseButton:!0,closeButtonLabel:"Close",actionType:h.ADD}).afterClosed().pipe((0,b.q)(1)).subscribe(a=>{const{status:i}=a;if(i===g.ni.DISMISS||i===g.ni.CLOSE)return;const{result:c}=a;this.recordsDataService.addRecord(c)})}}return(e=r).\u0275fac=function(n){return new(n||e)(t.Y36(g.zv),t.Y36(T))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ms-algorithm-comparison"]],decls:11,vars:0,consts:[[1,"heading-primary-title","title"],["mat-stroked-button","","color","primary",3,"click"],["fontSet","ms","fontIcon","icon-Plus"],[1,"mt-4"],[1,"mb-4"]],template:function(n,a){1&n&&(t.TgZ(0,"p",0),t._uU(1,"Algorithm Comparison"),t.qZA(),t.TgZ(2,"button",1),t.NdJ("click",function(){return a.openAddRunDrawer()}),t._UZ(3,"mat-icon",2),t._uU(4," Add run\n"),t.qZA(),t.TgZ(5,"div",3),t._UZ(6,"mat-divider"),t.qZA(),t._UZ(7,"ms-algorithm-comparison-list"),t.TgZ(8,"div",4),t._UZ(9,"mat-divider"),t.qZA(),t._UZ(10,"ms-algorithm-comparison-chart"))},dependencies:[W.d,q.lW,F.Hw,Gt,O]}),r})()}];let Qt=(()=>{var e;class r{}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[J.Bz.forChild(Pt),J.Bz]}),r})(),$t=(()=>{var e;class r{}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[g.zv,K,T,B.d],imports:[p.ez,Qt,g.kZ,mt.m,m.Aw.forFeature("runRecords",lt),C.sQ.forFeature([ot]),x.w]}),r})()}}]);