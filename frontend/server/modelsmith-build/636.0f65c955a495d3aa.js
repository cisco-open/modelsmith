"use strict";(self.webpackChunkmodelsmith=self.webpackChunkmodelsmith||[]).push([[636],{4636:(G,y,n)=>{n.r(y),n.d(y,{ModelTrainingModule:()=>lt});var g,o=n(6814),A=n(4245),m=n(3328),v=n(1668),T=n(1501),d=n(2655),p=n(7582),s=n(6223),c=n(8791),O=n(3620),C=n(7398),P=n(3997),N=n(2181),Q=n(3607),x=n(39),f=n(4378),r=n(7820),S=n(127),t=n(5879),M=n(9532),U=n(3705),B=n(2296),E=n(617),R=n(836),J=n(8180),_=n(5195),L=n(5683),b=n(8525),Y=n(3680);function K(i,e){if(1&i&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.key),t.xp6(1),t.hij(" ",a.value," ")}}let F=((g=class{get parentFormGroup(){return this.controlContainer.control}get algorithmTypeFormGroup(){return this.parentFormGroup.get(this.controlKey)}get algorithmTypeFormControl(){return this.algorithmTypeFormGroup.get(this.ALGORITHM_TYPE_CONTROL_NAME)}constructor(e,a){this.controlContainer=e,this.scriptFacadeService=a,this.controlKey="",this.algorithmTypesOptions=r.VN.filter(l=>l.key!==r.Bd.TRAIN),this.ALGORITHM_TYPE_CONTROL_NAME="algorithmType"}ngOnInit(){this.initForm(),this.loadInitialData(),this.listenToScriptStateChanges()}loadInitialData(){this.scriptFacadeService.scriptDetails$.pipe((0,R.T)(1),(0,J.q)(1),(0,N.h)(e=>!(0,f.Bm)(e?.algKey)),(0,C.U)(e=>e.algKey)).subscribe(e=>{switch(e){case r.tp.MACHINE_UNLEARNING_TRAIN:this.algorithmTypeFormControl.patchValue(r.Bd.MACHINE_UNLEARNING);break;case r.tp.PRUNING_TRAIN:this.algorithmTypeFormControl.patchValue(r.Bd.PRUNING);break;case r.tp.QUANTIZATION_TRAIN:this.algorithmTypeFormControl.patchValue(r.Bd.QUANTIZATION);break;default:{const a=(0,r.t6)(e);if((0,f.Bm)(a))break;this.algorithmTypeFormControl.patchValue(a)}}}),this.scriptFacadeService.dispatch(x.aj.getCurrentOrLastActiveScriptDetails())}initForm(){this.parentFormGroup.addControl(this.controlKey,new s.cw({[this.ALGORITHM_TYPE_CONTROL_NAME]:new s.NI(r.Bd.PRUNING,s.kI.required)}))}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,c.t)(this)).subscribe(e=>{(0,S.A)(e)?this.algorithmTypeFormGroup.disable():this.algorithmTypeFormGroup.enable()})}trackByAlgorithmType(e,a){return a.key}}).\u0275fac=function(e){return new(e||g)(t.Y36(s.gN),t.Y36(M.OF))},g.\u0275cmp=t.Xpm({type:g,selectors:[["ms-panel-algorithm-type"]],inputs:{controlKey:"controlKey"},features:[t._Bn([],[{provide:s.gN,useFactory:()=>(0,t.f3M)(s.gN,{skipSelf:!0})}])],decls:8,vars:4,consts:[[1,"ms-card","parameters-card"],[1,"heading-sub-section-title"],[3,"formGroupName"],[1,"form-field-container"],["appearance","outline","subscriptSizing","dynamic"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"p",1),t._uU(2,"Algorithm Type"),t.qZA(),t.ynx(3,2),t.TgZ(4,"div",3)(5,"mat-form-field",4)(6,"mat-select",5),t.YNc(7,K,2,2,"mat-option",6),t.qZA()()(),t.BQk(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("formGroupName",a.controlKey),t.xp6(3),t.Q6J("formControlName",a.ALGORITHM_TYPE_CONTROL_NAME),t.xp6(1),t.Q6J("ngForOf",a.algorithmTypesOptions)("ngForTrackBy",a.trackByAlgorithmType))},dependencies:[o.sg,_.a8,L.KE,b.gD,Y.ey,s.JJ,s.JL,s.u,s.x0]}),g);F=(0,p.gn)([(0,c.c)()],F);var h,D=n(6385),$=n(7754),V=n(1260),k=n(5844),w=n(7602);function j(i,e){if(1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"adaptiveFileSize"),t.BQk()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.value))}}function z(i,e){if(1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"date"),t.BQk()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,a.value,"medium"))}}function H(i,e){if(1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"readableDuration"),t.BQk()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.value))}}function X(i,e){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(a.value)}}function W(i,e){1&i&&(t.TgZ(0,"div",15),t._UZ(1,"mat-divider"),t.qZA())}function q(i,e){if(1&i&&(t.TgZ(0,"div")(1,"div",8)(2,"div",9),t._uU(3),t.ALo(4,"parametersLabel"),t.qZA(),t.TgZ(5,"div",10),t.ynx(6,11),t.YNc(7,j,3,3,"ng-container",12),t.YNc(8,z,3,4,"ng-container",12),t.YNc(9,H,3,3,"ng-container",12),t.YNc(10,X,2,1,"ng-container",13),t.BQk(),t.qZA()(),t.YNc(11,W,2,0,"div",14),t.qZA()),2&i){const a=e.$implicit,l=e.last;t.xp6(3),t.hij("",t.lcZ(4,6,a.key),":"),t.xp6(3),t.Q6J("ngSwitch",a.key),t.xp6(1),t.Q6J("ngSwitchCase","file_size_bytes"),t.xp6(1),t.Q6J("ngSwitchCase","creation_date"),t.xp6(1),t.Q6J("ngSwitchCase","training_duration_seconds"),t.xp6(2),t.Q6J("ngIf",!l)}}function tt(i,e){if(1&i&&(t.TgZ(0,"div",6),t.YNc(1,q,12,8,"div",7),t.qZA()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",a)}}function et(i,e){if(1&i&&(t.TgZ(0,"div",4),t.YNc(1,tt,2,1,"div",5),t.qZA()),2&i){const a=e.$implicit;t.oxw();const l=t.MAs(6);t.xp6(1),t.Q6J("ngIf",a.length>0)("ngIfElse",l)}}function at(i,e){1&i&&t._UZ(0,"ms-empty-state",16)}let Z=((h=class{constructor(e){this.modelsFacadeService=e,this.metadata={}}ngOnInit(){this.modelsFacadeService.modelMetadata$.pipe((0,R.T)(1),(0,c.t)(this)).subscribe(e=>{this.metadata=e})}}).\u0275fac=function(e){return new(e||h)(t.Y36(U.V))},h.\u0275cmp=t.Xpm({type:h,selectors:[["ms-panel-model-metadata"]],decls:7,vars:3,consts:[[1,"ms-card","metadata-card"],[1,"heading-sub-section-title"],["class","metadata-wrapper",4,"ngIf"],["noMetadata",""],[1,"metadata-wrapper"],["class","key-value-container single",4,"ngIf","ngIfElse"],[1,"key-value-container","single"],[4,"ngFor","ngForOf"],[1,"key-value-pair","space-between"],[1,"key-value-key"],[1,"key-value-value"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","pt-2",4,"ngIf"],[1,"pt-2"],["title","No metadata available"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"p",1),t._uU(2,"Model Training Information"),t.qZA(),t.YNc(3,et,2,2,"div",2),t.ALo(4,"keyvalue"),t.YNc(5,at,1,0,"ng-template",null,3,t.W1O),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",t.lcZ(4,1,a.metadata)))},dependencies:[o.sg,o.O5,o.RF,o.n9,o.ED,D.d,_.a8,$.u,o.uU,o.Nd,V.G,k.n,w.N],styles:[".metadata-wrapper[_ngcontent-%COMP%]{max-height:300px;overflow:auto;padding-right:20px}"]}),h);var u;Z=(0,p.gn)([(0,c.c)()],Z);const it=["panelParameters"];let I=((u=class{constructor(e,a,l,st){this.navigationService=e,this.scriptFacadeService=a,this.snackbarService=l,this.modelsFacadeService=st,this.form=new s.cw({}),this.isScriptActive=!1,this.selectedAlgorithmType=r.Bd.PRUNING,this.selectedAlgorithmKey=r.tp.PRUNING_TRAIN}ngOnInit(){this.listenToAlgorithmPanelChanges(),this.listenToScriptStateChanges(),this.listenToFormChangesToLoadModelMetadata()}listenToAlgorithmPanelChanges(){this.form.valueChanges.pipe((0,O.b)(50),(0,C.U)(()=>{const e=this.form.getRawValue();return e.algorithmTypeGroup&&e.algorithmTypeGroup.algorithmType}),(0,P.x)(),(0,N.h)(e=>!!e),(0,c.t)(this)).subscribe(e=>{this.selectedAlgorithmType=e,this.selectedAlgorithmKey=r.R0[e]})}listenToScriptStateChanges(){this.scriptFacadeService.scriptStatus$.pipe((0,c.t)(this)).subscribe(e=>{this.isScriptActive=(0,S.A)(e),(0,S.A)(e)?this.form.disable():this.form.enable()})}listenToFormChangesToLoadModelMetadata(){this.form.valueChanges.pipe((0,O.b)(50),(0,C.U)(e=>{const a=e.algorithmTypeGroup?.algorithmType,l=e.model?.model;return{algorithmType:a,model:l}}),(0,P.x)((e,a)=>JSON.stringify(e)===JSON.stringify(a)),(0,N.h)(({algorithmType:e,model:a})=>!(0,f.Bm)(e)&&!(0,f.Bm)(a)),(0,c.t)(this)).subscribe(({algorithmType:e,model:a})=>{this.modelsFacadeService.dispatch(Q.o.getModelMetadata({algorithmType:e,modelName:a}))})}submit(){if((0,f.kK)(this.selectedAlgorithmType))return void this.snackbarService.showError("Select an algorithm before running a script.");const{model:e}=this.form.getRawValue(),{model:a}=e,l={alg:this.selectedAlgorithmKey,params:{...this.panelParametersComponent.parametersFormatted,arch:a}};this.scriptFacadeService.dispatch(x.aj.callScript({configs:l}))}}).\u0275fac=function(e){return new(e||u)(t.Y36(M.f5),t.Y36(M.OF),t.Y36(M.QD),t.Y36(U.V))},u.\u0275cmp=t.Xpm({type:u,selectors:[["ms-model-training"]],viewQuery:function(e,a){if(1&e&&t.Gf(it,5),2&e){let l;t.iGM(l=t.CRH())&&(a.panelParametersComponent=l.first)}},decls:17,vars:7,consts:[[1,"heading-primary-title","title"],[1,"page-wrapper"],[1,"left",3,"formGroup"],["controlKey","algorithmTypeGroup"],["controlKey","model",3,"algorithmType","areNotTrainedItemsSelectable","isInitialLoadForTrainTypeModels","isTrainedModelsPageVisible"],["controlKey","params",3,"algorithm"],["panelParameters",""],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-stroked-button","","color","primary",1,"ml-2",3,"click"],["fontSet","ms","fontIcon","icon-ArrowLeft"],[1,"right"]],template:function(e,a){1&e&&(t.TgZ(0,"p",0),t._uU(1,"Model Training"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2),t._UZ(4,"ms-panel-algorithm-type",3)(5,"ms-panel-model",4)(6,"ms-panel-model-metadata")(7,"ms-panel-parameters",5,6),t.TgZ(9,"div")(10,"button",7),t.NdJ("click",function(){return a.submit()}),t._uU(11," Run "),t.qZA(),t.TgZ(12,"button",8),t.NdJ("click",function(){return a.navigationService.goToPreviousPage()}),t._UZ(13,"mat-icon",9),t._uU(14," Go back "),t.qZA()()(),t.TgZ(15,"div",10),t._UZ(16,"ms-terminal"),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("formGroup",a.form),t.xp6(2),t.Q6J("algorithmType",a.selectedAlgorithmType)("areNotTrainedItemsSelectable",!0)("isInitialLoadForTrainTypeModels",!0)("isTrainedModelsPageVisible",!1),t.xp6(2),t.Q6J("algorithm",a.selectedAlgorithmKey),t.xp6(3),t.Q6J("disabled",a.isScriptActive||a.form.invalid))},dependencies:[B.lW,E.Hw,s.JL,s.sg,T.d,m.d,v.w,F,Z],styles:[".title[_ngcontent-%COMP%]{margin-bottom:13px}"]}),u);I=(0,p.gn)([(0,c.c)()],I);const nt=[{path:"",component:I}];let ot=(()=>{var i;class e{}return(i=e).\u0275fac=function(l){return new(l||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.Bz.forChild(nt),d.Bz]}),e})(),lt=(()=>{var i;class e{}return(i=e).\u0275fac=function(l){return new(l||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[o.ez,A.m,ot,T.d,m.d,v.w]}),e})()},7754:(G,y,n)=>{n.d(y,{u:()=>A});var o=n(5879);let A=(()=>{var m;class v{constructor(){this.title="",this.message=""}}return(m=v).\u0275fac=function(d){return new(d||m)},m.\u0275cmp=o.Xpm({type:m,selectors:[["ms-empty-state"]],inputs:{title:"title",message:"message"},standalone:!0,features:[o.jDz],decls:6,vars:2,consts:[["src","assets/icons/empty-state.svg"],[1,"heading-section-title"],[1,"paragraph-regular-p2-large"]],template:function(d,p){1&d&&(o.TgZ(0,"div"),o._UZ(1,"img",0),o.TgZ(2,"div",1),o._uU(3),o.qZA(),o.TgZ(4,"div",2),o._uU(5),o.qZA()()),2&d&&(o.xp6(3),o.Oqu(p.title),o.xp6(2),o.Oqu(p.message))},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:100%;text-align:center}div[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}img[_ngcontent-%COMP%]{max-width:100%;height:auto}"]}),v})()}}]);